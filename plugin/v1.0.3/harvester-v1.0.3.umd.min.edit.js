(("undefined"!==typeof self?self:this)["webpackJsonpharvester_v1_0_3"]=("undefined"!==typeof self?self:this)["webpackJsonpharvester_v1_0_3"]||[]).push([[7],{"0376":function(e,t,a){var r=a("f157");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("7eb21c8e",r,!0,{sourceMap:!1,shadowMode:!1})},"0914":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-12"},[a("FileSelector",{staticClass:"btn btn-sm bg-primary mb-10",attrs:{label:e.t("generic.readFromFile")},on:{selected:e.onKeySelected}}),a("div",[a("TextAreaAutoGrow",{attrs:{"min-height":254},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1)],1)])])},s=[],n=a("c78c"),i=a("3204"),o=a("cd3a"),l={name:"HarvesterAdditionalCA",components:{FileSelector:i["b"],TextAreaAutoGrow:o["a"]},mixins:[n["a"]],methods:{onKeySelected:Object(i["a"])("value.value")}},c=l,u=a("d802"),d=Object(u["a"])(c,r,s,!1,null,null,null);t["default"]=d.exports},"0922":function(e,t,a){var r=a("7a91");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("0d9705a1",r,!0,{sourceMap:!1,shadowMode:!1})},"0aa9":function(e,t,a){var r=a("5af3");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("3027a72f",r,!0,{sourceMap:!1,shadowMode:!1})},1872:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row",on:{input:e.update}},[a("div",{staticClass:"col span-12"},[[a("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,label:"http-proxy"},model:{value:e.parseDefaultValue.httpProxy,callback:function(t){e.$set(e.parseDefaultValue,"httpProxy",t)},expression:"parseDefaultValue.httpProxy"}}),a("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,label:"https-proxy"},model:{value:e.parseDefaultValue.httpsProxy,callback:function(t){e.$set(e.parseDefaultValue,"httpsProxy",t)},expression:"parseDefaultValue.httpsProxy"}}),a("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,label:"no-proxy"},model:{value:e.parseDefaultValue.noProxy,callback:function(t){e.$set(e.parseDefaultValue,"noProxy",t)},expression:"parseDefaultValue.noProxy"}})]],2)])},s=[],n=a("c78c"),i=a("d444"),o={name:"HarvesterHttpProxy",components:{LabeledInput:i["a"]},mixins:[n["a"]],data:function(){var e={};try{e=JSON.parse(this.value.value)}catch(t){e=JSON.parse(this.value.default)}return{parseDefaultValue:e,errors:[]}},created:function(){this.update()},methods:{update:function(){var e=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",e)}},watch:{value:{handler:function(e){var t=JSON.parse(e.value);this.$set(this,"parseDefaultValue",t)},deep:!0}}},l=o,c=a("d802"),u=Object(c["a"])(l,r,s,!1,null,null,null);t["default"]=u.exports},"18a1":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-7c781792]:after,.clearfix[data-v-7c781792]:before{content:" ";display:table}.clearfix[data-v-7c781792]:after{clear:both}.list-unstyled[data-v-7c781792]{margin:0;padding:0;list-style-type:none}.no-select[data-v-7c781792]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-7c781792]{resize:none}.hand[data-v-7c781792]{cursor:pointer;cursor:hand}.fixed[data-v-7c781792]{table-layout:fixed}.clip[data-v-7c781792]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-7c781792],.force-wrap[data-v-7c781792]{word-wrap:break-word}.force-wrap[data-v-7c781792]{white-space:normal}.bordered-section[data-v-7c781792]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-7c781792]{margin-bottom:20px;margin-top:20px}.chooseFile[data-v-7c781792]{display:flex;align-items:center}',""]),e.exports=t},"1b5f":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mb-20"},[a("RadioGroup",{attrs:{name:"selectNode",options:e.selectNodeOptions,mode:e.mode},on:{input:e.update},model:{value:e.selectNode,callback:function(t){e.selectNode=t},expression:"selectNode"}})],1),"nodeSelector"===e.selectNode?[a("div",{staticClass:"row"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{label:e.t("workload.scheduling.affinity.nodeName"),options:e.nodes||[],mode:e.mode,multiple:!1},on:{input:e.update},model:{value:e.nodeName,callback:function(t){e.nodeName=t},expression:"nodeName"}})],1)])]:"affinity"===e.selectNode?[a("NodeAffinity",{attrs:{mode:e.mode},on:{input:e.update},model:{value:e.nodeAffinity,callback:function(t){e.nodeAffinity=t},expression:"nodeAffinity"}})]:e._e()],2)},s=[],n=a("9ce4"),i=a("f032"),o=a("53fe"),l=a("2a6d"),c=a("e4c0"),u=a("d6a6"),d=a("1832"),p=a("b0bd");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h={components:{RadioGroup:i["b"],LabeledSelect:o["a"],NodeAffinity:l["a"]},props:{value:{type:Object,default:function(){return{}}},nodes:{type:Array,default:function(){return[]}},mode:{type:String,default:"create"}},data:function(){var e,t,a=this.$store.getters["currentProduct"].inStore===c["a"],r=this.value.nodeName,s=void 0===r?"":r,n=this.value,i=n.affinity,o=void 0===i?{}:i,l=n.nodeSelector,u=void 0===l?{}:l,v=o.nodeAffinity,m=void 0===v?{}:v,f=null;return this.value.nodeName?f="nodeSelector":a&&null!==(e=this.value)&&void 0!==e&&null!==(t=e.nodeSelector)&&void 0!==t&&t[p["m"]]?(f="nodeSelector",s=u[p["m"]]):Object(d["isEmpty"])(m)||(f="affinity"),m.requiredDuringSchedulingIgnoredDuringExecution||this.$set(m,"requiredDuringSchedulingIgnoredDuringExecution",{nodeSelectorTerms:[]}),m.preferredDuringSchedulingIgnoredDuringExecution||this.$set(m,"preferredDuringSchedulingIgnoredDuringExecution",[]),{selectNode:f,nodeName:s,nodeAffinity:m,nodeSelector:u}},computed:m(m({},Object(n["a"])({t:"i18n/t"})),{},{isView:function(){return this.mode===u["C"]},isHarvester:function(){return this.$store.getters["currentProduct"].inStore===c["a"]},selectNodeOptions:function(){var e=this.isHarvester?"harvester.virtualMachine":"workload",t=[{label:this.t("".concat(e,".scheduling.affinity.anyNode")),value:null},{label:this.t("".concat(e,".scheduling.affinity.specificNode")),value:"nodeSelector"},{label:this.t("".concat(e,".scheduling.affinity.schedulingRules")),value:"affinity"}];return t}}),methods:{update:function(){var e,t,a,r,s=this.nodeName,n=this.nodeSelector,i=this.nodeAffinity;switch(this.selectNode){case"nodeSelector":this.isHarvester?Object.assign(this.value,{nodeSelector:f({},p["m"],s)}):Object.assign(this.value,{nodeSelector:n,nodeName:s}),null!==(e=this.value)&&void 0!==e&&null!==(t=e.affinity)&&void 0!==t&&t.nodeAffinity&&delete this.value.affinity.nodeAffinity;break;case"affinity":delete this.value.nodeName,delete this.value.nodeSelector,this.value.affinity?Object.assign(this.value.affinity,{nodeAffinity:i}):Object.assign(this.value,{affinity:{nodeAffinity:i}});break;default:delete this.value.nodeName,delete this.value.nodeSelector,null!==(a=this.value)&&void 0!==a&&null!==(r=a.affinity)&&void 0!==r&&r.nodeAffinity&&delete this.value.affinity.nodeAffinity}},isEmpty:d["isEmpty"]},watch:{"value.nodeSelector":{handler:function(e){if(this.isHarvester&&null!==e&&void 0!==e&&e[p["m"]]){this.selectNode="nodeSelector";var t=e[p["m"]];this.nodeName=t;var a=this.nodes.map((function(e){return e.value}));t&&!a.includes(t)&&(this.$store.dispatch("growl/error",{title:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistNode.title",{name:t}),message:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistNode.message")},{root:!0}),delete this.value.nodeSelector,this.$set(this,"nodeName",""),this.$set(this,"selectNode",null))}}}}},b=h,y=a("d802"),g=Object(y["a"])(b,r,s,!1,null,null,null);t["a"]=g.exports},"1cf1":function(e,t,a){"use strict";a("87c2")},"1d70":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-5024d7bf]:after,.clearfix[data-v-5024d7bf]:before{content:" ";display:table}.clearfix[data-v-5024d7bf]:after{clear:both}.list-unstyled[data-v-5024d7bf]{margin:0;padding:0;list-style-type:none}.no-select[data-v-5024d7bf]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-5024d7bf]{resize:none}.hand[data-v-5024d7bf]{cursor:pointer;cursor:hand}.fixed[data-v-5024d7bf]{table-layout:fixed}.clip[data-v-5024d7bf]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-5024d7bf],.force-wrap[data-v-5024d7bf]{word-wrap:break-word}.force-wrap[data-v-5024d7bf]{white-space:normal}.bordered-section[data-v-5024d7bf]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-5024d7bf]{margin-bottom:20px;margin-top:20px}.wrapper[data-v-5024d7bf]{position:relative}.nicOption[data-v-5024d7bf]{display:flex;justify-content:space-between}',""]),e.exports=t},"1fc2":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tip"},[a("span",{staticClass:"my-icon",class:e.icon}),e._t("default",(function(){return[a("span",{staticClass:"text"},[e._v(e._s(e.text))])]}))],2)},s=[],n={props:{icon:{type:String,default:""},text:{type:String,default:""}}},i=n,o=(a("539a"),a("d802")),l=Object(o["a"])(i,r,s,!1,null,"1a14af07",null);t["a"]=l.exports},"203b":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._t("prefix",(function(){return[e.prefixLabel?a("t",{attrs:{k:e.prefixLabel,raw:!0}}):e._e(),e._v(" "+e._s(e.prefix)+" ")]})),a("nuxt-link",{attrs:{to:e.to,target:e.target}},[e._t("middle",(function(){return[e.middleLabel?a("t",{attrs:{k:e.middleLabel,raw:!0}}):e._e(),e._v(" "+e._s(e.middle)+" ")]}))],2),e._t("suffix",(function(){return[e.suffixLabel?a("t",{attrs:{k:e.suffixLabel,raw:!0}}):e._e(),e._v(" "+e._s(e.suffix)+" ")]}))],2)},s=[],n={props:{to:{type:String,required:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},middle:{type:String,default:""},prefixLabel:{type:String,default:""},suffixLabel:{type:String,default:""},middleLabel:{type:String,default:""},target:{type:String,default:"self"}}},i=n,o=a("d802"),l=Object(o["a"])(i,r,s,!1,null,null,null);t["a"]=l.exports},"23eb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"restore"}},[a("div",{staticClass:"content"},[a("div",{staticClass:"mb-20"},[a("RadioGroup",{attrs:{name:"model",options:[!0,!1],labels:[e.t("harvester.backup.restore.createNew"),e.t("harvester.backup.restore.replaceExisting")],disabled:e.disableExisting,mode:e.mode},model:{value:e.restoreNewVm,callback:function(t){e.restoreNewVm=t},expression:"restoreNewVm"}})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{disabled:!e.restoreNewVm,label:e.t("nameNsDescription.namespace.label"),options:e.namespaces},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledInput",{staticClass:"mb-20",attrs:{disabled:!e.restoreNewVm,label:e.t("harvester.backup.restore.virtualMachineName"),placeholder:e.t("nameNsDescription.name.placeholder")},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),a("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.backup.restore.backup"),options:e.backupOption},model:{value:e.backupName,callback:function(t){e.backupName=t},expression:"backupName"}}),e.restoreNewVm?e._e():a("LabeledSelect",{attrs:{label:e.t("harvester.backup.restore.deletePreviousVolumes"),options:e.deletionPolicyOption},model:{value:e.deletionPolicy,callback:function(t){e.deletionPolicy=t},expression:"deletionPolicy"}})],1),a("Footer",{staticClass:"footer",attrs:{mode:"create",errors:e.errors},on:{save:e.saveRestore,done:e.done}})],1)},s=[],n=a("56d4"),i=a.n(n),o=a("9aaf"),l=a("f032"),c=a("d444"),u=a("53fe"),d=a("c78c"),p=a("b837"),v=a("3792"),m=a("56a4"),f=a("90cd"),h=a("7592"),b=a("1832");function y(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(v){return void a(v)}o.done?t(l):Promise.resolve(l).then(r,s)}function g(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){y(n,r,s,i,o,"next",e)}function o(e){y(n,r,s,i,o,"throw",e)}i(void 0)}))}}var w={apiVersion:"harvesterhci.io/v1beta1",kind:"VirtualMachineRestore",metadata:{name:"",namespace:""},type:f["a"].RESTORE,spec:{target:{apiGroup:"kubevirt.io",kind:"VirtualMachine",name:""},virtualMachineBackupName:"",newVM:!0,deletionPolicy:"delete"}},k={name:"CreateRestore",components:{Footer:o["a"],RadioGroup:l["b"],LabeledInput:c["a"],LabeledSelect:u["a"]},mixins:[d["a"]],fetch:function(){var e=this;return g(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["a"])({backups:e.$store.dispatch("harvester/findAll",{type:f["a"].BACKUP}),vms:e.$store.dispatch("harvester/findAll",{type:f["a"].VM})});case 2:case"end":return t.stop()}}),t)})))()},data:function(){var e,t,a=null===(e=this.$route.query)||void 0===e?void 0:e.restoreMode,r=null===(t=this.$route.query)||void 0===t?void 0:t.backupName,s=Object(b["clone"])(w),n="new"===a||void 0===a;return{backupName:r,restoreNewVm:n,restoreResource:s,name:"",description:"",deletionPolicy:"delete",namespace:""}},computed:{backupOption:function(){var e=this,t=this.$store.getters["harvester/all"](f["a"].BACKUP);return t.filter((function(t){var a,r=e.restoreNewVm||t.attachVmExisting;return r&&(null===t||void 0===t||null===(a=t.status)||void 0===a?void 0:a.readyToUse)})).map((function(e){return{label:e.metadata.name,value:e.metadata.name}}))},deletionPolicyOption:function(){return[{value:"delete",label:"Delete"},{value:"retain",label:"Retain"}]},currentBackupResource:function(){var e=this.backupName,t=this.$store.getters["harvester/all"](f["a"].BACKUP);return t.find((function(t){return t.name===e}))},disableExisting:function(){var e;return!(null!==(e=this.currentBackupResource)&&void 0!==e&&e.attachVmExisting)},backupNamespace:function(){var e,t,a=this,r=this.$store.getters["harvester/all"](f["a"].BACKUP);return null===(e=r.find((function(e){return e.metadata.name===a.backupName})))||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.namespace},namespaces:function(){var e=this.$store.getters["currentStore"](m["t"]),t=this.$store.getters["".concat(e,"/all")](m["t"]),a=this.$store.getters["systemNamespaces"],r=Object(h["b"])(t.filter((function(e){return!a.includes(e.metadata.name)})).map((function(e){return{label:e.nameDisplay,value:e.id}})),"label");return r}},watch:{backupName:{handler:function(e){var t;this.currentBackupResource&&(this.restoreNewVm||(this.name=null===this||void 0===this||null===(t=this.currentBackupResource)||void 0===t?void 0:t.attachVM));this.restoreResource.spec.virtualMachineBackupName=e},immediate:!0},restoreNewVm:function(e){var t;e?this.name="":this.name=null===this||void 0===this||null===(t=this.currentBackupResource)||void 0===t?void 0:t.attachVM},backupNamespace:{handler:function(e){this.namespace=e},immediate:!0}},methods:{saveRestore:function(e){var t=this;return g(i.a.mark((function a(){var r;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.update(),a.next=3,t.$store.dispatch("harvester/create",t.restoreResource);case 3:return r=a.sent,r.metadata.namespace=t.namespace,r.spec.virtualMachineBackupNamespace=t.backupNamespace,a.prev=6,a.next=9,r.save();case 9:e(!0),t.$router.push({name:t.doneRoute,params:{resource:f["a"].VM}}),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](6),t.errors=Object(v["c"])(a.t0)||a.t0,e(!1);case 17:case"end":return a.stop()}}),a,null,[[6,13]])})))()},update:function(){this.restoreResource.metadata.generateName="restore-".concat(this.backupName,"-"),this.name&&(this.restoreResource.spec.target.name=this.name),this.restoreNewVm?(delete this.restoreResource.spec.deletionPolicy,this.restoreResource.spec.newVM=!0):(this.restoreResource.spec.deletionPolicy=this.deletionPolicy,delete this.restoreResource.spec.newVM)}},componentTitle:function(){return"restoreVM"}},x=k,S=(a("f558"),a("d802")),O=Object(S["a"])(x,r,s,!1,null,"23677b58",null);t["default"]=O.exports},"272d":function(e,t,a){var r=a("b3eb");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("31e95486",r,!0,{sourceMap:!1,shadowMode:!1})},2785:function(e,t,a){"use strict";a("f004")},3169:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-ea67a95c]:after,.clearfix[data-v-ea67a95c]:before{content:" ";display:table}.clearfix[data-v-ea67a95c]:after{clear:both}.list-unstyled[data-v-ea67a95c]{margin:0;padding:0;list-style-type:none}.no-select[data-v-ea67a95c]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-ea67a95c]{resize:none}.hand[data-v-ea67a95c]{cursor:pointer;cursor:hand}.fixed[data-v-ea67a95c]{table-layout:fixed}.clip[data-v-ea67a95c]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-ea67a95c],.force-wrap[data-v-ea67a95c]{word-wrap:break-word}.force-wrap[data-v-ea67a95c]{white-space:normal}.bordered-section[data-v-ea67a95c]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-ea67a95c]{margin-bottom:20px;margin-top:20px}.edit-change[data-v-ea67a95c]{align-items:center;display:flex}.edit-change>h5[data-v-ea67a95c]{flex:1}[data-v-ea67a95c] .edit-help code{padding:1px 5px}',""]),e.exports=t},"34bc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"disk",on:{input:e.update}},[a("div",{staticClass:"mt-30"}),e.mountedMessage&&e.isProvisioned?a("Banner",{attrs:{color:"error",label:e.mountedMessage}}):e._e(),e.isFormatted?a("Banner",{attrs:{color:"info",label:e.formattedBannerLabel}}):e._e(),e.value.isNew?e._e():a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col span-12"},[a("div",{staticClass:"pull-right"},[e._v(" Conditions: "),a("BadgeState",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.readyCondiction.message,expression:"readyCondiction.message"}],staticClass:"mr-10 ml-10 state",attrs:{color:"True"===e.readyCondiction.status?"bg-success":"bg-error",icon:"True"===e.readyCondiction.status?"icon-checkmark":"icon-warning",label:"Ready"}}),a("BadgeState",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.schedulableCondiction.message,expression:"schedulableCondiction.message"}],staticClass:"mr-10 state",attrs:{color:"True"===e.schedulableCondiction.status?"bg-success":"bg-error",icon:"True"===e.schedulableCondiction.status?"icon-checkmark":"icon-warning",label:"Schedulable"}}),e.provisionPhase.label?a("BadgeState",{staticClass:"mr-10 state",attrs:{color:e.provisionPhase.color,icon:e.provisionPhase.icon,label:e.provisionPhase.label}}):e._e()],1)])]),e.value.isNew?e._e():a("div",{staticClass:"row mt-30"},[a("div",{staticClass:"col flex span-12"},[a("LabelValue",{attrs:{name:"Storage Available",value:e.value.storageAvailable}}),a("LabelValue",{attrs:{name:"Storage Scheduled",value:e.value.storageScheduled}}),a("LabelValue",{attrs:{name:"Storage Max",value:e.value.storageMaximum}})],1)]),a("hr",{staticClass:"mt-10"})]),a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-12"},[a("LabeledInput",{attrs:{label:e.t("generic.name"),disabled:!0},model:{value:e.value.displayName,callback:function(t){e.$set(e.value,"displayName",t)},expression:"value.displayName"}})],1)]),e.value.isNew&&!e.isFormatted?a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("RadioGroup",{attrs:{mode:e.mode,name:"forceFormatted","label-key":"harvester.host.disk.forceFormatted.label",labels:[e.t("generic.no"),e.t("harvester.host.disk.forceFormatted.yes")],options:[!1,!0],disabled:e.forceFormattedDisabled,"tooltip-key":"harvester.host.disk.forceFormatted.toolTip"},scopedSlots:e._u([{key:"1",fn:function(t){var r=t.option,s=t.listeners;return[a("RadioButton",e._g({attrs:{label:r.label,val:r.value,value:e.value.forceFormatted,disabled:e.forceFormattedDisabled&&!e.value.forceFormatted}},s))]}}],null,!1,1939983621),model:{value:e.value.forceFormatted,callback:function(t){e.$set(e.value,"forceFormatted",t)},expression:"value.forceFormatted"}})],1)]):e._e()],1)},s=[],n=a("d444"),i=a("eb32"),o=a("57ab"),l=a("dffb"),c=a("f032"),u={components:{LabeledInput:n["a"],LabelValue:i["a"],BadgeState:o["a"],Banner:l["a"],RadioGroup:c["b"],RadioButton:c["a"]},props:{value:{type:Object,default:function(){return{}}},disks:{type:Array,default:function(){return[]}},mode:{type:String,default:"edit"}},data:function(){return{}},computed:{allowSchedulingOptions:function(){return[{label:this.t("generic.enabled"),value:!0},{label:this.t("generic.disabled"),value:!1}]},evictionRequestedOptions:function(){return[{label:this.t("generic.yes"),value:!0},{label:this.t("generic.no"),value:!1}]},readyCondiction:function(){var e,t;return(null===(e=this.value)||void 0===e||null===(t=e.conditions)||void 0===t?void 0:t.Ready)||{}},schedulableCondiction:function(){var e,t;return(null===(e=this.value)||void 0===e||null===(t=e.conditions)||void 0===t?void 0:t.Schedulable)||{}},mountedMessage:function(){var e,t,a,r=(null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.state)||{};return null!==r&&void 0!==r&&r.error?null===r||void 0===r?void 0:r.message:""},isProvisioned:function(){var e,t;return null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t?void 0:t.spec.fileSystem.provisioned},forceFormattedDisabled:function(){var e,t,a,r,s,n,i,o,l,c=null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t||null===(a=t.status)||void 0===a||null===(r=a.deviceStatus)||void 0===r||null===(s=r.fileSystem)||void 0===s?void 0:s.LastFormattedAt,u=null===(n=this.value)||void 0===n||null===(i=n.blockDevice)||void 0===i||null===(o=i.status)||void 0===o||null===(l=o.deviceStatus)||void 0===l?void 0:l.fileSystem.type,d=["ext4","XFS"];return!!c||!d.includes(u)&&(!u||!this.canEditPath)},canEditPath:function(){return!!this.mountedMessage||!(!this.value.isNew||this.value.originPath)},isFormatted:function(){var e,t,a,r,s;return!(null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t||null===(a=t.status)||void 0===a||null===(r=a.deviceStatus)||void 0===r||null===(s=r.fileSystem)||void 0===s||!s.LastFormattedAt)},formattedBannerLabel:function(){var e,t,a,r,s,n=null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t||null===(a=t.status)||void 0===a||null===(r=a.deviceStatus)||void 0===r||null===(s=r.fileSystem)||void 0===s?void 0:s.type,i=this.t("harvester.host.disk.lastFormattedAt.info");return n?"".concat(i," ").concat(this.t("harvester.host.disk.fileSystem.info",{system:n})):i},provisionPhase:function(){var e,t;return(null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t?void 0:t.provisionPhase)||{}}},methods:{update:function(){this.$emit("input",this.value)}}},d=u,p=(a("8ed2"),a("d802")),v=Object(p["a"])(d,r,s,!1,null,"15e6fe06",null);t["default"]=v.exports},"34cd":function(e,t,a){var r=a("f607");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("1220f4b4",r,!0,{sourceMap:!1,shadowMode:!1})},"3cf2":function(e,t,a){var r=a("b239");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("4170280f",r,!0,{sourceMap:!1,shadowMode:!1})},"3fc1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-12"},[a("LabeledSelect",{attrs:{mode:e.mode,"label-key":"harvester.sslParameters.protocols.label",multiple:!0,options:e.protocolOptions},on:{input:e.update},model:{value:e.parsedDefaultValue.protocols,callback:function(t){e.$set(e.parsedDefaultValue,"protocols",t)},expression:"parsedDefaultValue.protocols"}})],1)]),a("div",{staticClass:"row mt-20"},[a("div",{staticClass:"col span-12"},[a("LabeledInput",{attrs:{mode:e.mode,"label-key":"harvester.sslParameters.ciphers.label"},on:{input:e.update},model:{value:e.parsedDefaultValue.ciphers,callback:function(t){e.$set(e.parsedDefaultValue,"ciphers",t)},expression:"parsedDefaultValue.ciphers"}})],1)])])},s=[],n=a("d444"),i=a("d6a6"),o=a("53fe"),l={name:"HarvesterSslParameters",components:{LabeledInput:n["a"],LabeledSelect:o["a"]},props:{mode:{type:String,default:i["w"]},value:{type:Object,default:function(){return{}}},registerBeforeHook:{type:Function,required:!0}},data:function(){var e={};try{e=JSON.parse(this.value.value)}catch(a){e=JSON.parse(this.value.default)}var t=e.protocols&&(e.protocols||"").split(" ");return{parsedDefaultValue:{protocols:t,ciphers:e.ciphers}}},created:function(){this.registerBeforeHook&&this.registerBeforeHook(this.willSave,"willSave")},computed:{protocolOptions:function(){return[{label:"TLSv1.3",value:"TLSv1.3"},{label:"TLSv1.2",value:"TLSv1.2"},{label:"TLSv1.1 (".concat(this.t("generic.deprecated"),")"),value:"TLSv1.1"},{label:"TLSv1 (".concat(this.t("generic.deprecated"),")"),value:"TLSv1"},{label:"SSLv3 (".concat(this.t("generic.deprecated"),")"),value:"SSLv3"},{label:"SSLv2 (".concat(this.t("generic.deprecated"),")"),value:"SSLv2"}]}},methods:{update:function(){var e={protocols:(this.parsedDefaultValue.protocols||[]).join(" "),ciphers:this.parsedDefaultValue.ciphers},t=JSON.stringify(e);this.$set(this.value,"value",t)},willSave:function(){var e=[],t=this.parsedDefaultValue.ciphers,a=this.parsedDefaultValue.protocols||[];t&&0===a.length&&e.push(this.t("validation.required",{key:this.t("harvester.sslParameters.protocols.label")},!0)),!t&&a.length>0&&e.push(this.t("validation.required",{key:this.t("harvester.sslParameters.ciphers.label")},!0));var r=/^(:?[A-Z0-9]+(?:-[A-Z0-9]+)+)+$/gm;return!t||t.match(r)&&!t.startsWith(":")||e.push(this.t("validation.invalid",{key:this.t("harvester.sslParameters.ciphers.label")},!0)),e.length>0?Promise.reject(e):Promise.resolve()}},watch:{"value.value":{handler:function(e){e===this.value.default&&(this.parsedDefaultValue.protocols=[],this.parsedDefaultValue.ciphers="")},deep:!0}}},c=l,u=a("d802"),d=Object(u["a"])(c,r,s,!1,null,null,null);t["default"]=d.exports},"414d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CruResource",{staticClass:"route",attrs:{errors:e.errors,mode:e.mode,resource:e.value,subtypes:[],"can-yaml":!1},on:{error:function(t){return e.errors=t},finish:e.saveSettings,cancel:e.done}},[a("h4",{domProps:{innerHTML:e._s(e.description)}}),e.editHelp?a("h5",{staticClass:"edit-help",domProps:{innerHTML:e._s(e.editHelp)}}):e._e(),a("div",{staticClass:"edit-change mt-20"},[a("h5",{directives:[{name:"t",rawName:"v-t",value:"advancedSettings.edit.changeSetting",expression:"'advancedSettings.edit.changeSetting'"}]}),a("button",{staticClass:"btn role-primary",attrs:{disabled:!e.canReset,type:"button"},on:{click:e.useDefault}},[e._v(" "+e._s(e.t("advancedSettings.edit.useDefault"))+" ")])]),a("div",{staticClass:"mt-20"},["import"===e.setting.from?a("div",[e.hasCustomComponent?a(e.customComponent,{tag:"component",attrs:{"register-before-hook":e.registerBeforeHook,mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e()],1):"enum"===e.setting.kind?a("div",[a("LabeledSelect",{attrs:{label:e.t("advancedSettings.edit.value"),"localized-label":!0,mode:e.mode,options:e.enumOptions},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1):"boolean"===e.setting.kind?a("div",[a("RadioGroup",{attrs:{name:"settings_value",labels:[e.t("advancedSettings.edit.trueOption"),e.t("advancedSettings.edit.falseOption")],options:["true","false"]},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1):"multiline"===e.setting.kind||"json"===e.setting.kind?a("div",[a("TextAreaAutoGrow",{attrs:{"min-height":254},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1):a("div",[a("LabeledInput",{attrs:{label:e.t("advancedSettings.edit.value")},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1)])])},s=[],n=a("2e2b"),i=a("f032"),o=a("d444"),l=a("53fe"),c=a("cd3a"),u=a("c78c"),d=a("fa85"),p={components:{CruResource:n["a"],LabeledInput:o["a"],LabeledSelect:l["a"],RadioGroup:i["b"],TextAreaAutoGrow:c["a"]},mixins:[u["a"]],data:function(){var e,t,r=this,s=this.$store.getters["i18n/t"],n=d["a"][this.value.id]||d["c"][this.value.id],i=[];"enum"===n.kind&&(i=n.options.map((function(e){return{label:"advancedSettings.enum.harv-".concat(r.value.id,".").concat(e),value:e}})));var o=n.canReset||!!this.value.default||this.value.canReset;void 0===this.value.value&&this.$set(this.value,"value",null),this.value.value=this.value.value||this.value.default||"";var l=null===(e=this.value)||void 0===e||null===(t=e.type)||void 0===t?void 0:t.includes("harvesterhci"),c=a("b852").keys().map((function(e){return e.replace(/(\.\/)|(.vue)/g,"")}));return{setting:n,description:s(l?"advancedSettings.descriptions.harv-".concat(this.value.id):"advancedSettings.descriptions.".concat(this.value.id)),editHelp:s("advancedSettings.editHelp.".concat(this.value.id)),enumOptions:i,canReset:o,errors:[],hasCustomComponent:!1,customComponent:null,customSettingComponents:c}},computed:{doneLocationOverride:function(){return this.value.doneOverride}},created:function(){var e=!1,t=this.customSettingComponents.includes(this.value.id);if(t)try{e=a("f98e")("./".concat(this.value.id,".vue")).default}catch(n){}else{var r=this.$route.params.resource,s=this.value.metadata.name;try{e=a("90f3")("./".concat(r,"/").concat(s,".vue")).default}catch(i){}}this.hasCustomComponent=!!e,this.customComponent=e},methods:{saveSettings:function(e){var t=this.$store.getters["i18n/t"];if("json"===this.setting.kind)try{JSON.parse(this.value.value),this.errors=[]}catch(a){return this.errors=[t("advancedSettings.edit.invalidJSON")],e(!1)}this.save(e)},useDefault:function(e){e&&e.srcElement&&e.srcElement.blur(),this.value.id===d["b"].RANCHER_MONITORING?(this.$set(this.value.spec.values.prometheus,"prometheusSpec",Object.assign(this.value.spec.values.prometheus.prometheusSpec,this.value.defaultValue.prometheus,{})),this.$set(this.value.spec.values,"prometheus-node-exporter",Object.assign(this.value.spec.values["prometheus-node-exporter"],this.value.defaultValue["prometheus-node-exporter"],{}))):this.value.id===d["b"].VLAN?(this.value.enable=!1,this.value.config&&(this.value.config.defaultPhysicalNIC="")):this.value.value=this.value.default||""}}},v=p,m=(a("9497"),a("d802")),f=Object(m["a"])(v,r,s,!1,null,"ea67a95c",null);t["default"]=f.exports},"4c67":function(e,t,a){var r=a("d8d6");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("df76e6c0",r,!0,{sourceMap:!1,shadowMode:!1})},"4caa":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Setting",{attrs:{"initial-value":e.initialValue,"live-value":e.liveValue,value:e.value}})},s=[],n=a("c78c"),i=a("414d"),o={name:"EditManagedChart",components:{Setting:i["default"]},mixins:[n["a"]],props:{value:{type:Object,required:!0}}},l=o,c=a("d802"),u=Object(c["a"])(l,r,s,!1,null,null,null);t["default"]=u.exports},"532a":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-7b152fa4]:after,.clearfix[data-v-7b152fa4]:before{content:" ";display:table}.clearfix[data-v-7b152fa4]:after{clear:both}.list-unstyled[data-v-7b152fa4]{margin:0;padding:0;list-style-type:none}.no-select[data-v-7b152fa4]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-7b152fa4]{resize:none}.hand[data-v-7b152fa4]{cursor:pointer;cursor:hand}.fixed[data-v-7b152fa4]{table-layout:fixed}.clip[data-v-7b152fa4]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-7b152fa4],.force-wrap[data-v-7b152fa4]{word-wrap:break-word}.force-wrap[data-v-7b152fa4]{white-space:normal}.bordered-section[data-v-7b152fa4]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-7b152fa4]{margin-bottom:20px;margin-top:20px}[data-v-7b152fa4] .radio-group{display:flex}[data-v-7b152fa4] .radio-group .radio-container{margin-right:30px}',""]),e.exports=t},"539a":function(e,t,a){"use strict";a("0aa9")},"59d1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row",on:{input:e.update}},[a("div",{staticClass:"col span-12"},[a("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.fields.type"),options:e.typeOption},on:{input:e.update},model:{value:e.parseDefaultValue.type,callback:function(t){e.$set(e.parseDefaultValue,"type",t)},expression:"parseDefaultValue.type"}}),a("LabeledInput",{staticClass:"mb-5",attrs:{placeholder:e.endpointPlaceholder,mode:e.mode,label:"Endpoint"},model:{value:e.parseDefaultValue.endpoint,callback:function(t){e.$set(e.parseDefaultValue,"endpoint",t)},expression:"parseDefaultValue.endpoint"}}),a("Tip",{staticClass:"mb-20",attrs:{icon:"icon icon-info",text:e.t("harvester.backup.backupTargetTip")}}),e.isS3?[a("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,label:"Bucket Name",required:""},model:{value:e.parseDefaultValue.bucketName,callback:function(t){e.$set(e.parseDefaultValue,"bucketName",t)},expression:"parseDefaultValue.bucketName"}}),a("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,label:"Bucket Region",required:""},model:{value:e.parseDefaultValue.bucketRegion,callback:function(t){e.$set(e.parseDefaultValue,"bucketRegion",t)},expression:"parseDefaultValue.bucketRegion"}}),a("LabeledInput",{staticClass:"mb-20",attrs:{placeholder:e.t("harvester.setting.placeholder.accessKeyId"),mode:e.mode,label:"Access Key ID",required:""},model:{value:e.parseDefaultValue.accessKeyId,callback:function(t){e.$set(e.parseDefaultValue,"accessKeyId",t)},expression:"parseDefaultValue.accessKeyId"}}),a("Password",{staticClass:"mb-20",attrs:{mode:e.mode,placeholder:e.t("harvester.setting.placeholder.secretAccessKey"),label:"Secret Access Key",required:""},model:{value:e.parseDefaultValue.secretAccessKey,callback:function(t){e.$set(e.parseDefaultValue,"secretAccessKey",t)},expression:"parseDefaultValue.secretAccessKey"}}),a("LabeledSelect",{staticClass:"mb-20",attrs:{label:"Virtual Hosted-Style",options:e.virtualHostedStyleType},on:{input:e.update},model:{value:e.parseDefaultValue.virtualHostedStyle,callback:function(t){e.$set(e.parseDefaultValue,"virtualHostedStyle",t)},expression:"parseDefaultValue.virtualHostedStyle"}}),a("div",{staticClass:"mb-20"},[a("Tip",{attrs:{icon:"icon icon-info"}},[a("MessageLink",{attrs:{to:e.toCA,target:"_blank","prefix-label":"harvester.setting.message.ca.prefix","middle-label":"harvester.setting.message.ca.middle","suffix-label":"harvester.setting.message.ca.suffix"}})],1)],1)]:e._e()],2)])},s=[],n=a("1fc2"),i=a("fa85"),o=a("e519"),l=a("203b"),c=a("c78c"),u=a("d444"),d=a("53fe"),p={name:"HarvesterEditBackupTarget",components:{LabeledInput:u["a"],LabeledSelect:d["a"],Tip:n["a"],Password:o["a"],MessageLink:l["a"]},mixins:[c["a"]],data:function(){var e={};try{e=JSON.parse(this.value.value)}catch(t){e=JSON.parse(this.value.default)}return e.type||(e.type="s3"),{parseDefaultValue:e,errors:[]}},computed:{typeOption:function(){return[{value:"nfs",label:"NFS"},{value:"s3",label:"S3"}]},virtualHostedStyleType:function(){return[{value:!0,label:"True"},{value:!1,label:"False"}]},isS3:function(){return"s3"===this.parseDefaultValue.type},endpointPlaceholder:function(){return this.isS3?"":"nfs://server:/path/"},toCA:function(){return"".concat(i["b"].ADDITIONAL_CA,"?mode=edit")}},watch:{value:{handler:function(e){var t=JSON.parse(e.value);this.$set(this,"parseDefaultValue",t)},deep:!0}},created:function(){this.update()},methods:{update:function(){this.isS3||(delete this.parseDefaultValue.accessKeyId,delete this.parseDefaultValue.secretAccessKey,delete this.parseDefaultValue.bucketName,delete this.parseDefaultValue.bucketRegion,delete this.parseDefaultValue.virtualHostedStyle,delete this.parseDefaultValue.cert);var e=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",e)}}},v=p,m=(a("7e70"),a("d802")),f=Object(m["a"])(v,r,s,!1,null,"3263b3bc",null);t["default"]=f.exports},"5a4c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-12"},[a("div",{staticClass:"mb-10"},[e._v(" "+e._s(e.t("harvester.setting.sslCertificates.publicCertificate"))+" ")]),a("div",{staticClass:"chooseFile"},[a("FileSelector",{staticClass:"btn btn-sm bg-primary mr-20",attrs:{"include-file-name":!0,label:"Choose File"},on:{selected:function(t){return e.onKeySelectedCa("publicCertificate",t)}}}),a("span",{class:{"text-muted":!e.publicCertificateFileName}},[e._v(e._s(e.publicCertificateFileName?e.publicCertificateFileName:e.t("harvester.generic.noFileChosen")))])],1)])]),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-12"},[a("div",{staticClass:"mb-10"},[e._v(" "+e._s(e.t("harvester.setting.sslCertificates.privateKey"))+" ")]),a("div",{staticClass:"chooseFile"},[a("FileSelector",{staticClass:"btn btn-sm bg-primary mr-20",attrs:{"include-file-name":!0,label:"Choose File"},on:{selected:function(t){return e.onKeySelectedCa("privateKey",t)}}}),a("span",{class:{"text-muted":!e.privateKeyFileName}},[e._v(e._s(e.privateKeyFileName?e.privateKeyFileName:e.t("harvester.generic.noFileChosen")))])],1)])]),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-12"},[a("div",{staticClass:"mb-10"},[e._v(" "+e._s(e.t("harvester.setting.sslCertificates.ca"))+" ")]),a("div",{staticClass:"chooseFile"},[a("FileSelector",{staticClass:"btn btn-sm bg-primary mr-20",attrs:{"include-file-name":!0,label:"Choose File"},on:{selected:function(t){return e.onKeySelectedCa("ca",t)}}}),a("span",{class:{"text-muted":!e.caFileName}},[e._v(e._s(e.caFileName?e.caFileName:e.t("harvester.generic.noFileChosen")))])],1)])])])},s=[],n=a("c78c"),i=a("3204"),o={name:"HarvesterSSLCertificates",components:{FileSelector:i["b"]},mixins:[n["a"]],data:function(){var e={};try{e=JSON.parse(this.value.value)}catch(t){e=JSON.parse(this.value.default)}return{parseDefaultValue:e,caFileName:"",publicCertificateFileName:"",privateKeyFileName:""}},methods:{onKeySelectedCa:function(e,t){var a=t.name,r=t.value;this.$set(this.parseDefaultValue,e,r),this.$set(this,"".concat(e,"FileName"),a);var s=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",s)}},watch:{value:{handler:function(e){var t=JSON.parse(e.value);this.$set(this,"parseDefaultValue",t)},deep:!0}}},l=o,c=(a("d1f6"),a("d802")),u=Object(c["a"])(l,r,s,!1,null,"7c781792",null);t["default"]=u.exports},"5af3":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-1a14af07]:after,.clearfix[data-v-1a14af07]:before{content:" ";display:table}.clearfix[data-v-1a14af07]:after{clear:both}.list-unstyled[data-v-1a14af07]{margin:0;padding:0;list-style-type:none}.no-select[data-v-1a14af07]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-1a14af07]{resize:none}.hand[data-v-1a14af07]{cursor:pointer;cursor:hand}.fixed[data-v-1a14af07]{table-layout:fixed}.clip[data-v-1a14af07]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-1a14af07],.force-wrap[data-v-1a14af07]{word-wrap:break-word}.force-wrap[data-v-1a14af07]{white-space:normal}.bordered-section[data-v-1a14af07]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-1a14af07]{margin-bottom:20px;margin-top:20px}.tip[data-v-1a14af07]{color:var(--disabled-text);display:flex;align-items:center}.my-icon[data-v-1a14af07]{font-size:16px;margin-right:2px}.text[data-v-1a14af07]{font-size:14px}',""]),e.exports=t},"5fdb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"node"},[a("NameNsDescription",{attrs:{value:e.value,namespaced:!1,mode:e.mode}}),a("Tabbed",{ref:"tabbed",staticClass:"mt-15",attrs:{"side-tabs":!0}},[a("Tab",{attrs:{name:"basics",weight:100,label:e.t("harvester.host.tabs.basics")}},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.host.detail.customName"),mode:e.mode},model:{value:e.customName,callback:function(t){e.customName=t},expression:"customName"}}),a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.host.detail.consoleUrl"),mode:e.mode},model:{value:e.consoleUrl,callback:function(t){e.consoleUrl=t},expression:"consoleUrl"}})],1),e.hasHostNetworksSchema?a("Tab",{attrs:{name:"network",weight:90,label:e.t("harvester.host.tabs.network")}},[a("InfoBox",{staticClass:"wrapper"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:"Type",mode:e.mode,disabled:!0},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledSelect",{staticClass:"mb-20",attrs:{options:e.nicsOptions,label:e.t("harvester.fields.PhysicalNic"),mode:e.mode,disabled:!e.hostNetworkResource},on:{input:e.update},scopedSlots:e._u([{key:"option",fn:function(t){return[[a("div",{staticClass:"nicOption"},[a("span",[e._v(e._s(t.value)+"("+e._s(t.type)+", "+e._s(t.state)+") ")]),e._v(" "),a("span",{staticClass:"pull-right"},[e._v(e._s(t.usedByManagementNetwork?e.t("harvester.host.detail.notRecommended"):""))])])]]}}],null,!1,2519002480),model:{value:e.nic,callback:function(t){e.nic=t},expression:"nic"}})],1)])])],1):e._e(),e.hasBlockDevicesSchema?a("Tab",{attrs:{name:"disk",weight:80,label:e.t("harvester.host.tabs.disk")}},[a("ArrayListGrouped",{attrs:{mode:e.mode},scopedSlots:e._u([{key:"default",fn:function(t){return[a("HarvesterDisk",{staticClass:"mb-20",attrs:{mode:e.mode,disks:e.disks},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"props.row.value"}})]}},{key:"add",fn:function(){return[e.isView?e._e():a("ButtonDropdown",{attrs:{"button-label":e.t("harvester.host.disk.add"),"dropdown-options":e.blockDeviceOpts,size:"sm",selectable:e.selectable},on:{"click-action":function(t){return e.addDisk(t.value)},"dd-button-action":e.ddButtonAction},scopedSlots:e._u([{key:"option",fn:function(t){return["group"===t.kind?[a("b",[e._v(" "+e._s(t.label)+" ")])]:a("div",[e._v(" "+e._s(t.label)+" ")])]}}],null,!1,3653410021)})]},proxy:!0},{key:"remove-button",fn:function(t){return[e.canRemove(t.row,t.i)&&!e.isView?a("button",{staticClass:"btn role-link close btn-sm",attrs:{type:"button"},on:{click:function(){return e.onRemove(t)}}},[a("i",{staticClass:"icon icon-2x icon-x"})]):a("span")]}}],null,!1,3987321056),model:{value:e.newDisks,callback:function(t){e.newDisks=t},expression:"newDisks"}})],1):e._e(),a("Tab",{attrs:{name:"labels","label-key":"harvester.host.tabs.labels"}},[a("KeyValue",{key:"labels",attrs:{value:e.filteredLabels,"add-label":e.t("labels.addLabel"),mode:e.mode,title:e.t("labels.labels.title"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:e.updateHostLabels}})],1)],1),e.showFormattedWarning?a("Banner",{attrs:{color:"warning",label:e.t("harvester.host.disk.forceFormatted.toolTip")}}):e._e(),a("Footer",{attrs:{mode:e.mode,errors:e.errors},on:{save:e.save,done:e.done}})],1)},s=[],n=a("56d4"),i=a.n(n),o=a("9ce4"),l=a("ad61"),c=a("5ef9"),u=a("9aaf"),d=a("6583"),p=a("65b0"),v=a("d444"),m=a("53fe"),f=a("d003"),h=a("98f3"),b=a("c78c"),y=a("b0bd"),g=a("56a4"),w=a("90cd"),k=a("b837"),x=a("67ab"),S=a("e411"),O=a("1832"),C=a("3792"),N=a("2958"),_=a("7592"),D=a("dffb"),T=a("34bc");function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){I(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e){return A(e)||M(e)||E(e)||P()}function P(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){if(e){if("string"===typeof e)return L(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?L(e,t):void 0}}function M(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function A(e){if(Array.isArray(e))return L(e)}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function R(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(C){return void a(C)}o.done?t(l):Promise.resolve(l).then(r,s)}function B(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){R(n,r,s,i,o,"next",e)}function o(e){R(n,r,s,i,o,"throw",e)}i(void 0)}))}}var H="longhorn-system",F={name:"HarvesterEditNode",components:{Footer:u["a"],Tabbed:l["a"],InfoBox:d["a"],Tab:c["a"],LabeledInput:v["a"],LabeledSelect:m["a"],NameNsDescription:p["a"],ArrayListGrouped:f["a"],HarvesterDisk:T["default"],ButtonDropdown:h["a"],KeyValue:N["a"],Banner:D["a"]},mixins:[b["a"]],props:{value:{type:Object,required:!0}},fetch:function(){var e=this;return B(i.a.mark((function t(){var a,r,s,n,o,l,c,u,d;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$store.getters["currentProduct"].inStore,t.next=3,Object(k["a"])({hostNetworks:e.$store.dispatch("".concat(a,"/findAll"),{type:w["a"].NODE_NETWORK}),longhornNodes:e.$store.dispatch("".concat(a,"/findAll"),{type:g["p"].NODES}),blockDevices:e.$store.dispatch("".concat(a,"/findAll"),{type:w["a"].BLOCK_DEVICE})});case 3:r=t.sent,s=r.hostNetworks,n=s.find((function(t){return e.value.id===t.attachNodeName})),n&&(e.hostNetworkResource=n,e.nic=null===(o=n.spec)||void 0===o?void 0:o.nic,e.type=null===(l=n.spec)||void 0===l?void 0:l.type,e.nics=n.nics),c=e.$store.getters["".concat(a,"/all")](w["a"].BLOCK_DEVICE),u=c.filter((function(t){var a,r,s,n=null===t||void 0===t||null===(a=t.spec)||void 0===a||null===(r=a.fileSystem)||void 0===r?void 0:r.provisioned,i=(null===t||void 0===t||null===(s=t.spec)||void 0===s?void 0:s.nodeName)===e.value.id,o=Object(S["e"])(e.longhornDisks,"name",t.metadata.name);return n&&i&&!o})).map((function(e){var t,a,r,s,n,i,o;return{isNew:!0,name:null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name,originPath:null===e||void 0===e||null===(a=e.spec)||void 0===a||null===(r=a.fileSystem)||void 0===r?void 0:r.mountPoint,path:null===e||void 0===e||null===(s=e.spec)||void 0===s||null===(n=s.fileSystem)||void 0===n?void 0:n.mountPoint,blockDevice:e,displayName:null===e||void 0===e?void 0:e.displayName,forceFormatted:(null===e||void 0===e||null===(i=e.spec)||void 0===i||null===(o=i.fileSystem)||void 0===o?void 0:o.forceFormatted)||!1}})),d=[].concat(j(e.longhornDisks),j(u)),e.disks=d,e.newDisks=Object(O["clone"])(d),e.blockDeviceOpts=e.getBlockDeviceOpts();case 13:case"end":return t.stop()}}),t)})))()},data:function(){var e,t,a,r,s=(null===(e=this.value.metadata)||void 0===e||null===(t=e.annotations)||void 0===t?void 0:t[y["l"].HOST_CUSTOM_NAME])||"",n=(null===(a=this.value.metadata)||void 0===a||null===(r=a.annotations)||void 0===r?void 0:r[y["l"].HOST_CONSOLE_URL])||"";return{hostNetworkResource:null,customName:s,consoleUrl:n,type:"vlan",nic:"",nics:[],disks:[],newDisks:[],blockDevice:[],blockDeviceOpts:[],filteredLabels:Object(O["clone"])(this.value.filteredSystemLabels)}},computed:$($({},Object(o["a"])({t:"i18n/t"})),{},{nicsOptions:function(){var e=this;return this.nics.filter((function(e){return!(void 0!==e.masterIndex&&void 0===e.usedByVlanNetwork)})).map((function(t){var a=t.usedByManagementNetwork?"(".concat(e.$store.getters["i18n/t"]("harvester.host.detail.notRecommended"),")"):"",r="".concat(t.name,"(").concat(t.type,", ").concat(t.state,")   ").concat(a);return{value:t.name,label:r,state:t.state,type:t.type,usedByManagementNetwork:t.usedByManagementNetwork}}))},removedDisks:function(){var e=this,t=this.disks.filter((function(t){return!Object(S["e"])(e.newDisks,"name",t.name)}))||[];return t},longhornDisks:function(){var e,t,a=this,r=this.$store.getters["currentProduct"].inStore,s=this.$store.getters["".concat(r,"/byId")](g["p"].NODES,"".concat(H,"/").concat(this.value.id)),n=(null===s||void 0===s||null===(e=s.status)||void 0===e?void 0:e.diskStatus)||{},i=(null===s||void 0===s||null===(t=s.spec)||void 0===t?void 0:t.disks)||{},o={increment:1024,minExponent:3,maxExponent:3,maxPrecision:2,suffix:"iB"},l=Object.keys(n).map((function(e){var t,s,l,c,u,d,p=a.$store.getters["".concat(r,"/byId")](w["a"].BLOCK_DEVICE,"".concat(H,"/").concat(e));return $($($({},n[e]),null===i||void 0===i?void 0:i[e]),{},{name:e,isNew:!1,storageReserved:Object(x["e"])(null===(t=i[e])||void 0===t?void 0:t.storageReserved,o),storageAvailable:Object(x["e"])(null===(s=n[e])||void 0===s?void 0:s.storageAvailable,o),storageMaximum:Object(x["e"])(null===(l=n[e])||void 0===l?void 0:l.storageMaximum,o),storageScheduled:Object(x["e"])(null===(c=n[e])||void 0===c?void 0:c.storageScheduled,o),blockDevice:p,displayName:(null===p||void 0===p?void 0:p.displayName)||e,forceFormatted:(null===p||void 0===p||null===(u=p.spec)||void 0===u||null===(d=u.fileSystem)||void 0===d?void 0:d.forceFormatted)||!1})}));return l},showFormattedWarning:function(){var e=this.newDisks.filter((function(e){return e.forceFormatted&&e.isNew}))||[];return e.length>0},hasHostNetworksSchema:function(){var e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters["".concat(e,"/schemaFor")](w["a"].NODE_NETWORK)},hasBlockDevicesSchema:function(){var e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters["".concat(e,"/schemaFor")](w["a"].BLOCK_DEVICE)}}),watch:{customName:function(e){this.value.setAnnotation(y["l"].HOST_CUSTOM_NAME,e)},consoleUrl:function(e){this.value.setAnnotation(y["l"].HOST_CONSOLE_URL,e)},newDisks:function(){this.blockDeviceOpts=this.getBlockDeviceOpts()}},created:function(){this.registerBeforeHook&&this.registerBeforeHook(this.willSave,"willSave"),this.registerAfterHook&&(this.registerAfterHook(this.saveHostNetwork),this.registerAfterHook(this.saveDisk))},methods:{saveHostNetwork:function(){this.hostNetworkResource&&this.hostNetworkResource.save()},update:function(){this.$set(this.hostNetworkResource.spec,"nic",this.nic)},addDisk:function(e){var t,a,r,s,n,i,o,l,c,u,d,p=Object(S["e"])(this.removedDisks,"blockDevice.id",e);if(p)return this.newDisks.push(p);var v=this.$store.getters["currentProduct"].inStore,m=this.$store.getters["".concat(v,"/byId")](w["a"].BLOCK_DEVICE,e),f=null===m||void 0===m||null===(t=m.spec)||void 0===t||null===(a=t.fileSystem)||void 0===a?void 0:a.mountPoint,h=null===m||void 0===m||null===(r=m.status)||void 0===r||null===(s=r.deviceStatus)||void 0===s||null===(n=s.fileSystem)||void 0===n?void 0:n.LastFormattedAt,b=!0,y=["ext4","XFS"];(h||y.includes(null===m||void 0===m||null===(i=m.status)||void 0===i||null===(o=i.deviceStatus)||void 0===o||null===(l=o.fileSystem)||void 0===l?void 0:l.type))&&(b=!1);var g=null===m||void 0===m||null===(c=m.metadata)||void 0===c?void 0:c.name;this.newDisks.push({name:g,path:f,allowScheduling:!1,evictionRequested:!1,storageReserved:0,isNew:!0,originPath:null===m||void 0===m||null===(u=m.spec)||void 0===u||null===(d=u.fileSystem)||void 0===d?void 0:d.mountPoint,blockDevice:m,displayName:null===m||void 0===m?void 0:m.displayName,forceFormatted:b})},saveDisk:function(){var e=this;return B(i.a.mark((function t(){var a,r,s,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$store.getters["currentProduct"].inStore,r=e.newDisks.filter((function(e){return e.isNew})),s=e.disks.filter((function(t){return!Object(S["e"])(e.newDisks,"name",t.name)&&t.blockDevice})),t.prev=3,t.next=6,Promise.all(r.map((function(t){var r=e.$store.getters["".concat(a,"/byId")](w["a"].BLOCK_DEVICE,"".concat(H,"/").concat(t.name));return r.spec.fileSystem.provisioned=!0,r.spec.fileSystem.forceFormatted=t.forceFormatted,r.save()})));case 6:return t.next=8,Promise.all(s.map((function(t){var r=e.$store.getters["".concat(a,"/byId")](w["a"].BLOCK_DEVICE,"".concat(H,"/").concat(t.name));return r.spec.fileSystem.provisioned=!1,r.save()})));case 8:e.$store.dispatch("growl/success",{title:e.t("generic.notification.title.succeed"),message:e.t("harvester.host.disk.notification.success",{name:(null===(n=e.value.metadata)||void 0===n?void 0:n.name)||""})},{root:!0}),t.next=14;break;case 11:return t.prev=11,t.t0=t["catch"](3),t.abrupt("return",Promise.reject(Object(C["c"])(t.t0)));case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))()},canRemove:function(e){var t;return!(null===e||void 0===e||null===(t=e.value)||void 0===t||!t.blockDevice)},onRemove:function(e){e.remove()},updateHostLabels:function(e){this.filteredLabels=e},selectable:function(e){return!e.disabled},getBlockDeviceOpts:function(){var e=this,t=this.$store.getters["currentProduct"].inStore,a=this.$store.getters["".concat(t,"/all")](w["a"].BLOCK_DEVICE),r=a.filter((function(t){var a,r,s,n,i,o,l,c=Object(S["e"])((null===t||void 0===t||null===(a=t.status)||void 0===a?void 0:a.conditions)||[],"type","AddedToNode"),u=Object(S["e"])(e.newDisks,"name",t.metadata.name),d=Object(S["e"])(e.removedDisks,"name",t.metadata.name),p=null===(r=t.status)||void 0===r||null===(s=r.deviceStatus)||void 0===s||null===(n=s.details)||void 0===n?void 0:n.deviceType;return"disk"===p&&!((Object(S["e"])(e.disks||[],"name",t.metadata.name)||(null===t||void 0===t||null===(i=t.spec)||void 0===i?void 0:i.nodeName)!==e.value.id||c&&"False"!==(null===c||void 0===c?void 0:c.status)||null!==(o=t.spec)&&void 0!==o&&null!==(l=o.fileSystem)&&void 0!==l&&l.provisioned||u)&&!d)})).map((function(t){var a,r,s,n,i,o,l,c,u,d=null===(a=t.spec)||void 0===a?void 0:a.devPath,p=null===(r=t.status)||void 0===r||null===(s=r.deviceStatus)||void 0===s||null===(n=s.details)||void 0===n?void 0:n.deviceType,v=null===(i=t.status)||void 0===i||null===(o=i.deviceStatus)||void 0===o||null===(l=o.capacity)||void 0===l?void 0:l.sizeBytes,m=Object(x["e"])(v,{increment:1024}),f=null===(c=t.status)||void 0===c||null===(u=c.deviceStatus)||void 0===u?void 0:u.parentDevice,h=e.newDisks.find((function(e){var t,a,r;return(null===(t=e.blockDevice)||void 0===t||null===(a=t.status)||void 0===a||null===(r=a.deviceStatus)||void 0===r?void 0:r.parentDevice)===d})),b=t.displayName,y="".concat(b," (Type: ").concat(p,", Size: ").concat(m,")");return f&&(y="- ".concat(y)),{label:y,value:t.id,action:e.addDisk,kind:f?"":"group",disabled:!!(t.childParts.length>0||h),group:f||d,isParent:!!f}}));return Object(_["b"])(r,["group","isParent","label"])},ddButtonAction:function(){this.blockDeviceOpts=this.getBlockDeviceOpts()},willSave:function(){var e=this,t=this.filteredLabels||{};this.value.metadata.labels=$($({},this.value.metadata.labels),t);var a=this.value.filteredSystemLabels;Object.keys(a).map((function(a){t[a]||delete e.value.metadata.labels[a]}))}}},q=F,K=(a("ee1c"),a("d802")),U=Object(K["a"])(q,r,s,!1,null,"5024d7bf",null);t["default"]=U.exports},6269:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Setting",{attrs:{value:e.value}})},s=[],n=a("414d"),i={name:"EditClusterNetwork",components:{Setting:n["default"]},props:{value:{type:Object,required:!0}}},o=i,l=a("d802"),c=Object(l["a"])(o,r,s,!1,null,null,null);t["default"]=c.exports},"628d":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-6692e6e6]:after,.clearfix[data-v-6692e6e6]:before{content:" ";display:table}.clearfix[data-v-6692e6e6]:after{clear:both}.list-unstyled[data-v-6692e6e6]{margin:0;padding:0;list-style-type:none}.no-select[data-v-6692e6e6]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-6692e6e6]{resize:none}.hand[data-v-6692e6e6]{cursor:pointer;cursor:hand}.fixed[data-v-6692e6e6]{table-layout:fixed}.clip[data-v-6692e6e6]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-6692e6e6],.force-wrap[data-v-6692e6e6]{word-wrap:break-word}.force-wrap[data-v-6692e6e6]{white-space:normal}.bordered-section[data-v-6692e6e6]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-6692e6e6]{margin-bottom:20px;margin-top:20px}button[data-v-6692e6e6]{all:unset;height:0;position:relative;top:-35px;float:right;margin-right:7px;cursor:pointer}button .align-value[data-v-6692e6e6]{padding-top:7px}.row.name-ns-description[data-v-6692e6e6]{max-height:61px}.row .namespace-select[data-v-6692e6e6]  .labeled-select{min-width:40%}.row .namespace-select[data-v-6692e6e6]  .labeled-select .v-select.inline.vs--single{padding-bottom:2px}.row.flip-direction[data-v-6692e6e6]{flex-direction:column}.row.flip-direction.name-ns-description[data-v-6692e6e6]{max-height:none}.row.flip-direction>div>*[data-v-6692e6e6]{margin-bottom:20px}',""]),e.exports=t},"65b0":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row mb-20"},[e.namespaced&&!e.nameNsHidden&&e.createNamespace?a("div",{staticClass:"col span-3",attrs:{"data-testid":e.componentTestid+"-namespace-create"}},[a("LabeledInput",{ref:"namespace",attrs:{label:e.t("namespace.label"),placeholder:e.t("namespace.selectOrCreate"),disabled:e.namespaceReallyDisabled,mode:e.mode,"min-height":30,required:e.nameRequired,rules:e.rules.namespace},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}}),a("button",{attrs:{aria:"Cancel create"},on:{click:function(){e.createNamespace=!1,e.$parent.$emit("createNamespace",!1)}}},[a("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("generic.cancel"),expression:"t('generic.cancel')"}],staticClass:"icon icon-lg icon-close align-value"})])],1):e._e(),!e.namespaced||e.nameNsHidden||e.createNamespace?e._e():a("div",{staticClass:"col span-3",attrs:{"data-testid":e.componentTestid+"-namespace"}},[a("LabeledSelect",{directives:[{name:"show",rawName:"v-show",value:!e.createNamespace,expression:"!createNamespace"}],attrs:{clearable:!0,options:e.namespaces,disabled:e.namespaceReallyDisabled,searchable:!0,mode:e.mode,multiple:!1,label:e.t("namespace.label"),placeholder:e.t("namespace.selectOrCreate"),rules:e.rules.namespace,required:""},on:{selecting:e.selectNamespace},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}})],1),e.nameNsHidden?e._e():a("div",{staticClass:"col span-3",attrs:{"data-testid":e.componentTestid+"-name"}},[a("LabeledInput",{key:"name",ref:"name",attrs:{label:e.t(e.nameLabel),placeholder:e.t(e.namePlaceholder),disabled:e.nameReallyDisabled,mode:e.mode,"min-height":30,required:e.nameRequired,rules:e.rules.name},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.descriptionHidden,expression:"!descriptionHidden"}],class:["col",e.extraColumns.length>0?"span-3":"span-6"],attrs:{"data-testid":e.componentTestid+"-description"}},[a("LabeledInput",{key:"description",attrs:{mode:e.mode,disabled:e.descriptionDisabled,label:e.t(e.descriptionLabel),placeholder:e.t(e.descriptionPlaceholder),"min-height":30,rules:e.rules.description},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._l(e.extraColumns,(function(t){var r;return a("div",{key:t,class:(r={col:!0},r[e.colSpan]=!0,r)},[e._t(t)],2)})),e.showSpacer?a("div",{staticClass:"spacer"}):e._e()],2)},s=[],n=a("8bbf"),i=a.n(n),o=a("9ce4"),l=a("1832"),c=a("7592"),u=a("56a4"),d=a("b0bd"),p=a("d6a6"),v=a("d444"),m=a("53fe");function f(e){return g(e)||y(e)||b(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if(e){if("string"===typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}function y(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function g(e){if(Array.isArray(e))return w(e)}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){S(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function O(e){return(e||"").trim().toLowerCase().replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}var C={components:{LabeledInput:v["a"],LabeledSelect:m["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},nameNsHidden:{type:Boolean,default:!1},descriptionHidden:{type:Boolean,default:!1},extraColumns:{type:Array,default:function(){return[]}},nameLabel:{type:String,default:"nameNsDescription.name.label"},nameEditable:{type:Boolean,default:!1},namePlaceholder:{type:String,default:"nameNsDescription.name.placeholder"},nameDisabled:{type:Boolean,default:!1},nameRequired:{type:Boolean,default:!0},nameNormalized:{type:Boolean,default:!0},namespaced:{type:Boolean,default:!0},namespaceFilter:{type:Function,default:null},namespaceMapper:{type:Function,default:null},namespaceType:{type:String,default:u["t"]},namespaceLabel:{type:String,default:"nameNsDescription.namespace.label"},namespacePlaceholder:{type:String,default:"nameNsDescription.namespace.placeholder"},namespaceDisabled:{type:Boolean,default:!1},namespaceNewAllowed:{type:Boolean,default:!1},noDefaultNamespace:{type:Boolean,default:!1},namespacesOverride:{type:Array,default:null},descriptionLabel:{type:String,default:"nameNsDescription.description.label"},descriptionPlaceholder:{type:String,default:"nameNsDescription.description.placeholder"},descriptionDisabled:{type:Boolean,default:!1},nameKey:{type:String,default:null},namespaceKey:{type:String,default:null},descriptionKey:{type:String,default:null},forceNamespace:{type:String,default:null},showSpacer:{type:Boolean,default:!0},horizontal:{type:Boolean,default:!0},rules:{default:function(){return{namespace:[],name:[],description:[]}},type:Object},componentTestid:{type:String,default:"name-ns-description"}},data:function(){var e,t,a,r,s=this.value,n=s.metadata;(t=this.nameKey?Object(l["get"])(s,this.nameKey):n.name,this.namespaced&&(this.forceNamespace?(e=this.forceNamespace,this.updateNamespace(e)):e=this.namespaceKey?Object(l["get"])(s,this.namespaceKey):null===n||void 0===n?void 0:n.namespace,e||this.noDefaultNamespace||(e=this.$store.getters["defaultNamespace"],n&&(n.namespace=e))),this.descriptionKey)?a=Object(l["get"])(s,this.descriptionKey):a=null===n||void 0===n||null===(r=n.annotations)||void 0===r?void 0:r[d["j"]];var i=this.$store.getters["currentStore"](),o=this.$store.getters["".concat(i,"/schemaFor")](u["t"]);return{namespace:e,name:t,description:a,createNamespace:!1,nsSchema:o}},computed:x(x({},Object(o["a"])(["currentProduct","currentCluster"])),{},{namespaceReallyDisabled:function(){return!!this.forceNamespace||this.namespaceDisabled||this.mode===p["w"]},nameReallyDisabled:function(){return this.nameDisabled||this.mode===p["w"]&&!this.nameEditable},namespaces:function(){var e=this,t=this.$store.getters["currentStore"](this.namespaceType),a=this.namespacesOverride||this.$store.getters["".concat(t,"/all")](this.namespaceType),r=a.filter(this.namespaceFilter||function(t){var a;return null===(a=e.currentProduct)||void 0===a||!a.hideSystemResources||!t.isSystem&&!t.isFleetManaged}),s=r.map(this.namespaceMapper||function(e){return{label:e.nameDisplay,value:e.id}}),n=Object(c["b"])(s,"label");this.forceNamespace&&n.unshift({label:this.forceNamespace,value:this.forceNamespace});var i=[];return this.canCreateNamespace&&i.push({label:this.t("namespace.createNamespace"),value:""}),i.push.apply(i,[{label:"divider",disabled:!0,kind:"divider"}].concat(f(n))),i},isView:function(){return this.mode===p["C"]},colSpan:function(){if(!this.horizontal)return"span-8";var e=(this.nameNsHidden?0:2)+(this.descriptionHidden?0:1)+this.extraColumns.length;e=Math.max(2,e);var t=12/e;return"span-".concat(t)},canCreateNamespace:function(){var e;return((null===(e=this.nsSchema)||void 0===e?void 0:e.collectionMethods)||[]).includes("POST")&&this.currentCluster.canUpdate}}),watch:{name:function(e){this.normalizeName&&(e=O(e)),this.nameKey?Object(l["set"])(this.value,this.nameKey,e):this.$set(this.value.metadata,"name",e),this.$emit("change")},namespace:function(e){this.updateNamespace(e),this.$emit("change")},description:function(e){this.descriptionKey?Object(l["set"])(this.value,this.descriptionKey,e):this.value.setAnnotation(d["j"],e),this.$emit("change")}},mounted:function(){var e=this;this.$nextTick((function(){e.$refs.name&&e.$refs.name.focus()}))},methods:{updateNamespace:function(e){this.forceNamespace&&(e=this.forceNamespace),this.namespaced&&this.$emit("isNamespaceNew",this.namespaces&&!this.namespaces.find((function(t){return t.value===e}))),this.namespaceKey?Object(l["set"])(this.value,this.namespaceKey,e):this.value.metadata.namespace=e},changeNameAndNamespace:function(e){this.name=(e.text||"").toLowerCase(),this.namespace=e.selected},selectNamespace:function(e){var t=this;e&&""!==e.value?(this.createNamespace=!1,this.$parent.$emit("createNamespace",!1)):(this.createNamespace=!0,this.$parent.$emit("createNamespace",!0),i.a.nextTick((function(){return t.$refs.namespace.focus()})))}}},N=C,_=(a("a54b"),a("d802")),D=Object(_["a"])(N,r,s,!1,null,"6692e6e6",null);t["a"]=D.exports},"6beb":function(e,t,a){"use strict";a("34cd")},"6f57":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-24d29898]:after,.clearfix[data-v-24d29898]:before{content:" ";display:table}.clearfix[data-v-24d29898]:after{clear:both}.list-unstyled[data-v-24d29898]{margin:0;padding:0;list-style-type:none}.no-select[data-v-24d29898]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-24d29898]{resize:none}.hand[data-v-24d29898]{cursor:pointer;cursor:hand}.fixed[data-v-24d29898]{table-layout:fixed}.clip[data-v-24d29898]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-24d29898],.force-wrap[data-v-24d29898]{word-wrap:break-word}.force-wrap[data-v-24d29898]{white-space:normal}.bordered-section[data-v-24d29898]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-24d29898]{margin-bottom:20px;margin-top:20px}[data-v-24d29898] .yaml-editor{flex:1;min-height:200px}[data-v-24d29898] .yaml-editor .code-mirror .CodeMirror{position:static;height:auto;min-height:200px}',""]),e.exports=t},"75a7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},model:{value:e.value.enable,callback:function(t){e.$set(e.value,"enable",t)},expression:"value.enable"}}),e.value.enable?a("LabeledSelect",{staticClass:"mb-5",attrs:{options:e.nicOptions,label:e.t("harvester.setting.defaultPhysicalNIC"),tooltip:"view"===e.mode?null:e.t("harvester.setting.percentTip"),"hover-tooltip":!0},scopedSlots:e._u([{key:"option",fn:function(t){return[[a("div",{staticClass:"nicOption"},[a("span",[e._v(e._s(t.label)+"("+e._s(t.percent)+") ")])])]]}}],null,!1,282342038),model:{value:e.value.config.defaultPhysicalNIC,callback:function(t){e.$set(e.value.config,"defaultPhysicalNIC",t)},expression:"value.config.defaultPhysicalNIC"}}):e._e(),e.value.enable?a("Tip",{attrs:{icon:"icons icon-info",text:e.t("harvester.setting.vlanChangeTip")}}):e._e()],1)},s=[],n=a("56d4"),i=a.n(n),o=a("8bbf"),l=a.n(o),c=a("53fe"),u=a("f032"),d=a("1fc2"),p=a("c78c"),v=a("b837"),m=a("90cd");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e){return x(e)||k(e)||w(e)||g()}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){if(e){if("string"===typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?S(e,t):void 0}}function k(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function x(e){if(Array.isArray(e))return S(e)}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function O(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,s)}function C(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){O(n,r,s,i,o,"next",e)}function o(e){O(n,r,s,i,o,"throw",e)}i(void 0)}))}}var N={name:"EditHarvesterVlan",components:{LabeledSelect:c["a"],RadioGroup:u["b"],Tip:d["a"]},mixins:[p["a"]],props:{value:{type:Object,required:!0}},fetch:function(){var e=this;return C(i.a.mark((function t(){var a,r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$store.getters["currentProduct"].inStore,t.next=3,Object(v["a"])({nodeNetworks:e.$store.dispatch("".concat(a,"/findAll"),{type:m["a"].NODE_NETWORK})});case 3:r=t.sent,e.nodeNetworks=r.nodeNetworks;case 5:case"end":return t.stop()}}),t)})))()},data:function(){return this.value.config||l.a.set(this.value,"config",{defaultPhysicalNIC:""}),{nodeNetworks:[]}},computed:{doneLocationOverride:function(){return this.value.listLocation},nicOptions:function(){var e=this,t=[],a=[];return 0===this.nodeNetworks.length?a:(this.nodeNetworks.map((function(e){var a;if(!((null===e||void 0===e||null===(a=e.nics)||void 0===a?void 0:a.length)>0))return[];var r=e.nics.filter((function(e){return!(void 0!==e.masterIndex&&void 0===e.usedByVlanNetwork)})).map((function(e){return e.name}));t.push.apply(t,y(r))})),t.map((function(e){var t=a.findIndex((function(t){return t.value===e}));t>-1?a[t].num=a[t].num+1:a.push({label:e,value:e,num:1})})),a.map((function(t){var a=(t.num/e.nodeNetworks.length*100).toFixed(2);return h(h({},t),{},{percent:"".concat(a," %")})})))}}},_=N,D=(a("9dee"),a("d802")),T=Object(D["a"])(_,r,s,!1,null,"a72cd38a",null);t["default"]=T.exports},"7a91":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-3263b3bc]:after,.clearfix[data-v-3263b3bc]:before{content:" ";display:table}.clearfix[data-v-3263b3bc]:after{clear:both}.list-unstyled[data-v-3263b3bc]{margin:0;padding:0;list-style-type:none}.no-select[data-v-3263b3bc]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-3263b3bc]{resize:none}.hand[data-v-3263b3bc]{cursor:pointer;cursor:hand}.fixed[data-v-3263b3bc]{table-layout:fixed}.clip[data-v-3263b3bc]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-3263b3bc],.force-wrap[data-v-3263b3bc]{word-wrap:break-word}.force-wrap[data-v-3263b3bc]{white-space:normal}.bordered-section[data-v-3263b3bc]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-3263b3bc]{margin-bottom:20px;margin-top:20px}p[data-v-3263b3bc]{display:flex;align-items:center}.icon-h-question[data-v-3263b3bc]{font-size:24px}.tip[data-v-3263b3bc]{font-size:15px}.goCA[data-v-3263b3bc]{margin:0 3px}',""]),e.exports=t},"7b95":function(e,t,a){var r=a("3169");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("c37f7a56",r,!0,{sourceMap:!1,shadowMode:!1})},"7e70":function(e,t,a){"use strict";a("0922")},"86dc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.templateSpec&&e.spec?a("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,"can-yaml":!1,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.saveVMT}},[a("NameNsDescription",{attrs:{mode:e.realTemplateMode,"name-label":"harvester.vmTemplate.nameNsDescription.name",namespaced:!0},model:{value:e.templateValue,callback:function(t){e.templateValue=t},expression:"templateValue"}}),e.templateId?a("Checkbox",{staticClass:"mb-20",attrs:{label:e.t("tableHeaders.defaultVersion"),type:"checkbox",mode:e.mode},model:{value:e.isDefaultVersion,callback:function(t){e.isDefaultVersion=t},expression:"isDefaultVersion"}}):e._e(),a("Tabbed",{attrs:{"side-tabs":!0},on:{changed:e.onTabChanged}},[a("Tab",{attrs:{name:"Basics",label:e.t("harvester.vmTemplate.tabs.basics")}},[a("CpuMemory",{attrs:{cpu:e.cpu,memory:e.memory,disabled:e.isConfig},on:{updateCpuMemory:e.updateCpuMemory}}),a("div",{staticClass:"mb-20"},[a("SSHKey",{attrs:{namespace:e.templateValue.metadata.namespace,"disable-create":e.isView,mode:e.mode},on:{"update:sshKey":e.updateSSHKey},model:{value:e.sshKey,callback:function(t){e.sshKey=t},expression:"sshKey"}})],1)],1),a("Tab",{attrs:{name:"Volume",label:e.t("harvester.tab.volume"),weight:-1}},[a("Volume",{attrs:{mode:e.mode,namespace:e.value.metadata.namespace,"existing-volume-disabled":!0},model:{value:e.diskRows,callback:function(t){e.diskRows=t},expression:"diskRows"}})],1),a("Tab",{attrs:{name:"Network",label:e.t("harvester.tab.network"),weight:-2}},[a("Network",{attrs:{mode:e.mode},model:{value:e.networkRows,callback:function(t){e.networkRows=t},expression:"networkRows"}})],1),a("Tab",{attrs:{name:"nodeScheduling",label:e.t("workload.container.titles.nodeScheduling"),weight:-89}},[a("NodeScheduling",{attrs:{mode:e.mode,value:e.spec.template.spec,nodes:e.nodesIdOptions}})],1),a("Tab",{attrs:{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-99}},[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.runStrategy",options:e.RunStrategys,mode:e.mode},model:{value:e.runStrategy,callback:function(t){e.runStrategy=t},expression:"runStrategy"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.osType",mode:e.mode,options:e.OS},model:{value:e.osType,callback:function(t){e.osType=t},expression:"osType"}})],1)]),a("div",{staticClass:"row mb-20"},[(e.showAdvanced,a("a",{directives:[{name:"t",rawName:"v-t",value:"harvester.generic.showMore",expression:"'harvester.generic.showMore'"}],attrs:{role:"button"},on:{click:e.toggleAdvanced}}))]),e.showAdvanced?a("div",{staticClass:"mb-20"},[a("Reserved",{attrs:{"reserved-memory":e.reservedMemory,mode:e.mode},on:{updateReserved:e.updateReserved}})],1):e._e(),a("CloudConfig",{ref:"yamlEditor",attrs:{mode:e.mode,"user-script":e.userScript,namespace:e.templateValue.metadata.namespace,"network-script":e.networkScript},on:{updateUserData:e.updateUserData,updateNetworkData:e.updateNetworkData}}),a("div",{staticClass:"spacer"}),a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.enableUsb"),mode:e.mode},model:{value:e.installUSBTablet,callback:function(t){e.installUSBTablet=t},expression:"installUSBTablet"}}),a("Checkbox",{staticClass:"check",attrs:{type:"checkbox","label-key":"harvester.virtualMachine.installAgent",mode:e.mode},model:{value:e.installAgent,callback:function(t){e.installAgent=t},expression:"installAgent"}}),a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.efiEnabled"),mode:e.mode},model:{value:e.efiEnabled,callback:function(t){e.efiEnabled=t},expression:"efiEnabled"}}),e.efiEnabled?a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.secureBoot"),mode:e.mode},model:{value:e.secureBoot,callback:function(t){e.secureBoot=t},expression:"secureBoot"}}):e._e()],1)],1)],1):e._e()},s=[],n=a("56d4"),i=a.n(n),o=a("9ce4"),l=a("ad61"),c=a("5ef9"),u=a("efb2"),d=a("2e2b"),p=a("65b0"),v=a("53fe"),m=a("1b5f"),f=a("b82b"),h=a("9216"),b=a("fea5"),y=a("e1c9"),g=a("5c0d"),w=a("2a79"),k=a("90cd"),x=a("06f6"),S=a("7c47"),O=a("d6a6"),C=a("b0bd"),N=a("6834"),_=a("c78c"),D=a("9c20");function T(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,s)}function V(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){T(n,r,s,i,o,"next",e)}function o(e){T(n,r,s,i,o,"throw",e)}i(void 0)}))}}function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){j(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var P={name:"HarvesterEditVMTemplate",components:{Tab:c["a"],SSHKey:w["default"],Volume:h["default"],Tabbed:l["a"],Network:b["default"],Checkbox:u["a"],CpuMemory:y["default"],CruResource:d["a"],CloudConfig:g["default"],LabeledSelect:v["a"],NameNsDescription:p["a"],NodeScheduling:m["a"],Reserved:f["default"]},mixins:[_["a"],N["c"]],props:{value:{type:Object,required:!0}},data:function(){this.mode===O["w"]&&this.value.cleanForNew();var e=this.value.templateId||this.$route.query.templateId;return{templateId:e,templateValue:null,templateSpec:null,versionName:"",description:"",defaultVersion:null,isDefaultVersion:!1,RunStrategys:S["c"]}},computed:I(I({},Object(o["a"])({t:"i18n/t"})),{},{isConfig:function(){var e;return(null===(e=this.$route.query)||void 0===e?void 0:e.as)===O["t"]||this.isView},realTemplateMode:function(){return this.templateId?O["C"]:this.mode},secretNamePrefix:function(){var e,t;return null===(e=this.templateValue)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name}}),watch:{templateId:{handler:function(e){var t=this;return V(i.a.mark((function a(){var r,s,n,o;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("harvester/findAll",{type:k["a"].VM_TEMPLATE});case 2:if(s=a.sent,n=s.find((function(t){return t.id===e}))||null,o=null===(r=n)||void 0===r?void 0:r.spec,n){a.next=10;break}return o={description:"",defaultVersionId:""},a.next=9,t.$store.dispatch("harvester/create",{metadata:{name:"",namespace:""},spec:o,type:k["a"].VM_TEMPLATE});case 9:n=a.sent;case 10:t.templateValue=n,t.templateSpec=o;case 12:case"end":return a.stop()}}),a)})))()},immediate:!0}},created:function(){var e=this;this.registerAfterHook(V(i.a.mark((function t(){var a,r,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isDefaultVersion){t.next=16;break}return t.next=3,e.$store.dispatch("harvester/findAll",{type:k["a"].VM_VERSION,opt:{force:!0}});case 3:if(a=t.sent,r=a.find((function(t){var a,r;return(null===t||void 0===t||null===(a=t.metadata)||void 0===a||null===(r=a.annotations)||void 0===r?void 0:r[C["l"].TEMPLATE_VERSION_CUSTOM_NAME])===e.customName})),!r){t.next=16;break}return t.prev=6,e.templateValue.defaultVersionId=r.id,s=[{op:"replace",path:"/spec/defaultVersionId",value:r.id}],t.next=11,e.templateValue.patch(s,{url:e.templateValue.linkFor("view")});case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t["catch"](6),t.abrupt("return",Promise.reject(new Error(t.t0.message)));case 16:case"end":return t.stop()}}),t,null,[[6,13]])}))))},mounted:function(){var e;this.imageId=(null===(e=this.diskRows[0])||void 0===e?void 0:e.image)||""},methods:{saveVMT:function(e){var t=this;return V(i.a.mark((function a(){var r,s,n,o,l,c,u;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.parseVM(),a.next=3,t.$store.dispatch("harvester/findAll",{type:k["a"].VM_TEMPLATE});case 3:if(r=a.sent,s=r.find((function(e){return e.metadata.name===t.templateValue.metadata.name})),a.prev=5,t.templateId){a.next=17;break}if(null===(n=t.templateValue)||void 0===n||null===(o=n.metadata)||void 0===o||!o.name){a.next=12;break}return a.next=10,t.templateValue.save();case 10:a.next=15;break;case 12:return t.errors=[t.t("validation.required",{key:t.t("harvester.vmTemplate.nameNsDescription.name")})],e(!1),a.abrupt("return");case 15:a.next=18;break;case 17:s.save();case 18:return t.value.cleanForNew(),t.customName=Object(x["p"])(10),t.$set(t.value.metadata,"annotations",I(I({},t.value.metadata.annotations),{},j({},C["l"].TEMPLATE_VERSION_CUSTOM_NAME,t.customName))),l=t.templateValue.metadata.name||s.metadata.name,c=t.templateValue.metadata.namespace||s.metadata.namespace,t.isCreate&&(t.value.metadata.namespace=c),t.$set(t.value.spec,"templateId","".concat(c,"/").concat(l)),a.next=27,t.value.save();case 27:return u=a.sent,a.next=30,t.saveSecret(u);case 30:return a.next=32,t.applyHooks(D["a"]);case 32:t.done(),a.next=39;break;case 35:a.prev=35,a.t0=a["catch"](5),t.errors=[a.t0],e(!1);case 39:case"end":return a.stop()}}),a,null,[[5,35]])})))()},onTabChanged:function(e){var t,a=e.tab;"advanced"===a.name&&(null===(t=this.$refs.yamlEditor)||void 0===t||t.refresh())}}},E=P,M=a("d802"),A=Object(M["a"])(E,r,s,!1,null,null,null);t["default"]=A.exports},"87c2":function(e,t,a){var r=a("9445");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("03571db9",r,!0,{sourceMap:!1,shadowMode:!1})},8885:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.spec?a("CruResource",{attrs:{id:"vm","done-route":e.doneRoute,resource:e.value,mode:e.mode,"can-yaml":!!e.isSingle,errors:e.errors,"generate-yaml":e.generateYaml,"apply-hooks":e.applyHooks},on:{finish:e.saveVM}},[e.isCreate?a("RadioGroup",{staticClass:"mb-20 vm-radio-group",attrs:{name:"createInstanceMode",options:[!0,!1],labels:[e.t("harvester.virtualMachine.instance.single.label"),e.t("harvester.virtualMachine.instance.multiple.label")]},model:{value:e.isSingle,callback:function(t){e.isSingle=t},expression:"isSingle"}}):e._e(),a("NameNsDescription",{attrs:{mode:e.mode,"has-extra":!e.isSingle,"name-label":e.nameLabel,namespaced:!0,"name-placeholder":e.isSingle?"nameNsDescription.name.placeholder":"harvester.virtualMachine.instance.multiple.nameNsDescription","extra-columns":e.isSingle?[]:["type"]},scopedSlots:e._u([{key:"type",fn:function(){return[e.isSingle?e._e():a("LabeledInput",{directives:[{name:"int-number",rawName:"v-int-number"}],attrs:{type:"number",label:e.t("harvester.virtualMachine.instance.multiple.count"),required:""},on:{input:e.validateCount},model:{value:e.count,callback:function(t){e.count=e._n(t)},expression:"count"}})]},proxy:!0}],null,!1,4082063570),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.isCreate?a("Checkbox",{staticClass:"check mb-20",attrs:{type:"checkbox","label-key":"harvester.virtualMachine.useTemplate.label"},model:{value:e.useTemplate,callback:function(t){e.useTemplate=t},expression:"useTemplate"}}):e._e(),e.useTemplate?a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.useTemplate.template.label",options:e.templateOptions},on:{input:e.updateTemplateId},model:{value:e.templateId,callback:function(t){e.templateId=t},expression:"templateId"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.useTemplate.version.label",options:e.versionOptions},model:{value:e.templateVersionId,callback:function(t){e.templateVersionId=t},expression:"templateVersionId"}})],1)]):e._e(),a("Tabbed",{attrs:{"side-tabs":!0},on:{changed:e.onTabChanged}},[a("Tab",{attrs:{name:"basics",label:e.t("harvester.virtualMachine.detail.tabs.basics")}},[a("CpuMemory",{attrs:{cpu:e.cpu,memory:e.memory,mode:e.mode},on:{updateCpuMemory:e.updateCpuMemory}}),a("SSHKey",{staticClass:"mb-20",attrs:{namespace:e.value.metadata.namespace,mode:e.mode,disabled:e.isWindows},on:{"update:sshKey":e.updateSSHKey,"register-after-hook":e.registerAfterHook},model:{value:e.sshKey,callback:function(t){e.sshKey=t},expression:"sshKey"}})],1),a("Tab",{attrs:{name:"Volume",label:e.t("harvester.tab.volume"),weight:-1}},[a("Volume",{attrs:{mode:e.mode,"custom-volume-mode":e.customVolumeMode,namespace:e.value.metadata.namespace,"resource-type":e.value.type,vm:e.value,"validate-required":!0},model:{value:e.diskRows,callback:function(t){e.diskRows=t},expression:"diskRows"}})],1),a("Tab",{attrs:{name:"Network",label:e.t("harvester.tab.network"),weight:-2}},[a("Network",{attrs:{mode:e.mode},model:{value:e.networkRows,callback:function(t){e.networkRows=t},expression:"networkRows"}})],1),a("Tab",{attrs:{name:"nodeScheduling",label:e.t("workload.container.titles.nodeScheduling"),weight:-3}},[a("NodeScheduling",{attrs:{mode:e.mode,value:e.spec.template.spec,nodes:e.nodesIdOptions}})],1),e.isEdit?a("Tab",{attrs:{label:e.t("harvester.tab.accessCredentials"),name:"accessCredentials",weight:-4}},[a("AccessCredentials",{attrs:{mode:e.mode,resource:e.value,"is-qemu-installed":e.isQemuInstalled},model:{value:e.accessCredentials,callback:function(t){e.accessCredentials=t},expression:"accessCredentials"}})],1):e._e(),a("Tab",{attrs:{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-5}},[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.runStrategy",options:e.RunStrategys,mode:e.mode},model:{value:e.runStrategy,callback:function(t){e.runStrategy=t},expression:"runStrategy"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.osType",options:e.OS,disabled:!e.isCreate},model:{value:e.osType,callback:function(t){e.osType=t},expression:"osType"}})],1)]),a("div",{staticClass:"row mb-20"},[(e.showAdvanced,a("a",{directives:[{name:"t",rawName:"v-t",value:"harvester.generic.showMore",expression:"'harvester.generic.showMore'"}],attrs:{role:"button"},on:{click:e.toggleAdvanced}}))]),e.showAdvanced?a("div",{staticClass:"mb-20"},[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{"label-key":e.hostnameLabel,placeholder:e.hostPlaceholder,mode:e.mode},model:{value:e.hostname,callback:function(t){e.hostname=t},expression:"hostname"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.input.MachineType",options:e.machineTypeOptions,mode:e.mode},model:{value:e.machineType,callback:function(t){e.machineType=t},expression:"machineType"}})],1)]),a("Reserved",{attrs:{"reserved-memory":e.reservedMemory,mode:e.mode},on:{updateReserved:e.updateReserved}})],1):e._e(),a("CloudConfig",{ref:"yamlEditor",attrs:{"user-script":e.userScript,mode:e.mode,"view-code":e.isWindows,namespace:e.value.metadata.namespace,"network-script":e.networkScript},on:{updateUserData:e.updateUserData,updateNetworkData:e.updateNetworkData,updateDataTemplateId:e.updateDataTemplateId}}),a("Checkbox",{staticClass:"check mt-20",attrs:{type:"checkbox","tooltip-key":"harvester.virtualMachine.usbTip","label-key":"harvester.virtualMachine.enableUsb",mode:e.mode},model:{value:e.installUSBTablet,callback:function(t){e.installUSBTablet=t},expression:"installUSBTablet"}}),a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",disabled:e.isWindows,"label-key":"harvester.virtualMachine.installAgent",mode:e.mode},on:{input:e.updateAgent},model:{value:e.installAgent,callback:function(t){e.installAgent=t},expression:"installAgent"}}),a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.efiEnabled"),mode:e.mode},model:{value:e.efiEnabled,callback:function(t){e.efiEnabled=t},expression:"efiEnabled"}}),e.efiEnabled?a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.secureBoot"),mode:e.mode},model:{value:e.secureBoot,callback:function(t){e.secureBoot=t},expression:"secureBoot"}}):e._e()],1)],1),a("div",{staticClass:"mt-20"},[e.isEdit&&(e.hasRestartAction||e.hasStartAction)?a("span",{staticClass:"restart"},[a("Banner",{staticClass:"banner-right",attrs:{color:"warning"}},[e._v(" "+e._s(e.t("harvester.virtualMachine.restartTip",{restart:e.hasRestartAction}))+" "),a("Checkbox",{staticClass:"check ml-20",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.restartNow",{restart:e.hasRestartAction})},model:{value:e.isRestartImmediately,callback:function(t){e.isRestartImmediately=t},expression:"isRestartImmediately"}})],1)],1):e._e()])],1):e._e()},s=[],n=a("56d4"),i=a.n(n),o=a("9e74"),l=a.n(o),c=a("9ce4"),u=a("dffb"),d=a("ad61"),p=a("5ef9"),v=a("efb2"),m=a("2e2b"),f=a("f032"),h=a("d444"),b=a("53fe"),y=a("65b0"),g=a("b82b"),w=a("2a79"),k=a("9216"),x=a("fea5"),S=a("e1c9"),O=a("5c0d"),C=a("1b5f"),N=a("8287"),_=a("e411"),D=a("1832"),T=a("90cd"),V=a("7c47"),$=a("3811"),I=a("3792"),j=a("b0bd"),P=a("9c20"),E=a("6834"),M=a("c78c");function A(e){return H(e)||B(e)||R(e)||L()}function L(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function R(e,t){if(e){if("string"===typeof e)return F(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?F(e,t):void 0}}function B(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function H(e){if(Array.isArray(e))return F(e)}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function q(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(I){return void a(I)}o.done?t(l):Promise.resolve(l).then(r,s)}function K(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){q(n,r,s,i,o,"next",e)}function o(e){q(n,r,s,i,o,"throw",e)}i(void 0)}))}}function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){J(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function J(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var G={name:"HarvesterEditVM",components:{Tab:p["a"],Tabbed:d["a"],Banner:u["a"],Checkbox:v["a"],RadioGroup:f["b"],CruResource:m["a"],LabeledInput:h["a"],LabeledSelect:b["a"],NameNsDescription:y["a"],Volume:k["default"],SSHKey:w["default"],Network:x["default"],CpuMemory:S["default"],CloudConfig:O["default"],NodeScheduling:C["a"],AccessCredentials:N["default"],Reserved:g["default"]},mixins:[M["a"],E["c"]],props:{value:{type:Object,required:!0}},data:function(){var e=Object(D["clone"])(this.value),t="Running"===this.value.actualState,a=this.value.spec.template.spec.hostname||"";return{cloneVM:e,count:2,templateId:"",templateVersionId:"",namePrefix:"",isSingle:!0,useTemplate:!1,hostname:a,isRestartImmediately:t,RunStrategys:V["c"]}},computed:z(z({},Object(c["a"])({t:"i18n/t"})),{},{machineTypeOptions:function(){return[{label:"None",value:""},{label:"q35",value:"q35"},{label:"pc",value:"pc"}]},templateOptions:function(){return this.templates.map((function(e){return{label:e.id,value:e.id}}))},versionOptions:function(){var e,t=this,a=null===(e=this.curTemplateResource)||void 0===e?void 0:e.defaultVersion;return this.versions.filter((function(e){return e.templateId===t.templateId})).map((function(e){var r=e.version,s=a===r?"".concat(r," (").concat(t.t("generic.default"),")"):r,n=e.id;return{label:s,value:n}}))},curTemplateResource:function(){var e=this;return this.templates.find((function(t){return t.id===e.templateId}))},nameLabel:function(){return this.isSingle?"harvester.virtualMachine.instance.single.nameLabel":"harvester.virtualMachine.instance.multiple.nameLabel"},hostnameLabel:function(){return this.isSingle?"harvester.virtualMachine.instance.single.host.label":"harvester.virtualMachine.instance.multiple.host.label"},hostPlaceholder:function(){return this.isSingle?this.t("harvester.virtualMachine.instance.single.host.placeholder"):this.t("harvester.virtualMachine.instance.multiple.host.placeholder")},secretNamePrefix:function(){var e,t;return null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name},isQemuInstalled:function(){return this.value.isQemuInstalled},hasRestartAction:function(){return this.value.hasAction("restart")},hasStartAction:function(){return this.value.hasAction("start")}}),watch:{templateId:{handler:function(e,t){var a=this;return K(i.a.mark((function r(){var s,n,o;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:if(e===t||a.templateVersionId){r.next=7;break}return r.next=5,a.$store.dispatch("harvester/findAll",{type:T["a"].VM_TEMPLATE});case 5:o=r.sent,a.templateVersionId=null===(s=o.find((function(t){return t.id===e})))||void 0===s||null===(n=s.spec)||void 0===n?void 0:n.defaultVersionId;case 7:case"end":return r.stop()}}),r)})))()},immediate:!1},templateVersionId:{handler:function(e){var t=this;return K(i.a.mark((function a(){var r,s,n,o,l,c,u,d,p,v,m,f,h,b,y;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,t.$store.dispatch("harvester/findAll",{type:T["a"].VM_VERSION});case 4:f=a.sent,h=f.find((function(t){return t.id===e})),b=Object(D["clone"])(h.spec.vm),null===(r=b.spec)||void 0===r||(null===(s=r.template)||void 0===s||(null===(n=s.spec)||void 0===n||delete n.accessCredentials)),null===(o=b.spec)||void 0===o||(null===(l=o.template)||void 0===l||(null===(c=l.metadata)||void 0===c||(null===(u=c.annotations)||void 0===u||delete u[j["l"].DYNAMIC_SSHKEYS_NAMES]))),null===(d=b.spec)||void 0===d||(null===(p=d.template)||void 0===p||(null===(v=p.metadata)||void 0===v||(null===(m=v.annotations)||void 0===m||delete m[j["l"].DYNAMIC_SSHKEYS_USERS]))),t.getInitConfig({value:b}),t.$set(t,"hasCreateVolumes",[]),y=t.getVolumeClaimTemplates(b),t.value.metadata.annotations[j["l"].VOLUME_CLAIM_TEMPLATE]=JSON.stringify(y);case 14:case"end":return a.stop()}}),a)})))()}},useTemplate:function(e){!1===e&&(this.templateId="",this.templateVersionId="",this.value.applyDefaults(),this.getInitConfig({value:this.value}))}},created:function(){var e=this;this.registerAfterHook(K(i.a.mark((function t(){var a,r,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.restartVM(),a="".concat(e.value.metadata.namespace,"/").concat(e.value.metadata.name),r=e.$store.getters["harvester/byId"](T["a"].VM,a),t.prev=3,t.next=6,e.saveSecret(r);case 6:return t.next=8,e.saveAccessCredentials(r);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),(s=e.errors).push.apply(s,A(Object(I["c"])(t.t0)));case 13:!e.errors.length&&e.isSingle&&e.done();case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))),this.registerBeforeHook&&this.registerBeforeHook(this.updateBeforeSave)},mounted:function(){var e;this.imageId=(null===(e=this.$route.query)||void 0===e?void 0:e.image)||this.imageId;var t=this.getDiskRows(this.value);this.$set(this,"diskRows",t);var a=this.$route.query.templateId,r=this.$route.query.versionId;a&&r&&(this.templateId=a,this.templateVersionId=r,this.useTemplate=!0)},methods:{saveVM:function(e){Object(_["c"])(this.errors),this.isSingle?this.saveSingle(e):this.saveMultiple(e)},saveSingle:function(e){var t=this;return K(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.parseVM(),t.value.spec.template.spec.hostname=t.hostname?t.hostname:t.value.metadata.name,a.next=4,t._save(t.value,e);case 4:t.errors.length?e(!1):e(!0);case 5:case"end":return a.stop()}}),a)})))()},saveMultiple:function(e){var t=this;return K(i.a.mark((function a(){var r,s,n,o,l,c,u;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.namePrefix=t.value.metadata.name||"",r=t.namePrefix.endsWith("-")?"":"-",s=t.hostname?t.hostname:t.namePrefix,!(t.count<1)){a.next=7;break}return t.errors=[t.t("harvester.virtualMachine.instance.multiple.countTip")],e(!1),a.abrupt("return");case 7:n=Object(D["clone"])(t.value),o=Object(D["clone"])(t.spec),l=1;case 10:if(!(l<=t.count)){a.next=29;break}return t.$set(t.value,"spec",n.spec),t.$set(t,"spec",o),c=l<10?"0".concat(l):l,t.value.cleanForNew(),t.value.metadata.name="".concat(t.namePrefix).concat(r).concat(c),t.$set(t.value.spec.template.spec,"hostname","".concat(s).concat(r).concat(c)),t.secretName="",a.next=20,t.parseVM();case 20:return a.next=22,t.$store.dispatch("harvester/clone",{resource:t.value});case 22:return u=a.sent,a.next=25,t._save(u,e);case 25:l!==t.count||t.errors.length?l===t.count&&(t.value.metadata.name=t.namePrefix,e(!1)):(e(!0),t.done());case 26:l++,a.next=10;break;case 29:case"end":return a.stop()}}),a)})))()},_save:function(e,t){var a=this;return K(i.a.mark((function r(){var s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.applyHooks(P["b"]);case 3:return r.next=5,e.save();case 5:return r.next=7,a.applyHooks(P["a"]);case 7:r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),(s=a.errors).push.apply(s,A(Object(I["c"])(r.t0))),t(!1);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},restartVM:function(){if("edit"===this.mode){var e,t=Object(D["clone"])(this.value);null===t||void 0===t||delete t.metadata,null===(e=this.cloneVM)||void 0===e||delete e.metadata;var a=JSON.parse(JSON.stringify(this.cloneVM)),r=JSON.parse(JSON.stringify(t));!l()(a,r)&&this.isRestartImmediately&&(this.value.hasAction("restart")&&this.value.doActionGrowl("restart",{}),this.value.hasAction("start")&&this.value.doActionGrowl("start",{}))}},updateBeforeSave:function(){this.isSingle&&(this.value.spec.template.spec.hostname||this.$set(this.value.spec.template.spec,"hostname",this.value.metadata.name));var e=this.getAccessCredentialsValidation();return e.length>0?Promise.reject(e):Promise.resolve()},validateCount:function(e){e>10&&this.$set(this,"count",10)},updateTemplateId:function(){this.templateVersionId=""},onTabChanged:function(e){var t,a=e.tab;"advanced"===a.name&&(null===(t=this.$refs.yamlEditor)||void 0===t||t.refresh())},generateYaml:function(){this.parseVM();var e=Object($["c"])(this.value);return e}}},Y=G,W=(a("6beb"),a("d802")),X=Object(W["a"])(Y,r,s,!1,null,"8d54d24c",null);t["default"]=X.exports},"8ed2":function(e,t,a){"use strict";a("272d")},"8f33":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col span-12"},[[a("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{"label-key":"harvester.generic.cpu",suffix:"%",delay:0,required:"",mode:e.mode},on:{input:e.update},model:{value:e.parseDefaultValue.cpu,callback:function(t){e.$set(e.parseDefaultValue,"cpu",t)},expression:"parseDefaultValue.cpu"}}),a("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{"label-key":"harvester.generic.memory",suffix:"%",delay:0,required:"",mode:e.mode},on:{input:e.update},model:{value:e.parseDefaultValue.memory,callback:function(t){e.$set(e.parseDefaultValue,"memory",t)},expression:"parseDefaultValue.memory"}}),a("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{"label-key":"harvester.generic.storage",suffix:"%",delay:0,required:"",mode:e.mode},on:{input:e.update},model:{value:e.parseDefaultValue.storage,callback:function(t){e.$set(e.parseDefaultValue,"storage",t)},expression:"parseDefaultValue.storage"}})]],2)])},s=[],n=a("c78c"),i=a("2007"),o={name:"HarvesterOvercommitConfig",components:{UnitInput:i["a"]},mixins:[n["a"]],data:function(){var e={};try{e=JSON.parse(this.value.value)}catch(t){e=JSON.parse(this.value.default)}return{parseDefaultValue:e,errors:[]}},created:function(){this.update()},methods:{update:function(){var e=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",e)}},watch:{value:{handler:function(e){var t=JSON.parse(e.value);this.$set(this,"parseDefaultValue",t)},deep:!0}}},l=o,c=a("d802"),u=Object(c["a"])(l,r,s,!1,null,null,null);t["default"]=u.exports},"90f3":function(e,t,a){var r={"./harvesterhci.io.cloudtemplate.vue":"ae5d","./harvesterhci.io.host/HarvesterDisk.vue":"34bc","./harvesterhci.io.host/index.vue":"5fdb","./harvesterhci.io.keypair.vue":"bb351","./harvesterhci.io.managedchart/index.vue":"4caa","./harvesterhci.io.managedchart/rancher-monitoring.vue":"d10e","./harvesterhci.io.networkattachmentdefinition.vue":"f11e","./harvesterhci.io.setting.vue":"414d","./harvesterhci.io.virtualmachinebackup.vue":"23eb","./harvesterhci.io.virtualmachineimage.vue":"b61d","./harvesterhci.io.virtualmachinetemplateversion.vue":"86dc","./harvesterhci.io.volume.vue":"935b","./kubevirt.io.virtualmachine/VirtualMachineAccessCredentials/AccessCredentialsUsers.vue":"411b","./kubevirt.io.virtualmachine/VirtualMachineAccessCredentials/index.vue":"8287","./kubevirt.io.virtualmachine/VirtualMachineAccessCredentials/type/basicAuth.vue":"e299","./kubevirt.io.virtualmachine/VirtualMachineAccessCredentials/type/sshkey.vue":"db40","./kubevirt.io.virtualmachine/VirtualMachineCloudConfig/DataTemplate.vue":"6b50","./kubevirt.io.virtualmachine/VirtualMachineCloudConfig/index.vue":"5c0d","./kubevirt.io.virtualmachine/VirtualMachineCpuMemory.vue":"e1c9","./kubevirt.io.virtualmachine/VirtualMachineNetwork/base.vue":"91f6","./kubevirt.io.virtualmachine/VirtualMachineNetwork/index.vue":"fea5","./kubevirt.io.virtualmachine/VirtualMachineReserved.vue":"b82b","./kubevirt.io.virtualmachine/VirtualMachineSSHKey.vue":"2a79","./kubevirt.io.virtualmachine/VirtualMachineVolume/index.vue":"9216","./kubevirt.io.virtualmachine/VirtualMachineVolume/type/container.vue":"5993","./kubevirt.io.virtualmachine/VirtualMachineVolume/type/existing.vue":"4890","./kubevirt.io.virtualmachine/VirtualMachineVolume/type/vmImage.vue":"df1c","./kubevirt.io.virtualmachine/VirtualMachineVolume/type/volume.vue":"0e4c","./kubevirt.io.virtualmachine/index.vue":"8885","./network.harvesterhci.io.clusternetwork/index.vue":"6269","./network.harvesterhci.io.clusternetwork/vlan.vue":"75a7"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=n,e.exports=s,s.id="90f3"},"91ed":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row",on:{input:e.update}},[a("div",{staticClass:"col span-12"},[a("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},on:{input:e.update},model:{value:e.parseDefaultValue.enable,callback:function(t){e.$set(e.parseDefaultValue,"enable",t)},expression:"parseDefaultValue.enable"}}),e.parseDefaultValue.enable?a("LabeledInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{mode:e.mode,"label-key":"harvester.setting.vmForceDeletionPolicy.period"},model:{value:e.parseDefaultValue.period,callback:function(t){e.$set(e.parseDefaultValue,"period",e._n(t))},expression:"parseDefaultValue.period"}}):e._e()],1)])},s=[],n=a("c78c"),i=a("d444"),o=a("f032"),l={name:"HarvesterVMForceDeletePolicy",components:{LabeledInput:i["a"],RadioGroup:o["b"]},mixins:[n["a"]],data:function(){var e={};try{e=JSON.parse(this.value.value)}catch(t){e=JSON.parse(this.value.default)}return{parseDefaultValue:e}},created:function(){this.update()},methods:{update:function(){var e=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",e)}},watch:{value:{handler:function(e){var t=JSON.parse(e.value);this.$set(this,"parseDefaultValue",t)},deep:!0}}},c=l,u=(a("d193"),a("d802")),d=Object(u["a"])(c,r,s,!1,null,"7b152fa4",null);t["default"]=d.exports},"935b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"generate-yaml":e.generateYaml,"apply-hooks":e.applyHooks},on:{finish:e.save}},[a("NameNsDescription",{attrs:{value:e.value,namespaced:!0,mode:e.mode}}),a("ResourceTabs",{staticClass:"mt-15",attrs:{"need-conditions":!1,"need-related":!1,"side-tabs":!0,mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("Tab",{staticClass:"bordered-table",attrs:{name:"basic",label:e.t("harvester.volume.tabs.basics"),weight:3}},[a("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.volume.source"),options:e.sourceOption,disabled:!e.isCreate,required:"",mode:e.mode},on:{input:e.update},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}}),e.isVMImage?a("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.volume.image"),options:e.imageOption,disabled:!e.isCreate,required:"",mode:e.mode},on:{input:e.update},model:{value:e.imageId,callback:function(t){e.imageId=t},expression:"imageId"}}):e._e(),a("UnitInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.volume.size"),"input-exponent":3,"output-modifier":!0,increment:1024,mode:e.mode,required:""},on:{input:e.update},model:{value:e.storage,callback:function(t){e.storage=t},expression:"storage"}})],1)],1)],1)},s=[],n=a("56d4"),i=a.n(n),o=a("5ef9"),l=a("2e2b"),c=a("2007"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Tabbed",e._b({attrs:{"default-tab":e.defaultTab},on:{changed:e.tabChange}},"Tabbed",e.$attrs,!1),[e._t("default"),e.showConditions?a("Tab",{attrs:{"label-key":"resourceTabs.conditions.tab",name:"conditions",weight:-1,"display-alert-icon":e.conditionsHaveIssues}},[a("Conditions",{attrs:{value:e.value}})],1):e._e(),e.showEvents?a("Tab",{attrs:{"label-key":"resourceTabs.events.tab",name:"events",weight:-2}},["events"===e.selectedTab?a("SortableTable",{attrs:{rows:e.events,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,"default-sort-by":"date"}}):e._e()],1):e._e(),e.showRelated?a("Tab",{attrs:{name:"related","label-key":"resourceTabs.related.tab",weight:-3}},[a("h3",{directives:[{name:"t",rawName:"v-t",value:"resourceTabs.related.from",expression:"'resourceTabs.related.from'"}]}),a("RelatedResources",{attrs:{"ignore-types":[e.value.type],value:e.value,direction:"from"}}),a("h3",{directives:[{name:"t",rawName:"v-t",value:"resourceTabs.related.to",expression:"'resourceTabs.related.to'"}],staticClass:"mt-20"}),a("RelatedResources",{attrs:{"ignore-types":[e.value.type],value:e.value,direction:"to"}})],1):e._e()],2)},d=[],p=a("ad61"),v=a("c78c"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("SortableTable",{attrs:{headers:e.headers,rows:e.rows,"key-field":"condition","default-sort-by":"condition","table-actions":!1,"row-actions":!1,search:!1},scopedSlots:e._u([{key:"cell:condition",fn:function(t){var r=t.row;return[a("span",{class:{"text-error":r.error}},[e._v(e._s(r.condition))])]}},{key:"cell:status",fn:function(t){var r=t.row;return[a("span",{class:{"text-error":r.error}},[e._v(e._s(r.status))])]}}])})},f=[],h=a("fc28"),b={components:{SortableTable:h["b"]},props:{value:{type:Object,default:function(){return{}}}},computed:{headers:function(){return[{name:"condition",labelKey:"tableHeaders.condition",value:"condition",width:150,sort:"condition",dashIfEmpty:!0},{name:"status",labelKey:"tableHeaders.status",value:"status",width:75,sort:"status",dashIfEmpty:!0},{name:"time",labelKey:"tableHeaders.updated",value:"time",sort:"time",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,dashIfEmpty:!0},{name:"message",labelKey:"tableHeaders.message",value:"message",sort:["message"],dashIfEmpty:!0}]},rows:function(){var e;return((null===(e=this.value.status)||void 0===e?void 0:e.conditions)||[]).map((function(e){var t=e.message||"";return e.reason&&(t="[".concat(e.reason,"] ").concat(t).trim()),{condition:e.type||"Unknown",status:e.status||"Unknown",error:e.error,time:e.lastProbeTime||e.lastUpdateTime||e.lastTransitionTime,message:t}}))}}},y=b,g=a("d802"),w=Object(g["a"])(y,m,f,!1,null,null,null),k=w.exports,x=a("56a4"),S=a("d6a6"),O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ResourceTable",{attrs:{schema:null,rows:e.rows,headers:e.headers,search:!1,"table-actions":!1,namespaced:!0,"mangle-action-resources":e.getRealResources,"paging-label":"sortableTable.paging.generic",groupable:!1},scopedSlots:e._u([{key:"cell:state",fn:function(e){var t=e.row;return[t.real?a("BadgeState",{attrs:{value:t.real}}):a("BadgeState",{attrs:{value:t}})]}}])})},C=[],N=a("efbe"),_=a("35ef"),D=a("d6d1"),T=a("7592"),V=a("79a8"),$=a("57ab");function I(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,s)}function j(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){I(n,r,s,i,o,"next",e)}function o(e){I(n,r,s,i,o,"throw",e)}i(void 0)}))}}function P(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=E(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,n=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw n}}}}function E(e,t){if(e){if("string"===typeof e)return M(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var A={components:{ResourceTable:N["a"],BadgeState:$["a"]},props:{value:{type:Object,required:!0},rel:{type:String,default:null},direction:{type:String,default:"to"},ignoreTypes:{type:Array,default:function(){return[]}}},data:function(){return{loadedResources:1}},computed:{filteredRelationships:function(){var e,t,a=this,r=(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.relationships)||[];return r=r.filter((function(e){var t=e["".concat(a.direction,"Type")];return!(!t||a.ignoreTypes.includes(t))&&(!a.rel||e.rel===a.rel)})),r},rows:function(){if(!(this.loadedResources<1)){var e,t=this.$store.getters["clusterId"],a=this.$store.getters["currentStore"](),r=[],s=P(this.filteredRelationships);try{for(s.s();!(e=s.n()).done;){var n=e.value,i=n.state||"active",o=Object(_["c"])(i,n.error,n.transitioning),l=n["".concat(this.direction,"Type")],c=this.$store.getters["".concat(a,"/schemaFor")](l),u=n["".concat(this.direction,"Id")];if(u){var d=null,p=u.indexOf("/"),v="".concat(l,"/").concat(d,"/").concat(u);p>0&&(d=u.substr(0,p),u=u.substr(p+1));var m={name:"c-cluster-product-resource".concat(d?"-namespace":"","-id"),params:{product:V["a"],cluster:"management"===a?"local":t,resource:l,namespace:d,id:u}};r.push({type:l,real:this.$store.getters["".concat(a,"/byId")](l,n["".concat(this.direction,"Id")]),id:n["".concat(this.direction,"Id")],state:i,metadata:{namespace:d,name:u},_key:v,name:u,namespace:d,nameDisplay:u,nameSort:Object(T["c"])(u).toLowerCase(),stateColor:o,detailLocation:m,typeDisplay:this.$store.getters["type-map/labelFor"](c),stateDisplay:Object(_["e"])(i),stateBackground:o.replace("text-","bg-"),groupByLabel:d})}}}catch(f){s.e(f)}finally{s.f()}return r}},headers:function(){return[D["G"],D["L"],D["p"],D["q"]]}},methods:{getRealResources:function(e){var t=this;return j(i.a.mark((function a(){var r,s,n,o;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.$store.getters["currentStore"](),a.next=3,Promise.allSettled(e.map((function(e){return t.$store.dispatch("".concat(r,"/find"),{type:e.type,id:e.id})})));case 3:for(s=a.sent,n=[],o=0;o<s.length;o++)"fulfilled"===s[o].status&&n.push(s[o].value);return t.loadedResources++,a.abrupt("return",n);case 8:case"end":return a.stop()}}),a)})))()}}},L=A,R=Object(g["a"])(L,O,C,!1,null,null,null),B=R.exports,H={name:"ResourceTabs",components:{Tabbed:p["a"],Tab:o["a"],Conditions:k,SortableTable:h["b"],RelatedResources:B},mixins:[v["a"]],props:{value:{type:Object,default:function(){return{}}},mode:{type:String,default:S["C"]},defaultTab:{type:String,default:null},needConditions:{type:Boolean,default:!0},needEvents:{type:Boolean,default:!0},needRelated:{type:Boolean,default:!0},alwaysShowEvents:{type:Boolean,default:!1}},data:function(){var e=this.$store.getters["currentStore"](x["h"]);return{hasEvents:this.$store.getters["".concat(e,"/schemaFor")](x["h"]),allEvents:[],selectedTab:this.defaultTab,didLoadEvents:!1}},beforeDestroy:function(){this.$store.dispatch("cluster/forgetType",x["h"])},computed:{showConditions:function(){var e,t=this.$store.getters["currentStore"](this.value.type);return this.isView&&this.needConditions&&(null===(e=this.value)||void 0===e?void 0:e.type)&&this.$store.getters["".concat(t,"/pathExistsInSchema")](this.value.type,"status.conditions")},showEvents:function(){return this.isView&&this.needEvents&&this.hasEvents&&(this.events.length||this.alwaysShowEvents)},showRelated:function(){return this.isView&&this.needRelated},eventHeaders:function(){return[{name:"type",label:this.t("tableHeaders.type"),value:"eventType",sort:"eventType"},{name:"reason",label:this.t("tableHeaders.reason"),value:"reason",sort:"reason"},{name:"date",label:this.t("tableHeaders.updated"),value:"date",sort:"date:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125},{name:"message",label:this.t("tableHeaders.message"),value:"message",sort:"message"}]},events:function(){var e=this;return this.allEvents.filter((function(t){var a,r,s;return(null===(a=t.involvedObject)||void 0===a?void 0:a.uid)===(null===(r=e.value)||void 0===r||null===(s=r.metadata)||void 0===s?void 0:s.uid)})).map((function(t){return{reason:"".concat(t.reason||e.t("generic.unknown")).concat(t.count>1?" (".concat(t.count,")"):"").trim(),message:t.message||e.t("generic.unknown"),date:t.lastTimestamp||t.firstTimestamp||t.metadata.creationTimestamp,eventType:t.eventType}}))},conditionsHaveIssues:function(){var e,t;return!!this.showConditions&&(null===(e=this.value.status)||void 0===e||null===(t=e.conditions)||void 0===t?void 0:t.some((function(e){return e.error})))}},methods:{tabChange:function(e){var t=this;if(this.selectedTab=null===e||void 0===e?void 0:e.selectedName,!this.didLoadEvents&&"events"===this.selectedTab){var a=this.$store.getters["currentStore"](x["h"]);this.$store.dispatch("".concat(a,"/findAll"),{type:x["h"]}).then((function(e){t.allEvents=e,t.didLoadEvents=!0}))}}}},F=H,q=Object(g["a"])(F,u,d,!1,null,null,null),K=q.exports,U=a("53fe"),z=a("65b0"),J=a("1832"),G=a("90cd"),Y=a("3811"),W=a("7c47"),X=a("b0bd");function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){ee(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function te(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,s)}function ae(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){te(n,r,s,i,o,"next",e)}function o(e){te(n,r,s,i,o,"throw",e)}i(void 0)}))}}var re={name:"HarvesterVolume",components:{Tab:o["a"],UnitInput:c["a"],CruResource:l["a"],ResourceTabs:K,LabeledSelect:U["a"],NameNsDescription:z["a"]},mixins:[v["a"]],fetch:function(){var e=this;return ae(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("harvester/findAll",{type:G["a"].IMAGE});case 2:case"end":return t.stop()}}),t)})))()},data:function(){var e,t,a,r;this.mode===S["u"]&&(this.value.spec.volumeMode="Block",this.value.spec.accessModes=["ReadWriteMany"]);var s=(null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.resources)||void 0===a||null===(r=a.requests)||void 0===r?void 0:r.storage)||null,n=Object(J["get"])(this.value,'metadata.annotations."'.concat(X["l"].IMAGE_ID,'"')),i=n?"url":"blank";return{source:i,storage:s,imageId:n}},created:function(){this.registerBeforeHook(this.willSave,"willSave")},computed:{isBlank:function(){return"blank"===this.source},isVMImage:function(){return"url"===this.source},sourceOption:function(){return[{value:"blank",label:this.t("harvester.volume.sourceOptions.new")},{value:"url",label:this.t("harvester.volume.sourceOptions.vmImage")}]},interfaceOption:function(){return W["b"]},imageOption:function(){var e=this.$store.getters["harvester/all"](G["a"].IMAGE);return Object(T["b"])(e.filter((function(e){return e.isReady})).map((function(e){return{label:e.spec.displayName,value:e.id}})),"label")}},methods:{willSave:function(){this.update()},update:function(){var e="",t="longhorn";this.isVMImage&&this.imageId?(e=Z(Z({},this.value.metadata.annotations),{},ee({},X["l"].IMAGE_ID,this.imageId)),t="longhorn-".concat(this.imageId.split("/")[1])):e=Z({},this.value.metadata.annotations);var a=Z(Z({},this.value.spec),{},{resources:{requests:{storage:this.storage}},storageClassName:t});this.value.setAnnotations(e),this.$set(this.value,"spec",a)},generateYaml:function(){var e=Object(Y["c"])(this.value);return e}}},se=re,ne=Object(g["a"])(se,r,s,!1,null,null,null);t["default"]=ne.exports},9445:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-862bd32a]:after,.clearfix[data-v-862bd32a]:before{content:" ";display:table}.clearfix[data-v-862bd32a]:after{clear:both}.list-unstyled[data-v-862bd32a]{margin:0;padding:0;list-style-type:none}.no-select[data-v-862bd32a]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-862bd32a]{resize:none}.hand[data-v-862bd32a]{cursor:pointer;cursor:hand}.fixed[data-v-862bd32a]{table-layout:fixed}.clip[data-v-862bd32a]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-862bd32a],.force-wrap[data-v-862bd32a]{word-wrap:break-word}.force-wrap[data-v-862bd32a]{white-space:normal}.bordered-section[data-v-862bd32a]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-862bd32a]{margin-bottom:20px;margin-top:20px}.vip-selector:not(.view) table[data-v-862bd32a]{table-layout:auto}.vip-selector[data-v-862bd32a]  .box{display:grid;grid-template-columns:42% 42% 10%;-moz-column-gap:1.75%;column-gap:1.75%;align-items:center;margin-bottom:10px}.vip-selector .unlabeled-select[data-v-862bd32a],.vip-selector[data-v-862bd32a]  .box .key,.vip-selector[data-v-862bd32a]  .box .value{height:100%}.vip-selector .required[data-v-862bd32a]{color:var(--error)}',""]),e.exports=t},9497:function(e,t,a){"use strict";a("7b95")},"9cc6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col span-12"},[a("LabeledSelect",{attrs:{multiple:!0,"label-key":"nameNsDescription.namespace.label",mode:e.mode,options:e.namespaceOptions},on:{input:e.update},model:{value:e.namespaces,callback:function(t){e.namespaces=t},expression:"namespaces"}})],1)])},s=[],n=a("56d4"),i=a.n(n),o=a("56a4"),l=a("c78c"),c=a("53fe");function u(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,s)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){u(n,r,s,i,o,"next",e)}function o(e){u(n,r,s,i,o,"throw",e)}i(void 0)}))}}var p={name:"HarvesterBundleNamespaces",components:{LabeledSelect:c["a"]},mixins:[l["a"]],fetch:function(){var e=this;return d(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("harvester/findAll",{type:o["t"]});case 2:case"end":return t.stop()}}),t)})))()},data:function(){var e,t,a=[],r=(null===(e=this.value)||void 0===e?void 0:e.value)||(null===(t=this.value)||void 0===t?void 0:t.default)||"";return r&&(a=r.split(",")),{namespaces:a}},computed:{namespaceOptions:function(){return this.$store.getters["harvester/all"](o["t"]).map((function(e){return{label:e.id,value:e.id}}))}},methods:{update:function(){var e=this.namespaces.join(",");this.$set(this.value,"value",e)}},watch:{"value.value":{handler:function(e){e!==this.value.default&&e||(this.namespaces=[])},deep:!0}}},v=p,m=a("d802"),f=Object(m["a"])(v,r,s,!1,null,null,null);t["default"]=f.exports},"9d33":function(e,t,a){var r=a("18a1");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("d4ec42d6",r,!0,{sourceMap:!1,shadowMode:!1})},"9dee":function(e,t,a){"use strict";a("0376")},a54b:function(e,t,a){"use strict";a("bf13")},a6a9:function(e,t,a){var r=a("532a");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("4a101291",r,!0,{sourceMap:!1,shadowMode:!1})},ae5d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CruResource",{attrs:{"done-route":e.doneRoute,mode:e.mode,resource:e.value,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.save,cancel:e.done}},[a("NameNsDescription",{attrs:{mode:e.mode,namespaced:!0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("Tabbed",{attrs:{"side-tabs":!0}},[a("Tab",{attrs:{name:"basics",label:e.t("harvester.host.tabs.basics"),weight:1}},[a("div",{staticClass:"mb-20"},[a("LabeledSelect",{attrs:{label:e.t("harvester.cloudTemplate.templateType"),disabled:!e.isCreate,options:e.types},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),a("div",{staticClass:"resource-yaml"},[a("YamlEditor",{ref:"yamlUser",staticClass:"yaml-editor",attrs:{"editor-mode":"view"===e.mode?"VIEW_CODE":"EDIT_CODE"},on:{onChanges:e.update},model:{value:e.config,callback:function(t){e.config=t},expression:"config"}})],1)])],1)],1)},s=[],n=a("ad61"),i=a("5ef9"),o=a("2e2b"),l=a("53fe"),c=a("65b0"),u=a("c349"),d=a("c78c"),p=a("b0bd");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h={name:"HarvesterEditCloudTemplate",components:{Tab:i["a"],Tabbed:n["a"],YamlEditor:u["b"],CruResource:o["a"],LabeledSelect:l["a"],NameNsDescription:c["a"]},mixins:[d["a"]],data:function(){var e,t,a,r;return{config:(null===(e=this.value.data)||void 0===e?void 0:e.cloudInit)||"",type:(null===(t=this.value)||void 0===t||null===(a=t.metadata)||void 0===a||null===(r=a.labels)||void 0===r?void 0:r[p["l"].CLOUD_INIT])||"user"}},computed:{types:function(){return[{label:"User Data",value:"user"},{label:"Network Data",value:"network"}]}},created:function(){this.registerBeforeHook&&this.registerBeforeHook(this.updateBeforeSave)},methods:{update:function(){this.value.data={cloudInit:this.config}},updateBeforeSave:function(){this.isCreate&&(this.value.metadata.labels=m(m({},this.value.metadata.labels),{},f({},p["l"].CLOUD_INIT,this.type)),this.value.data={cloudInit:this.config})}}},b=h,y=(a("2785"),a("d802")),g=Object(y["a"])(b,r,s,!1,null,"24d29898",null);t["default"]=g.exports},b239:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-65e6855e]:after,.clearfix[data-v-65e6855e]:before{content:" ";display:table}.clearfix[data-v-65e6855e]:after{clear:both}.list-unstyled[data-v-65e6855e]{margin:0;padding:0;list-style-type:none}.no-select[data-v-65e6855e]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-65e6855e]{resize:none}.hand[data-v-65e6855e]{cursor:pointer;cursor:hand}.fixed[data-v-65e6855e]{table-layout:fixed}.clip[data-v-65e6855e]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-65e6855e],.force-wrap[data-v-65e6855e]{word-wrap:break-word}.force-wrap[data-v-65e6855e]{white-space:normal}.bordered-section[data-v-65e6855e]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-65e6855e]{margin-bottom:20px;margin-top:20px}.header[data-v-65e6855e]{display:flex;justify-content:flex-end}',""]),e.exports=t},b3eb:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-15e6fe06]:after,.clearfix[data-v-15e6fe06]:before{content:" ";display:table}.clearfix[data-v-15e6fe06]:after{clear:both}.list-unstyled[data-v-15e6fe06]{margin:0;padding:0;list-style-type:none}.no-select[data-v-15e6fe06]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-15e6fe06]{resize:none}.hand[data-v-15e6fe06]{cursor:pointer;cursor:hand}.fixed[data-v-15e6fe06]{table-layout:fixed}.clip[data-v-15e6fe06]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-15e6fe06],.force-wrap[data-v-15e6fe06]{word-wrap:break-word}.force-wrap[data-v-15e6fe06]{white-space:normal}.bordered-section[data-v-15e6fe06]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-15e6fe06]{margin-bottom:20px;margin-top:20px}.close[data-v-15e6fe06]{top:10px;right:10px;padding:0;position:absolute}.disk[data-v-15e6fe06]{position:relative}.disk .secret-name[data-v-15e6fe06]{height:61px}.disk[data-v-15e6fe06]:not(:last-of-type){padding-bottom:10px;margin-bottom:30px}.flex[data-v-15e6fe06]{display:flex;justify-content:space-between}.badge-state[data-v-15e6fe06]{padding:2px 5px}',""]),e.exports=t},b61d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"can-yaml":!!e.showEditAsYaml,"apply-hooks":e.applyHooks},on:{finish:e.saveImage}},[a("NameNsDescription",{ref:"nd",attrs:{mode:e.mode,label:e.t("generic.name"),"name-key":"spec.displayName"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0}},"Tabbed",e.$attrs,!1),[a("Tab",{staticClass:"bordered-table",attrs:{name:"basic",label:e.t("harvester.image.tabs.basics"),weight:3}},[e.isCreate?a("RadioGroup",{attrs:{name:"model",options:["download","upload"],labels:[e.t("harvester.image.sourceType.download"),e.t("harvester.image.sourceType.upload")],mode:e.mode},model:{value:e.value.spec.sourceType,callback:function(t){e.$set(e.value.spec,"sourceType",t)},expression:"value.spec.sourceType"}}):e._e(),a("div",{staticClass:"row mb-20 mt-20"},[e.isCreateEdit?a("div",{staticClass:"col span-12"},[e.isEdit?a("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,disabled:e.isEdit,"label-key":"harvester.image.source"},model:{value:e.value.spec.sourceType,callback:function(t){e.$set(e.value.spec,"sourceType",t)},expression:"value.spec.sourceType"}}):e._e(),"download"===e.value.spec.sourceType?a("LabeledInput",{staticClass:"labeled-input--tooltip",attrs:{mode:e.mode,disabled:e.isEdit,required:"","label-key":"harvester.image.url",tooltip:e.t("harvester.image.urlTip",{},!0)},model:{value:e.value.spec.url,callback:function(t){e.$set(e.value.spec,"url",t)},expression:"value.spec.url"}}):a("div",[e.isCreate?a("button",{staticClass:"btn role-primary",attrs:{type:"button"},on:{click:e.selectFile}},[a("span",[e._v(" "+e._s(e.t("harvester.image.uploadFile"))+" ")]),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file",attrs:{id:"file",type:"file",accept:".qcow, .qcow2, .raw, .img, .iso"},on:{change:function(t){return e.handleFileUpload()}}})]):e._e(),e.uploadFileName?a("div",{staticClass:"fileName mt-5"},[a("span",{staticClass:"icon icon-file"}),e._v(" "+e._s(e.uploadFileName)+" ")]):e._e()])],1):a("div",{staticClass:"col span-12"},[a("LabelValue",{attrs:{name:e.t("harvester.image.fileName"),value:e.imageName}})],1)])],1),a("Tab",{staticClass:"bordered-table",attrs:{name:"labels",label:e.t("labels.labels.title"),weight:2}},[a("KeyValue",{key:"labels",ref:"labels",attrs:{value:e.value.labels,"add-label":e.t("labels.addLabel"),mode:e.mode,"pad-left":!1,"read-allowed":!1},on:{focusKey:e.focusKey,input:function(t){return e.value.setLabels(t)}},scopedSlots:e._u([{key:"key",fn:function(t){var r=t.row,s=t.keyName,n=t.queueUpdate;return[a("input",{directives:[{name:"model",rawName:"v-model",value:r[s],expression:"row[keyName]"}],ref:"key",attrs:{placeholder:e.t("keyValue.keyPlaceholder")},domProps:{value:r[s]},on:{input:[function(t){t.target.composing||e.$set(r,s,t.target.value)},n]}})]}},{key:"value",fn:function(t){var r=t.row,s=t.keyName,n=t.valueName,i=t.queueUpdate;return[e.internalAnnotations(r)?a("Select",{attrs:{searchable:!0,clearable:!1,options:e.calculateOptions(r[s])},on:{input:i},model:{value:r[n],callback:function(t){e.$set(r,n,t)},expression:"row[valueName]"}}):a("input",{directives:[{name:"model",rawName:"v-model",value:r[n],expression:"row[valueName]"}],attrs:{disabled:e.isView,placeholder:e.t("keyValue.valuePlaceholder"),autocorrect:"off",autocapitalize:"off",spellcheck:"false",type:"text"},domProps:{value:r[n]},on:{input:[function(t){t.target.composing||e.$set(r,n,t.target.value)},i]}})]}}])})],1)],1)],1)},s=[],n=a("56d4"),i=a.n(n),o=a("2e2b"),l=a("ad61"),c=a("5ef9"),u=a("d444"),d=a("2958"),p=a("65b0"),v=a("f032"),m=a("eb32"),f=a("81a6"),h=a("c78c"),b=a("6834"),y=a("afa6"),g=a("b0bd"),w=a("3792");function k(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(w){return void a(w)}o.done?t(l):Promise.resolve(l).then(r,s)}function x(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){k(n,r,s,i,o,"next",e)}function o(e){k(n,r,s,i,o,"throw",e)}i(void 0)}))}}var S="download",O="upload",C="raw_qcow2",N={name:"EditImage",components:{Tab:c["a"],Tabbed:l["a"],KeyValue:d["a"],Select:f["a"],CruResource:o["a"],LabeledInput:u["a"],NameNsDescription:p["a"],RadioGroup:v["b"],LabelValue:m["a"]},mixins:[h["a"]],props:{value:{type:Object,required:!0}},data:function(){return this.value.spec||this.$set(this.value,"spec",{sourceType:S}),this.value.metadata.name||(this.value.metadata.generateName="image-"),{url:this.value.spec.url,files:[],resource:"",headers:{},fileUrl:"",file:""}},computed:{uploadFileName:function(){var e;return(null===(e=this.file)||void 0===e?void 0:e.name)||""},imageName:function(){var e,t,a;return(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t||null===(a=t.annotations)||void 0===a?void 0:a[g["l"].IMAGE_NAME])||"-"},isCreateEdit:function(){return this.isCreate||this.isEdit},showEditAsYaml:function(){return this.value.spec.sourceType===S}},watch:{"value.spec.url":function(e){var t=this,a=e.trim(),r=a.split("/").pop(),s=r.split(".").pop().toLowerCase();this.value.spec.url=a,y["a"].includes(s)&&(Object.keys(this.value.labels).forEach((function(e,a){e===g["l"].IMAGE_SUFFIX&&t.$refs.labels.remove(a)})),"iso"===s?this.$refs.labels.add(g["l"].IMAGE_SUFFIX,s):this.$refs.labels.add(g["l"].IMAGE_SUFFIX,C),this.value.spec.displayName||this.$refs.nd.changeNameAndNamespace({text:r,selected:this.value.metadata.namespace}));var n=this.getOSType(a);n&&(Object.keys(this.value.labels).forEach((function(e,a){e===g["l"].OS_TYPE&&t.$refs.labels.remove(a)})),this.$refs.labels.add(g["l"].OS_TYPE,n.value))},"value.spec.sourceType":function(){var e,t;this.$set(this,"file",null),this.url="",null!==(e=this.$refs)&&void 0!==e&&null!==(t=e.file)&&void 0!==t&&t.value&&(this.$refs.file.value=null)}},methods:{saveImage:function(e){var t=this;return x(i.a.mark((function a(){var r,s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.value.spec.displayName=(t.value.spec.displayName||"").trim(),t.value.spec.sourceType!==O||!t.isCreate){a.next=20;break}return a.prev=2,t.value.spec.url="",r=t.file,t.value.metadata.annotations[g["l"].IMAGE_NAME]=null===r||void 0===r?void 0:r.name,a.next=8,t.value.save();case 8:s=a.sent,s.uploadImage(r),e(!0),t.done(),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](2),t.errors=Object(w["c"])(a.t0),e(!1);case 18:a.next=21;break;case 20:t.save(e);case 21:case"end":return a.stop()}}),a,null,[[2,14]])})))()},handleFileUpload:function(){var e=this.$refs.file.files[0];this.file=e,this.value.spec.displayName||this.$refs.nd.changeNameAndNamespace({text:null===e||void 0===e?void 0:e.name,selected:this.value.metadata.namespace})},selectFile:function(){this.$refs.file.value=null,this.$refs.file.click()},internalAnnotations:function(e){var t=[g["l"].OS_TYPE,g["l"].IMAGE_SUFFIX];return t.find((function(t){return t===e.key}))},calculateOptions:function(e){return e===g["l"].OS_TYPE?b["b"]:e===g["l"].IMAGE_SUFFIX?[{label:"ISO",value:"iso"},{label:"raw/qcow2",value:C}]:[]},focusKey:function(){this.$refs.key.focus()},getOSType:function(e){if(e)return b["b"].find((function(t){return t.match?!!t.match.find((function(t){return e.toLowerCase().includes(t)}))&&t.value:!!e.toLowerCase().includes(t.value.toLowerCase())&&t.value}))}}},_=N,D=a("d802"),T=Object(D["a"])(_,r,s,!1,null,null,null);t["default"]=T.exports},b82b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6"},[a("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],attrs:{label:e.t("harvester.virtualMachine.input.reservedMemory"),mode:e.mode,"input-exponent":2,increment:1024,"output-modifier":!0},on:{input:e.change},model:{value:e.memory,callback:function(t){e.memory=t},expression:"memory"}})],1)])},s=[],n=a("2007"),i={name:"HarvesterReserved",components:{UnitInput:n["a"]},props:{reservedMemory:{type:String,default:null},mode:{type:String,default:"create"}},data:function(){return{memory:this.reservedMemory}},watch:{reservedMemory:function(e){this.memory=e}},methods:{change:function(){var e=this.memory;this.$emit("updateReserved",{memory:e})}}},o=i,l=a("d802"),c=Object(l["a"])(o,r,s,!1,null,null,null);t["default"]=c.exports},b852:function(e,t,a){var r={"./additional-ca.vue":"0914","./backup-target.vue":"59d1","./http-proxy.vue":"1872","./overcommit-config.vue":"8f33","./ssl-certificates.vue":"5a4c","./ssl-parameters.vue":"3fc1","./support-bundle-image.vue":"ffb2","./support-bundle-namespaces.vue":"9cc6","./vip-pools.vue":"f696","./vm-force-reset-policy.vue":"91ed"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=n,e.exports=s,s.id="b852"},bb351:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.save}},[a("div",{staticClass:"header mb-20"},[e.isCreate?a("FileSelector",{staticClass:"btn btn-sm bg-primary mt-10",attrs:{label:e.t("generic.readFromFile"),accept:".pub"},on:{selected:e.onKeySelected}}):e._e()],1),a("NameNsDescription",{key:e.randomString,ref:"nd",attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0}},"Tabbed",e.$attrs,!1),[a("Tab",{staticClass:"bordered-table",attrs:{name:"basic",label:e.t("harvester.sshKey.tabs.basics"),weight:1}},[a("LabeledInput",{attrs:{type:"multiline",mode:e.mode,"min-height":160,label:e.t("harvester.sshKey.keypair"),required:""},model:{value:e.publicKey,callback:function(t){e.publicKey=t},expression:"publicKey"}})],1)],1)],1)},s=[],n=a("ad61"),i=a("5ef9"),o=a("2e2b"),l=a("d444"),c=a("65b0"),u=a("3204"),d=a("06f6"),p=a("c78c"),v={name:"HarvesterEditKeypair",components:{Tab:i["a"],Tabbed:n["a"],CruResource:o["a"],LabeledInput:l["a"],FileSelector:u["b"],NameNsDescription:c["a"]},mixins:[p["a"]],props:{value:{type:Object,required:!0}},data:function(){return this.value.spec||(this.value.spec={},this.value.metadata={name:""}),{publicKey:this.value.spec.publicKey||"",randomString:""}},watch:{publicKey:function(e){this.value.spec.publicKey=e;var t=e.split(/\s+/);3===t.length&&t[2].includes("@")&&!this.value.metadata.name&&(this.value.metadata.name=t[2].split("@")[0],this.randomString=Object(d["p"])(10).toLowerCase())}},methods:{onKeySelected:Object(u["a"])("publicKey")}},m=v,f=(a("c3e9"),a("d802")),h=Object(f["a"])(m,r,s,!1,null,"65e6855e",null);t["default"]=h.exports},bf13:function(e,t,a){var r=a("628d");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("3ff49901",r,!0,{sourceMap:!1,shadowMode:!1})},c3e9:function(e,t,a){"use strict";a("3cf2")},d10e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v(e._s(e.t("harvester.setting.harvesterMonitoring.section.prometheus")))]),a("div",{staticClass:"row"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.scrape"),tooltip:e.t("harvester.setting.harvesterMonitoring.tips.scrape"),required:!0,mode:e.mode},model:{value:e.value.spec.values.prometheus.prometheusSpec.scrapeInterval,callback:function(t){e.$set(e.value.spec.values.prometheus.prometheusSpec,"scrapeInterval",t)},expression:"value.spec.values.prometheus.prometheusSpec.scrapeInterval"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.evaluation"),tooltip:e.t("harvester.setting.harvesterMonitoring.tips.evaluation"),required:!0,mode:e.mode},model:{value:e.value.spec.values.prometheus.prometheusSpec.evaluationInterval,callback:function(t){e.$set(e.value.spec.values.prometheus.prometheusSpec,"evaluationInterval",t)},expression:"value.spec.values.prometheus.prometheusSpec.evaluationInterval"}})],1)]),a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.retention"),tooltip:e.t("harvester.setting.harvesterMonitoring.tips.retention"),required:!0,mode:e.mode},model:{value:e.value.spec.values.prometheus.prometheusSpec.retention,callback:function(t){e.$set(e.value.spec.values.prometheus.prometheusSpec,"retention",t)},expression:"value.spec.values.prometheus.prometheusSpec.retention"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.retentionSize"),tooltip:e.t("harvester.setting.harvesterMonitoring.tips.retentionSize"),required:!0,mode:e.mode},model:{value:e.value.spec.values.prometheus.prometheusSpec.retentionSize,callback:function(t){e.$set(e.value.spec.values.prometheus.prometheusSpec,"retentionSize",t)},expression:"value.spec.values.prometheus.prometheusSpec.retentionSize"}})],1)]),a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-12 mt-5"},[a("h4",{staticClass:"mb-0"},[e._v(" "+e._s(e.t("monitoring.prometheus.config.resourceLimits"))+" ")])])]),a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.cpu"),required:!0,mode:e.mode},model:{value:e.value.spec.values.prometheus.prometheusSpec.resources.requests.cpu,callback:function(t){e.$set(e.value.spec.values.prometheus.prometheusSpec.resources.requests,"cpu",t)},expression:"value.spec.values.prometheus.prometheusSpec.resources.requests.cpu"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.memory"),required:!0,mode:e.mode},model:{value:e.value.spec.values.prometheus.prometheusSpec.resources.requests.memory,callback:function(t){e.$set(e.value.spec.values.prometheus.prometheusSpec.resources.requests,"memory",t)},expression:"value.spec.values.prometheus.prometheusSpec.resources.requests.memory"}})],1)]),a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.cpu"),required:!0,mode:e.mode},model:{value:e.value.spec.values.prometheus.prometheusSpec.resources.limits.cpu,callback:function(t){e.$set(e.value.spec.values.prometheus.prometheusSpec.resources.limits,"cpu",t)},expression:"value.spec.values.prometheus.prometheusSpec.resources.limits.cpu"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.memory"),required:!0,mode:e.mode},model:{value:e.value.spec.values.prometheus.prometheusSpec.resources.limits.memory,callback:function(t){e.$set(e.value.spec.values.prometheus.prometheusSpec.resources.limits,"memory",t)},expression:"value.spec.values.prometheus.prometheusSpec.resources.limits.memory"}})],1)]),a("hr",{staticClass:"divider mt-30 mb-20"}),a("h3",[e._v(e._s(e.t("harvester.setting.harvesterMonitoring.section.prometheusNodeExporter")))]),a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.cpu"),required:!0,mode:e.mode},model:{value:e.prometheusNodeExporter.resources.limits.cpu,callback:function(t){e.$set(e.prometheusNodeExporter.resources.limits,"cpu",t)},expression:"prometheusNodeExporter.resources.limits.cpu"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.memory"),required:!0,mode:e.mode},model:{value:e.prometheusNodeExporter.resources.limits.memory,callback:function(t){e.$set(e.prometheusNodeExporter.resources.limits,"memory",t)},expression:"prometheusNodeExporter.resources.limits.memory"}})],1)]),a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.cpu"),required:!0,mode:e.mode},model:{value:e.prometheusNodeExporter.resources.requests.cpu,callback:function(t){e.$set(e.prometheusNodeExporter.resources.requests,"cpu",t)},expression:"prometheusNodeExporter.resources.requests.cpu"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.memory"),required:!0,mode:e.mode},model:{value:e.prometheusNodeExporter.resources.requests.memory,callback:function(t){e.$set(e.prometheusNodeExporter.resources.requests,"memory",t)},expression:"prometheusNodeExporter.resources.requests.memory"}})],1)])])},s=[],n=a("d444"),i=a("c78c"),o={name:"EditHarvesterMonitoring",components:{LabeledInput:n["a"]},mixins:[i["a"]],props:{value:{type:Object,required:!0}},data:function(){return{}},created:function(){var e,t,a,r,s=this.value.spec.values.prometheus.prometheusSpec.resources;null!==s&&void 0!==s&&s.limits||this.$set(s,"limits",{}),this.$set(s.requests,"cpu",(null===s||void 0===s||null===(e=s.requests)||void 0===e?void 0:e.cpu)||""),this.$set(s.requests,"memory",(null===s||void 0===s||null===(t=s.requests)||void 0===t?void 0:t.memory)||""),this.$set(s.limits,"cpu",(null===s||void 0===s||null===(a=s.limits)||void 0===a?void 0:a.cpu)||""),this.$set(s.limits,"memory",(null===s||void 0===s||null===(r=s.limits)||void 0===r?void 0:r.memory)||"")},computed:{doneLocationOverride:function(){return this.value.listLocation},prometheusNodeExporter:function(){return this.value.spec.values["prometheus-node-exporter"]}}},l=o,c=a("d802"),u=Object(c["a"])(l,r,s,!1,null,null,null);t["default"]=u.exports},d193:function(e,t,a){"use strict";a("a6a9")},d1f6:function(e,t,a){"use strict";a("9d33")},d8d6:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-23677b58]:after,.clearfix[data-v-23677b58]:before{content:" ";display:table}.clearfix[data-v-23677b58]:after{clear:both}.list-unstyled[data-v-23677b58]{margin:0;padding:0;list-style-type:none}.no-select[data-v-23677b58]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-23677b58]{resize:none}.hand[data-v-23677b58]{cursor:pointer;cursor:hand}.fixed[data-v-23677b58]{table-layout:fixed}.clip[data-v-23677b58]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-23677b58],.force-wrap[data-v-23677b58]{word-wrap:break-word}.force-wrap[data-v-23677b58]{white-space:normal}.bordered-section[data-v-23677b58]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-23677b58]{margin-bottom:20px;margin-top:20px}#restore[data-v-23677b58]{flex-grow:1;flex-direction:column}#restore[data-v-23677b58],#restore[data-v-23677b58]  .radio-group{display:flex}#restore[data-v-23677b58]  .radio-group .radio-container{margin-right:30px}#restore .content[data-v-23677b58]{flex-grow:1}#restore .footer[data-v-23677b58]{border-top:var(--header-border-size) solid var(--header-border);margin-left:-20px;margin-right:-20px;margin-bottom:-20px;padding:10px 20px}#restore .footer[data-v-23677b58]  .spacer-small{padding:0}',""]),e.exports=t},ee1c:function(e,t,a){"use strict";a("f62d")},f004:function(e,t,a){var r=a("6f57");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("219d1760",r,!0,{sourceMap:!1,shadowMode:!1})},f11e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.saveNetwork}},[a("NameNsDescription",{ref:"nd",attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0}},"Tabbed",e.$attrs,!1),[a("Tab",{staticClass:"bordered-table",attrs:{name:"basics",label:e.t("harvester.network.tabs.basics"),weight:99}},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.fields.type"),disabled:!0,required:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("LabeledInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{required:"",type:"number",placeholder:"e.g. 1-4094",label:e.t("tableHeaders.networkVlan"),mode:e.mode},on:{input:e.input},model:{value:e.config.vlan,callback:function(t){e.$set(e.config,"vlan",e._n(t))},expression:"config.vlan"}})],1),a("Tab",{staticClass:"bordered-table",attrs:{name:"layer3Network",label:e.t("harvester.network.tabs.layer3Network"),weight:98}},[a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("RadioGroup",{attrs:{name:"layer3NetworkMode",label:e.t("harvester.network.layer3Network.mode.label"),mode:e.mode,options:e.modeOptions},model:{value:e.layer3Network.mode,callback:function(t){e.$set(e.layer3Network,"mode",t)},expression:"layer3Network.mode"}})],1)]),"auto"===e.layer3Network.mode?a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.network.layer3Network.serverIPAddr.label"),mode:e.mode},model:{value:e.layer3Network.serverIPAddr,callback:function(t){e.$set(e.layer3Network,"serverIPAddr",t)},expression:"layer3Network.serverIPAddr"}})],1)]):a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.network.layer3Network.cidr.label"),placeholder:e.t("harvester.network.layer3Network.cidr.placeholder"),mode:e.mode,required:""},model:{value:e.layer3Network.cidr,callback:function(t){e.$set(e.layer3Network,"cidr",t)},expression:"layer3Network.cidr"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.network.layer3Network.gateway.label"),placeholder:e.t("harvester.network.layer3Network.gateway.placeholder"),mode:e.mode,required:""},model:{value:e.layer3Network.gateway,callback:function(t){e.$set(e.layer3Network,"gateway",t)},expression:"layer3Network.gateway"}})],1)])])],1)],1)},s=[],n=a("56d4"),i=a.n(n),o=a("ad61"),l=a("5ef9"),c=a("2e2b"),u=a("d444"),d=a("f032"),p=a("65b0"),v=a("b0bd"),m=a("c78c");function f(e,t,a,r,s,n,i){try{var o=e[n](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,s)}function h(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){f(n,r,s,i,o,"next",e)}function o(e){f(n,r,s,i,o,"throw",e)}i(void 0)}))}}var b="auto",y="manual",g={components:{Tab:l["a"],Tabbed:o["a"],CruResource:c["a"],LabeledInput:u["a"],NameNsDescription:p["a"],RadioGroup:d["b"]},mixins:[m["a"]],props:{value:{type:Object,required:!0}},data:function(){var e,t,a=JSON.parse(this.value.spec.config),r=(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.annotations)||{},s=JSON.parse(r[v["l"].NETWORK_ROUTE]||"{}");return{config:a,type:"L2VlanNetwork",layer3Network:{mode:s.mode||b,serverIPAddr:s.serverIPAddr||"",cidr:s.cidr||"",gateway:s.gateway||""}}},created:function(){this.registerBeforeHook&&this.registerBeforeHook(this.updateBeforeSave)},computed:{modeOptions:function(){return[{label:this.t("harvester.network.layer3Network.mode.auto"),value:b},{label:this.t("harvester.network.layer3Network.mode.manual"),value:y}]}},methods:{saveNetwork:function(e){var t=this;return h(i.a.mark((function a(){var r;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=[],t.config.vlan||r.push(t.$store.getters["i18n/t"]("validation.required",{key:t.t("tableHeaders.networkVlan")})),t.layer3Network.mode===y&&(t.layer3Network.gateway||r.push(t.$store.getters["i18n/t"]("validation.required",{key:t.t("harvester.network.layer3Network.gateway.label")})),t.layer3Network.cidr||r.push(t.$store.getters["i18n/t"]("validation.required",{key:t.t("harvester.network.layer3Network.cidr.label")}))),!(r.length>0)){a.next=7;break}return e(!1),t.errors=r,a.abrupt("return",!1);case 7:return t.value.setAnnotation(v["l"].NETWORK_ROUTE,JSON.stringify(t.layer3Network)),a.next=10,t.save(e);case 10:case"end":return a.stop()}}),a)})))()},input:function(e){var t=/^([1-9]|[1-9][0-9]{1,2}|[1-3][0-9]{3}|40[0-9][0-4])$/;t.test(e)||""===e||(this.config.vlan=e>4094?4094:1)},updateBeforeSave:function(){this.value.setLabel(v["l"].NETWORK_TYPE,this.type),this.config.name=this.value.metadata.name,this.value.spec.config=JSON.stringify(this.config)}}},w=g,k=a("d802"),x=Object(k["a"])(w,r,s,!1,null,null,null);t["default"]=x.exports},f157:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-a72cd38a]:after,.clearfix[data-v-a72cd38a]:before{content:" ";display:table}.clearfix[data-v-a72cd38a]:after{clear:both}.list-unstyled[data-v-a72cd38a]{margin:0;padding:0;list-style-type:none}.no-select[data-v-a72cd38a]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-a72cd38a]{resize:none}.hand[data-v-a72cd38a]{cursor:pointer;cursor:hand}.fixed[data-v-a72cd38a]{table-layout:fixed}.clip[data-v-a72cd38a]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-a72cd38a],.force-wrap[data-v-a72cd38a]{word-wrap:break-word}.force-wrap[data-v-a72cd38a]{white-space:normal}.bordered-section[data-v-a72cd38a]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-a72cd38a]{margin-bottom:20px;margin-top:20px}[data-v-a72cd38a] .radio-group{display:flex}[data-v-a72cd38a] .radio-group .radio-container{margin-right:30px}',""]),e.exports=t},f558:function(e,t,a){"use strict";a("4c67")},f607:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-8d54d24c]:after,.clearfix[data-v-8d54d24c]:before{content:" ";display:table}.clearfix[data-v-8d54d24c]:after{clear:both}.list-unstyled[data-v-8d54d24c]{margin:0;padding:0;list-style-type:none}.no-select[data-v-8d54d24c]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-8d54d24c]{resize:none}.hand[data-v-8d54d24c]{cursor:pointer;cursor:hand}.fixed[data-v-8d54d24c]{table-layout:fixed}.clip[data-v-8d54d24c]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-8d54d24c],.force-wrap[data-v-8d54d24c]{word-wrap:break-word}.force-wrap[data-v-8d54d24c]{white-space:normal}.bordered-section[data-v-8d54d24c]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-8d54d24c]{margin-bottom:20px;margin-top:20px}#vm[data-v-8d54d24c]  .vm-radio-group .radio-group{display:flex}#vm[data-v-8d54d24c]  .vm-radio-group .radio-group .radio-container{margin-right:30px}#vm .restart[data-v-8d54d24c]{display:flex;justify-content:flex-end}#vm .banner-right[data-v-8d54d24c]{width:auto;display:flex;justify-items:center}',""]),e.exports=t},f62d:function(e,t,a){var r=a("1d70");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=a("0ed3").default;s("736916ea",r,!0,{sourceMap:!1,shadowMode:!1})},f696:function(e,t,a){"use strict";a.r(t);var r=function(){var e,t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"vip-selector",class:(e={},e[t.mode]=!0,e),on:{input:t.update}},[r("ArrayList",{attrs:{"show-header":!0,"default-add-value":t.defaultAddValue,mode:t.mode,"add-label":t.t("harvester.vip.add.label")},on:{input:t.update},scopedSlots:t._u([{key:"column-headers",fn:function(){return[r("div",{staticClass:"box"},[r("div",{staticClass:"key"},[t._v(" "+t._s(t.t("harvester.vip.namespace.label"))+" "),r("span",{staticClass:"required"},[t._v("*")])]),r("div",{staticClass:"value"},[t._v(" "+t._s(t.t("harvester.vip.cidr.label"))+" "),r("span",{staticClass:"required"},[t._v("*")])]),r("div")])]},proxy:!0},{key:"columns",fn:function(e){return[r("div",{staticClass:"key"},[r("LabeledSelect",{attrs:{mode:t.mode,options:t.filteredNamespaces},on:{input:t.update},model:{value:e.row.value.key,callback:function(a){t.$set(e.row.value,"key",a)},expression:"scope.row.value.key"}})],1),r("div",{staticClass:"value"},[r("LabeledInput",{attrs:{mode:t.mode},on:{input:t.update},model:{value:e.row.value.value,callback:function(a){t.$set(e.row.value,"value",a)},expression:"scope.row.value.value"}})],1)]}}]),model:{value:t.vips,callback:function(e){t.vips=e},expression:"vips"}})],1)},s=[],n=a("d444"),i=a("81a6"),o=a("da9e"),l=a("56a4"),c=a("d6a6"),u=a("e411");function d(e){return f(e)||m(e)||v(e)||p()}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(e){if("string"===typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function m(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var b="global",y={name:"HarvesterEditVip",components:{LabeledInput:n["a"],LabeledSelect:i["a"],ArrayList:o["a"]},props:{registerBeforeHook:{type:Function,required:!0},mode:{type:String,default:c["w"]},value:{type:Object,default:function(){return{}}}},data:function(){var e={};try{e=JSON.parse(this.value.value)}catch(a){e=JSON.parse(this.value.default||"{}")}var t=Object.keys(e).map((function(t){return{key:t,value:e[t]}}))||[];return{errors:[],vips:t,defaultAddValue:{key:"",value:""}}},created:function(){this.registerBeforeHook&&this.registerBeforeHook(this.willSave,"willSave")},computed:{namespaces:function(){var e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters["".concat(e,"/all")](l["t"]),a={label:b,value:b},r=t.filter((function(e){return!e.isSystem&&!e.isFleetManaged})).map((function(e){return{label:e.id,value:e.id}}));return[a].concat(d(r))},selectedNamespaces:function(){return this.vips.map((function(e){return e.key}))||[]},filteredNamespaces:function(){var e=this;return this.namespaces.filter((function(t){return!e.selectedNamespaces.includes(t.value)}))}},methods:{update:function(){var e={};this.vips.map((function(t){e["".concat(t.key)]=t.value}));var t=JSON.stringify(e);this.$set(this.value,"value",t)},willSave:function(){var e=this,t=[];return this.vips.map((function(a){if(a.key||t.push(e.t("validation.required",{key:e.t("harvester.vip.namespace.label")},!0)),a.value){var r=!!/^(?:(?:[0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}(?:[0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([1-9]|[1-2]\d|3[0-2])$/.test(a.value);r||t.push(e.t("harvester.vip.cidr.invalid",null,!0))}else t.push(e.t("validation.required",{key:e.t("harvester.vip.cidr.label")},!0))})),t=Object(u["k"])(t),t.length>0?Promise.reject(t):Promise.resolve()}},watch:{value:{handler:function(e){var t={};try{t=JSON.parse(e.value)}catch(r){t=JSON.parse(this.value.default||"{}")}var a=Object.keys(t).map((function(e){return{key:e,value:t[e]}}))||[];this.$set(this,"vips",a),this.update()},deep:!0}}},g=y,w=(a("1cf1"),a("d802")),k=Object(w["a"])(g,r,s,!1,null,"862bd32a",null);t["default"]=k.exports},f98e:function(e,t,a){var r={"./additional-ca.vue":"0914","./backup-target.vue":"59d1","./http-proxy.vue":"1872","./overcommit-config.vue":"8f33","./ssl-certificates.vue":"5a4c","./ssl-parameters.vue":"3fc1","./support-bundle-image.vue":"ffb2","./support-bundle-namespaces.vue":"9cc6","./vip-pools.vue":"f696","./vm-force-reset-policy.vue":"91ed"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=n,e.exports=s,s.id="f98e"},ffb2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row",on:{input:e.update}},[a("div",{staticClass:"col span-12"},[[a("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,required:"","label-key":"harvester.setting.supportBundleImage.repo"},model:{value:e.parseDefaultValue.repository,callback:function(t){e.$set(e.parseDefaultValue,"repository",t)},expression:"parseDefaultValue.repository"}}),a("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,required:"","label-key":"harvester.setting.supportBundleImage.tag"},model:{value:e.parseDefaultValue.tag,callback:function(t){e.$set(e.parseDefaultValue,"tag",t)},expression:"parseDefaultValue.tag"}}),a("LabeledSelect",{staticClass:"mb-20",attrs:{required:"","label-key":"harvester.setting.supportBundleImage.imagePullPolicy",options:e.imagePolicyOptions},on:{input:e.update},model:{value:e.parseDefaultValue.imagePullPolicy,callback:function(t){e.$set(e.parseDefaultValue,"imagePullPolicy",t)},expression:"parseDefaultValue.imagePullPolicy"}})]],2)])},s=[],n=a("d6a6"),i=a("d444"),o=a("53fe"),l={name:"HarvesterSupportBundleImage",components:{LabeledInput:i["a"],LabeledSelect:o["a"]},props:{registerBeforeHook:{type:Function,required:!0},mode:{type:String,default:n["w"]},value:{type:Object,default:function(){return{}}}},data:function(){var e={};try{e=JSON.parse(this.value.value)}catch(t){e=JSON.parse(this.value.default)}return{parseDefaultValue:e}},created:function(){this.update(),this.registerBeforeHook&&this.registerBeforeHook(this.willSave,"willSave")},computed:{imagePolicyOptions:function(){return[{label:this.t("generic.imagePullPolicy.always"),value:"Always"},{label:this.t("generic.imagePullPolicy.ifNotPresent"),value:"IfNotPresent"},{label:this.t("generic.imagePullPolicy.never"),value:"Never"}]}},methods:{update:function(){var e=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",e)},willSave:function(){var e=[];return this.parseDefaultValue.repository||e.push(this.t("validation.required",{key:this.t("harvester.setting.supportBundleImage.repo")},!0)),this.parseDefaultValue.tag||e.push(this.t("validation.required",{key:this.t("harvester.setting.supportBundleImage.tag")},!0)),e.length>0?Promise.reject(e):Promise.resolve()}},watch:{value:{handler:function(e){var t=JSON.parse(e.value);this.$set(this,"parseDefaultValue",t)},deep:!0}}},c=l,u=a("d802"),d=Object(u["a"])(c,r,s,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=harvester-v1.0.3.umd.min.edit.js.map