(("undefined"!==typeof self?self:this)["webpackJsonpharvester_v1_2_1"]=("undefined"!==typeof self?self:this)["webpackJsonpharvester_v1_2_1"]||[]).push([[10],{"0076":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".hardware-resource-gauge[data-v-5826f04a]{position:relative;display:flex;flex-direction:column}.hardware-resource-gauge .hw-gauge[data-v-5826f04a]:not(:first-of-type){margin-top:20px}.hardware-resource-gauge .values[data-v-5826f04a]{font-size:12px;padding-left:10px}",""]),e.exports=t},"09dd":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".state[data-v-38667bbe]{display:flex}.state .vmstate[data-v-38667bbe]{margin-right:6px}.name-console[data-v-38667bbe]{display:flex;align-items:center;justify-content:space-between}.name-console span[data-v-38667bbe]{padding-right:4px;line-height:26px;white-space:nowrap}",""]),e.exports=t},"0c34":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):e.listSchema?t("div",[!1===e.loggingEnabled?t("Banner",{attrs:{color:"info"}},[t("MessageLink",{attrs:{to:e.to,"prefix-label":"harvester.logging.diabledTips.prefix","middle-label":"harvester.logging.diabledTips.middle","suffix-label":"harvester.logging.diabledTips.suffix"}})],1):e._e(),t("ResourceTable",{attrs:{schema:e.schema,rows:e.rows,"ignore-filter":!0,groupable:!1}})],1):t("Banner",{attrs:{color:"warning"}},[e._v(" "+e._s(e.t("harvester.generic.noSchema",{schema:e.schema.id}))+" ")])},r=[],o=s("b837"),i=s("efbe"),n=s("2a88"),l=s("203b"),c=s("70a6"),d=s("56a4"),u=s("90cd");const p={id:u["b"].CLUSTER_FLOW,type:d["I"],attributes:{kind:u["b"].CLUSTER_FLOW,namespaced:!0},metadata:{name:u["b"].CLUSTER_FLOW}},h="cattle-logging-system/rancher-logging";var f={name:"ListApps",components:{Loading:c["a"],ResourceTable:i["a"],Banner:n["a"],MessageLink:l["a"]},async fetch(){var e;const t=this.$store.getters["currentProduct"].inStore,s={};this.listSchema=this.$store.getters[t+"/schemaFor"](d["r"].CLUSTER_FLOW),this.listSchema&&(s.clusteroutput=this.$store.dispatch(t+"/findAll",{type:d["r"].CLUSTER_OUTPUT}),s.rows=this.$store.dispatch(t+"/findAll",{type:d["r"].CLUSTER_FLOW})),this.$store.getters[t+"/schemaFor"](u["b"].ADD_ONS)&&(s.loggingAddon=this.$store.dispatch(t+"/find",{type:u["b"].ADD_ONS,id:h}));const a=await Object(o["a"])(s);this.rows=a.rows,this.loggingAddon=a.loggingAddon,this.$store.dispatch("type-map/configureType",{match:u["b"].CLUSTER_FLOW,isCreatable:this.listSchema&&(null===(e=this.listSchema)||void 0===e?void 0:e.collectionMethods.find(e=>"post"===e.toLowerCase()))})},data(){return{rows:[],listSchema:null,loggingAddon:null}},computed:{schema(){return p},to(){return u["b"].ADD_ONS+"/cattle-logging-system/rancher-logging?mode=edit#basic"},loggingEnabled(){var e,t;return null===(e=this.loggingAddon)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.enabled}},typeDisplay(){return this.$store.getters["type-map/labelFor"](p,99)}},m=f,g=s("d802"),v=Object(g["a"])(m,a,r,!1,null,null,null);t["default"]=v.exports},"0fbc":function(e,t,s){var a=s("f820");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("842e7cfc",a,!0,{sourceMap:!1,shadowMode:!1})},"13dd":function(e,t,s){"use strict";s("dd82")},"150d":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".header[data-v-f3ee0484]{display:flex;justify-content:space-between;align-items:center}.footer[data-v-f3ee0484]{width:100%;display:flex;justify-content:flex-end}.banner-icon[data-v-f3ee0484]{display:flex;align-items:center}.banner-content[data-v-f3ee0484]{display:flex}.banner-message[data-v-f3ee0484]{display:flex;flex-direction:column;justify-content:center;padding:0 15px}.icon[data-v-f3ee0484]{font-size:20px;width:20px;line-height:23px}.currentVersion[data-v-f3ee0484]{margin-top:10px;display:flex;justify-content:space-between}.currentVersion .version[data-v-f3ee0484]{font-size:16px;font-weight:700}",""]),e.exports=t},"203b":function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",[e._t("prefix",(function(){return[e.prefixLabel?t("t",{attrs:{k:e.prefixLabel,raw:!0}}):e._e(),e._v(" "+e._s(e.prefix)+" ")]})),t("nuxt-link",{attrs:{to:e.to,target:e.target}},[e._t("middle",(function(){return[e.middleLabel?t("t",{attrs:{k:e.middleLabel,raw:!0}}):e._e(),e._v(" "+e._s(e.middle)+" ")]}))],2),e._t("suffix",(function(){return[e.suffixLabel?t("t",{attrs:{k:e.suffixLabel,raw:!0}}):e._e(),e._v(" "+e._s(e.suffix)+" ")]}))],2)},r=[],o={props:{to:{type:[String,Object],required:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},middle:{type:String,default:""},prefixLabel:{type:String,default:""},suffixLabel:{type:String,default:""},middleLabel:{type:String,default:""},target:{type:String,default:"self"}}},i=o,n=s("d802"),l=Object(n["a"])(i,a,r,!1,null,null,null);t["a"]=l.exports},"20c9":function(e,t,s){"use strict";s("640f")},"21cf":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".state[data-v-254ddec6]{display:flex}.state .vmstate[data-v-254ddec6]{margin-right:6px}",""]),e.exports=t},"252b":function(e,t,s){var a=s("943c");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("36cedc3e",a,!0,{sourceMap:!1,shadowMode:!1})},2640:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending||!e.currentCluster?t("Loading"):t("section",[t("HarvesterUpgrade"),t("div",{staticClass:"cluster-dashboard-glance"},[t("div",[t("label",[e._v(" "+e._s(e.t("harvester.dashboard.version"))+": ")]),t("span",[t("span",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:{content:e.currentVersion},expression:"{content: currentVersion}"}]},[e._v(" "+e._s(e.currentVersion)+" ")])])]),t("div",[t("label",[e._v(" "+e._s(e.t("glance.created"))+": ")]),t("span",[t("LiveDate",{attrs:{value:e.firstNodeCreationTimestamp,"add-suffix":!0,"show-tooltip":!0}})],1)])]),!e.enabledMonitoringAddon&&e.canEnableMonitoringAddon?t("div",[t("Banner",{attrs:{color:"info"}},[t("MessageLink",{attrs:{to:e.toEnableMonitoringAddon,"prefix-label":"harvester.monitoring.alertmanagerConfig.disabledAddon.prefix","middle-label":"harvester.monitoring.alertmanagerConfig.disabledAddon.middle","suffix-label":"harvester.monitoring.alertmanagerConfig.disabledAddon.suffix"}})],1)],1):e._e(),t("div",{staticClass:"resource-gauges"},e._l(e.totalCountGaugeInput,(function(e){return t("ResourceSummary",{key:e.resource,attrs:{"spoofed-counts":e.isSpoofed?e:null,resource:e.resource}})})),1),e.nodes.length&&e.hasMetricNodeSchema?[t("h3",{staticClass:"mt-40"},[e._v(" "+e._s(e.t("clusterIndexPage.sections.capacity.label"))+" ")]),t("div",{staticClass:"hardware-resource-gauges",class:{live:!e.storageTotal}},[t("HardwareResourceGauge",{attrs:{name:e.t("harvester.dashboard.hardwareResourceGauge.cpu"),reserved:e.cpuReserved,used:e.cpuUsed}}),t("HardwareResourceGauge",{attrs:{name:e.t("harvester.dashboard.hardwareResourceGauge.memory"),reserved:e.ramReserved,used:e.ramUsed}}),e.storageTotal?t("HardwareResourceGauge",{attrs:{name:e.t("harvester.dashboard.hardwareResourceGauge.storage"),used:e.storageUsed,reserved:e.storageReserved}}):e._e()],1)]:e._e(),e.nodes.length&&e.hasMetricNodeSchema&&e.fpgaCapacity?[t("h3",{staticClass:"mt-40"},[e._v(" "+e._s(e.t("clusterIndexPage.sections.fpgaUsage.label"))+" ")]),t("div",{staticClass:"hardware-resource-gauges"},[e.intelPacA10Capacity?t("HardwareResourceGauge",{attrs:{name:e.t("harvester.dashboard.hardwareResourceGauge.intelPacA10"),reserved:e.intelPacA10Reserved,used:e.intelPacA10Used}}):e._e(),e.intelPacS10Capacity?t("HardwareResourceGauge",{attrs:{name:e.t("harvester.dashboard.hardwareResourceGauge.intelPacS10"),reserved:e.intelPacS10Reserved,used:e.intelPacS10Used}}):e._e()],1)]:e._e(),e.hasMetricsTabs&&e.enabledMonitoringAddon?t("Tabbed",{staticClass:"mt-30"},[e.showClusterMetrics?t("Tab",{attrs:{name:"cluster-metrics",label:e.t("clusterIndexPage.sections.clusterMetrics.label"),weight:99},scopedSlots:e._u([{key:"default",fn:function(s){return[s.active?t("DashboardMetrics",{attrs:{"detail-url":e.CLUSTER_METRICS_DETAIL_URL,"summary-url":e.CLUSTER_METRICS_SUMMARY_URL,"graph-height":"825px"}}):e._e()]}}],null,!1,1229087076)}):e._e(),e.showVmMetrics?t("Tab",{attrs:{name:"vm-metric",label:e.t("harvester.dashboard.sections.vmMetrics.label"),weight:98},scopedSlots:e._u([{key:"default",fn:function(s){return[s.active?t("DashboardMetrics",{attrs:{"detail-url":e.VM_DASHBOARD_METRICS_URL,"graph-height":"825px","has-summary-and-detail":!1}}):e._e()]}}],null,!1,1558151507)}):e._e()],1):e._e(),t("div",{staticClass:"mb-40 mt-40"},[t("h3",[e._v(" "+e._s(e.t("clusterIndexPage.sections.events.label"))+" ")]),t("Tabbed",{staticClass:"mt-20"},[t("Tab",{attrs:{name:"host",label:"Hosts",weight:98}},[t("SortableTable",{attrs:{rows:e.hostEvents,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},scopedSlots:e._u([{key:"cell:resource",fn:function({row:s,value:a}){return[t("div",{staticClass:"text-info"},[e._v(" "+e._s(a)+" ")]),s.message?t("div",[e._v(" "+e._s(s.displayMessage)+" ")]):e._e()]}}])})],1),t("Tab",{attrs:{name:"vm",label:"VMs",weight:99}},[t("SortableTable",{attrs:{rows:e.vmEvents,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},scopedSlots:e._u([{key:"cell:resource",fn:function({row:s,value:a}){return[t("div",{staticClass:"text-info"},[e._v(" "+e._s(a)+" ")]),s.message?t("div",[e._v(" "+e._s(s.displayMessage)+" ")]):e._e()]}}])})],1),t("Tab",{attrs:{name:"volume",label:"Volumes",weight:97}},[t("SortableTable",{attrs:{rows:e.volumeEvents,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},scopedSlots:e._u([{key:"cell:resource",fn:function({row:s,value:a}){return[t("div",{staticClass:"text-info"},[e._v(" "+e._s(a)+" ")]),s.message?t("div",[e._v(" "+e._s(s.displayMessage)+" ")]):e._e()]}}])})],1),t("Tab",{attrs:{name:"image",label:"Images",weight:96}},[t("SortableTable",{attrs:{rows:e.imageEvents,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},scopedSlots:e._u([{key:"cell:resource",fn:function({row:s,value:a}){return[t("div",{staticClass:"text-info"},[e._v(" "+e._s(a)+" ")]),s.message?t("div",[e._v(" "+e._s(s.displayMessage)+" ")]):e._e()]}}])})],1)],1)],1)],2)},r=[],o=s("050d"),i=s.n(o),n=s("bf2c"),l=s.n(n),c=s("68f9"),d=s.n(c),u=s("9ce4"),p=s("70a6"),h=s("2a88"),f=s("203b"),m=s("fc28"),g=s("b837"),v=s("67ab"),b=s("d6d1"),y=s("56a4"),_=s("90cd"),w=function(){var e=this,t=e._self._c;return t("div",[t("SimpleBox",{staticClass:"container",class:{"has-link":!!e.location},on:{click:e.goToResource}},[t("h1",[e._v(e._s(e.resourceCounts.total))]),t("h3",[e._v(" "+e._s(e.name)+" ")]),t("div",{staticClass:"warnings"},[e.resourceCounts.warningCount?t("div",{staticClass:"warn-count mb-10 chip"},[e._v(" "+e._s(e.resourceCounts.warningCount)+" ")]):e._e(),e.resourceCounts.errorCount?t("div",{staticClass:"error-count chip"},[e._v(" "+e._s(e.resourceCounts.errorCount)+" ")]):e._e()])])],1)},S=[],C=s("09e9"),T=s("35ef");function x(e){switch(e){case"text-success":case"text-info":return"useful";case"text-warning":return"warningCount";default:return"errorCount"}}function k(e,t){var s,a,r;const o=e.getters["currentStore"](y["f"]),i=null===(s=e.getters[o+"/all"](y["f"]))||void 0===s||null===(a=s[0])||void 0===a?void 0:a.counts,n=(null===i||void 0===i||null===(r=i[t])||void 0===r?void 0:r.summary)||{},l={total:n.count||0,useful:n.count||0,warningCount:0,errorCount:0};return Object.entries(n.states||{}).forEach(e=>{const t=Object(T["c"])(e[0]),s=e[1],a=x(t);l["useful"]-=s,l[a]+=s}),l}var $={components:{SimpleBox:C["a"]},props:{resource:{type:String,default:""},spoofedCounts:{type:Object,default:null},cluster:{type:String,default:null}},computed:{resourceCounts(){return this.spoofedCounts?this.spoofedCounts:k(this.$store,this.resource)},location(){if(this.spoofedCounts)return this.spoofedCounts.location;const e={name:"c-cluster-product-resource",params:{product:this.$store.getters["currentProduct"].name,resource:this.resource}};return this.cluster&&(e.params.cluster=this.cluster),e},name(){if(this.spoofedCounts)return this.spoofedCounts.name;const e=this.$store.getters["currentStore"](this.resource),t=this.$store.getters[e+"/schemaFor"](this.resource);return this.$store.getters["type-map/labelFor"](t,this.resourceCounts.useful)}},methods:{goToResource(){this.location&&this.$router.push(this.location)}}},O=$,A=(s("e5f7"),s("d802")),M=Object(A["a"])(O,w,S,!1,null,"7a7c6c24",null),R=M.exports,N=function(){var e=this,t=e._self._c;return t("SimpleBox",{staticClass:"hardware-resource-gauge"},[t("div",{staticClass:"chart"},[t("h3",[e._v(" "+e._s(e.name)+" ")]),!e.reserved||void 0===e.reserved.total&&void 0===e.reserved.useful?e._e():t("div",{staticClass:"hw-gauge"},[t("ConsumptionGauge",{attrs:{capacity:e.reserved.total,used:e.reserved.useful,"color-stops":e.colorStops},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",[e._v(" "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.reserved"))+" "),t("span",{staticClass:"values text-muted"},[e.reserved.formattedUseful?t("span",[e._v(" "+e._s(e.reserved.formattedUseful)+" ")]):t("span",[e._v(" "+e._s(e.maxDecimalPlaces(e.reserved.useful))+" ")]),e._v(" / "),e.reserved.formattedTotal?t("span",[e._v(" "+e._s(e.reserved.formattedTotal)+" ")]):t("span",[e._v(" "+e._s(e.maxDecimalPlaces(e.reserved.total))+" "+e._s(e.reserved.units)+" ")])])]),t("span",[e._v(" "+e._s(e.percentage(e.reserved))+" ")])]},proxy:!0}],null,!1,2027848520)})],1),e.used&&void 0!==e.used.useful?t("div",{staticClass:"hw-gauge"},[t("ConsumptionGauge",{attrs:{capacity:e.used.total,used:e.used.useful,"color-stops":e.colorStops},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",[e._v(" "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.used"))+" "),t("span",{staticClass:"values text-muted"},[e.used.formattedUseful?t("span",[e._v(" "+e._s(e.used.formattedUseful)+" ")]):t("span",[e._v(" "+e._s(e.maxDecimalPlaces(e.used.useful))+" ")]),e._v(" / "),e.used.formattedTotal?t("span",[e._v(" "+e._s(e.used.formattedTotal)+" ")]):t("span",[e._v(" "+e._s(e.maxDecimalPlaces(e.used.total))+" "+e._s(e.used.units)+" ")])])]),t("span",[e._v(" "+e._s(e.percentage(e.used))+" ")])]},proxy:!0}],null,!1,3067856235)})],1):e._e()])])},E=[],L=s("3c8a"),P={components:{ConsumptionGauge:L["a"],SimpleBox:C["a"]},props:{name:{type:String,required:!0},units:{type:String,default:""},used:{type:Object,default:null},reserved:{type:Object,default:null}},computed:{colorStops(){return{0:"--success",30:"--warning",70:"--error"}}},methods:{maxDecimalPlaces(e){return Math.round(100*e)/100},strokes(e,t){return{primaryStrokeColor:this.rgba(e,1),primaryStrokeGradientColor:this.rgba(t,1),secondaryStrokeColor:this.rgba(e,.1),secondaryStrokeGradientColor:this.rgba(t,.1)}},rgba(e,t){return`rgba(var(${e}), ${t})`},percentage(e){return 0===e.total?"":(e.useful/e.total*100).toFixed(2)+"%"}}},D=P,I=(s("7f03"),Object(A["a"])(D,N,E,!1,null,"5826f04a",null)),U=I.exports,V=s("ad61"),j=s("5ef9"),F=s("1828"),H=s("500e"),B=s("4543"),K=s("1832"),G=function(){var e=this,t=e._self._c;return e.currentCluster?t("div",[t("header",{staticClass:"header-layout header mb-0"},[t("h1",[t("t",{attrs:{k:"harvester.dashboard.header",cluster:e.currentCluster.nameDisplay}})],1),e.versionOptions.length?t("button",{staticClass:"btn bg-warning btn-sm",attrs:{type:"button"},on:{click:e.open}},[t("t",{attrs:{k:"harvester.upgradePage.upgrade"}})],1):e._e()]),t("ModalWithCard",{ref:"deleteTip",attrs:{name:"deleteTip",width:850},scopedSlots:e._u([{key:"title",fn:function(){return[t("t",{attrs:{k:"harvester.upgradePage.upgradeApp"}})]},proxy:!0},{key:"content",fn:function(){return[t("UpgradeInfo",{attrs:{version:e.version}}),t("div",{staticClass:"currentVersion mb-15"},[t("span",[t("t",{attrs:{k:"harvester.upgradePage.currentVersion"}})],1),t("span",{staticClass:"version"},[e._v(e._s(e.currentVersion))])]),t("div",[t("LabeledSelect",{staticClass:"mb-10",attrs:{label:e.t("harvester.upgradePage.versionLabel"),options:e.versionOptions,clearable:!0},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}}),e.canEnableLogging?t("div",{staticClass:"mb-5"},[t("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.upgradePage.enableLogging")},model:{value:e.enableLogging,callback:function(t){e.enableLogging=t},expression:"enableLogging"}})],1):e._e(),e.version?t("div",[t("p",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("harvester.upgradePage.releaseTip",{url:e.releaseLink},!0),expression:"t('harvester.upgradePage.releaseTip', {url: releaseLink}, true)"}],staticClass:"mb-10"}),t("Checkbox",{staticClass:"check",attrs:{type:"checkbox","label-key":"harvester.upgradePage.checkReady"},model:{value:e.readyReleaseNote,callback:function(t){e.readyReleaseNote=t},expression:"readyReleaseNote"}})],1):e._e(),e.errors.length?t("Banner",{attrs:{color:"warning"}},[e._v(" "+e._s(e.errors)+" ")]):e._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"footer"},[t("button",{staticClass:"btn role-secondary mr-20",on:{click:function(t){return t.preventDefault(),e.cancel.apply(null,arguments)}}},[t("t",{attrs:{k:"generic.close"}})],1),t("button",{staticClass:"btn role-tertiary bg-primary",attrs:{disabled:!e.readyReleaseNote},on:{click:function(t){return t.preventDefault(),e.handleUpgrade.apply(null,arguments)}}},[t("t",{attrs:{k:"harvester.upgradePage.upgrade"}})],1)])]},proxy:!0}],null,!1,459790523)})],1):e._e()},W=[],z=s("efb2"),q=s("5fe4"),Y=s("53fe"),J=s("dffb"),Z=s("95be"),Q={name:"HarvesterUpgrade",components:{Checkbox:z["a"],ModalWithCard:q["a"],LabeledSelect:Y["a"],Banner:J["a"],UpgradeInfo:Z["a"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await Object(g["a"])({upgradeVersion:this.$store.dispatch(e+"/findAll",{type:_["b"].SETTING}),versions:this.$store.dispatch(e+"/findAll",{type:_["b"].VERSION}),upgrade:this.$store.dispatch(e+"/findAll",{type:_["b"].UPGRADE})});this.upgrade=t.upgrade},data(){return{upgrade:[],upgradeMessage:[],errors:"",selectMode:!0,version:"",enableLogging:!0,readyReleaseNote:!1}},computed:{...Object(u["a"])(["currentCluster"]),versionOptions(){const e=this.$store.getters["harvester/all"](_["b"].VERSION);return e.map(e=>e.metadata.name)},currentVersion(){const e=this.$store.getters["harvester/byId"](_["b"].SETTING,"server-version");return e.currentVersion||""},canEnableLogging(){return this.$store.getters["harvester/schemaFor"](_["b"].UPGRADE_LOG)},releaseLink(){return"https://github.com/harvester/harvester/releases/tag/"+this.version}},watch:{upgrade:{handler(e){let t=[];const s=e||[],a=s.find(e=>!!e.isLatestUpgrade);t=a?a.upgradeMessage:[],this.$set(this,"upgradeMessage",t)},deep:!0},version(){this.readyReleaseNote=!1}},methods:{async handleUpgrade(){const e={type:_["b"].UPGRADE,metadata:{generateName:"hvst-upgrade-",namespace:"harvester-system"},spec:{version:this.version}};this.canEnableLogging&&(e.spec.logEnabled=this.enableLogging);const t=await this.$store.dispatch("harvester/create",e);try{await t.save(),this.cancel()}catch(s){""!==(null===s||void 0===s?void 0:s.message)&&(this.errors=s.message)}},cancel(){this.$refs.deleteTip.hide(),this.errors=""},open(){this.$refs.deleteTip.open()}}},X=Q,ee=(s("353e"),Object(A["a"])(X,G,W,!1,null,"f3ee0484",null)),te=ee.exports,se=s("4aac");i.a.extend(d.a),i.a.extend(l.a);const ae={memory:{format:{addSuffix:!0,firstSuffix:"B",increment:1024,maxExponent:99,maxPrecision:2,minExponent:0,startingExponent:0,suffix:"iB"}}},re=[{type:y["z"],spoofed:{location:{name:se["PRODUCT_NAME"]+"-c-cluster-resource",params:{resource:_["b"].HOST}},name:_["b"].HOST}},{type:_["b"].VM,spoofed:{location:{name:se["PRODUCT_NAME"]+"-c-cluster-resource",params:{resource:_["b"].VM}},name:_["b"].VM}},{type:y["x"],spoofed:{location:{name:se["PRODUCT_NAME"]+"-c-cluster-resource",params:{resource:_["b"].NETWORK_ATTACHMENT}},name:_["b"].NETWORK_ATTACHMENT,filterNamespace:["harvester-system"]}},{type:_["b"].IMAGE,spoofed:{location:{name:se["PRODUCT_NAME"]+"-c-cluster-resource",params:{resource:_["b"].IMAGE}},name:_["b"].IMAGE}},{type:y["E"],spoofed:{location:{name:se["PRODUCT_NAME"]+"-c-cluster-resource",params:{resource:_["b"].VOLUME}},name:_["b"].VOLUME,filterNamespace:["cattle-monitoring-system"]}},{type:_["b"].BLOCK_DEVICE,spoofed:{location:{name:se["PRODUCT_NAME"]+"-c-cluster-resource",params:{resource:_["b"].HOST}},name:_["b"].BLOCK_DEVICE}}],oe="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-cluster-nodes-1/rancher-cluster-nodes?orgId=1",ie="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-cluster-1/rancher-cluster?orgId=1",ne="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/harvester-vm-dashboard-1/vm-dashboard?orgId=1",le="cattle-monitoring-system/rancher-monitoring";var ce={mixins:[H["a"]],components:{Loading:p["a"],HardwareResourceGauge:U,SortableTable:m["b"],HarvesterUpgrade:te,ResourceSummary:R,Tabbed:V["a"],Tab:j["a"],DashboardMetrics:F["a"],Banner:h["a"],MessageLink:f["a"]},async fetch(){var e,t;const s=this.$store.getters["currentProduct"].inStore,a={vms:this.fetchClusterResources(_["b"].VM),nodes:this.fetchClusterResources(y["z"]),events:this.fetchClusterResources(y["i"]),metricNodes:this.fetchClusterResources(y["u"].NODE),settings:this.fetchClusterResources(_["b"].SETTING),services:this.fetchClusterResources(y["K"]),metric:this.fetchClusterResources(y["u"].NODE),longhornNode:this.fetchClusterResources(y["s"].NODES)||[],_pods:this.$store.dispatch("harvester/findAll",{type:y["B"]})};(this.accessibleResources||[]).map(e=>(a[e.type]=this.$store.dispatch(s+"/findAll",{type:e.type}),null)),this.$store.getters[s+"/schemaFor"](_["b"].ADD_ONS)&&(a.addons=this.$store.dispatch(s+"/findAll",{type:_["b"].ADD_ONS}));const r=await Object(g["a"])(a);for(const i in r)this[i]=r[i];Object(g["e"])(Object(B["a"])(this.$store,this.currentCluster.id,[oe,ie],"harvester"),this,"showClusterMetrics","Determine cluster metrics"),Object(g["e"])(Object(B["a"])(this.$store,this.currentCluster.id,[ne],"harvester"),this,"showVmMetrics","Determine vm metrics");const o=this.$store.getters[s+"/all"](_["b"].ADD_ONS);this.monitoring=o.find(e=>e.id===le),this.enabledMonitoringAddon=null===(e=this.monitoring)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.enabled},data(){const e={...b["K"],canBeVariable:!0,width:100},t=[e,{name:"resource",label:"Resource",labelKey:"clusterIndexPage.sections.events.resource.label",value:"displayInvolvedObject",sort:["involvedObject.kind","involvedObject.name"],canBeVariable:!0},{align:"right",name:"date",label:"Date",labelKey:"clusterIndexPage.sections.events.date.label",value:"lastTimestamp",sort:"lastTimestamp:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,defaultSort:!0}];return{eventHeaders:t,constraints:[],events:[],nodeMetrics:[],nodes:[],metricNodes:[],vms:[],monitoring:{},VM_DASHBOARD_METRICS_URL:ne,CLUSTER_METRICS_SUMMARY_URL:ie,CLUSTER_METRICS_DETAIL_URL:oe,showClusterMetrics:!1,showVmMetrics:!1,enabledMonitoringAddon:!1}},computed:{...Object(u["a"])(["currentCluster"]),accessibleResources(){const e=this.$store.getters["currentProduct"].inStore;return re.filter(t=>this.$store.getters[e+"/schemaFor"](t.type))},totalCountGaugeInput(){const e={};return this.accessibleResources.forEach(t=>{const s=k(this.$store,t.type);if(e[t.type]={resource:t.type},Object.entries(s).forEach(s=>{e[t.type][s[0]]=s[1]}),t.spoofed){var a;if(null!==(a=t.spoofed)&&void 0!==a&&a.filterNamespace&&Array.isArray(t.spoofed.filterNamespace)){const s=this.$store.getters["harvester/all"](y["f"])[0].counts,a=s[t.type]||{};for(let o=0;o<t.spoofed.filterNamespace.length;o++){var r;const s=(null===a||void 0===a||null===(r=a.namespaces)||void 0===r?void 0:r[t.spoofed.filterNamespace[o]])||{};s.count&&(e[t.type]["useful"]-=s.count,e[t.type]["total"]-=s.count),Object.entries((null===s||void 0===s?void 0:s.states)||{}).forEach(s=>{const a=Object(T["c"])(s[0]),r=s[1],o=x(a);e[t.type]["useful"]-=r,e[t.type][o]+=r})}}e[t.type]={...e[t.type],...t.spoofed,isSpoofed:!0},e[t.type].name=this.t(`typeLabel."${t.spoofed.name}"`,{count:e[t.type].total})}if(t.type===_["b"].BLOCK_DEVICE){let s=0,a=0;(this.nodes||[]).map(e=>{s+=e.diskStatusCount.total,a+=e.diskStatusCount.errorCount}),e[t.type]={...e[t.type],total:s,errorCount:a,useful:s-a}}}),e},currentVersion(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](_["b"].SETTING),s=t.find(e=>"server-version"===e.id);return(null===s||void 0===s?void 0:s.value)||(null===s||void 0===s?void 0:s.default)},firstNodeCreationTimestamp(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](y["z"]).map(e=>i()(e.metadata.creationTimestamp));return t.length?i.a.min(t).utc().format():i()().utc().format()},cpusTotal(){let e=0;return this.metricNodes.forEach(t=>{e+=t.cpuCapacity}),e},cpusUsageTotal(){let e=0;return this.metricNodes.forEach(t=>{e+=t.cpuUsage}),e},memoryTotal(){let e=0;return this.metricNodes.forEach(t=>{e+=t.memoryCapacity}),e},memoryUsageTotal(){let e=0;return this.metricNodes.forEach(t=>{e+=t.memoryUsage}),e},storageUsage(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](y["s"].NODES)||[];return t.filter(e=>{var t;return null===(t=e.spec)||void 0===t?void 0:t.allowScheduling}).reduce((e,t)=>e+t.used,0)},storageReservedTotal(){let e=0;return(this.longhornNode||[]).filter(e=>{var t;return null===(t=e.spec)||void 0===t?void 0:t.allowScheduling}).forEach(t=>{var s;const a=(null===t||void 0===t||null===(s=t.spec)||void 0===s?void 0:s.disks)||{};Object.values(a).map(t=>{t.allowScheduling&&(e+=t.storageReserved)})}),e},storageTotal(){let e=0;return(this.longhornNode||[]).forEach(t=>{var s;const a=(null===t||void 0===t||null===(s=t.status)||void 0===s?void 0:s.diskStatus)||{};Object.values(a).map(t=>{null!==t&&void 0!==t&&t.storageMaximum&&(e+=t.storageMaximum)})}),e},storageUsed(){return this.createMemoryValues(this.storageTotal,this.storageUsage)},storageReserved(){return this.createMemoryValues(this.storageTotal,this.storageReservedTotal)},vmEvents(){return this.events.filter(e=>["VirtualMachineInstance","VirtualMachine"].includes(e.involvedObject.kind))},volumeEvents(){return this.events.filter(e=>["PersistentVolumeClaim"].includes(e.involvedObject.kind))},hostEvents(){return this.events.filter(e=>["Node"].includes(e.involvedObject.kind))},imageEvents(){return this.events.filter(e=>["VirtualMachineImage"].includes(e.involvedObject.kind))},hasMetricsTabs(){return this.showClusterMetrics||this.showVmMetrics},pods(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](y["B"])||[];return t.filter(e=>{var t;return"removing"!==(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name)})},cpuReserved(){const e=this.nodes.reduce((e,t)=>e+t.cpuReserved,0);return{total:this.cpusTotal,useful:e}},ramReserved(){const e=this.nodes.reduce((e,t)=>e+t.memoryReserved,0);return Object(v["c"])(this.memoryTotal,e)},availableNodes(){return(this.metricNodes||[]).map(e=>e.id)},metricAggregations(){const e=this.nodes,t=this.nodes.some(e=>e.hasARole&&!e.isWorker),s=this.nodeMetrics.filter(s=>{const a=e.find(e=>e.id===s.id);return a&&(!t||a.isWorker)}),a={cpu:0,memory:0};return Object(K["i"])(s)?null:s.reduce((e,t)=>(e.cpu+=Object(v["f"])(t.usage.cpu),e.memory+=Object(v["f"])(t.usage.memory),e),a)},cpuUsed(){var e;return{total:this.cpusTotal,useful:null===(e=this.metricAggregations)||void 0===e?void 0:e.cpu}},ramUsed(){var e;return Object(v["c"])(this.memoryTotal,null===(e=this.metricAggregations)||void 0===e?void 0:e.memory)},intelPacA10Usage(){return this.pods.filter(e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase).map(e=>{var t,s;let a=0;return null===(t=e.spec.containers)||void 0===t||t.forEach(e=>{var t,s;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(s=t.limits)||void 0===s?void 0:s["intel/pac_a10"])||"0");a+=r}),null===(s=e.spec.initContainers)||void 0===s||s.forEach(e=>{var t,s;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(s=t.limits)||void 0===s?void 0:s["intel/pac_a10"])||"0");r>a&&(a=r)}),a}).reduce((e,t)=>e+t,0)},intelPacA10Allocatable(){return this.nodes.map(e=>Number.parseInt(e.status.allocatable["intel/pac_a10"]||"0")).reduce((e,t)=>e+t,0)},intelPacA10Capacity(){return this.nodes.map(e=>Number.parseInt(e.status.capacity["intel/pac_a10"]||"0")).reduce((e,t)=>e+t,0)},intelPacA10Reserved(){return{total:this.intelPacA10Capacity,useful:this.intelPacA10Allocatable}},intelPacA10Used(){return{total:this.intelPacA10Capacity,useful:this.intelPacA10Usage}},intelPacS10Usage(){return this.pods.filter(e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase).map(e=>{var t,s;let a=0;return null===(t=e.spec.containers)||void 0===t||t.forEach(e=>{var t,s;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(s=t.limits)||void 0===s?void 0:s["intel/pac_s10"])||"0");a+=r}),null===(s=e.spec.initContainers)||void 0===s||s.forEach(e=>{var t,s;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(s=t.limits)||void 0===s?void 0:s["intel/pac_s10"])||"0");r>a&&(a=r)}),a}).reduce((e,t)=>e+t,0)},intelPacS10Allocatable(){return this.nodes.map(e=>Number.parseInt(e.status.allocatable["intel/pac_s10"]||"0")).reduce((e,t)=>e+t,0)},intelPacS10Capacity(){return this.nodes.map(e=>Number.parseInt(e.status.capacity["intel/pac_s10"]||"0")).reduce((e,t)=>e+t,0)},intelPacS10Reserved(){return{total:this.intelPacS10Capacity,useful:this.intelPacS10Allocatable}},intelPacS10Used(){return{total:this.intelPacS10Capacity,useful:this.intelPacS10Usage}},fpgaCapacity(){return this.intelPacA10Capacity+this.intelPacS10Capacity},hasMetricNodeSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[e+"/schemaFor"](y["u"].NODE)},toEnableMonitoringAddon(){return _["b"].ADD_ONS+"/cattle-monitoring-system/rancher-monitoring?mode=edit#alertmanager"},canEnableMonitoringAddon(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/schemaFor"](_["b"].ADD_ONS);return t&&this.monitoring}},methods:{createMemoryValues(e,t){const s=Object(v["f"])((e||"0").toString()),a=Object(v["f"])((t||"0").toString()),r=this.createMemoryFormat(s),o=Object(v["e"])(s,r);let i=Object(v["e"])(a,{...r,addSuffix:!1});return!Number.parseFloat(i)>0&&(i=Object(v["e"])(a,{...r,canRoundToZero:!1})),{total:Number(s),useful:Number(a),formattedTotal:o,formattedUseful:i,units:this.createMemoryUnits(s)}},createMemoryFormat(e){const t=Object(v["d"])(e,ae.memory.format.increment);return{...ae.memory.format,maxExponent:t,minExponent:t}},createMemoryUnits(e){const t=Object(v["d"])(e,ae.memory.format.increment);return`${v["b"][t]}${ae.memory.format.suffix}`},async fetchClusterResources(e,t={},s){const a=s||this.$store.getters["currentProduct"].inStore,r=this.$store.getters[a+"/schemaFor"](e);if(r)try{const s=await this.$store.dispatch(a+"/findAll",{type:e,opt:t});return s}catch(o){return console.error(`Failed fetching cluster resource ${e} with error:`,o),[]}return[]},async loadMetrics(){this.nodeMetrics=await this.fetchClusterResources(y["u"].NODE,{force:!0})}}},de=ce,ue=(s("6a7b"),Object(A["a"])(de,a,r,!1,null,"3de34b8d",null));t["default"]=ue.exports},"2c0b":function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",[e.arbitrary?t("div",[e.value?t("BadgeState",{attrs:{color:e.stateBackground,label:e.stateDisplay}}):e._e()],1):t("BadgeState",{attrs:{value:e.row}})],1)},r=[],o=s("57ab"),i=s("35ef"),n={components:{BadgeState:o["a"]},props:{value:{type:String,default:""},row:{type:Object,required:!0},col:{type:Object,default:()=>{}},arbitrary:{type:Boolean,default:!1}},data(){return{stateDisplay:"",stateBackground:""}},watch:{value:{handler(){if(this.arbitrary){const e=Object(i["c"])(this.value);this.stateDisplay=Object(i["e"])(this.value),this.stateBackground=e.replace("text-","bg-")}},immediate:!0}}},l=n,c=s("d802"),d=Object(c["a"])(l,a,r,!1,null,null,null);t["a"]=d.exports},"331b":function(e,t,s){"use strict";s("e0d9")},"353e":function(e,t,s){"use strict";s("45a6")},"377a":function(e,t,s){var a=s("b32a");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("83e0682e",a,!0,{sourceMap:!1,shadowMode:!1})},"37f2":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("ResourceTable",e._b({attrs:{groupable:!1,namespaced:!1,headers:e.headers,schema:e.schema,rows:e.rows,"key-field":"_key"}},"ResourceTable",e.$attrs,!1))},r=[],o=s("d6d1"),i=s("56a4"),n=s("efbe"),l={name:"ListHarvesterSRIOV",components:{ResourceTable:n["a"]},props:{schema:{type:Object,required:!0},rows:{type:Array,required:!0}},data(){const e=this.$store.getters["currentProduct"].inStore;return{hasNode:this.$store.getters[e+"/schemaFor"](i["z"])}},computed:{headers(){const e={name:"node",label:"Node",value:"realNodeName",sort:["realNodeName"],formatter:"CopyToClipboard",labelKey:"tableHeaders.node"},t=[o["S"],o["Q"],{name:"numVFs",label:"Num VFs",sort:["spec.numVFs"],value:"spec.numVFs",formatter:"HarvesterVFsNum",align:"center",labelKey:"harvester.sriov.numVFs",dashIfEmpty:!0},{name:"vfAddresses",label:"VF Addresses",labelKey:"harvester.sriov.vfAddresses",sort:["status.vfAddresses"],value:"status.vfAddresses",formatter:"HarvesterVFAddress",align:"center",dashIfEmpty:!0},{...o["c"],sort:"metadata.creationTimestamp:desc"}];return this.hasNode&&t.splice(-1,0,e),t}}},c=l,d=s("d802"),u=Object(d["a"])(c,a,r,!1,null,null,null);t["default"]=u.exports},3840:function(e,t,s){"use strict";s("fff7")},3976:function(e,t,s){var a=s("ea5f");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("6ca48d5d",a,!0,{sourceMap:!1,shadowMode:!1})},"3aa3":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("ResourceTable",e._g(e._b({attrs:{schema:e.schema,groupable:!1,headers:e.headers,rows:[...e.rows],namespaced:!1,"key-field":"_key"},scopedSlots:e._u([{key:"cell:console",fn:function({row:s}){return[t("button",{staticClass:"btn btn-sm role-primary",attrs:{type:"button",disabled:!s.consoleUrl},on:{click:function(t){return e.goto(s)}}},[e._v(" "+e._s(e.t("harvester.host.console"))+" ")])]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},r=[],o=s("efbe"),i=s("70a6"),n=s("d6d1"),l=s("56a4"),c=s("90cd"),d=s("b837"),u=s("500e");const p={id:c["b"].HOST,type:l["I"],attributes:{kind:c["b"].HOST,namespaced:!0},metadata:{name:c["b"].HOST}};var h={name:"HarvesterListHost",components:{ResourceTable:o["a"],Loading:i["a"]},mixins:[u["a"]],async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={nodes:this.$store.dispatch(e+"/findAll",{type:l["z"]}),pods:this.$store.dispatch(e+"/findAll",{type:l["B"]})};this.$store.getters[e+"/schemaFor"](l["u"].NODE)?t.metric=this.$store.dispatch(e+"/findAll",{type:l["u"].NODE}):this.hasMetricSchema=!1,this.$store.getters[e+"/schemaFor"](l["s"].NODES)?t.longhornNodes=this.$store.dispatch(e+"/findAll",{type:l["s"].NODES}):this.hasLonghornSchema=!1,this.$store.getters[e+"/schemaFor"](c["b"].BLOCK_DEVICE)&&(t.blockDevices=this.$store.dispatch(e+"/findAll",{type:c["b"].BLOCK_DEVICE})),this.$store.getters[e+"/schemaFor"](c["b"].INVENTORY)&&(t.inventories=this.$store.dispatch(e+"/findAll",{type:c["b"].INVENTORY}));const s=await Object(d["a"])(t);this.rows=s.nodes},data(){return{rows:[],hasMetricSchema:!0,hasLonghornSchema:!0}},computed:{headers(){const e=[{...n["S"],formatter:"StateWithPopover"},n["y"],{name:"host-ip",labelKey:"tableHeaders.hostIp",search:["internalIp"],value:"internalIp",formatter:"CopyToClipboard"}];if(this.hasMetricSchema){const t=[{name:"cpu",labelKey:"node.detail.glance.consumptionGauge.cpu",value:"id",formatter:"HarvesterCPUUsed",formatterOpts:{showUsed:!0}},{name:"fpga",labelKey:"node.detail.glance.consumptionGauge.fpga",value:"id",formatter:"HarvesterFPGAUsed",formatterOpts:{showReserved:!0}},{name:"memory",labelKey:"node.detail.glance.consumptionGauge.memory",value:"id",formatter:"HarvesterMemoryUsed",formatterOpts:{showUsed:!0}}];e.splice(-1,0,...t)}if(this.hasLonghornSchema){const t={name:"storage",labelKey:"tableHeaders.storage",value:"id",formatter:"HarvesterStorageUsed",formatterOpts:{showReserved:!0}};e.splice(-1,0,t)}return this.hasLonghornSchema&&e.push({name:"diskState",labelKey:"tableHeaders.diskState",value:"diskState",formatter:"HarvesterDiskState",width:130}),e.push(n["c"]),e.push({name:"console",label:" ",align:"right",width:65}),e},schema(){return p}},methods:{async loadMetrics(){const e=this.$store.getters["harvester/schemaFor"](l["u"].NODE);e&&(await this.$store.dispatch("harvester/findAll",{type:l["u"].NODE,opt:{force:!0}}),this.$forceUpdate())},goto(e){window.open(e.consoleUrl,"_blank")}},typeDisplay(){const{params:{resource:e}}=this.$route;let t=p;return e!==p.id&&(t=this.$store.getters["harvester/schemaFor"](e)),this.$store.getters["type-map/labelFor"](t,99)}},f=h,m=s("d802"),g=Object(m["a"])(f,a,r,!1,null,null,null);t["default"]=g.exports},"3b61":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".overview-web-console .btn{line-height:24px;min-height:24px}",""]),e.exports=t},"3db7":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("Masthead",{attrs:{schema:null,resource:e.resource,"type-display":e.typeDisplay,"create-button-label":e.t("harvester.vmSnapshot.createText")}}),t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,groupable:!0,rows:e.filterdRows,schema:e.schema,"key-field":"_key","default-sort-by":"age"},scopedSlots:e._u([{key:"col:name",fn:function({row:s}){return[t("td",[t("span",[s.status&&s.status.source?t("n-link",{attrs:{to:s.detailLocation}},[e._v(" "+e._s(s.nameDisplay)+" ")]):t("span",[e._v(" "+e._s(s.nameDisplay)+" ")])],1)])]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},r=[],o=s("70a6"),i=s("d1ba"),n=s("efbe"),l=s("90cd"),c=s("56a4"),d=s("b837"),u=s("d6d1");const p={id:l["b"].VM_SNAPSHOT,type:c["I"],attributes:{kind:l["b"].VM_SNAPSHOT,namespaced:!0},metadata:{name:l["b"].VM_SNAPSHOT}};var h={name:"HarvesterListVMSnapshot",components:{ResourceTable:n["a"],Loading:o["a"],Masthead:i["a"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await Object(d["a"])({vms:this.$store.dispatch(e+"/findAll",{type:l["b"].VM}),rows:this.$store.dispatch(e+"/findAll",{type:l["b"].BACKUP})}),s=this.$store.getters[e+"/schemaFor"](l["b"].BACKUP);null!==s&&void 0!==s&&s.collectionMethods.find(e=>"post"===e.toLowerCase())||this.$store.dispatch("type-map/configureType",{match:l["b"].VM_SNAPSHOT,isCreatable:!1}),this.rows=t.rows},data(){const e={...this.$route.params},t=e.resource;return{rows:[],resource:t}},computed:{headers(){return[u["S"],u["y"],u["z"],{name:"targetVM",labelKey:"tableHeaders.targetVm",value:"attachVM",align:"left",formatter:"AttachVMWithName"},{name:"readyToUse",labelKey:"tableHeaders.readyToUse",value:"status.readyToUse",align:"left",formatter:"Checked"},u["c"]]},schema(){return p},typeDisplay(){return this.$store.getters["type-map/labelFor"](p,99)},filterdRows(){return this.rows.filter(e=>{var t;return"backup"!==(null===(t=e.spec)||void 0===t?void 0:t.type)})}}},f=h,m=s("d802"),g=Object(m["a"])(f,a,r,!1,null,null,null);t["default"]=g.exports},"45a6":function(e,t,s){var a=s("150d");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("1b6169e2",a,!0,{sourceMap:!1,shadowMode:!1})},"4bd0":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[e.$fetchState.pending?t("Loading"):t("div",[t("Masthead",{attrs:{schema:e.clusterNetworkSchema,"type-display":e.t("harvester.clusterNetwork.title"),resource:e.HCI.CLUSTER_NETWORK,"create-location":e.createClusterNetworkLocation,"create-button-label":e.t("harvester.clusterNetwork.create.button.label")}}),t("ResourceTable",{attrs:{rows:e.rowsWithFakeClusterNetworks,headers:e.headers,groupable:!0,schema:e.vlanConfigSchema,"group-by":"groupByClusterNetwork"},scopedSlots:e._u([{key:"header-middle",fn:function(){return[t("div")]},proxy:!0},{key:"group-by",fn:function({group:s}){return[t("div",{staticClass:"group-bar"},[t("div",{staticClass:"group-tab"},[t("span",[e._v(" "+e._s(e.groupLabel(s))+" ")])]),t("div",{staticClass:"right"},[e.isClusterNetworkCreatable&&"mgmt"!==s.key?t("n-link",{staticClass:"btn btn-sm role-secondary mr-5",attrs:{to:e.createVlanConfigLocation(s)}},[e._v(" "+e._s(e.t("harvester.vlanConfig.createNetworkConfig"))+" ")]):e._e(),t("button",{staticClass:"btn btn-sm role-multi-action actions mr-10",class:{invisible:!e.showClusterNetworkActionButton(s)},attrs:{type:"button"},on:{click:function(t){return e.showClusterNetworkAction(t,s)}}},[t("i",{staticClass:"icon icon-actions"})])],1)])]}},e._l(e.clusterNetworkWithoutConfigs,(function(s){return{key:e.slotName(s.id),fn:function(){return[t("tr",{directives:[{name:"show",rawName:"v-show",value:!s.hasChild,expression:"!clusterNetwork.hasChild"}],key:s.id,staticClass:"main-row"},[t("td",{staticClass:"empty text-center",attrs:{colspan:"12"}},[e._v(" "+e._s("mgmt"===s.id?e.t("harvester.clusterNetwork.mgmt"):e.t("harvester.clusterNetwork.clusterNetwork"))+" ")])])]},proxy:!0}}))],null,!0)})],1)],1)},r=[],o=s("70a6"),i=s("efbe"),n=s("d1ba"),l=s("b837"),c=s("d6d1"),d=s("005f"),u=s("56a4"),p=s("4aac");const h="clusterNetwork";var f=s("90cd"),m={name:"ListHarvesterVLANConfigs",components:{ResourceTable:i["a"],Loading:o["a"],Masthead:n["a"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore;await Object(l["a"])({configs:this.$store.dispatch(e+"/findAll",{type:f["b"].VLAN_CONFIG}),clusterNetworks:this.$store.dispatch(e+"/findAll",{type:f["b"].CLUSTER_NETWORK}),vlanStatuses:this.$store.dispatch(e+"/findAll",{type:f["b"].VLAN_STATUS}),nodes:this.$store.dispatch(e+"/findAll",{type:u["z"]})})},data(){return{HCI:f["b"]}},computed:{groupPreference:Object(d["x"])(d["i"]),headers(){return[c["S"],c["y"],{name:"type",labelKey:"tableHeaders.type",value:"typeDisplay",getValue:e=>e.typeDisplay,sort:["typeDisplay"]},c["c"]]},rows(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](f["b"].VLAN_CONFIG);return t},vlanConfigSchema(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[e+"/schemaFor"](f["b"].VLAN_CONFIG)},clusterNetworkSchema(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[e+"/schemaFor"](f["b"].CLUSTER_NETWORK)},isClusterNetworkCreatable(){var e;return((null===(e=this.clusterNetworkSchema)||void 0===e?void 0:e.collectionMethods)||[]).includes("POST")},createClusterNetworkLocation(){const e={name:p["PRODUCT_NAME"]+"-c-cluster-resource-create",params:{product:p["PRODUCT_NAME"],resource:f["b"].CLUSTER_NETWORK}};return e},clusterNetworkWithoutConfigs(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](f["b"].CLUSTER_NETWORK),s=t.map(e=>{const t=!!this.rows.find(t=>{var s;return(null===t||void 0===t||null===(s=t.spec)||void 0===s?void 0:s.clusterNetwork)===e.id});return{...e,hasChild:t}});return s},rowsWithFakeClusterNetworks(){const e=this.clusterNetworkWithoutConfigs.map(e=>({groupByLabel:e.id,isFake:!0,mainRowKey:e.id,nameDisplay:e.id,groupByClusterNetwork:e.id,availableActions:[]}));return[...this.rows,...e]}},methods:{showClusterNetworkActionButton(e){const t=this.$store.getters["currentProduct"].inStore,s=e.key,a=this.$store.getters[t+"/byId"](f["b"].CLUSTER_NETWORK,s);return!!a},showClusterNetworkAction(e,t){const s=this.$store.getters["currentProduct"].inStore,a=t.key,r=this.$store.getters[s+"/byId"](f["b"].CLUSTER_NETWORK,a);this.$store.commit("action-menu/show",{resources:[r],elem:e.target})},createVlanConfigLocation(e){const t=e.key,s={name:p["PRODUCT_NAME"]+"-c-cluster-resource-create",params:{product:p["PRODUCT_NAME"],resource:f["b"].VLAN_CONFIG}};return s.query={[h]:t},s},slotName(e){return"main-row:"+e},groupLabel(e){const t=e.rows[0];return t.isFake?`${this.t("harvester.network.clusterNetwork.label")}: ${t.nameDisplay}`:`${this.t("harvester.network.clusterNetwork.label")}: ${e.key}`}}},g=m,v=(s("eef7"),s("d802")),b=Object(v["a"])(g,a,r,!1,null,"60314562",null);t["default"]=b.exports},"500e":function(e,t,s){"use strict";function a(e,t,s){return t=r(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function r(e){var t=o(e,"string");return"symbol"===typeof t?t:String(t)}function o(e,t){if("object"!==typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}class i{constructor(e,t,s=Number.POSITIVE_INFINITY){a(this,"fn",void 0),a(this,"pollRateMs",void 0),a(this,"maxRetries",void 0),a(this,"intervalId",void 0),a(this,"tryCount",0),this.fn=e||(()=>{}),this.pollRateMs=t,this.maxRetries=s}start(){this.stop(),this._intervalMethod(),this.intervalId=setInterval(()=>this._intervalMethod(),this.pollRateMs)}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)}async _intervalMethod(){try{await this.fn(),this.tryCount=0}catch(e){console.error("Error encountered while polling",e),++this.tryCount>=this.maxRetries&&this.stop()}}}const n=3e4,l=2;t["a"]={data(){return{metricPoller:null}},mounted(){this.metricPoller=new i(this.loadMetrics,n,l),this.metricPoller.start()},beforeDestroy(){this.metricPoller.stop()}}},"54f5":function(e,t,s){"use strict";s("556a")},"556a":function(e,t,s){var a=s("f1e8");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("a1a8c3a6",a,!0,{sourceMap:!1,shadowMode:!1})},"592e":function(e,t,s){"use strict";s("f7ed")},"640f":function(e,t,s){var a=s("d842");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("27267412",a,!0,{sourceMap:!1,shadowMode:!1})},"68f9":function(e,t,s){!function(t,s){e.exports=s()}(0,(function(){"use strict";return function(e,t,s){var a=(new Date).getTimezoneOffset(),r=t.prototype;s.utc=function(e){return new t({date:e,utc:!0,args:arguments})},r.utc=function(){return s(this.toDate(),{locale:this.$L,utc:!0})},r.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var o=r.parse;r.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),o.call(this,e)};var i=r.init;r.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else i.call(this)};var n=r.utcOffset;r.utcOffset=function(e){var t=this.$utils().u;if(t(e))return this.$u?0:t(this.$offset)?n.call(this):this.$offset;var s,r=Math.abs(e)<=16?60*e:e;return 0!==e?(s=this.local().add(r+a,"minute")).$offset=r:s=this.utc(),s};var l=r.format;r.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},r.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+a;return this.$d.valueOf()-6e4*e},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var c=r.toDate;r.toDate=function(e){return"s"===e&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():c.call(this)}}}))},"699f":function(e,t,s){var a=s("e5d5");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("0e78dbfe",a,!0,{sourceMap:!1,shadowMode:!1})},"6a7b":function(e,t,s){"use strict";s("e34e")},"6e3a":function(e,t,s){"use strict";s.r(t),s.d(t,"NETWORK_HEADERS",(function(){return m}));var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[e.abnormalNetwork.length?e._l(e.abnormalNetwork,(function(s){return t("Banner",{key:s.name,attrs:{color:"error"}},[t("nuxt-link",{attrs:{to:s.to}},[e._v(" "+e._s(s.name)+": ")]),e._v(" "+e._s(s.message)+" ")],1)})):e._e(),t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,"default-sort-by":"age",schema:e.schema,groupable:!0,rows:e.filterRows,"key-field":"_key"},scopedSlots:e._u([{key:"cell:state",fn:function({row:s}){return[t("div",{staticClass:"state"},[t("BadgeState",{attrs:{row:s}}),s.clusterNetworkErrorMessage?t("v-popover",{attrs:{trigger:"hover",offset:"16"}},[t("span",{staticClass:"tooltip-target"},[t("i",{staticClass:"icon icon-warning icon-lg text-warning"})]),t("template",{slot:"popover"},[t("p",[e._v(" "+e._s(s.clusterNetworkErrorMessage)+" ")])])],2):e._e()],1)]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))],2)},r=[],o=s("dffb"),i=s("70a6"),n=s("efbe"),l=s("2c0b"),c=s("d6d1"),d=s("56a4"),u=s("873f"),p=s("90cd"),h=s("b837");const f={id:p["b"].NETWORK_ATTACHMENT,type:d["I"],attributes:{kind:p["b"].NETWORK_ATTACHMENT,namespaced:!0},metadata:{name:p["b"].NETWORK_ATTACHMENT}},m=[c["y"],c["z"],{name:"type",value:"vlanType",sort:"spec.config",labelKey:"tableHeaders.networkType"},{name:"vlan",value:"vlanId",sort:"spec.config",labelKey:"tableHeaders.networkVlan"},{name:"connectivity",value:"connectivity",labelKey:"tableHeaders.routeConnectivity",formatter:"BadgeStateFormatter",formatterOpts:{arbitrary:!0},width:130},c["c"]];var g={name:"HarvesterListNetworks",components:{ResourceTable:n["a"],Banner:o["a"],Loading:i["a"],BadgeState:l["a"]},async fetch(){const e=this.$store.getters["currentCluster"],t=e.isHarvester?"harvester":"cluster",s={rows:this.$store.dispatch(t+"/findAll",{type:d["x"]})};this.$store.getters[t+"/schemaFor"](p["b"].NODE_NETWORK)&&(s.hostNetworks=this.$store.dispatch(t+"/findAll",{type:p["b"].NODE_NETWORK})),this.$store.getters[t+"/schemaFor"](p["b"].CLUSTER_NETWORK)&&(s.clusterNetworks=this.$store.dispatch(t+"/findAll",{type:p["b"].CLUSTER_NETWORK}));const a=await Object(h["a"])(s);this.rows=a.rows,this.hostNetworks=a.hostNetworks||[]},data(){return{hash:{},rows:[],hosts:[],hostNetworks:[]}},computed:{headers(){return[c["S"],c["y"],c["z"],{name:"type",value:"vlanType",sort:"spec.config",labelKey:"tableHeaders.networkType"},{name:"clusterNetwork",value:"clusterNetwork",sort:"clusterNetwork",labelKey:"harvester.network.clusterNetwork.label"},{name:"vlan",value:"vlanId",sort:"spec.config",labelKey:"tableHeaders.networkVlan"},{name:"connectivity",value:"connectivity",labelKey:"tableHeaders.routeConnectivity",formatter:"NetworkRouteConnectivity",formatterOpts:{arbitrary:!0},width:130},c["c"]]},schema(){return f},abnormalNetwork(){const e=this.hostNetworks.filter(e=>!e.isReady);return e.map(e=>e.linkMessage)},filterRows(){return this.rows.filter(e=>{var t,s;return!(null!==(t=e.metadata)&&void 0!==t&&null!==(s=t.annotations)&&void 0!==s&&s[u["a"].STORAGE_NETWORK])})}},typeDisplay(){return this.$store.getters["type-map/labelFor"](f,99)}},v=g,b=(s("b83d"),s("d802")),y=Object(b["a"])(v,a,r,!1,null,"453e7022",null);t["default"]=y.exports},"713a":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".has-link[data-v-7a7c6c24]{cursor:pointer}.has-link[data-v-7a7c6c24]:hover{border-color:var(--link)}[data-v-7a7c6c24] .content{display:flex;justify-content:space-between;align-items:center}[data-v-7a7c6c24] .content H1,[data-v-7a7c6c24] .content H3{margin:0}[data-v-7a7c6c24] .content .chip{border-radius:2em;color:var(--body-bg);padding:0 1em}[data-v-7a7c6c24] .content .chip.warn-count{background:var(--warning)}[data-v-7a7c6c24] .content .chip.error-count{background:var(--error)}",""]),e.exports=t},"72ad":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,groupable:!0,"default-sort-by":"age",namespaced:!0,rows:e.rows,schema:e.schema,"key-field":"_key"},scopedSlots:e._u([{key:"cell:state",fn:function(e){return[t("div",{staticClass:"state"},[t("HarvesterVolumeState",{staticClass:"vmstate",attrs:{row:e.row}})],1)]}},{key:"cell:AttachedVM",fn:function(s){return[t("div",[e.getVMName(s.row)?t("n-link",{attrs:{to:e.goTo(s.row)}},[e._v(" "+e._s(e.getVMName(s.row))+" ")]):e._e()],1)]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))},r=[],o=s("70a6"),i=s("efbe"),n=s("c3df");function l(e){const t=Object.keys(e),s=Object.values(e);return Promise.allSettled(s).then(e=>{const s={};for(let a=0;a<t.length;a++)"fulfilled"===e[a].status?s[t[a]]=e[a].value:s[t[a]]=[];return s})}var c=s("56a4"),d=s("90cd"),u=s("d6d1");const p={id:d["b"].VOLUME,type:c["I"],attributes:{kind:d["b"].VOLUME,namespaced:!0},metadata:{name:d["b"].VOLUME}};var h={name:"HarvesterListVolume",components:{Loading:o["a"],ResourceTable:i["a"],HarvesterVolumeState:n["default"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={pvcs:this.$store.dispatch(e+"/findAll",{type:c["E"]}),pvs:this.$store.dispatch(e+"/findAll",{type:c["D"]}),vms:this.$store.dispatch(e+"/findAll",{type:d["b"].VM})},s=this.$store.getters[e+"/schemaFor"](d["c"]);s&&(t.snapshots=this.$store.dispatch(e+"/findAll",{type:d["c"]})),this.$store.getters[e+"/schemaFor"](c["s"].VOLUMES)&&(t.longhornVolumes=this.$store.dispatch(e+"/findAll",{type:c["s"].VOLUMES})),this.$store.getters[e+"/schemaFor"](c["s"].ENGINES)&&(t.longhornEngines=this.$store.dispatch(e+"/findAll",{type:c["s"].ENGINES}));const a=await l(t),r=this.$store.getters[e+"/schemaFor"](c["E"]);null!==r&&void 0!==r&&r.collectionMethods.find(e=>"post"===e.toLowerCase())||this.$store.dispatch("type-map/configureType",{match:d["b"].VOLUME,isCreatable:!1}),this.rows=a.pvcs},data(){return{rows:[]}},computed:{schema(){return p},headers(){return[u["S"],u["y"],u["z"],{name:"size",labelKey:"tableHeaders.size",value:"spec.resources.requests.storage",sort:"volumeSort",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"storageClass",labelKey:"tableHeaders.storageClass",value:"spec.storageClassName"},{name:"AttachedVM",labelKey:"tableHeaders.attachedVM",type:"attached",value:"spec.claimRef",sort:"name"},{name:"VolumeSnapshotCounts",labelKey:"harvester.tableHeaders.volumeSnapshotCounts",value:"relatedVolumeSnapshotCounts",formatter:"RelatedVolumeSnapshotCounts",sort:"name"},{...u["S"],name:"phase",labelKey:"tableHeaders.phase",formatterOpts:{arbitrary:!0},value:"phaseState"},u["c"]]}},methods:{goTo(e){var t;return null===e||void 0===e||null===(t=e.attachVM)||void 0===t?void 0:t.detailLocation},getVMName(e){var t,s;return(null===(t=e.attachVM)||void 0===t||null===(s=t.metadata)||void 0===s?void 0:s.name)||""}},typeDisplay(){return this.$store.getters["type-map/labelFor"](p,99)}},f=h,m=(s("13dd"),s("d802")),g=Object(m["a"])(f,a,r,!1,null,"254ddec6",null);t["default"]=g.exports},"73e2":function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"overview-web-console"},[t("ButtonDropdown",{attrs:{disabled:e.isOff,"no-drop":e.isOff,"button-label":"Console","dropdown-options":e.options,size:"sm"},on:{"click-action":e.handleDropdown}})],1)},r=[],o=s("98f3"),i=s("9ce4"),n=s("44f6"),l=s("4aac"),c={name:"VMConsoleBar",components:{ButtonDropdown:o["a"]},props:{resource:{type:Object,required:!0,default:()=>({})}},computed:{...Object(i["a"])({t:"i18n/t"}),isOff(){return this.resource.stateDisplay===n["OFF"]},options(){return[{label:this.t("harvester.virtualMachine.console.novnc"),value:"vnc"},{label:this.t("harvester.virtualMachine.console.serial"),value:"serial"}]}},methods:{handleDropdown(e){this.show(e.value)},show(e){var t,s,a,r;let o=null===(t=this.resource.metadata)||void 0===t||null===(s=t.ownerReferences)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.uid;void 0===o&&(o=this.resource.metadata.uid);const i=window.location.host,n=window.location.pathname.replace(this.$route.path,""),c=null===(r=this.$route)||void 0===r?void 0:r.params,d=`https://${i}${n}/${l["PRODUCT_NAME"]}/c/${c.cluster}/console/${o}/${e}`;window.open(d,"_blank","toolbars=0,width=900,height=700,left=0,top=0,noreferrer")},isEmpty(e){return void 0!==e&&0===Object.keys(e).length}}},d=c,u=(s("592e"),s("d802")),p=Object(u["a"])(d,a,r,!1,null,null,null);t["a"]=p.exports},"7aae":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,"sub-rows":!0,groupable:!1,rows:e.rows,"group-title-by":e.groupTitleBy,"group-by":e.groupBy,schema:e.schema,"group-can-action":!0,"key-field":"_key"},scopedSlots:e._u([{key:"group-by",fn:function(s){return[t("div",{staticClass:"group-bar"},[t("div",{staticClass:"group-tab"},[t("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.templateLabel(s.group),expression:"templateLabel(group.group)"}],staticClass:"project-name"})]),t("div",{staticClass:"right"},[t("div",{staticClass:"age"},[t("LiveData",{attrs:{value:e.valueFor(s.group),row:e.templateResource(s.group)}})],1),t("button",{staticClass:"btn btn-sm actions mr-10 role-multi-action",attrs:{type:"button"},on:{click:function(t){return e.showActions(t,s.group)}}},[t("i",{staticClass:"icon icon-actions"})])])])]}},{key:"col:defaultVersion",fn:function({row:e}){return[e.isDefaultVersion?t("td",[t("i",{staticClass:"icon icon-checkmark"})]):t("td")]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))},r=[],o=s("70a6"),i=function(){var e=this,t=e._self._c;return e.suffixedLabel?e.showTooltip?t("span",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:{content:e.title,placement:e.tooltipPlacement},expression:"{content: title, placement: tooltipPlacement}"}],staticClass:"live-date"},[e._v(" "+e._s(e.suffixedLabel)+" ")]):t("span",{staticClass:"live-date"},[e._v(" "+e._s(e.suffixedLabel)+" ")]):t("span",{staticClass:"text-muted"},[e._v(" — ")])},n=[],l=s("050d"),c=s.n(l),d=s("005f"),u=s("06f6"),p=s("bea0"),h={props:{value:{type:[String,Number],default:""},addSuffix:{type:Boolean,default:!1},addPrefix:{type:Boolean,default:!1},suffix:{type:String,default:"ago"},tooltipPlacement:{type:String,default:"auto"},showTooltip:{type:Boolean,default:!0}},mounted(){this.liveUpdate(c()())},data(){return{label:"-"}},computed:{title(){if(!this.value)return"";const e=Object(u["g"])(this.$store.getters["prefs/get"](d["d"])),t=Object(u["g"])(this.$store.getters["prefs/get"](d["t"])),s=c()(this.value).format(`${e} ${t}`);return s},suffixedLabel(){if(!this.value)return this.label;let e=this.label||"";if(e&&this.addSuffix){const t=this.$store.getters["i18n/exists"],s="suffix."+this.suffix,a=t(s)?this.t(s):this.suffix;e=`${e} ${a}`}return e},dayValue(){return this.value?c()(this.value):null}},watch:{value(){this.liveUpdate(c()())}},methods:{liveUpdate(e){if(!this.dayValue)return"-"!==this.label&&(this.label="-"),300;const t=Object(p["a"])(this.dayValue,e),s=t.diff<0||!this.addPrefix?"":"-";let a=t.label;return 0===t.diff?a="Just now":(a+=` ${s}${this.t(t.unitsKey,{count:t.label})}`,a=a.trim()),this.label!==a&&(this.label=a),t.next||1}}},f=h,m=s("d802"),g=Object(m["a"])(f,i,n,!1,null,null,null),v=g.exports,b=s("efbe"),y=s("90cd"),_=s("b837"),w=s("d6d1"),S={name:"HarvesterListTemplate",components:{ResourceTable:b["a"],LiveData:v,Loading:o["a"]},props:{schema:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await Object(_["a"])({template:this.$store.dispatch(e+"/findAll",{type:y["b"].VM_TEMPLATE}),templateVersion:this.$store.dispatch(e+"/findAll",{type:y["b"].VM_VERSION})});this.template=t.template,this.templateVersion=t.templateVersion},data(){return{template:[],templateVersion:[]}},computed:{headers(){return[w["S"],w["y"],w["z"],{name:"defaultVersion",value:"id",labelKey:"tableHeaders.defaultVersion"},w["c"]]},rows(){return[...this.templateVersion]},groupBy(){return"spec.templateId"},groupTitleBy(){return y["b"].VM_TEMPLATE}},methods:{showActions(e,t){const s=t.rows[0].template;this.$store.commit("action-menu/show",{resources:[s],elem:e.target})},valueFor(e){var t,s;const a=null===e||void 0===e||null===(t=e.rows)||void 0===t?void 0:t[0].template;return null===a||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.creationTimestamp},templateLabel(e){return e.key},templateResource(e){var t;return null===e||void 0===e||null===(t=e.rows)||void 0===t?void 0:t[0].template}}},C=S,T=(s("f26d"),Object(m["a"])(C,a,r,!1,null,"149cb180",null));t["default"]=T.exports},"7b0f":function(e,t,s){var a=s("fd53");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("36b5090e",a,!0,{sourceMap:!1,shadowMode:!1})},"7df9":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".empty[data-v-5884831e]{flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;margin-top:6em;min-height:100%}i[data-v-5884831e]{font-size:10em;opacity:1%}h2[data-v-5884831e],i[data-v-5884831e]{margin:0}h3[data-v-5884831e]{margin-top:2em}",""]),e.exports=t},"7f03":function(e,t,s){"use strict";s("cb18")},8077:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):e.listSchema?t("div",[!1===e.loggingEnabled?t("Banner",{attrs:{color:"info"}},[t("MessageLink",{attrs:{to:e.to,"prefix-label":"harvester.logging.diabledTips.prefix","middle-label":"harvester.logging.diabledTips.middle","suffix-label":"harvester.logging.diabledTips.suffix"}})],1):e._e(),t("ResourceTable",{attrs:{schema:e.schema,rows:e.rows,"ignore-filter":!0,groupable:!1}})],1):t("Banner",{attrs:{color:"warning"}},[e._v(" "+e._s(e.t("harvester.generic.noSchema",{schema:e.schema.id}))+" ")])},r=[],o=s("b837"),i=s("efbe"),n=s("2a88"),l=s("203b"),c=s("70a6"),d=s("56a4"),u=s("90cd");const p={id:u["b"].OUTPUT,type:d["I"],attributes:{kind:u["b"].OUTPUT,namespaced:!0},metadata:{name:u["b"].OUTPUT}},h="cattle-logging-system/rancher-logging";var f={name:"ListApps",components:{Loading:c["a"],ResourceTable:i["a"],Banner:n["a"],MessageLink:l["a"]},async fetch(){var e;const t=this.$store.getters["currentProduct"].inStore,s={};this.listSchema=this.$store.getters[t+"/schemaFor"](d["r"].OUTPUT),this.listSchema&&(s.rows=this.$store.dispatch(t+"/findAll",{type:d["r"].OUTPUT})),this.$store.getters[t+"/schemaFor"](u["b"].ADD_ONS)&&(s.loggingAddon=this.$store.dispatch(t+"/find",{type:u["b"].ADD_ONS,id:h}));const a=await Object(o["a"])(s);this.rows=a.rows,this.loggingAddon=a.loggingAddon,this.$store.dispatch("type-map/configureType",{match:u["b"].OUTPUT,isCreatable:this.listSchema&&(null===(e=this.listSchema)||void 0===e?void 0:e.collectionMethods.find(e=>"post"===e.toLowerCase()))})},data(){return{rows:[],listSchema:null,loggingAddon:null}},computed:{schema(){return p},to(){return u["b"].ADD_ONS+"/cattle-logging-system/rancher-logging?mode=edit#basic"},loggingEnabled(){var e,t;return null===(e=this.loggingAddon)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.enabled}},typeDisplay(){return this.$store.getters["type-map/labelFor"](p,99)}},m=f,g=s("d802"),v=Object(g["a"])(m,a,r,!1,null,null,null);t["default"]=v.exports},"844d":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".cluster-dashboard-glance[data-v-3de34b8d]{border-top:1px solid var(--border);border-bottom:1px solid var(--border);padding:20px 0;display:flex}.cluster-dashboard-glance>*[data-v-3de34b8d]{margin-right:40px}.cluster-dashboard-glance>* SPAN[data-v-3de34b8d]{font-weight:700}.events[data-v-3de34b8d]{margin-top:30px}",""]),e.exports=t},"85d7":function(e,t,s){"use strict";s("d6fb")},8614:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[!1===e.monitoringEnabled?t("Banner",{attrs:{color:"info"}},[t("MessageLink",{attrs:{to:e.to,"prefix-label":"harvester.monitoring.alertmanagerConfig.diabledMonitoringTips.prefix","middle-label":"harvester.monitoring.alertmanagerConfig.diabledMonitoringTips.middle","suffix-label":"harvester.monitoring.alertmanagerConfig.diabledMonitoringTips.suffix"}})],1):e._e(),!1===e.alertingEnabled?t("Banner",{attrs:{color:"info"}},[t("MessageLink",{attrs:{to:e.to,"prefix-label":"harvester.monitoring.alertmanagerConfig.diabledAlertingTips.prefix","middle-label":"harvester.monitoring.alertmanagerConfig.diabledAlertingTips.middle","suffix-label":"harvester.monitoring.alertmanagerConfig.diabledAlertingTips.suffix"}})],1):e._e(),t("Banner",{attrs:{color:"info"}},[e._v(" "+e._s(e.t("monitoring.alertmanagerConfig.description"))+" ")]),t("ResourceTable",e._g(e._b({attrs:{groupable:!0,schema:e.schema,rows:e.rows,"key-field":"_key"}},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},r=[],o=s("7838"),i=s.n(o),n=s("b837"),l=s("dffb"),c=s("203b"),d=s("efbe"),u=s("70a6"),p=s("56a4"),h=s("90cd");const f={id:h["b"].ALERTMANAGERCONFIG,type:p["I"],attributes:{kind:h["b"].ALERTMANAGERCONFIG,namespaced:!0},metadata:{name:h["b"].ALERTMANAGERCONFIG}},m="cattle-monitoring-system/rancher-monitoring";var g={name:"ListAlertManagerConfigs",components:{Banner:l["a"],Loading:u["a"],ResourceTable:d["a"],MessageLink:c["a"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={rows:this.$store.dispatch(e+"/findAll",{type:p["v"].ALERTMANAGERCONFIG})};this.$store.getters[e+"/schemaFor"](h["b"].ADD_ONS)&&(t.monitoring=this.$store.dispatch(e+"/find",{type:h["b"].ADD_ONS,id:m}));const s=await Object(n["a"])(t);this.rows=s.rows,this.monitoringAddon=s.monitoring;const a=this.$store.getters[e+"/schemaFor"](p["v"].ALERTMANAGERCONFIG);this.$store.dispatch("type-map/configureType",{match:h["b"].ALERTMANAGERCONFIG,isCreatable:null===a||void 0===a?void 0:a.collectionMethods.find(e=>"post"===e.toLowerCase())})},data(){return{rows:null,monitoringAddon:null}},computed:{schema(){return f},to(){return h["b"].ADD_ONS+"/cattle-monitoring-system/rancher-monitoring?mode=edit#alertmanager"},monitoringEnabled(){var e,t;return null===(e=this.monitoringAddon)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.enabled},alertingEnabled(){var e,t,s;const a=i.a.load(null===(e=this.monitoringAddon)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.valuesContent);return null===a||void 0===a||null===(s=a.alertmanager)||void 0===s?void 0:s.enabled}},typeDisplay(){return this.$store.getters["type-map/labelFor"](f,99)}},v=g,b=(s("331b"),s("d802")),y=Object(b["a"])(v,a,r,!1,null,"5884831e",null);t["default"]=y.exports},"93fe":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("Banner",{staticClass:"settings-banner",attrs:{color:"warning"}},[t("div",[e._v(" "+e._s(e.t("advancedSettings.subtext"))+" ")])]),t("Tabbed",{staticClass:"mt-30"},[t("Tab",{attrs:{name:"advanced",label:e.t("harvester.setting.tabs.advanced"),weight:99}},[t("Settings",{attrs:{settings:e.settings,category:"advanced"}})],1),t("Tab",{attrs:{name:"ui",label:e.t("harvester.setting.tabs.ui"),weight:89}},[t("Settings",{attrs:{settings:e.settings,category:"ui"}})],1)],1)],1)},r=[],o=s("9ce4"),i=s("dffb"),n=s("70a6"),l=s("005f"),c=s("56a4"),d=s("90cd"),u=s("b837"),p=s("fa85"),h=s("ad61"),f=s("5ef9"),m=function(){var e=this,t=e._self._c;return t("div",e._l(e.categorySettings,(function(s){return t("div",{key:s.id,staticClass:"advanced-setting mb-20"},[t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[t("h1",[e._v(" "+e._s(s.id)+" "),s.customized?t("span",{staticClass:"modified"},[e._v(" Modified ")]):e._e()]),t("h2",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t(s.description,{},!0),expression:"t(setting.description, {}, true)"}]})]),s.hasActions?t("div",{staticClass:"action",attrs:{id:s.id}},[t("button",{staticClass:"btn btn-sm role-multi-action actions",attrs:{"aria-haspopup":"true","aria-expanded":"false",type:"button"},on:{click:function(t){return e.showActionMenu(t,s)}}},[t("i",{staticClass:"icon icon-actions"})])]):e._e()]),t("div",{attrs:{value:""}},[s.hide?e._e():t("div",{staticClass:"settings-value"},["json"===s.kind?t("pre",[e._v(e._s(s.json))]):"multiline"===s.kind?t("pre",[e._v(e._s(s.data.value||s.data.default))]):"enum"===s.kind?t("pre",[e._v(e._s(e.t(s.enum)))]):"custom"===s.kind&&s.custom?t("pre",[e._v(e._s(s.custom))]):s.data.value||s.data.default?t("pre",[e._v(e._s(s.data.value||s.data.default))]):t("pre",{staticClass:"text-muted"},[e._v("<"+e._s(e.t("advancedSettings.none"))+">")])]),t("div",{staticClass:"mt-5"},[s.hide?t("button",{staticClass:"btn btn-sm role-primary",on:{click:function(t){return e.toggleHide(s)}}},[e._v(" "+e._s(e.t("advancedSettings.show"))+" "+e._s(s.id)+" ")]):e._e(),s.canHide&&!s.hide?t("button",{staticClass:"btn btn-sm role-primary",on:{click:function(t){return e.toggleHide(s)}}},[e._v(" "+e._s(e.t("advancedSettings.hide"))+" "+e._s(s.id)+" ")]):e._e(),s.id===e.HCI_SETTING.BACKUP_TARGET?t("AsyncButton",{staticClass:"backupButton ml-5",attrs:{mode:"apply",size:"sm",delay:0,"action-label":e.t("harvester.backup.message.testConnect.actionLabel"),"waiting-label":e.t("harvester.backup.message.testConnect.waitingLabel"),"success-label":e.t("harvester.backup.message.testConnect.successLabel")},on:{click:t=>e.testConnect(t,s.data.value)}}):e._e()],1)]),s.data.errMessage?t("Banner",{staticClass:"settings-banner",attrs:{color:"error mt-5"}},[e._v(" "+e._s(s.data.errMessage)+" ")]):e._e()],1)})),0)},g=[],v=s("a967");const b={ui:["branding","ui-source","ui-plugin-index","ui-index"]};var y={name:"SettingLists",components:{AsyncButton:v["b"],Banner:i["a"]},props:{settings:{type:Array,required:!0},category:{type:String,required:!0}},data(){const e=this.settings.filter(e=>{if("advanced"!==this.category)return(b[this.category]||[]).find(t=>t===e.id);if("advanced"===this.category){const t=Object.keys(b);return!t.some(t=>(b[t]||[]).find(t=>t===e.id))}})||[];return{HCI_SETTING:p["b"],categorySettings:e}},computed:{...Object(o["a"])({t:"i18n/t"})},methods:{showActionMenu(e,t){const s=e.srcElement;this.$store.commit("action-menu/show",{resources:t.data,elem:s})},getSettingOption(e){return p["a"].find(t=>t.id===e)},toggleHide(e){this.categorySettings.find(t=>{t.id===e.id&&(t.hide=!t.hide)})},async testConnect(e,t){try{const s=this.$store.getters["harvester-common/getHarvesterClusterUrl"]("v1/harvester/backuptarget/healthz"),a=await this.$store.dispatch("harvester/request",{url:s}),r=JSON.parse(t);200===(null===a||void 0===a?void 0:a._status)&&this.$store.dispatch("growl/success",{title:this.t("harvester.notification.title.succeed"),message:this.t("harvester.backup.message.testConnect.successMessage",{endpoint:null===r||void 0===r?void 0:r.endpoint})},{root:!0}),e(!0)}catch(s){400!==(null===s||void 0===s?void 0:s._status)&&503!==(null===s||void 0===s?void 0:s._status)||this.$store.dispatch("growl/error",{title:this.t("harvester.notification.title.error"),message:null===s||void 0===s?void 0:s.errors[0]},{root:!0}),e(!1)}}}},_=y,w=(s("faa2"),s("d802")),S=Object(w["a"])(_,m,g,!1,null,"86f3bc72",null),C=S.exports,T={components:{Banner:i["a"],Loading:n["a"],Tabbed:h["a"],Tab:f["a"],Settings:C},async fetch(){let e;try{e=this.$store.getters["prefs/get"](l["u"])}catch{e=this.$store.getters["prefs/get"](l["e"])}const t=!!this.$store.getters["isSingleProduct"],s=this.$store.getters["currentProduct"].inStore,a={harvesterSettings:this.$store.dispatch(s+"/findAll",{type:d["b"].SETTING})};t&&(a.settings=this.$store.dispatch("management/findAll",{type:c["t"].SETTING}));const r=await Object(u["a"])(a);let o=[];o.push(...r.harvesterSettings),t&&(o=[...r.settings,...o]);const i=o.reduce((e,t)=>(e[t.id]=t,e),{}),n=[];let h=p["a"];this.isStandaloneHarvester&&(h={...h,...p["c"]}),Object.keys(h).forEach(t=>{var s;if(!i[t])return;const a=(null===(s=h[t])||void 0===s?void 0:s.alias)||t,r={...h[t],id:a,data:i[t]};r.hide=r.canHide="json"===r.kind||"multiline"===r.kind||"json"===r.customFormatter||"json"===r.data.customFormatter,r.hasActions=!r.readOnly||e,n.push(r)}),this.initSettings=n.sort((e,t)=>e.id<t.id?-1:e.id>t.id?1:0)},data(){return{initSettings:[]}},computed:{...Object(o["a"])({t:"i18n/t"}),...Object(o["a"])(["isStandaloneHarvester"]),settings(){return this.initSettings.map(e=>{var t,s;const a=e,r=null===(t=a.data)||void 0===t||null===(s=t.type)||void 0===s?void 0:s.includes("harvesterhci");if("json"===a.kind)try{a.json=JSON.stringify(JSON.parse(a.data.value||a.data.default||"{}"),null,2)}catch(o){console.error(a.data.id+": wrong format"),a.json={}}else if("enum"===a.kind){const e=a.data.value||a.data.default;a.enum=r?`advancedSettings.enum.harv-${a.id}.${e}`:`advancedSettings.enum.${a.id}.${e}`}else"custom"===a.kind&&(a.custom=a.data.customValue);return{...a,description:r?"advancedSettings.descriptions.harv-"+a.id:"advancedSettings.descriptions."+a.id,customized:!a.readOnly&&a.data.value&&a.data.value!==a.data.default||a.data.hasCustomized}})}}},x=T,k=(s("3840"),Object(w["a"])(x,a,r,!1,null,"4382fd90",null));t["default"]=k.exports},"943c":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,"[data-v-567156f9] .sortable-table TD .badge-state{max-width:250px;text-overflow:clip}[data-v-567156f9] .cell-name{white-space:nowrap}",""]),e.exports=t},"984b":function(e,t,s){"use strict";s.r(t),s.d(t,"VM_HEADERS",(function(){return w}));var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,"default-sort-by":"age",rows:e.rows,schema:e.schema,groupable:!0,"key-field":"_key"},scopedSlots:e._u([{key:"cell:state",fn:function(s){return[t("div",{staticClass:"state"},[t("HarvesterVmState",{staticClass:"vmstate",attrs:{row:s.row,"all-node-network":e.allNodeNetworks,"all-cluster-network":e.allClusterNetworks}})],1)]}},{key:"cell:name",fn:function(s){return[t("div",{staticClass:"name-console"},[s.row.type!==e.HCI.VMI?t("LinkDetail",{attrs:{row:s.row},model:{value:s.row.metadata.name,callback:function(t){e.$set(s.row.metadata,"name",t)},expression:"scope.row.metadata.name"}}):t("span",[e._v(" "+e._s(s.row.metadata.name)+" ")]),t("ConsoleBar",{staticClass:"console mr-10",attrs:{resource:s.row}})],1)]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},r=[],o=s("73e2"),i=s("efbe"),n=function(){var e=this,t=e._self._c;return t("span",[e.to?t("n-link",{attrs:{to:e.to}},[e._v(" "+e._s(e.value)+" ")]):t("span",[e._v(" "+e._s(e.value)+" "),!e.value&&e.col.dashIfEmpty?[t("span",{staticClass:"text-muted"},[e._v("—")])]:e._e()],2)],1)},l=[],c=s("1832"),d={props:{value:{type:String,default:""},row:{type:Object,required:!0},col:{type:Object,default:()=>{}},reference:{type:String,default:null},getCustomDetailLink:{type:Function,default:null}},computed:{to(){var e;return this.getCustomDetailLink?this.getCustomDetailLink(this.row):this.row&&this.reference?Object(c["g"])(this.row,this.reference):null===(e=this.row)||void 0===e?void 0:e.detailLocation}}},u=d,p=s("d802"),h=Object(p["a"])(u,n,l,!1,null,null,null),f=h.exports,m=s("2c7c"),g=s("d6d1"),v=s("56a4"),b=s("90cd"),y=s("b837"),_=s("70a6");const w=[g["S"],{...g["y"],width:300},g["z"],{name:"CPU",label:"CPU",sort:["spec.template.spec.domain.cpu.cores"],value:"spec.template.spec.domain.cpu.cores",align:"center",dashIfEmpty:!0},{name:"FPGA",label:"FPGA",sort:["displayFpga"],value:"displayFpga",align:"center",dashIfEmpty:!0},{name:"Memory",value:"displayMemory",sort:["memorySort"],align:"center",labelKey:"tableHeaders.memory",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"ip",label:"IP Address",value:"id",formatter:"HarvesterIpAddress",labelKey:"tableHeaders.ipAddress"},{...g["c"],sort:"metadata.creationTimestamp:desc"}];var S={name:"HarvesterListVM",components:{Loading:_["a"],HarvesterVmState:m["default"],LinkDetail:f,ConsoleBar:o["a"],ResourceTable:i["a"]},props:{schema:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={vms:this.$store.dispatch(e+"/findAll",{type:b["b"].VM}),pod:this.$store.dispatch(e+"/findAll",{type:v["B"]}),restore:this.$store.dispatch(e+"/findAll",{type:b["b"].RESTORE})};this.$store.getters[e+"/schemaFor"](v["z"])&&(t.nodes=this.$store.dispatch(e+"/findAll",{type:v["z"]}),this.hasNode=!0),this.$store.getters[e+"/schemaFor"](b["b"].NODE_NETWORK)&&(t.nodeNetworks=this.$store.dispatch(e+"/findAll",{type:b["b"].NODE_NETWORK})),this.$store.getters[e+"/schemaFor"](b["b"].CLUSTER_NETWORK)&&(t.clusterNetworks=this.$store.dispatch(e+"/findAll",{type:b["b"].CLUSTER_NETWORK}));const s=await Object(y["a"])(t);this.allVMs=s.vms,this.allNodeNetworks=s.nodeNetworks||[],this.allClusterNetworks=s.clusterNetworks||[]},data(){return{hasNode:!1,allVMs:[],allVMIs:[],allNodeNetworks:[],allClusterNetworks:[],HCI:b["b"]}},computed:{headers(){const e={name:"node",label:"Node",value:"nodeName",sort:["realAttachNodeName"],formatter:"HarvesterHost",labelKey:"tableHeaders.node"},t=Object(c["e"])(w);return this.hasNode&&t.splice(-1,0,e),t},rows(){const e=this.allVMIs.filter(e=>!this.allVMs.find(t=>t.id===e.id));return[...this.allVMs,...e]}},async created(){const e=this.$store.getters["currentProduct"].inStore,t=await this.$store.dispatch(e+"/findAll",{type:b["b"].VMI});await this.$store.dispatch(e+"/findAll",{type:b["b"].VMIM}),this.$set(this,"allVMIs",t)}},C=S,T=(s("d8d7"),Object(p["a"])(C,a,r,!1,null,"38667bbe",null));t["default"]=T.exports},"9a01":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("ResourceTable",{attrs:{headers:e.headers,schema:e.schema,rows:e.filterRows,"use-query-params-for-simple-filtering":!0,"sort-generation-fn":e.sortGenerationFn},scopedSlots:e._u([{key:"group-by",fn:function({group:s}){return[t("div",{directives:[{name:"trim-whitespace",rawName:"v-trim-whitespace"}],ref:s.key,staticClass:"group-tab"},[e.groupIsAllEnabled(s.rows)?t("button",{staticClass:"btn btn-sm role-secondary mr-5",attrs:{type:"button"},on:{click:t=>{e.disableGroup(s.rows),t.target.blur()}}},[e._v(" "+e._s(e.t("harvester.pci.disableGroup"))+" ")]):t("button",{staticClass:"btn btn-sm role-secondary mr-5",attrs:{type:"button"},on:{click:t=>{e.enableGroup(s.rows),t.target.blur()}}},[e._v(" "+e._s(e.t("harvester.pci.enableGroup"))+" ")]),t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:s.key,expression:"group.key"}]})])]}},{key:"cell:claimed",fn:function({row:s}){return[s.isEnabled?t("span",[e._v(e._s(s.claimedBy))]):t("span",{staticClass:"text-muted"},[e._v("—")])]}},{key:"more-header-middle",fn:function(){return[t("FilterBySriov",{ref:"filterByParentSRIOV",attrs:{rows:e.rows},on:{"change-rows":e.changeRows}})]},proxy:!0}])})},r=[],o=s("efbe"),i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"filter"},[e.parentSriov?t("span",{staticClass:"banner-item bg-warning"},[e._v(" "+e._s(e.parentSriov)+" "),t("i",{staticClass:"icon icon-close",on:{click:function(t){return e.remove()}}})]):e._e(),t("v-popover",{attrs:{trigger:"click",placement:"bottom-end"},scopedSlots:e._u([{key:"popover",fn:function(){return[t("div",{staticClass:"filter-popup"},[t("div",[t("LabeledSelect",{attrs:{options:e.parentSriovOptions,searchable:!0,label:e.t("harvester.sriov.parentSriov")},model:{value:e.parentSriov,callback:function(t){e.parentSriov=t},expression:"parentSriov"}})],1)])]},proxy:!0}])},[e._t("header",(function(){return[t("button",{ref:"actionDropDown",staticClass:"btn bg-primary mr-10"},[e._t("title",(function(){return[e._v(" "+e._s(e.t("harvester.sriov.parentSriov"))+" ")]}))],2)]}))],2)],1)},n=[],l=s("90cd"),c=s("873f"),d=s("53fe"),u={name:"HarvesterFilterLabel",components:{LabeledSelect:d["a"]},props:{rows:{type:Array,required:!0}},data(){var e;return{parentSriov:(null===(e=this.$route.query)||void 0===e?void 0:e.parentSriov)||null}},computed:{parentSriovOptions(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](l["b"].SR_IOV)||[];return t.map(e=>e.id)}},methods:{remove(){this.parentSriov=null,this.filterRows()},filterRows(){const e=this.rows.filter(e=>{if(!this.parentSriov)return!0;const t=e.labels[c["a"].PARENT_SRIOV];return t===this.parentSriov});this.$emit("change-rows",e,this.parentSriov)}},watch:{parentSriov:{deep:!0,immediate:!0,handler(){this.filterRows()}}}},p=u,h=(s("20c9"),s("d802")),f=Object(h["a"])(p,i,n,!1,null,"4e171df2",null),m=f.exports,g=s("d6d1"),v=s("b837"),b={name:"ListPciDevices",components:{ResourceTable:o["a"],FilterBySriov:m},props:{schema:{type:Object,required:!0},rows:{type:Array,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={pciclaims:this.$store.dispatch(e+"/findAll",{type:l["b"].PCI_CLAIM}),sriovs:this.$store.dispatch(e+"/findAll",{type:l["b"].SR_IOV})};await Object(v["a"])(t)},data(){const e=this.$store.getters["isSingleProduct"],t=[{...g["S"]},g["Q"],{name:"description",labelKey:"tableHeaders.description",value:"status.description",sort:["status.description"]},{name:"node",labelKey:"tableHeaders.node",value:"status.nodeName",sort:["status.nodeName"]},{name:"address",label:"Address",value:"status.address",sort:["status.address"]},{name:"vendorid",label:"Vendor ID",value:"status.vendorId",sort:["status.vendorId","status.deviceId"]},{name:"deviceid",label:"Device ID",value:"status.deviceId",sort:["status.deviceId","status.vendorId"]}];return e||t.push({name:"claimed",label:"Claimed By",value:"passthroughClaim.userName",sort:["passthroughClaim.userName"]}),{headers:t,parentSriov:null,filterRows:[]}},methods:{enableGroup(e=[]){const t=e[0];t&&t.enablePassthroughBulk(e)},disableGroup(e=[]){e.forEach(e=>{e.passthroughClaim&&e.disablePassthrough()})},groupIsAllEnabled(e=[]){return!e.find(e=>!e.passthroughClaim)},changeRows(e,t){this.$set(this,"filterRows",e),this.$set(this,"parentSriov",t)},sortGenerationFn(){let e=Object(o["b"])(this.schema,this.$store);return this.parentSriov&&(e+=this.parentSriov),e}}},y=b,_=Object(h["a"])(y,a,r,!1,null,null,null);t["default"]=_.exports},"9d0c":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):e.hasAddonSchema?e.hasSchema&&e.enabledPCI?t("DeviceList",{attrs:{rows:e.rows,schema:e.schema}}):t("div",[t("Banner",{attrs:{color:"warning"}},[t("MessageLink",{attrs:{to:e.to,"prefix-label":"harvester.pci.goSetting.prefix","middle-label":"harvester.pci.goSetting.middle","suffix-label":"harvester.pci.goSetting.suffix"}})],1)],1):t("div",[t("Banner",{attrs:{color:"warning"}},[e._v(" "+e._s(e.t("harvester.pci.noPCIPermission"))+" ")])],1)},r=[],o=s("90cd"),i=s("56a4"),n=s("b837"),l=s("2a88"),c=s("70a6"),d=s("203b"),u=s("9a01");const p={id:o["b"].PCI_DEVICE,type:i["I"],attributes:{kind:o["b"].PCI_DEVICE,namespaced:!1},metadata:{name:o["b"].PCI_DEVICE}};var h={name:"ListPciDevicePage",components:{Banner:l["a"],DeviceList:u["default"],Loading:c["a"],MessageLink:d["a"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore;if(this.hasSchema=this.$store.getters[e+"/schemaFor"](o["b"].PCI_DEVICE),this.hasAddonSchema=this.$store.getters[e+"/schemaFor"](o["b"].ADD_ONS),this.hasSchema)try{var t,s;const e=this.$store.getters["currentProduct"].inStore,a=await Object(n["a"])({pcidevice:this.$store.dispatch(e+"/findAll",{type:o["b"].PCI_DEVICE}),addons:this.$store.dispatch(e+"/findAll",{type:o["b"].ADD_ONS})});this.enabledPCI=!0===(null===(t=a.addons.find(e=>"pcidevices-controller"===e.name))||void 0===t||null===(s=t.spec)||void 0===s?void 0:s.enabled),this.$store.dispatch("type-map/configureType",{match:o["b"].PCI_DEVICE,isCreatable:this.enabledPCI})}catch(a){}},data(){return{enabledPCI:!1,hasSchema:!1,to:o["b"].ADD_ONS+"/harvester-system/pcidevices-controller?mode=edit"}},computed:{schema(){return p},rows(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](o["b"].PCI_DEVICE);return t}},typeDisplay(){return this.$store.getters["type-map/labelFor"](p,99)}},f=h,m=s("d802"),g=Object(m["a"])(f,a,r,!1,null,null,null);t["default"]=g.exports},"9f87":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".state[data-v-78efe1e0]{display:flex}.state .icon-warning[data-v-78efe1e0]{margin-top:2px}.warning-message[data-v-78efe1e0]:first-letter{text-transform:uppercase}",""]),e.exports=t},a54a:function(e,t,s){var a=s("09dd");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("68ea8120",a,!0,{sourceMap:!1,shadowMode:!1})},af5c:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[e.uploadingImages.length>0?t("Banner",{attrs:{color:"warning",label:e.t("harvester.image.warning.uploading",{count:e.uploadingImages.length})}}):e._e(),t("ResourceTable",e._g(e._b({attrs:{rows:e.filterRows,schema:e.schema,"sort-generation-fn":e.sortGenerationFn,"key-field":"_key"},scopedSlots:e._u([{key:"more-header-middle",fn:function(){return[t("FilterLabel",{ref:"filterLabel",attrs:{rows:e.rows},on:{changeRows:e.changeRows}})]},proxy:!0}])},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},r=[],o=s("efbe"),i=s("dffb"),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"filter"},[e._l(e.searchLabels,(function(s,a){return[s.key?t("span",{key:`${s.key}${a}`,staticClass:"banner-item bg-warning"},[e._v(" "+e._s(s.key)+e._s(s.value?"=":"")+e._s(s.value)),t("i",{staticClass:"icon icon-close",on:{click:function(t){return e.remove(s)}}})]):e._e()]})),t("v-popover",{attrs:{trigger:"click",placement:"bottom-end"}},[e._t("header",(function(){return[t("button",{ref:"actionDropDown",staticClass:"btn bg-primary mr-10"},[e._t("title",(function(){return[e._v(" "+e._s(e.t("harvester.fields.filterLabels"))+" ")]}))],2)]})),t("template",{slot:"popover"},[t("div",{staticClass:"filter-popup"},[t("div",[t("ArrayList",{attrs:{"show-header":!0,"default-add-value":e.defaultAddValue,"initial-empty-row":!0},on:{input:e.filterRows},scopedSlots:e._u([{key:"column-headers",fn:function(){return[t("div",{staticClass:"box"},[t("div",{staticClass:"key"},[e._v(" "+e._s(e.t("generic.key"))+" "),t("span",{staticClass:"required"},[e._v("*")])]),t("div",{staticClass:"value"},[e._v(" "+e._s(e.t("generic.value"))+" ")]),t("div")])]},proxy:!0},{key:"columns",fn:function(s){return[t("div",{staticClass:"key"},[t("Select",{key:"label",ref:"select",attrs:{"append-to-body":!1,searchable:!0,options:e.optionLabels},on:{input:e.filterRows},model:{value:s.row.value.key,callback:function(t){e.$set(s.row.value,"key",t)},expression:"scope.row.value.key"}})],1),t("div",{staticClass:"value"},[e.calcValueOptions(s.row.value.key).length>0?t("Select",{key:"value",ref:"select",attrs:{"append-to-body":!1,searchable:!0,options:e.calcValueOptions(s.row.value.key)},on:{input:e.filterRows},model:{value:s.row.value.value,callback:function(t){e.$set(s.row.value,"value",t)},expression:"scope.row.value.value"}}):t("LabeledInput",{on:{input:e.filterRows},model:{value:s.row.value.value,callback:function(t){e.$set(s.row.value,"value",t)},expression:"scope.row.value.value"}})],1)]}},{key:"add",fn:function({add:s}){return[t("div",[t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button","data-testid":"add-item"},on:{click:function(e){return s()}}},[e._v(" "+e._s(e.t("generic.add"))+" ")]),t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button","data-testid":"remove-all-item"},on:{click:function(t){return e.removeAll()}}},[e._v(" "+e._s(e.t("generic.clearAll"))+" ")])])]}}]),model:{value:e.searchLabels,callback:function(t){e.searchLabels=t},expression:"searchLabels"}})],1)])])],2)],2)},l=[],c=s("da9e"),d=s("81a6"),u=s("d076"),p={name:"HarvesterFilterLabel",components:{Select:d["a"],ArrayList:c["a"],LabeledInput:u["a"]},props:{rows:{type:Array,required:!0}},data(){return{searchLabels:[],defaultAddValue:{key:"",value:""}}},computed:{optionLabels(){const e=this.rows.map(e=>Object.keys(e.labels));return Array.from(new Set(e.flat()))}},methods:{calcValueOptions(e){const t=[];return this.rows.map(s=>{const a=t.find(t=>t.label===s.labels[e]);Object.keys(s.labels).includes(e)&&e&&s.labels[e]&&!a&&t.push({value:s.labels[e],label:s.labels[e]})}),t},removeAll(){this.$set(this,"searchLabels",[]),this.filterRows()},remove(e){this.searchLabels.find((t,s)=>{if(t.key===e.key&&t.value===e.value)return this.searchLabels.splice(s,1),this.filterRows(),!0})},filterRows(){const e=this.rows.filter(e=>{const t=this.searchLabels.find(e=>e.key);if(!t)return this.rows;const s=e.labels,a=Object.keys(s);return this.searchLabels.find(e=>!(!e.key||!a.includes(e.key))&&(!e.value||(e.value===s[e.key]||e.value===s[e.key]&&void 0)))});this.$emit("changeRows",e,this.searchLabels)}},watch:{rows:{deep:!0,immediate:!0,handler(){this.filterRows()}}}},h=p,f=(s("dc10"),s("d802")),m=Object(f["a"])(h,n,l,!1,null,"dc148608",null),g=m.exports,v={name:"ListHarvesterImage",components:{ResourceTable:o["a"],Banner:i["a"],FilterLabel:g},props:{schema:{type:Object,required:!0},rows:{type:Array,required:!0}},data(){return{searchLabels:[],filterRows:[]}},computed:{uploadingImages(){return this.$store.getters["harvester-common/uploadingImages"]||[]}},methods:{changeRows(e,t){this.$set(this,"filterRows",e),this.$set(this,"searchLabels",t)},sortGenerationFn(){let e=Object(o["b"])(this.schema,this.$store);return this.searchLabels.map(t=>{e+=t.key,e+=t.value}),e}}},b=v,y=Object(f["a"])(b,a,r,!1,null,null,null);t["default"]=y.exports},b32a:function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".state[data-v-453e7022]{display:flex;justify-content:space-between}.state .icon-warning[data-v-453e7022]{margin-top:2px}",""]),e.exports=t},b83d:function(e,t,s){"use strict";s("377a")},b8ac:function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".settings-banner[data-v-4382fd90]{margin-top:0}",""]),e.exports=t},ba4c:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):e.listSchema?t("div",[!1===e.loggingEnabled?t("Banner",{attrs:{color:"info"}},[t("MessageLink",{attrs:{to:e.to,"prefix-label":"harvester.logging.diabledTips.prefix","middle-label":"harvester.logging.diabledTips.middle","suffix-label":"harvester.logging.diabledTips.suffix"}})],1):e._e(),t("ResourceTable",{attrs:{schema:e.schema,rows:e.rows,"ignore-filter":!0,groupable:!1}})],1):t("Banner",{attrs:{color:"warning"}},[e._v(" "+e._s(e.t("harvester.generic.noSchema",{schema:e.schema.id}))+" ")])},r=[],o=s("b837"),i=s("efbe"),n=s("2a88"),l=s("203b"),c=s("70a6"),d=s("56a4"),u=s("90cd");const p={id:u["b"].CLUSTER_OUTPUT,type:d["I"],attributes:{kind:u["b"].CLUSTER_OUTPUT,namespaced:!0},metadata:{name:u["b"].CLUSTER_OUTPUT}},h="cattle-logging-system/rancher-logging";var f={name:"ListApps",components:{Loading:c["a"],ResourceTable:i["a"],Banner:n["a"],MessageLink:l["a"]},async fetch(){var e;const t=this.$store.getters["currentProduct"].inStore,s={};this.listSchema=this.$store.getters[t+"/schemaFor"](d["r"].CLUSTER_OUTPUT),this.listSchema&&(s.rows=this.$store.dispatch(t+"/findAll",{type:d["r"].CLUSTER_OUTPUT})),this.$store.getters[t+"/schemaFor"](u["b"].ADD_ONS)&&(s.loggingAddon=this.$store.dispatch(t+"/find",{type:u["b"].ADD_ONS,id:h}));const a=await Object(o["a"])(s);this.rows=a.rows,this.loggingAddon=a.loggingAddon,this.$store.dispatch("type-map/configureType",{match:u["b"].CLUSTER_OUTPUT,isCreatable:this.listSchema&&(null===(e=this.listSchema)||void 0===e?void 0:e.collectionMethods.find(e=>"post"===e.toLowerCase()))})},data(){return{rows:[],listSchema:null,loggingAddon:null}},computed:{schema(){return p},to(){return u["b"].ADD_ONS+"/cattle-logging-system/rancher-logging?mode=edit#basic"},loggingEnabled(){var e,t;return null===(e=this.loggingAddon)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.enabled}},typeDisplay(){return this.$store.getters["type-map/labelFor"](p,99)}},m=f,g=s("d802"),v=Object(g["a"])(m,a,r,!1,null,null,null);t["default"]=v.exports},bccc:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("ResourceTable",e._g(e._b({attrs:{groupable:!0,schema:e.schema,rows:e.rows,"key-field":"_key"}},"ResourceTable",e.$attrs,!1),e.$listeners))},r=[],o=s("efbe"),i=s("70a6"),n=s("56a4"),l=s("90cd");const c={id:l["b"].SECRET,type:n["I"],attributes:{kind:l["b"].SECRET,namespaced:!0},metadata:{name:l["b"].SECRET}};var d={name:"HarvesterSecret",components:{ResourceTable:o["a"],Loading:i["a"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore;this.rows=await this.$store.dispatch(e+"/findAll",{type:n["J"]});const t=this.$store.getters[e+"/schemaFor"](n["J"]);null!==t&&void 0!==t&&t.collectionMethods.find(e=>"post"===e.toLowerCase())||this.$store.dispatch("type-map/configureType",{match:l["b"].SECRET,isCreatable:!1})},data(){return{rows:[]}},computed:{schema(){return c}},typeDisplay(){return this.$store.getters["type-map/labelFor"](c,99)}},u=d,p=s("d802"),h=Object(p["a"])(u,a,r,!1,null,null,null);t["default"]=h.exports},bf2c:function(e,t,s){!function(t,s){e.exports=s()}(0,(function(){"use strict";return function(e,t,s){var a=function(e,t){if(!t.length)return s();var a;1===t.length&&t[0].length>0&&(t=t[0]),a=t[0];for(var r=1;r<t.length;r+=1)t[r].isValid()&&!t[r][e](a)||(a=t[r]);return a};s.max=function(){var e=[].slice.call(arguments,0);return a("isAfter",e)},s.min=function(){var e=[].slice.call(arguments,0);return a("isBefore",e)}}}))},c168:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):e.listSchema?t("div",[!1===e.loggingEnabled?t("Banner",{attrs:{color:"info"}},[t("MessageLink",{attrs:{to:e.to,"prefix-label":"harvester.logging.diabledTips.prefix","middle-label":"harvester.logging.diabledTips.middle","suffix-label":"harvester.logging.diabledTips.suffix"}})],1):e._e(),t("ResourceTable",{attrs:{schema:e.schema,rows:e.rows,"ignore-filter":!0,groupable:!1}})],1):t("Banner",{attrs:{color:"warning"}},[e._v(" "+e._s(e.t("harvester.generic.noSchema",{schema:e.schema.id}))+" ")])},r=[],o=s("b837"),i=s("efbe"),n=s("2a88"),l=s("203b"),c=s("70a6"),d=s("56a4"),u=s("90cd");const p={id:u["b"].FLOW,type:d["I"],attributes:{kind:u["b"].FLOW,namespaced:!0},metadata:{name:u["b"].FLOW}},h="cattle-logging-system/rancher-logging";var f={name:"ListApps",components:{Loading:c["a"],ResourceTable:i["a"],Banner:n["a"],MessageLink:l["a"]},async fetch(){var e;const t=this.$store.getters["currentProduct"].inStore,s={};this.listSchema=this.$store.getters[t+"/schemaFor"](d["r"].FLOW),this.clusteroutputSchema=this.$store.getters[t+"/schemaFor"](d["r"].CLUSTER_OUTPUT),this.listSchema&&(s.output=this.$store.dispatch(t+"/findAll",{type:d["r"].OUTPUT}),s.rows=this.$store.dispatch(t+"/findAll",{type:d["r"].FLOW})),this.clusteroutputSchema&&(s.clusteroutput=this.$store.dispatch(t+"/findAll",{type:d["r"].CLUSTER_OUTPUT})),this.$store.getters[t+"/schemaFor"](u["b"].ADD_ONS)&&(s.loggingAddon=this.$store.dispatch(t+"/find",{type:u["b"].ADD_ONS,id:h}));const a=await Object(o["a"])(s);this.rows=a.rows,this.loggingAddon=a.loggingAddon,this.$store.dispatch("type-map/configureType",{match:u["b"].FLOW,isCreatable:this.listSchema&&(null===(e=this.listSchema)||void 0===e?void 0:e.collectionMethods.find(e=>"post"===e.toLowerCase()))})},data(){return{rows:[],listSchema:null,loggingAddon:null}},computed:{schema(){return p},to(){return u["b"].ADD_ONS+"/cattle-logging-system/rancher-logging?mode=edit#basic"},loggingEnabled(){var e,t;return null===(e=this.loggingAddon)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.enabled}},typeDisplay(){return this.$store.getters["type-map/labelFor"](p,99)}},m=f,g=s("d802"),v=Object(g["a"])(m,a,r,!1,null,null,null);t["default"]=v.exports},c1a0:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("Masthead",{attrs:{schema:e.schema,resource:e.resource,"create-button-label":e.t("harvester.backup.createText")}}),(e.errorMessage||e.isEmptyValue)&&e.canUpdate?t("Banner",{attrs:{color:"error"}},[e.isEmptyValue?t("MessageLink",{attrs:{to:e.to,"prefix-label":"harvester.backup.message.noSetting.prefix","middle-label":"harvester.backup.message.noSetting.middle","suffix-label":"harvester.backup.message.noSetting.suffix"}}):t("MessageLink",{attrs:{to:e.to,"prefix-label":"harvester.backup.message.errorTip.prefix","middle-label":"harvester.backup.message.errorTip.middle"},scopedSlots:e._u([{key:"suffix",fn:function(){return[e._v(" "+e._s(e.t("harvester.backup.message.errorTip.suffix"))+" "+e._s(e.errorMessage)+" ")]},proxy:!0}],null,!1,1922728275)})],1):e.canUpdate?t("div",[t("Banner",{attrs:{color:"info"}},[t("MessageLink",{attrs:{to:e.to,"prefix-label":"harvester.backup.message.viewSetting.prefix","middle-label":"harvester.backup.message.viewSetting.middle","suffix-label":"harvester.backup.message.viewSetting.suffix"}})],1)],1):e._e(),t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,groupable:!0,rows:e.filterdRows,schema:e.schema,"key-field":"_key","default-sort-by":"age"},scopedSlots:e._u([{key:"col:name",fn:function({row:s}){return[t("td",[t("span",[s.status&&s.status.source?t("n-link",{attrs:{to:s.detailLocation}},[e._v(" "+e._s(s.nameDisplay)+" ")]):t("span",[e._v(" "+e._s(s.nameDisplay)+" ")])],1)])]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},r=[],o=s("dffb"),i=s("70a6"),n=s("203b"),l=s("d1ba"),c=s("efbe"),d=s("90cd"),u=s("b837"),p=s("d6d1"),h={name:"HarvesterListBackup",components:{ResourceTable:c["a"],Banner:o["a"],Loading:i["a"],Masthead:l["a"],MessageLink:n["a"]},props:{schema:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await Object(u["a"])({vms:this.$store.dispatch(e+"/findAll",{type:d["b"].VM}),settings:this.$store.dispatch(e+"/findAll",{type:d["b"].SETTING}),rows:this.$store.dispatch(e+"/findAll",{type:d["b"].BACKUP})});this.rows=t.rows,this.settings=t.settings;const s=t.settings.find(e=>"backup-target"===e.id),a=this.getBackupTargetValueIsEmpty(s);a||this.testConnect()},data(){const e={...this.$route.params},t=e.resource;return{rows:[],settings:[],resource:t,to:d["b"].SETTING+"/backup-target?mode=edit"}},methods:{async testConnect(){try{await this.$store.dispatch("harvester/request",{url:"v1/harvester/backuptarget/healthz"})}catch(e){400!==(null===e||void 0===e?void 0:e._status)&&503!==(null===e||void 0===e?void 0:e._status)||this.$store.dispatch("growl/error",{title:this.t("harvester.notification.title.error"),message:e.errors[0]},{root:!0})}},getBackupTargetValueIsEmpty(e){let t=!0;if(null!==e&&void 0!==e&&e.value)try{const s=JSON.parse(null===e||void 0===e?void 0:e.value);t=!s.type}catch(s){}return t}},computed:{headers(){return[p["S"],p["y"],p["z"],{name:"targetVM",labelKey:"tableHeaders.targetVm",value:"attachVM",align:"left",formatter:"AttachVMWithName"},{name:"backupTarget",labelKey:"tableHeaders.backupTarget",value:"backupTarget",align:"left",formatter:"HarvesterBackupTargetValidation"},{name:"readyToUse",labelKey:"tableHeaders.readyToUse",value:"status.readyToUse",align:"left",formatter:"Checked"},p["c"]]},filterdRows(){return this.rows.filter(e=>{var t;return"snapshot"!==(null===(t=e.spec)||void 0===t?void 0:t.type)})},backupTargetResource(){return this.settings.find(e=>"backup-target"===e.id)},isEmptyValue(){return this.getBackupTargetValueIsEmpty(this.backupTargetResource)},canUpdate(){var e;return null===this||void 0===this||null===(e=this.backupTargetResource)||void 0===e?void 0:e.canUpdate},errorMessage(){var e;return null===(e=this.backupTargetResource)||void 0===e?void 0:e.errMessage}}},f=h,m=s("d802"),g=Object(m["a"])(f,a,r,!1,null,null,null);t["default"]=g.exports},c3df:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("span",[t("div",[e.isRebuilding?t("ProgressBarMulti",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.rebuildingMessage,expression:"rebuildingMessage"}],staticClass:"mb-10",attrs:{values:e.percentage,min:0,max:100}}):e._e()],1),t("div",{staticClass:"state"},[t("VolumeState",{attrs:{row:e.row}}),e.warningMessage?t("v-popover",{attrs:{trigger:"hover",offset:"16"}},[t("span",{staticClass:"tooltip-target"},[t("i",{staticClass:"icon icon-warning icon-lg text-warning"})]),t("template",{slot:"popover"},[t("p",{staticClass:"warning-message"},[e._v(" "+e._s(e.warningMessage)+" ")])])],2):e._e()],1)])},r=[],o=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"trim-whitespace",rawName:"v-trim-whitespace"}],class:{progress:!0,multi:e.pieces.length>1}},e._l(e.pieces,(function(e,s){return t("div",{directives:[{name:"trim-whitespace",rawName:"v-trim-whitespace"}],key:s,class:{piece:!0,[e.color]:!0},style:e.style})})),0)},i=[],n=s("7592"),l=s("1832"),c={props:{values:{type:Array,required:!0},colorKey:{type:String,default:"color"},labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},min:{type:Number,default:0},max:{type:Number,default:null},minPercent:{type:Number,default:5},showZeros:{type:Boolean,default:!1}},computed:{pieces(){const e=[];for(const o of this.values){const t=Object(l["g"])(o,this.colorKey),s=Object(l["g"])(o,this.labelKey),a=Object(l["g"])(o,this.valueKey);(0!==a||this.showZeros)&&e.push({color:t,label:s,value:a})}const t=this.minPercent||0,s=this.min||0;let a=this.max,r=0;this.max||(a=100,e.length&&(a=e.map(e=>e.value).reduce((e,t)=>e+t)));for(const o of e){const e=Math.max(t,d(o.value,s,a));o.percent=e,r+=e}r>100&&(Object(n["b"])(e,"percent",!0)[0].percent-=r-100);for(const o of e)o.style=`width: ${o.percent}%`;return e.filter(e=>e.percent)}}};function d(e,t,s){e=Math.max(t,Math.min(s,e));let a=e/(s-t)*100;return a=Math.floor(100*a)/100,a}var u=c,p=(s("54f5"),s("d802")),h=Object(p["a"])(u,o,i,!1,null,"2a3a568d",null),f=h.exports,m=s("873f"),g=s("2c0b"),v={components:{VolumeState:g["a"],ProgressBarMulti:f},props:{row:{type:Object,required:!0}},computed:{warningMessage(){var e,t,s;return null===(e=this.row.relatedPV)||void 0===e||null===(t=e.metadata)||void 0===t||null===(s=t.annotations)||void 0===s?void 0:s[m["a"].VOLUME_ERROR]},rebuildStatus(){var e,t;return null===(e=this.row.longhornEngine)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.rebuildStatus},isRebuilding(){return this.rebuildStatus&&Object.keys(this.rebuildStatus).length>0},percentage(){var e;if(!this.isRebuilding)return;const t=null===(e=Object.values(this.rebuildStatus))||void 0===e?void 0:e[0],s=null===t||void 0===t?void 0:t.progress;return[{value:s,color:"bg-warning"}]},rebuildingMessage(){return this.$store.getters["i18n/t"]("harvester.volume.rebuildingMessage",{percentage:this.percentage[0].value})}}},b=v,y=(s("85d7"),Object(p["a"])(b,a,r,!1,null,"78efe1e0",null));t["default"]=y.exports},cb18:function(e,t,s){var a=s("0076");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("34da9245",a,!0,{sourceMap:!1,shadowMode:!1})},d59f:function(e,t,s){var a=s("713a");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("27d3abe8",a,!0,{sourceMap:!1,shadowMode:!1})},d627:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,groupable:!0,schema:e.schema,rows:e.filteredRows,"key-field":"_key"}},"ResourceTable",e.$attrs,!1),e.$listeners))},r=[],o=s("efbe"),i=s("70a6"),n=s("56a4"),l=s("90cd"),c=s("d6d1"),d=s("873f");const u={id:l["b"].CLOUD_TEMPLATE,type:n["I"],attributes:{kind:l["b"].CLOUD_TEMPLATE,namespaced:!0},metadata:{name:l["b"].CLOUD_TEMPLATE}};var p={name:"HarvesterListCloudTemplate",components:{ResourceTable:o["a"],Loading:i["a"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore;this.rows=await this.$store.dispatch(e+"/findAll",{type:n["e"]});const t=this.$store.getters[e+"/schemaFor"](n["e"]);null!==t&&void 0!==t&&t.collectionMethods.find(e=>"post"===e.toLowerCase())||this.$store.dispatch("type-map/configureType",{match:l["b"].CLOUD_TEMPLATE,isCreatable:!1})},data(){return{rows:[]}},computed:{headers(){return[c["y"],c["z"],{name:"type",labelKey:"tableHeaders.type",value:"metadata.labels",formatter:"CloudInitType"},c["c"]]},filteredRows(){return this.rows.filter(e=>{var t,s;return!(null===(t=e.metadata)||void 0===t||null===(s=t.labels)||void 0===s||!s[d["a"].CLOUD_INIT])})},schema(){return u}},typeDisplay(){return this.$store.getters["type-map/labelFor"](u,99)}},h=p,f=s("d802"),m=Object(f["a"])(h,a,r,!1,null,null,null);t["default"]=m.exports},d6fb:function(e,t,s){var a=s("9f87");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("7687b23b",a,!0,{sourceMap:!1,shadowMode:!1})},d720:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[e.$fetchState.pending?t("Loading"):e._e(),t("ResourceTable",{attrs:{rows:e.rows,groupable:!1,namespaced:!1,schema:e.schema,headers:e.headers},scopedSlots:e._u([{key:"cell:name",fn:function(s){return[t("div",{staticClass:"cell-name"},[t("LinkDetail",{attrs:{row:s.row},model:{value:s.row.displayName,callback:function(t){e.$set(s.row,"displayName",t)},expression:"scope.row.displayName"}}),"rancher-vcluster"===s.row.metadata.name&&s.row.spec.enabled?t("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("harvester.addons.rancherVcluster.accessRancher"),expression:"t('harvester.addons.rancherVcluster.accessRancher')"}],staticClass:"ml-5",attrs:{rel:"nofollow noopener noreferrer",target:"_blank",href:s.row.rancherHostname}},[t("i",{staticClass:"icon icon-external-link"})]):e._e()],1)]}}])})],1)},r=[],o=s("70a6"),i=s("efbe"),n=s("b837"),l=s("90cd"),c=s("d6d1"),d={name:"ListHarvesterAddons",components:{ResourceTable:i["a"],Loading:o["a"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore;await Object(n["a"])({addons:this.$store.dispatch(e+"/findAll",{type:l["b"].ADD_ONS})})},computed:{rows(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](l["b"].ADD_ONS);return t},headers(){return[c["S"],c["y"],{name:"description",labelKey:"tableHeaders.description",value:"metadata.name",align:"left",sort:["status.description"],formatter:"Translate",formatterOpts:{prefix:"harvester.addons.descriptions"}}]},schema(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[e+"/schemaFor"](l["b"].ADD_ONS)}}},u=d,p=(s("f395"),s("d802")),h=Object(p["a"])(u,a,r,!1,null,"567156f9",null);t["default"]=h.exports},d842:function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".filter[data-v-4e171df2]{display:inline-block}.filter .banner-item[data-v-4e171df2]{display:inline-block;font-size:16px;margin-right:10px;padding:6px;border-radius:2px}.filter .banner-item i[data-v-4e171df2]{cursor:pointer;vertical-align:middle}.filter-popup[data-v-4e171df2]{width:300px}[data-v-4e171df2] .box{display:grid;grid-template-columns:40% 40% 10%;-moz-column-gap:1.75%;column-gap:1.75%;margin-bottom:10px}.required[data-v-4e171df2]{color:var(--error)}",""]),e.exports=t},d8d7:function(e,t,s){"use strict";s("a54a")},dc10:function(e,t,s){"use strict";s("7b0f")},dd82:function(e,t,s){var a=s("21cf");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("29f23d54",a,!0,{sourceMap:!1,shadowMode:!1})},e0d9:function(e,t,s){var a=s("7df9");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("607769d1",a,!0,{sourceMap:!1,shadowMode:!1})},e34e:function(e,t,s){var a=s("844d");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("6f3b853c",a,!0,{sourceMap:!1,shadowMode:!1})},e5d5:function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".settings-banner[data-v-86f3bc72]{margin-top:0}.advanced-setting[data-v-86f3bc72]{border:1px solid var(--border);padding:20px;border-radius:var(--border-radius)}.advanced-setting h1[data-v-86f3bc72]{font-size:14px}.advanced-setting h2[data-v-86f3bc72]{font-size:12px;margin-bottom:0;opacity:.8}.settings-value pre[data-v-86f3bc72]{margin:0}.header[data-v-86f3bc72]{display:flex;margin-bottom:20px}.title[data-v-86f3bc72]{flex:1}.modified[data-v-86f3bc72]{margin-left:10px;border:1px solid var(--primary);border-radius:5px;padding:2px 10px;font-size:12px}",""]),e.exports=t},e5f7:function(e,t,s){"use strict";s("d59f")},ea5f:function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,"[data-v-149cb180] .group-name{line-height:30px}[data-v-149cb180] .group-bar{display:flex;flex-direction:row;justify-content:space-between}[data-v-149cb180] .group-bar .right{display:flex;align-items:center}[data-v-149cb180] .group-bar .right .age{width:100px}[data-v-149cb180] .group-bar .right .actions{padding-right:7px}[data-v-149cb180] .group-bar.has-description .right{margin-top:5px}[data-v-149cb180] .group-bar.has-description .group-tab,[data-v-149cb180] .group-bar.has-description .group-tab:after{height:50px}[data-v-149cb180] .group-bar.has-description .group-tab:after{right:-20px}[data-v-149cb180] .group-bar.has-description .group-tab .description{margin-top:-20px}",""]),e.exports=t},eef7:function(e,t,s){"use strict";s("0fbc")},f15b:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[e.$fetchState.pending?t("Loading"):e._e(),t("ResourceTable",{attrs:{rows:e.rows,schema:e.schema,headers:e.headers}})],1)},r=[],o=s("70a6"),i=s("efbe"),n=s("b837"),l=s("56a4"),c=s("90cd"),d=s("d6d1");const u={id:c["b"].STORAGE,type:l["I"],attributes:{kind:c["b"].STORAGE,namespaced:!1},metadata:{name:c["b"].STORAGE}};var p={name:"ListHarvesterStorages",components:{ResourceTable:i["a"],Loading:o["a"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore;await Object(n["a"])({storages:this.$store.dispatch(e+"/findAll",{type:l["O"]})});const t=this.$store.getters[e+"/schemaFor"](l["O"]);!t||null!==t&&void 0!==t&&t.collectionMethods.find(e=>["blocked-post","post"].includes(e.toLowerCase()))||this.$store.dispatch("type-map/configureType",{match:c["b"].STORAGE,isCreatable:!1})},data(){return{schema:u}},computed:{rows(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](l["O"]);return t.filter(e=>{var t;return!(null!==(t=e.parameters)&&void 0!==t&&t.backingImage)})},headers(){return[d["S"],d["y"],d["U"],d["T"],{name:"numberOfReplicas",labelKey:"harvester.storage.numberOfReplicas.label",value:"parameters.numberOfReplicas",sort:["parameters.numberOfReplicas"]},d["c"]]}},typeDisplay(){return this.$store.getters["type-map/labelFor"](u,99)}},h=p,f=s("d802"),m=Object(f["a"])(h,a,r,!1,null,null,null);t["default"]=m.exports},f1e8:function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".progress[data-v-2a3a568d]{display:block;border-radius:90px;background-color:var(--progress-bg);height:10px;width:100px}.progress .piece[data-v-2a3a568d]{display:inline-block;height:10px;border-radius:0;border-right:1px solid var(--progress-divider);vertical-align:top}.progress .piece[data-v-2a3a568d]:first-child{border-top-left-radius:90px;border-bottom-left-radius:90px}.progress .piece[data-v-2a3a568d]:last-child{border-top-right-radius:90px;border-bottom-right-radius:90px;border-right:0}.piece.bg-success[data-v-2a3a568d]:only-child{opacity:.5}",""]),e.exports=t},f26d:function(e,t,s){"use strict";s("3976")},f395:function(e,t,s){"use strict";s("252b")},f7ed:function(e,t,s){var a=s("3b61");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("545544f0",a,!0,{sourceMap:!1,shadowMode:!1})},f820:function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".group-bar[data-v-60314562]{display:flex;flex-direction:row;justify-content:space-between}.group-bar .right[data-v-60314562]{margin-top:5px;margin-bottom:3px}.group-bar .group-tab[data-v-60314562],.group-bar .group-tab[data-v-60314562]:after{height:50px}.group-bar .group-tab[data-v-60314562]:after{right:-20px}.group-bar .group-tab SPAN[data-v-60314562]{color:var(--body-text)!important}",""]),e.exports=t},faa2:function(e,t,s){"use strict";s("699f")},fb12:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("ResourceTable",e._g(e._b({attrs:{groupable:!0,schema:e.schema,rows:e.filteredRows,"key-field":"_key"}},"ResourceTable",e.$attrs,!1),e.$listeners))},r=[],o=s("efbe"),i=s("70a6"),n=s("56a4"),l=s("90cd"),c=s("b837");const d={id:l["b"].SNAPSHOT,type:n["I"],attributes:{kind:l["b"].SNAPSHOT,namespaced:!0},metadata:{name:l["b"].SNAPSHOT}};var u={name:"HarvesterListSnapshot",components:{ResourceTable:o["a"],Loading:i["a"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={volumes:this.$store.dispatch(e+"/findAll",{type:n["E"]}),snapshots:this.$store.dispatch(e+"/findAll",{type:l["c"]})},s=await Object(c["a"])(t);this.rows=s.snapshots;const a=this.$store.getters[e+"/schemaFor"](l["c"]);null!==a&&void 0!==a&&a.collectionMethods.find(e=>"post"===e.toLowerCase())||this.$store.dispatch("type-map/configureType",{match:l["b"].SNAPSHOT,isCreatable:!1})},data(){return{rows:[]}},computed:{filteredRows(){return this.rows.filter(e=>{var t,s,a;return"PersistentVolumeClaim"===(null===(t=e.metadata)||void 0===t||null===(s=t.ownerReferences)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.kind)})},schema(){return d}},typeDisplay(){return this.$store.getters["type-map/labelFor"](d,99)}},p=u,h=s("d802"),f=Object(h["a"])(p,a,r,!1,null,null,null);t["default"]=f.exports},fd53:function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,".filter[data-v-dc148608]{display:inline-block}.filter .banner-item[data-v-dc148608]{display:inline-block;font-size:16px;margin-right:10px;padding:6px;border-radius:2px}.filter .banner-item i[data-v-dc148608]{cursor:pointer;vertical-align:middle}.filter-popup[data-v-dc148608]{width:600px}[data-v-dc148608] .box{display:grid;grid-template-columns:40% 40% 10%;-moz-column-gap:1.75%;column-gap:1.75%;margin-bottom:10px}.required[data-v-dc148608]{color:var(--error)}",""]),e.exports=t},fff7:function(e,t,s){var a=s("b8ac");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("6f65b89f",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=harvester-v1.2.1.umd.min.list.js.map