(("undefined"!==typeof self?self:this)["webpackJsonpharvester_v1_3_0"]=("undefined"!==typeof self?self:this)["webpackJsonpharvester_v1_3_0"]||[]).push([[5],{"0179":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"#host-instances[data-v-070817e4] thead th{vertical-align:middle}#host-instances[data-v-070817e4] .state{display:flex}#host-instances[data-v-070817e4] .state .vmstate{margin-right:6px}",""]),e.exports=t},"019a":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".role[data-v-72779bbe]{display:flex}",""]),e.exports=t},"028b":function(e,t,a){"use strict";a("ec87")},"03d2":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",style:{width:"100%"},on:{input:e.queueUpdate}},[t("div",{staticClass:"col span-12"},[t("ArrayListGrouped",{staticClass:"mt-20",attrs:{"default-add-value":e.defaultAddValue,mode:e.mode,"add-label":e.addLabel},on:{remove:e.remove},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"row mt-20 mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{mode:e.mode,options:[e.t("workload.scheduling.affinity.affinityOption"),e.t("workload.scheduling.affinity.antiAffinityOption")],value:a.row.value._anti?e.t("workload.scheduling.affinity.antiAffinityOption"):e.t("workload.scheduling.affinity.affinityOption"),label:e.t("workload.scheduling.affinity.type"),"data-testid":"pod-affinity-type-index"+a.i},on:{input:function(t){return e.$set(a.row.value,"_anti",!a.row.value._anti)}}})],1),t("div",{staticClass:"col span-6"},[t("LabeledSelect",{key:e.priorityDisplay(a.row.value),attrs:{mode:e.mode,options:[e.t("workload.scheduling.affinity.preferred"),e.t("workload.scheduling.affinity.required")],value:e.priorityDisplay(a.row.value),label:e.t("workload.scheduling.affinity.priority"),"data-testid":"pod-affinity-priority-index"+a.i},on:{input:function(t){return e.changePriority(a.row.value,a.i)}}})],1)]),t("div",{staticClass:"row"},[t("RadioGroup",{attrs:{options:e.namespaceSelectionOptions,labels:e.namespaceSelectionLabels,name:"namespaces-"+a.row.value._id,mode:e.mode,value:a.row.value._namespaceOption,"data-testid":"pod-affinity-namespacetype-index"+a.i},on:{input:function(t){return e.changeNamespaceMode(t,a.row.value,a.i)}}})],1),a.row.value._namespaceOption===e.NAMESPACE_SELECTION_OPTION_VALUES.SELECTED?t("div",{staticClass:"row mt-10 mb-20"},[e.hasNamespaces&&!e.forceInputNamespaceSelection?t("LabeledSelect",{attrs:{mode:e.mode,multiple:!0,taggable:!0,options:e.allNamespacesOptions,label:e.labeledInputNamespaceLabel,"data-testid":"pod-affinity-namespace-select-index"+a.i},on:{input:function(t){return e.updateNamespaces(a.row.value,a.row.value.namespaces)}},model:{value:a.row.value.namespaces,callback:function(t){e.$set(a.row.value,"namespaces",t)},expression:"props.row.value.namespaces"}}):t("LabeledInput",{attrs:{mode:e.mode,label:e.labeledInputNamespaceLabel,placeholder:e.t("harvesterManager.affinity.namespaces.placeholder"),"data-testid":"pod-affinity-namespace-input-index"+a.i},on:{input:function(t){return e.updateNamespaces(a.row.value,a.row.value._namespaces)}},model:{value:a.row.value._namespaces,callback:function(t){e.$set(a.row.value,"_namespaces",t)},expression:"props.row.value._namespaces"}})],1):e._e(),t("MatchExpressions",{key:e.rerenderNums,staticClass:"col span-12 mt-20",attrs:{mode:e.mode,type:e.pod,value:e.get(a.row.value,"labelSelector.matchExpressions"),"show-remove":!1,"data-testid":"pod-affinity-expressions-index"+a.i},on:{input:t=>e.updateLabelSelector(t,a)}}),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-9"},[e.hasNodes?t("LabeledSelect",{attrs:{taggable:!0,searchable:!0,"close-on-select":!1,mode:e.mode,required:"",label:e.t("workload.scheduling.affinity.topologyKey.label"),placeholder:e.topologyKeyPlaceholder,options:e.existingNodeLabels,disabled:"view"===e.mode,loading:e.loading,"data-testid":"pod-affinity-topology-select-index"+a.i},on:{input:e.update},model:{value:a.row.value.topologyKey,callback:function(t){e.$set(a.row.value,"topologyKey",t)},expression:"props.row.value.topologyKey"}}):t("LabeledInput",{attrs:{mode:e.mode,label:e.t("workload.scheduling.affinity.topologyKey.label"),placeholder:e.topologyKeyPlaceholder,required:"","data-testid":"pod-affinity-topology-input-index"+a.i},on:{input:e.update},model:{value:a.row.value.topologyKey,callback:function(t){e.$set(a.row.value,"topologyKey",t)},expression:"props.row.value.topologyKey"}})],1),"weight"in a.row.value?t("div",{staticClass:"col span-3"},[t("LabeledInput",{attrs:{mode:e.mode,type:"number",min:"1",max:"100",label:e.t("workload.scheduling.affinity.weight.label"),placeholder:e.t("workload.scheduling.affinity.weight.placeholder"),"data-testid":"pod-affinity-weight-index"+a.i},model:{value:a.row.value.weight,callback:function(t){e.$set(a.row.value,"weight",e._n(t))},expression:"props.row.value.weight"}})],1):e._e()])]}}]),model:{value:e.allSelectorTerms,callback:function(t){e.allSelectorTerms=t},expression:"allSelectorTerms"}})],1)])},r=[],i=a("9ce4"),l=a("d6a6"),n=a("1832"),o=a("56a4"),d=a("7395"),u=a("53fe"),c=a("f032"),v=a("d444"),p=a("06f6"),m=a("7592"),h=a("44db"),b=a.n(h),f=a("d003"),y=a("e411");const g={POD:"pod",ALL:"all",SELECTED:"selected"};var w={components:{ArrayListGrouped:f["a"],MatchExpressions:d["a"],LabeledSelect:u["a"],RadioGroup:c["b"],LabeledInput:v["a"]},props:{value:{type:Object,default:()=>({})},field:{type:String,default:"affinity"},mode:{type:String,default:"create"},nodes:{type:Array,default:()=>[]},namespaces:{type:Array,default:null},allNamespacesOptionAvailable:{default:!1,type:Boolean},forceInputNamespaceSelection:{default:!1,type:Boolean},removeLabeledInputNamespaceLabel:{default:!1,type:Boolean},overwriteLabels:{type:Object,default:null},loading:{default:!1,type:Boolean}},data(){this.value[this.field]||this.$set(this.value,this.field,{});const{podAffinity:e={},podAntiAffinity:t={}}=this.value[this.field],a=[...e.preferredDuringSchedulingIgnoredDuringExecution||[],...e.requiredDuringSchedulingIgnoredDuringExecution||[]].map(e=>{let t=Object(n["e"])(e);return t._id=Object(p["p"])(4),t._anti=!1,e.podAffinityTerm?(Object.assign(t,e.podAffinityTerm),t=this.parsePodAffinityTerm(t),delete t.podAffinityTerm):t=this.parsePodAffinityTerm(t),t}),s=[...t.preferredDuringSchedulingIgnoredDuringExecution||[],...t.requiredDuringSchedulingIgnoredDuringExecution||[]].map(e=>{let t=Object(n["e"])(e);return t._id=Object(p["p"])(4),t._anti=!0,e.podAffinityTerm?(Object.assign(t,e.podAffinityTerm),t=this.parsePodAffinityTerm(t),delete t.podAffinityTerm):t=this.parsePodAffinityTerm(t),t}),r=[...a,...s];return{allSelectorTerms:r,defaultWeight:1,rerenderNums:Object(p["p"])(4),NAMESPACE_SELECTION_OPTION_VALUES:g,defaultAddValue:{_namespaceOption:g.POD,matchExpressions:[],namespaces:null,_namespaces:null}}},computed:{...Object(i["a"])({t:"i18n/t"}),isView(){return this.mode===l["I"]},pod(){return o["B"]},node(){return o["z"]},labeledInputNamespaceLabel(){var e;return this.removeLabeledInputNamespaceLabel?"":(null===(e=this.overwriteLabels)||void 0===e?void 0:e.namespaceInputLabel)||this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")},allNamespacesOptions(){const e=this.$store.getters["currentStore"](o["w"]),t=this.namespaces||this.$store.getters[e+"/all"](o["w"]),a=Object(m["b"])(t.map(e=>({label:e.nameDisplay,value:e.id})),"label");return a},existingNodeLabels(){return Object(y["f"])(this.nodes)},hasNodes(){return this.nodes.length},namespaceSelectionOptions(){return this.allNamespacesOptionAvailable?[g.POD,g.ALL,g.SELECTED]:[g.POD,g.SELECTED]},namespaceSelectionLabels(){var e,t;return null!==(e=this.overwriteLabels)&&void 0!==e&&e.namespaceSelectionLabels?null===(t=this.overwriteLabels)||void 0===t?void 0:t.namespaceSelectionLabels:this.allNamespacesOptionAvailable?[this.t("workload.scheduling.affinity.thisPodNamespace"),this.t("workload.scheduling.affinity.allNamespaces"),this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")]:[this.t("workload.scheduling.affinity.thisPodNamespace"),this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")]},addLabel(){var e;return(null===(e=this.overwriteLabels)||void 0===e?void 0:e.addLabel)||this.t("podAffinity.addLabel")},topologyKeyPlaceholder(){var e;return(null===(e=this.overwriteLabels)||void 0===e?void 0:e.topologyKeyPlaceholder)||this.t("workload.scheduling.affinity.topologyKey.placeholder")},hasNamespaces(){return this.allNamespacesOptions.length},namespaceModeLabel(){return this.overwriteNsModeLabel||[this.t("workload.scheduling.affinity.thisPodNamespace"),this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")]},namespaceLabel(){var e;return(null===(e=this.overwriteNsModeLabel)||void 0===e?void 0:e[2])||this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")}},created(){this.queueUpdate=b()(this.update,500)},methods:{parsePodAffinityTerm(e){var t;return e.namespaceSelector&&"object"===typeof e.namespaceSelector&&!Object.keys(e.namespaceSelector).length&&this.allNamespacesOptionAvailable?e._namespaceOption=g.ALL:null!==(t=e.namespaces)&&void 0!==t&&t.length?e._namespaceOption=g.SELECTED:e._namespaceOption=g.POD,e._namespaces=(e.namespaces||[]).toString(),e},update(){const e={requiredDuringSchedulingIgnoredDuringExecution:[],preferredDuringSchedulingIgnoredDuringExecution:[]},t={requiredDuringSchedulingIgnoredDuringExecution:[],preferredDuringSchedulingIgnoredDuringExecution:[]};this.allSelectorTerms.forEach(a=>{if(a._anti)if(a.weight){const e={podAffinityTerm:{...a},weight:a.weight||this.defaultWeight};delete e.podAffinityTerm.weight,t.preferredDuringSchedulingIgnoredDuringExecution.push(e)}else t.requiredDuringSchedulingIgnoredDuringExecution.push(a);else if(a.weight){const t={podAffinityTerm:a,weight:a.weight||this.defaultWeight};e.preferredDuringSchedulingIgnoredDuringExecution.push(t)}else e.requiredDuringSchedulingIgnoredDuringExecution.push(a)}),Object.assign(this.value[this.field],{podAffinity:e,podAntiAffinity:t}),this.$emit("update",this.value)},remove(){this.rerenderNums=Object(p["p"])(4),this.queueUpdate()},changePriority(e,t){e.weight?delete e.weight:e.weight=this.defaultWeight,this.$set(this.allSelectorTerms,t,Object(n["e"])(e)),this.queueUpdate()},priorityDisplay(e){return"weight"in e?this.t("workload.scheduling.affinity.preferred"):this.t("workload.scheduling.affinity.required")},changeNamespaceMode(e,t,a){switch(this.$set(t,"_namespaceOption",e),e){case g.POD:t.namespaces=null,t._namespaces=null,(t.namespaceSelector||null===t.namespaceSelector)&&delete t.namespaceSelector;break;case g.ALL:t.namespaceSelector={},(t.namespaces||null===t.namespaces)&&delete t.namespaces,(t._namespaces||null===t._namespaces)&&delete t._namespaces;break;default:this.$set(t,"namespaces",[]),this.$set(t,"_namespaces",""),(t.namespaceSelector||null===t.namespaceSelector)&&delete t.namespaceSelector;break}this.$set(this.allSelectorTerms,a,t),this.queueUpdate()},updateNamespaces(e,t){let a=t;"string"===typeof t&&(a=t.split(",").map(e=>e.trim()).filter(e=>null===e||void 0===e?void 0:e.length)),this.$set(e,"namespaces",a),this.queueUpdate()},updateLabelSelector(e,t){this.set(t.row.value,"labelSelector.matchExpressions",e),this.queueUpdate()},isEmpty:n["i"],get:n["g"],set:n["j"]}},C=w,k=(a("67cf"),a("d802")),S=Object(k["a"])(C,s,r,!1,null,null,null);t["a"]=S.exports},"0807":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".label[data-v-aa28af1a]{display:flex;flex-direction:column}.label .value[data-v-aa28af1a]{font-size:14px;line-height:18px}",""]),e.exports=t},"0b6b":function(e,t,a){var s=a("e63b3");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("75c10e84",s,!0,{sourceMap:!1,shadowMode:!1})},"0e4c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Loading",{attrs:{mode:"relative",loading:e.loading}}),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hev-name"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hev-type"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.VOLUME_TYPE,required:"",mode:e.mode},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hav-storage"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.storage.storageClass.label"),value:e.value.storageClassName,mode:e.mode}},[t("LabeledSelect",{attrs:{options:e.storageClassOptions,label:e.t("harvester.storage.storageClass.label"),mode:e.mode,disabled:e.isDisabled,required:e.validateRequired},on:{input:e.update},model:{value:e.value.storageClassName,callback:function(t){e.$set(e.value,"storageClassName",t)},expression:"value.storageClassName"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hev-size"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.size"),value:e.value.size,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],attrs:{"output-modifier":!0,increment:1024,"input-exponent":3,mode:e.mode,required:e.validateRequired,label:e.t("harvester.fields.size")},on:{input:e.update},model:{value:e.value.size,callback:function(t){e.$set(e.value,"size",t)},expression:"value.size"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-3",attrs:{"data-testid":"input-hev-bus"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),mode:e.mode,options:e.InterfaceOption,required:""},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])],1)},r=[],i=a("70a6"),l=a("2007"),n=a("2aaa"),o=a("d444"),d=a("53fe"),u=a("56a4"),c=a("67ab"),v=a("7c47"),p={name:"HarvesterEditVolume",components:{InputOrDisplay:n["a"],Loading:i["a"],LabeledInput:o["a"],LabeledSelect:d["a"],UnitInput:l["a"]},props:{mode:{type:String,default:"create"},isEdit:{type:Boolean,default:!1},namespace:{type:String,default:null},value:{type:Object,default:()=>({})},validateRequired:{type:Boolean,required:!0},isVirtualType:{type:Boolean,default:!0}},data(){return{VOLUME_TYPE:v["h"],InterfaceOption:v["d"],loading:!1}},computed:{pvcsResource(){const e=this.$store.getters["harvester/all"](u["E"])||[];return e.find(e=>e.id===`${this.namespace}/${this.value.volumeName}`)},isDisabled(){return!this.value.newCreateId&&this.isEdit&&this.isVirtualType},storageClassOptions(){const e=this.$store.getters["harvester/all"](u["O"])||[],t=e.filter(e=>{var t;return!(null!==(t=e.parameters)&&void 0!==t&&t.backingImage)}).map(e=>{const t=e.isDefault?`${e.name} (${this.t("generic.default")})`:e.name;return{label:t,value:e.name}})||[];return t}},watch:{"value.type"(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())},pvcsResource:{handler(e){var t,a,s;if(null!==e&&void 0!==e&&null!==(t=e.spec)&&void 0!==t&&null!==(a=t.resources)&&void 0!==a&&null!==(s=a.requests)&&void 0!==s&&s.storage){const t=Object(c["f"])(e.spec.resources.requests.storage),a=Object(c["e"])(t,{increment:1024,addSuffix:!1,maxExponent:3,minExponent:3});this.value.size=a+"Gi"}},deep:!0,immediate:!0}},methods:{update(){this.$emit("update")}}},m=p,h=a("d802"),b=Object(h["a"])(m,s,r,!1,null,null,null);t["default"]=b.exports},1002:function(e,t,a){var s=a("0179");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("c3c66250",s,!0,{sourceMap:!1,shadowMode:!1})},1149:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("InputOrDisplay",{staticClass:"mb-10",attrs:{name:e.t("harvester.virtualMachine.input.bittwareIa420f"),value:e.bittwareIa420fDisplay,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.bittwareIa420f"),suffix:"FPGAs",delay:0,"output-modifier":!0,disabled:e.disabled,mode:e.mode},on:{input:e.change},model:{value:e.localBittwareIa420f,callback:function(t){e.localBittwareIa420f=t},expression:"localBittwareIa420f"}})],1)],1),t("div",{staticClass:"col span-6"},[t("InputOrDisplay",{staticClass:"mb-10",attrs:{name:e.t("harvester.virtualMachine.input.bittwareIa840f"),value:e.bittwareIa840fDisplay,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.bittwareIa840f"),suffix:"FPGAs",delay:0,"output-modifier":!0,disabled:e.disabled,mode:e.mode},on:{input:e.change},model:{value:e.localBittwareIa840f,callback:function(t){e.localBittwareIa840f=t},expression:"localBittwareIa840f"}})],1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("InputOrDisplay",{staticClass:"mb-10",attrs:{name:e.t("harvester.virtualMachine.input.intelPacA10"),value:e.intelPacA10Display,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.intelPacA10"),suffix:"FPGAs",delay:0,"output-modifier":!0,disabled:e.disabled,mode:e.mode},on:{input:e.change},model:{value:e.localIntelPacA10,callback:function(t){e.localIntelPacA10=t},expression:"localIntelPacA10"}})],1)],1),t("div",{staticClass:"col span-6"},[t("InputOrDisplay",{staticClass:"mb-10",attrs:{name:e.t("harvester.virtualMachine.input.intelPacS10"),value:e.intelPacS10Display,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.intelPacS10"),suffix:"FPGAs",delay:0,"output-modifier":!0,disabled:e.disabled,mode:e.mode},on:{input:e.change},model:{value:e.localIntelPacS10,callback:function(t){e.localIntelPacS10=t},expression:"localIntelPacS10"}})],1)],1)])])},r=[],i=a("2007"),l=a("2aaa"),n={name:"HarvesterEditFpga",components:{UnitInput:i["a"],InputOrDisplay:l["a"]},props:{bittwareIa420f:{type:String,default:null},bittwareIa840f:{type:String,default:null},intelPacA10:{type:String,default:null},intelPacS10:{type:String,default:null},mode:{type:String,default:"create"},disabled:{type:Boolean,default:!1}},data(){return{localBittwareIa420f:this.bittwareIa420f,localBittwareIa840f:this.bittwareIa840f,localIntelPacA10:this.intelPacA10,localIntelPacS10:this.intelPacS10}},computed:{bittwareIa420fDisplay(){return this.localBittwareIa420f?this.localBittwareIa420f+" FPGAs":"-"},bittwareIa840fDisplay(){return this.localBittwareIa840f?this.localBittwareIa840f+" FPGAs":"-"},intelPacA10Display(){return this.localIntelPacA10?this.localIntelPacA10+" FPGAs":"-"},intelPacS10Display(){return this.localIntelPacS10?this.localIntelPacS10+" FPGAs":"-"}},watch:{bittwareIa420f(e){this.localBittwareIa420f=e},bittwareIa840f(e){this.localBittwareIa840f=e},intelPacA10(e){this.localIntelPacA10=e},intelPacS10(e){this.localIntelPacS10=e}},methods:{change(){this.$emit("updateFpga",this.localBittwareIa420f,this.localBittwareIa840f,this.localIntelPacA10,this.localIntelPacS10)}}},o=n,d=a("d802"),u=Object(d["a"])(o,s,r,!1,null,null,null);t["default"]=u.exports},"11e4":function(e,t,a){var s=a("569f");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("6efeb87a",s,!0,{sourceMap:!1,shadowMode:!1})},"19ea":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-1cd38279] .resource-yaml{flex:1;display:flex;flex-direction:column}[data-v-1cd38279] .resource-yaml .yaml-editor{flex:1;min-height:200px}[data-v-1cd38279] .resource-yaml .yaml-editor .code-mirror .CodeMirror{min-height:200px}",""]),e.exports=t},"1a25":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0}},"Tabbed",e.$attrs,!1),[t("Tab",{staticClass:"bordered-table",attrs:{name:"detail",label:e.t("harvester.virtualMachine.detail.tabs.basics"),weight:99}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[e.isUpload?t("LabelValue",{staticClass:"mb-20",attrs:{name:e.t("harvester.image.fileName"),value:e.imageName}}):t("LabelValue",{staticClass:"mb-20",attrs:{name:e.t("harvester.image.url"),value:e.url},scopedSlots:e._u([{key:"value",fn:function(){return["-"!==e.url?t("div",[t("CopyToClipboardText",{attrs:{text:e.url}})],1):t("div",[e._v(" "+e._s(e.url)+" ")])]},proxy:!0}])})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("LabelValue",{staticClass:"mb-20",attrs:{name:e.t("harvester.image.size"),value:e.formattedValue}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("LabelValue",{staticClass:"mb-20",attrs:{name:e.t("nameNsDescription.description.label"),value:e.description}})],1)]),"-"!==e.errorMessage?t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("div",[e._v(" "+e._s(e.t("tableHeaders.message"))+" ")]),t("div",{class:{error:"-"!==e.errorMessage}},[e._v(" "+e._s(e.errorMessage)+" ")])])]):e._e()]),t("Tab",{staticClass:"bordered-table",attrs:{name:"storage",label:e.t("harvester.storage.label"),weight:89}},[t("Storage",{model:{value:e.value.spec.storageClassParameters,callback:function(t){e.$set(e.value.spec,"storageClassParameters",t)},expression:"value.spec.storageClassParameters"}})],1)],1)},r=[],i=a("9651"),l=a("eb32"),n=a("b0bd"),o=a("873f"),d=a("ad61"),u=a("5ef9"),c=a("e411"),v=a("1832"),p=function(){var e=this,t=e._self._c;return t("div",[e.value.nodeSelector?t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-12"},[t("LabelValue",{attrs:{name:e.t("harvester.storage.nodeSelector.label"),value:e.value.nodeSelector}})],1)]):e._e(),e.value.diskSelector?t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-12"},[t("LabelValue",{attrs:{name:e.t("harvester.storage.diskSelector.label"),value:e.value.diskSelector}})],1)]):e._e(),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.storage.migratable.label"),value:e.migratable}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.storage.numberOfReplicas.label"),value:e.value.numberOfReplicas}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.storage.staleReplicaTimeout.label"),value:e.value.staleReplicaTimeout}})],1)])])},m=[],h={props:{value:{type:Object,default:()=>{}}},components:{LabelValue:l["a"]},computed:{migratable(){return"true"===this.value.migratable?this.t("generic.yes"):this.t("generic.no")}}},b=h,f=a("d802"),y=Object(f["a"])(b,p,m,!1,null,null,null),g=y.exports,w={components:{CopyToClipboardText:i["a"],Tab:u["a"],Tabbed:d["a"],LabelValue:l["a"],Storage:g},props:{value:{type:Object,required:!0}},data(){return{}},computed:{formattedValue(){var e;return null===(e=this.value)||void 0===e?void 0:e.downSize},url(){var e,t;return(null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.url)||"-"},description(){var e,t,a;return(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t||null===(a=t.annotations)||void 0===a?void 0:a[n["k"]])||"-"},errorMessage(){var e;const t=Object(v["g"])(this.value,"status.conditions");return(null===(e=Object(c["e"])(t,"type","Imported"))||void 0===e?void 0:e.message)||"-"},isUpload(){var e,t;return"upload"===(null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.sourceType)},imageName(){var e,t,a;return(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t||null===(a=t.annotations)||void 0===a?void 0:a[o["a"].IMAGE_NAME])||"-"}}},C=w,k=(a("e83a"),Object(f["a"])(C,s,r,!1,null,"d79cf3f0",null));t["default"]=k.exports},"1aa2":function(e,t,a){var s=a("6a69");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("3ee50066",s,!0,{sourceMap:!1,shadowMode:!1})},"1b5f":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("RadioGroup",{attrs:{name:"selectNode",options:e.selectNodeOptions,mode:e.mode},on:{input:e.update},model:{value:e.selectNode,callback:function(t){e.selectNode=t},expression:"selectNode"}})],1),"nodeSelector"===e.selectNode?[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:e.t("workload.scheduling.affinity.nodeName"),options:e.nodes||[],mode:e.mode,multiple:!1,loading:e.loading},on:{input:e.update},model:{value:e.nodeName,callback:function(t){e.nodeName=t},expression:"nodeName"}})],1)])]:"affinity"===e.selectNode?[t("NodeAffinity",{attrs:{mode:e.mode},on:{input:e.update},model:{value:e.nodeAffinity,callback:function(t){e.nodeAffinity=t},expression:"nodeAffinity"}})]:e._e()],2)},r=[],i=a("9ce4"),l=a("f032"),n=a("53fe"),o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",on:{input:e.queueUpdate}},[t("div",{staticClass:"col span-12"},[t("ArrayListGrouped",{staticClass:"mt-20",attrs:{mode:e.mode,"default-add-value":{matchExpressions:[]},"add-label":e.t("workload.scheduling.affinity.addNodeSelector")},on:{remove:e.remove},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-9"},[t("LabeledSelect",{attrs:{options:e.affinityOptions,value:e.priorityDisplay(a.row.value),label:e.t("workload.scheduling.affinity.priority"),mode:e.mode,"data-testid":"node-affinity-priority-index"+a.i},on:{input:function(t){e.changePriority(a.row.value)}}})],1),a.row.value.weight?t("div",{staticClass:"col span-3"},[t("LabeledInput",{attrs:{mode:e.mode,type:"number",min:"1",max:"100",label:e.t("workload.scheduling.affinity.weight.label"),placeholder:e.t("workload.scheduling.affinity.weight.placeholder"),"data-testid":"node-affinity-weight-index"+a.i},model:{value:a.row.value.weight,callback:function(t){e.$set(a.row.value,"weight",e._n(t))},expression:"props.row.value.weight"}})],1):e._e()]),t("MatchExpressions",{key:e.rerenderNums,staticClass:"col span-12 mt-20",attrs:{value:e.matchingSelectorDisplay?a.row.value:a.row.value.matchExpressions,"matching-selector-display":e.matchingSelectorDisplay,mode:e.mode,type:e.node,"show-remove":!1,"data-testid":"node-affinity-expressions-index"+a.i},on:{input:function(t){e.updateExpressions(a.row.value,t)}}})]}}]),model:{value:e.allSelectorTerms,callback:function(t){e.allSelectorTerms=t},expression:"allSelectorTerms"}})],1)])},d=[],u=a("44db"),c=a.n(u),v=a("d6a6"),p=a("1832"),m=a("56a4"),h=a("7395"),b=a("d444"),f=a("06f6"),y=a("d003"),g={components:{ArrayListGrouped:y["a"],MatchExpressions:h["a"],LabeledSelect:n["a"],LabeledInput:b["a"]},props:{value:{type:Object,default:()=>({})},mode:{type:String,default:"create"},matchingSelectorDisplay:{type:Boolean,default:!1}},data(){if(this.value.required)return{nodeSelectorTerms:this.value.required.nodeSelectorTerms};{const{preferredDuringSchedulingIgnoredDuringExecution:e=[],requiredDuringSchedulingIgnoredDuringExecution:t={}}=this.value,{nodeSelectorTerms:a=[]}=t,s=[...e,...a].map(e=>{const t=Object(p["e"])(e);return t._id=Object(f["p"])(4),e.preference&&(Object.assign(t,e.preference),delete t.preference),t});return{allSelectorTerms:s,weightedNodeSelectorTerms:e,defaultWeight:1,rerenderNums:Object(f["p"])(4)}}},computed:{...Object(i["a"])({t:"i18n/t"}),isView(){return this.mode===v["I"]},hasWeighted(){return!!this.weightedNodeSelectorTerms},node(){return m["z"]},affinityOptions(){const e=[this.t("workload.scheduling.affinity.preferred"),this.t("workload.scheduling.affinity.required")];return e}},created(){this.queueUpdate=c()(this.update,500)},methods:{update(){const e={},t={nodeSelectorTerms:[]},a=[];this.allSelectorTerms.forEach(e=>{const s={...e};if(s.matchExpressions&&(s.matchExpressions=(s.matchExpressions||[]).map(e=>{const t={...e};return delete t.matching,t})),s.matchFields&&(s.matchFields=(s.matchFields||[]).map(e=>{const t={...e};return delete t.matching,t})),s.weight){const e={weight:s.weight,preference:s};delete e.preference.weight,a.push(e)}else t.nodeSelectorTerms.push(s)}),a.length&&(e.preferredDuringSchedulingIgnoredDuringExecution=a),t.nodeSelectorTerms.length&&(e.requiredDuringSchedulingIgnoredDuringExecution=t),this.$emit("input",e)},remove(){this.rerenderNums=Object(f["p"])(4),this.queueUpdate()},changePriority(e){e.weight?this.$delete(e,"weight"):this.$set(e,"weight",1),this.update()},priorityDisplay(e){return e.weight?this.t("workload.scheduling.affinity.preferred"):this.t("workload.scheduling.affinity.required")},updateExpressions(e,t){const a={matchFields:[],matchExpressions:[]};t.length&&(t.forEach(e=>{a[e.matching||"matchExpressions"].push(e)}),this.$set(e,"matchFields",a.matchFields),this.$set(e,"matchExpressions",a.matchExpressions),this.update())},get:p["g"],isEmpty:p["i"]}},w=g,C=a("d802"),k=Object(C["a"])(w,o,d,!1,null,null,null),S=k.exports,_=a("9314"),x=a("b0bd"),O={components:{RadioGroup:l["b"],LabeledSelect:n["a"],NodeAffinity:S},props:{value:{type:Object,default:()=>({})},nodes:{type:Array,default:()=>[]},mode:{type:String,default:"create"},loading:{default:!1,type:Boolean}},data(){var e,t;const a=this.$store.getters["currentProduct"].inStore===_["a"];let{nodeName:s=""}=this.value;const{affinity:r={},nodeSelector:i={}}=this.value,{nodeAffinity:l={}}=r;let n=null;return this.value.nodeName?n="nodeSelector":a&&null!==(e=this.value)&&void 0!==e&&null!==(t=e.nodeSelector)&&void 0!==t&&t[x["n"]]?(n="nodeSelector",s=i[x["n"]]):Object(p["i"])(l)||(n="affinity"),l.requiredDuringSchedulingIgnoredDuringExecution||this.$set(l,"requiredDuringSchedulingIgnoredDuringExecution",{nodeSelectorTerms:[]}),l.preferredDuringSchedulingIgnoredDuringExecution||this.$set(l,"preferredDuringSchedulingIgnoredDuringExecution",[]),{selectNode:n,nodeName:s,nodeAffinity:l,nodeSelector:i}},computed:{...Object(i["a"])({t:"i18n/t"}),isView(){return this.mode===v["I"]},isHarvester(){return this.$store.getters["currentProduct"].inStore===_["a"]},selectNodeOptions(){const e=this.isHarvester?"harvester.virtualMachine":"workload",t=[{label:this.t(e+".scheduling.affinity.anyNode"),value:null},{label:this.t(e+".scheduling.affinity.specificNode"),value:"nodeSelector"},{label:this.t(e+".scheduling.affinity.schedulingRules"),value:"affinity"}];return t}},methods:{update(){var e,t,a,s;const{nodeName:r,nodeSelector:i,nodeAffinity:l}=this;switch(this.selectNode){case"nodeSelector":this.isHarvester?Object.assign(this.value,{nodeSelector:{[x["n"]]:r}}):Object.assign(this.value,{nodeSelector:i,nodeName:r}),null!==(e=this.value)&&void 0!==e&&null!==(t=e.affinity)&&void 0!==t&&t.nodeAffinity&&delete this.value.affinity.nodeAffinity;break;case"affinity":delete this.value.nodeName,delete this.value.nodeSelector,this.value.affinity?Object.assign(this.value.affinity,{nodeAffinity:l}):Object.assign(this.value,{affinity:{nodeAffinity:l}});break;default:delete this.value.nodeName,delete this.value.nodeSelector,null!==(a=this.value)&&void 0!==a&&null!==(s=a.affinity)&&void 0!==s&&s.nodeAffinity&&delete this.value.affinity.nodeAffinity}},isEmpty:p["i"]},watch:{"value.nodeSelector":{handler(e){if(this.isHarvester&&null!==e&&void 0!==e&&e[x["n"]]){this.selectNode="nodeSelector";const t=e[x["n"]];this.nodeName=t;const a=this.nodes.map(e=>e.value);t&&!a.includes(t)&&(this.$store.dispatch("growl/error",{title:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistNode.title",{name:t}),message:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistNode.message")},{root:!0}),delete this.value.nodeSelector,this.$set(this,"nodeName",""),this.$set(this,"selectNode",null))}}}}},N=O,I=Object(C["a"])(N,s,r,!1,null,null,null);t["a"]=I.exports},"1e8f":function(e,t,a){"use strict";var s=a("e411");t["a"]={computed:{conditions(){var e;return(null===(e=this.value)||void 0===e?void 0:e.conditions)||[]},readyCondition(){return Object(s["h"])(this.conditions)?Object(s["e"])(this.conditions,"type","Ready")||{}:this.conditions.Ready},schedulableCondition(){return Object(s["h"])(this.conditions)?Object(s["e"])(this.conditions,"type","Schedulable")||{}:this.conditions.Schedulable}}}},"1eaf":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{class:e.containerClass},[t("div",{class:e.defaultSectionClass},[t("div",{staticClass:"labels"},[t("div",{staticClass:"labels__header"},[e.showLabelTitle?t("h3",[t("t",{attrs:{k:"labels.labels.title"}})],1):e._e(),e.value.hasSystemLabels?t("ToggleSwitch",{attrs:{name:"label-system-toggle","on-label":e.t("labels.labels.show")},model:{value:e.toggler,callback:function(t){e.toggler=t},expression:"toggler"}}):e._e()],1),t("p",{staticClass:"mt-10 mb-10"},[t("t",{attrs:{k:"labels.labels.description"}})],1),t("div",{class:e.columnsClass},[e._t("labels",(function(){return[[t("KeyValue",{key:"labels",attrs:{value:e.value.labels,"protected-keys":e.value.systemLabels||[],"toggle-filter":e.toggler,"add-label":e.t("labels.addLabel"),mode:e.mode,"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setLabels(t)}}})]]}),{toggler:e.toggler})],2)])]),t("div",{staticClass:"spacer"}),e.showAnnotations?t("div",{class:e.sectionClass},[t("KeyValue",{key:"annotations",attrs:{value:e.value.annotations,"add-label":e.t("labels.addAnnotation"),mode:e.mode,title:e.t("labels.annotations.title"),"title-protip":e.annotationTitleTooltip,"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setAnnotations(t)}}})],1):e._e()])},r=[],i=a("2958"),l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"toggle-container"},[t("span",{staticClass:"label no-select hand",class:{active:!e.state},on:{click:function(t){return e.toggle(!1)}}},[e._v(e._s(e.offLabel))]),t("label",{staticClass:"switch hand"},[t("input",{attrs:{type:"checkbox"},domProps:{checked:e.state},on:{input:function(t){return e.toggle(null)}}}),t("span",{staticClass:"slider round"})]),t("span",{staticClass:"label no-select hand",class:{active:e.state},on:{click:function(t){return e.toggle(!0)}}},[e._v(e._s(e.onLabel))])])},n=[],o=a("8bbf"),d=a.n(o),u=d.a.extend({props:{value:{type:[Boolean,String,Number],default:!1},offValue:{type:[Boolean,String,Number],default:!1},onValue:{type:[Boolean,String,Number],default:!0},offLabel:{type:String,default:""},onLabel:{type:String,default:""}},data(){return{state:!1}},methods:{toggle(e){this.state=null===e?!this.state:e,this.$emit("input",this.state?this.onValue:this.offValue)}},watch:{value:{handler(){this.state=this.value===this.onValue},immediate:!0}}}),c=u,v=(a("c901"),a("d802")),p=Object(v["a"])(c,l,n,!1,null,"b1a6988c",null),m=p.exports,h={components:{ToggleSwitch:m,KeyValue:i["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},displaySideBySide:{type:Boolean,default:!1},defaultContainerClass:{type:String,default:""},defaultSectionClass:{type:String,default:""},labelTitleTooltip:{type:String,default:""},annotationTitleTooltip:{type:String,default:""},showAnnotations:{type:Boolean,default:!0},showLabelTitle:{type:Boolean,default:!0}},data(){return{toggler:!1}},computed:{containerClass(){return`${this.displaySideBySide?"row":""} ${this.defaultContainerClass}`.trim()},sectionClass(){return`${this.displaySideBySide?"col span-6":"row"} ${this.defaultSectionClass}`.trim()},columnsClass(){return(""+(this.displaySideBySide?"col span-6":"row")).trim()}}},b=h,f=(a("eca1"),Object(v["a"])(b,s,r,!1,null,"0bd5f0d9",null));t["a"]=f.exports},"220e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("ConsumptionGauge",{attrs:{capacity:e.cpuTotal,used:e.reserved,units:e.cpuUnits,"resource-name":e.resourceName},scopedSlots:e._u([{key:"title",fn:function({amountTemplateValues:a,formattedPercentage:s}){return[t("span",[e._v(" "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.reserved"))+" ")]),t("span",{staticClass:"precent-data"},[e._v(" "+e._s(e.t("node.detail.glance.consumptionGauge.amount",a))+" "),t("span",{staticClass:"ml-10 percentage"},[e._v("/ "+e._s(s)+" ")])])]}}])}),e.showUsed?t("div",{staticClass:"mt-10"},[t("ConsumptionGauge",{attrs:{capacity:e.cpuTotal,used:e.used,units:e.cpuUnits},scopedSlots:e._u([{key:"title",fn:function({amountTemplateValues:a,formattedPercentage:s}){return[t("span",[e._v(" "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.used"))+" ")]),t("span",{staticClass:"precent-data"},[e._v(" "+e._s(e.t("node.detail.glance.consumptionGauge.amount",a))+" "),t("span",{staticClass:"ml-10 percentage"},[e._v("/ "+e._s(s)+" ")])])]}}],null,!1,3882697491)})],1):e._e()],1)},r=[],i=a("3c8a"),l=a("56a4"),n=a("67ab"),o={name:"HarvesterCpuUsed",components:{ConsumptionGauge:i["a"]},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showUsed:{type:Boolean,default:!1}},data(){return{}},computed:{metrics(){return this.$store.getters["harvester/byId"](l["u"].NODE,this.row.id)},cpuTotal(){let e=0;return this.metrics&&(e=this.metrics.cpuCapacity),e},cpuUnits(){return"C"},node(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/byId"](l["z"],this.row.id);return t},reserved(){return this.metrics?this.node.cpuReserved:0},used(){var e,t;return this.metrics?Object(n["f"])((null===(e=this.metrics)||void 0===e||null===(t=e.usage)||void 0===t?void 0:t.cpu)||"0m"):0}}},d=o,u=(a("9a16"),a("d802")),c=Object(u["a"])(d,s,r,!1,null,"07d0bbf4",null);t["default"]=c.exports},"2a1a":function(e,t,a){var s=a("af59");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("593638f4",s,!0,{sourceMap:!1,shadowMode:!1})},"2a79":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.input.sshKey"),taggable:!0,mode:e.mode,multiple:!0,searchable:e.searchable,disabled:e.disabled,options:e.sshOption},on:{input:e.update},model:{value:e.checkedSsh,callback:function(t){e.checkedSsh=t},expression:"checkedSsh"}}),t("ModalWithCard",{ref:e.randomStr,attrs:{name:e.randomStr,width:"40%",errors:e.errors},on:{finish:e.save,close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.sshTitle"))+" ")]},proxy:!0},{key:"content",fn:function(){return[t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.name"),required:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:e.sshName,callback:function(t){e.sshName=t},expression:"sshName"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.sshKeyValue"),"min-height":160,type:"multiline",required:""},model:{value:e.publicKey,callback:function(t){e.publicKey=t},expression:"publicKey"}})]},proxy:!0}])})],1)},r=[],i=a("9ce4"),l=a("06f6"),n=a("d444"),o=a("53fe"),d=a("5fe4"),u=a("90cd"),c=a("1832"),v=a("d6a6");const p="_NEW";var m={components:{LabeledInput:n["a"],ModalWithCard:d["a"],LabeledSelect:o["a"]},props:{value:{type:Array,default:()=>[]},mode:{type:String,default:"create"},disableCreate:{type:Boolean,default:!1},namespace:{type:String,default:""},searchable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},data(){return{checkedSsh:this.value,publicKey:"",sshName:"",randomStr:Object(l["p"])(5).toLowerCase(),errors:[],isAll:!1,checkAll:!1}},computed:{...Object(i["a"])({t:"i18n/t"}),schema(){return this.$store.getters["harvester/schemaFor"](u["b"].SSH)},isCreatable(){var e;return!(this.schema&&(null===(e=this.schema)||void 0===e||!e.collectionMethods.find(e=>["blocked-post","post"].includes(e.toLowerCase()))))},sshOption(){const e=this.$store.getters["harvester/all"](u["b"].SSH).map(e=>({label:e.id,value:e.id}));return!this.disableCreate&&this.mode!==v["I"]&&this.isCreatable&&e.unshift({label:this.t("harvester.virtualMachine.createSSHKey"),value:p}),e}},watch:{publicKey(e){const t=e.split(/\s+/);3===t.length&&t[2].includes("@")&&t[2].split("@")&&(this.sshName||(this.sshName=t[2].split("@")[0]))},value(e){this.checkedSsh=e},checkedSsh(e,t){e.includes(p)&&(this.$set(this,"checkedSsh",t),this.update(),this.show())}},methods:{show(){this.$modal.show(this.randomStr)},hide(){this.$modal.hide(this.randomStr)},async save(e){if(this.errors=[],!this.sshName){const e=this.t("harvester.virtualMachine.input.name"),t=this.t("validation.required",{key:e});this.errors.push(t)}if(!this.publicKey){const e=this.t("harvester.virtualMachine.input.sshKeyValue"),t=this.t("validation.required",{key:e});this.errors.push(t)}if(this.sshName.length>63){const e=this.t("harvester.validation.custom.tooLongName",{max:63});this.errors.push(e)}if(this.errors.length>0)e(!1);else try{const t=await this.$store.dispatch("harvester/create",{metadata:{name:this.sshName,namespace:this.namespace},spec:{publicKey:this.publicKey},type:u["b"].SSH}),a=await t.save();a.id&&this.checkedSsh.push(`${this.namespace}/${this.sshName}`),e(!0),this.cancel()}catch(t){this.errors=[t.message],e(!1)}},cancel(){this.hide(),this.resetFields()},resetFields(){this.sshName="",this.publicKey="",this.errors=[]},update(){this.$emit("update:sshKey",Object(c["e"])(this.checkedSsh))}}},h=m,b=a("d802"),f=Object(b["a"])(h,s,r,!1,null,null,null);t["default"]=f.exports},"2aaa":function(e,t,a){"use strict";var s=a("8bbf"),r=a.n(s),i=a("d6a6");const l=r.a.component("InputOrDisplay",{render(e){return this.isView?e("div",{attrs:{class:"label"}},[e("div",{attrs:{class:"text-label"}},this.$slots.name?this.$slots.name:this.name),e("div",{attrs:{class:"value"}},this.$slots.value?this.$slots.value:this.displayValue)]):this.$slots.default},props:{name:{type:String,required:!0},value:{type:[Number,String,Array,void 0],default:""},mode:{type:String,default:"edit"}},computed:{isView(){return this.mode===i["I"]},displayValue(){return Array.isArray(this.value)&&0===this.value.length?"":this.value}}});var n,o,d=l,u=d,c=(a("42e9"),a("d802")),v=Object(c["a"])(u,n,o,!1,null,"16d50992",null);t["a"]=v.exports},"2f48":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("ResourceTabs",{attrs:{"need-related":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("Tab",{attrs:{name:"node","label-key":"harvester.vlanConfig.titles.host",weight:99}},[t("SortableTable",{attrs:{"key-field":"_key",headers:e.nodeHeaders,rows:e.nodes,"row-actions":!1,"table-actions":!1,search:!1}})],1)],1)},r=[],i=a("3921"),l=a("5ef9"),n=a("fc28"),o=a("b837"),d=a("d6d1"),u=a("348a"),c=a("56a4"),v=a("1832"),p={components:{ResourceTabs:i["a"],Tab:l["a"],SortableTable:n["b"]},props:{value:{type:Object,default:()=>({})}},async fetch(){const e=this.$store.getters["currentProduct"].inStore;this.$store.dispatch("harvester/findAll",{type:c["z"]});const t={nodes:this.$store.dispatch(e+"/findAll",{type:c["z"]})};await Object(o["a"])(t)},computed:{nodeHeaders(){return[d["S"],d["y"],{name:"host-ip",labelKey:"tableHeaders.hostIp",search:["internalIp"],value:"internalIp"},d["c"]]},nodes(){var e,t;const a=this.$store.getters["currentProduct"].inStore,s=this.$store.getters[a+"/all"](c["z"]),r=null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.nodeSelector;return Object(v["i"])(r)?s:Object(u["d"])(s,r)}}},m=p,h=a("d802"),b=Object(h["a"])(m,s,r,!1,null,null,null);t["default"]=b.exports},"2fd0":function(e,t,a){var s=a("7616");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("487a6bc3",s,!0,{sourceMap:!1,shadowMode:!1})},3169:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".node-selector{position:relative}",""]),e.exports=t},"377a":function(e,t,a){var s=a("b32a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("83e0682e",s,!0,{sourceMap:!1,shadowMode:!1})},"3b61":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".overview-web-console .btn{line-height:24px;min-height:24px}",""]),e.exports=t},"3cea":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".overview-sshKeys[data-v-6d99ef38]{text-align:left;max-height:700px;overflow:auto}.overview-sshKeys__item[data-v-6d99ef38]{margin-bottom:15px}.overview-sshKeys__item[data-v-6d99ef38]:last-child{margin-bottom:0}.overview-sshKeys .key-display[data-v-6d99ef38]{position:relative;padding-right:30px;word-break:break-word}.overview-sshKeys .key-display .hide-bar[data-v-6d99ef38]{position:absolute;top:-10px;right:10px}",""]),e.exports=t},"3dd1":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".close[data-v-ce85c400]{top:10px;right:10px;padding:0;position:absolute}.disk[data-v-ce85c400]{position:relative}.disk .secret-name[data-v-ce85c400]{height:61px}.disk[data-v-ce85c400]:not(:last-of-type){padding-bottom:10px;margin-bottom:30px}.flex[data-v-ce85c400]{display:flex;justify-content:space-between}.badge-state[data-v-ce85c400]{padding:2px 5px}",""]),e.exports=t},"3fba":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".password[data-v-833c0be0]{display:flex;flex-direction:column}.password .labeled-input .addon[data-v-833c0be0]{padding-left:12px;min-width:65px}.password .genPassword[data-v-833c0be0]{display:flex;justify-content:flex-end}",""]),e.exports=t},"411b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vm__credentials-users"},[t("LabeledSelect",{class:{hasUsers:e.selectedUser.length>0},attrs:{options:e.userOptions,label:e.t("harvester.virtualMachine.accessCredentials.injectSSH.users"),taggable:e.multiple,mode:e.mode,multiple:e.multiple,searchable:!1,tooltip:e.t("harvester.virtualMachine.accessCredentials.userTips")},on:{input:e.update},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}}),t("ModalWithCard",{ref:e.randomStr,attrs:{name:e.randomStr,width:"40%",errors:e.errors},on:{finish:e.addUser,close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.accessCredentials.injectSSH.addUser"))+" ")]},proxy:!0},{key:"content",fn:function(){return[t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.username"),required:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:e.newUsername,callback:function(t){e.newUsername=t},expression:"newUsername"}})]},proxy:!0}])})],1)},r=[],i=a("9ce4"),l=a("1832"),n=a("06f6"),o=a("d444"),d=a("53fe"),u=a("5fe4");const c="_NEW";var v={components:{LabeledInput:o["a"],LabeledSelect:d["a"],ModalWithCard:u["a"]},props:{value:{type:[Array,String],default:()=>[]},resource:{type:Object,default:()=>({})},userOptions:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},mode:{type:String,default:"create"},disabled:{type:Boolean,default:!1}},data(){return{selectedUser:this.value,newUsername:"",randomStr:Object(n["p"])(5).toLowerCase(),errors:[]}},computed:{...Object(i["a"])({t:"i18n/t"})},watch:{value(e){this.selectedUser=e},selectedUser(e,t){e.includes(c)&&(this.$set(this,"selectedUser",t),this.update(),this.show())}},methods:{update(){this.$emit("update:user",Object(l["e"])(this.selectedUser))},addUser(e){const t=/^[-._0-9a-zA-Z]+$/;if(this.errors=[],!t.test(this.newUsername)){const t=this.t("harvester.virtualMachine.accessCredentials.invalidUser");return this.errors.push(t),void e(!1)}if(this.userOptions.includes(this.newUsername)){const t=this.t("harvester.virtualMachine.accessCredentials.duplicatedUser");return this.errors.push(t),void e(!1)}this.multiple?this.selectedUser.push(this.newUsername):this.selectedUser=this.newUsername,this.$emit("update:newUser",this.newUsername),this.update(),e(!0),this.cancel()},show(){this.$modal.show(this.randomStr)},hide(){this.$modal.hide(this.randomStr)},cancel(){this.hide(),this.newUsername=""}}},p=v,m=(a("ba19"),a("d802")),h=Object(m["a"])(p,s,r,!1,null,null,null);t["default"]=h.exports},"42c6":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.showReserved?t("div",[t("ConsumptionGauge",{attrs:{capacity:e.total,used:e.reserved,units:e.units,"number-formatter":e.formatter,"resource-name":e.resourceName},scopedSlots:e._u([{key:"title",fn:function({formattedPercentage:a}){return[t("span",[e._v(" "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.reserved"))+" ")]),t("span",{staticClass:"precent-data"},[e._v(" "+e._s(e.t("node.detail.glance.consumptionGauge.amount",e.reservedAmountTemplateValues))+" "),t("span",{staticClass:"ml-10 percentage"},[e._v(" / "+e._s(a)+" ")])])]}}],null,!1,4128256252)})],1):e._e(),t("ConsumptionGauge",{class:{"mt-10":e.showReserved},attrs:{capacity:e.total,used:e.usage,units:e.units,"number-formatter":e.formatter,"resource-name":e.showReserved?"":e.resourceName},scopedSlots:e._u([{key:"title",fn:function({formattedPercentage:a}){return[t("span",[e._v(" "+e._s(e.t("node.detail.glance.consumptionGauge.used"))+" ")]),t("span",{staticClass:"precent-data"},[e._v(" "+e._s(e.t("node.detail.glance.consumptionGauge.amount",e.usedAmountTemplateValues))+" "),t("span",{staticClass:"ml-10 percentage"},[e._v(" / "+e._s(a)+" ")])])]}}])})],1)},r=[],i=a("3c8a"),l=a("56a4"),n=a("67ab"),o={name:"HarvesterStorageUsed",components:{ConsumptionGauge:i["a"]},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showReserved:{type:Boolean,default:!1}},data(){return{}},computed:{usage(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/byId"](l["s"].NODES,"longhorn-system/"+this.row.id)||{};return(null===t||void 0===t?void 0:t.used)||0},reserved(){var e;const t=this.$store.getters["currentProduct"].inStore,a=this.$store.getters[t+"/byId"](l["s"].NODES,"longhorn-system/"+this.row.id);let s=0;const r=(null===a||void 0===a||null===(e=a.spec)||void 0===e?void 0:e.disks)||{};return Object.values(r).map(e=>{e.allowScheduling&&(s+=e.storageReserved)}),s},total(){var e;const t=this.$store.getters["currentProduct"].inStore,a=this.$store.getters[t+"/byId"](l["s"].NODES,"longhorn-system/"+this.row.id);let s=0;const r=(null===a||void 0===a||null===(e=a.status)||void 0===e?void 0:e.diskStatus)||{};return Object.values(r).map(e=>{null!==e&&void 0!==e&&e.storageMaximum&&(s+=e.storageMaximum)}),s},units(){const e=Object(n["d"])(this.total,1024);return n["b"][e]+"iB"},used(){let e=this.formatter(this.usage||0);return!Number.parseFloat(e)>0&&(e=this.formatter(this.usage||0,{canRoundToZero:!1})),e},formatReserved(){let e=this.formatter(this.reserved||0);return!Number.parseFloat(e)>0&&(e=this.formatter(this.reserved||0,{canRoundToZero:!1})),e},usedAmountTemplateValues(){return{used:this.used,total:this.formatter(this.total||0),unit:this.units}},reservedAmountTemplateValues(){return{used:this.formatReserved,total:this.formatter(this.total||0),unit:this.units}}},methods:{formatter(e,t){const a=Object(n["d"])(this.total,1024),s={addSuffix:!1,increment:1024,minExponent:a};return Object(n["e"])(e,{...s,...t})}}},d=o,u=(a("beb6"),a("d802")),c=Object(u["a"])(d,s,r,!1,null,"720a134f",null);t["default"]=c.exports},"42e9":function(e,t,a){"use strict";a("99bd")},4890:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-name"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-type"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),mode:e.mode,options:e.VOLUME_TYPE,required:""},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-volumeName"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.volume"),value:e.value.volumeName,mode:e.mode}},[t("LabeledSelect",{attrs:{disabled:e.isDisabled,label:e.t("harvester.fields.volume"),mode:e.mode,options:e.volumeOption,required:""},on:{input:e.update},model:{value:e.value.volumeName,callback:function(t){e.$set(e.value,"volumeName",t)},expression:"value.volumeName"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-size"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.size"),value:e.value.size,mode:e.mode}},[t("UnitInput",{attrs:{"output-modifier":!0,increment:1024,"input-exponent":3,label:e.t("harvester.fields.size"),mode:e.mode,disabled:!0},on:{input:e.update},model:{value:e.value.size,callback:function(t){e.$set(e.value,"size",t)},expression:"value.size"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[e.image?t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-image"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.image"),value:e.image,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.image"),mode:e.mode,disabled:!0},on:{input:e.update},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}})],1)],1):e._e(),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-bus"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),mode:e.mode,options:e.InterfaceOption,disabled:!0,required:""},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])])},r=[],i=a("2007"),l=a("d444"),n=a("53fe"),o=a("2aaa"),d=a("7592"),u=a("56a4"),c=a("90cd"),v=a("d6a6"),p=a("7c47"),m=a("873f"),h={name:"HarvesterEditExisting",components:{UnitInput:i["a"],LabeledInput:l["a"],LabeledSelect:n["a"],InputOrDisplay:o["a"]},props:{mode:{type:String,default:v["z"]},value:{type:Object,required:!0},isEdit:{type:Boolean,default:!1},namespace:{type:String,default:null},idx:{type:Number,default:0},rows:{type:Array,required:!0}},data(){return this.value.realName&&(this.value.volumeName=this.value.realName),{VOLUME_TYPE:p["h"],InterfaceOption:p["d"],loading:!1}},computed:{isDisabled(){return!this.value.newCreateId&&this.isEdit},allPVCs(){const e=this.$store.getters["harvester/all"](u["E"]);return e.filter(e=>!this.namespace||this.namespace===e.metadata.namespace)||[]},image(){const e=this.$store.getters["harvester/all"](c["b"].IMAGE).find(e=>{var t,a,s;return e.id===(null===(t=this.pvcResource)||void 0===t||null===(a=t.metadata)||void 0===a||null===(s=a.annotations)||void 0===s?void 0:s[m["a"].IMAGE_ID])});if(e)return`${e.metadata.namespace}/${e.spec.displayName}`},pvcResource(){return this.allPVCs.find(e=>e.metadata.name===this.value.volumeName)},volumeOption(){return Object(d["b"])(this.allPVCs.filter(e=>{var t,a,s,r;let i=!0,l=!1;return this.rows.forEach(t=>{t.volumeName===e.metadata.name&&(i=!1)}),!!(0!==this.idx||null!==(t=e.metadata)&&void 0!==t&&null!==(a=t.annotations)&&void 0!==a&&a[m["a"].IMAGE_ID])&&(e.attachVM&&i&&(null===(s=e.attachVM)||void 0===s?void 0:s.id)===(null===(r=this.vm)||void 0===r?void 0:r.id)&&this.isEdit?l=!1:e.attachVM&&(l=!0),i&&!l&&e.isAvailable)}).map(e=>({label:e.metadata.name,value:e.metadata.name})),"label")}},watch:{"value.volumeName"(e){const t=this.allPVCs.find(t=>t.metadata.name===e);t&&(this.value.accessModes=t.spec.accessModes[0],this.value.size=t.spec.resources.requests.storage,this.value.storageClassName=t.spec.storageClassName,this.value.volumeMode=t.spec.volumeMode)},"value.type"(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())},pvcResource:{handler(e){var t;!this.value.volumeName&&null!==e&&void 0!==e&&null!==(t=e.metadata)&&void 0!==t&&t.name&&(this.value.volumeName=e.metadata.name)},deep:!0,immediate:!0}},methods:{update(){this.$emit("update")}}},b=h,f=a("d802"),y=Object(f["a"])(b,s,r,!1,null,null,null);t["default"]=y.exports},"489c":function(e,t,a){"use strict";a("2a1a")},"4aa3":function(e,t,a){var s=a("3dd1");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("44609c36",s,!0,{sourceMap:!1,shadowMode:!1})},"4cf0":function(e,t,a){var s=a("d227");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("26651581",s,!0,{sourceMap:!1,shadowMode:!1})},"4e25":function(e,t,a){"use strict";a("1aa2")},"500e":function(e,t,a){"use strict";function s(e,t,a){return t=r(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e){var t=i(e,"string");return"symbol"===typeof t?t:String(t)}function i(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!==typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}class l{constructor(e,t,a=Number.POSITIVE_INFINITY){s(this,"fn",void 0),s(this,"pollRateMs",void 0),s(this,"maxRetries",void 0),s(this,"intervalId",void 0),s(this,"tryCount",0),this.fn=e||(()=>{}),this.pollRateMs=t,this.maxRetries=a}start(){this.stop(),this._intervalMethod(),this.intervalId=setInterval(()=>this._intervalMethod(),this.pollRateMs)}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)}async _intervalMethod(){try{await this.fn(),this.tryCount=0}catch(e){console.error("Error encountered while polling",e),++this.tryCount>=this.maxRetries&&this.stop()}}}const n=3e4,o=2;t["a"]={data(){return{metricPoller:null}},mounted(){this.metricPoller=new l(this.loadMetrics,n,o),this.metricPoller.start()},beforeDestroy(){this.metricPoller.stop()}}},"511d":function(e,t,a){var s=a("d9a2");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("666c8b01",s,!0,{sourceMap:!1,shadowMode:!1})},5244:function(e,t,a){"use strict";a("b068")},"52c1":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".consoleBut[data-v-597e289f]{position:relative;top:-20px;left:38px}.overview-basics[data-v-597e289f]{display:grid;grid-template-columns:100%;grid-template-rows:auto;grid-row-gap:15px}.overview-basics .badge-state[data-v-597e289f]{padding:2px 5px;font-size:12px;margin-right:3px}.overview-basics .smart-row[data-v-597e289f]{display:flex;flex-direction:row}.overview-basics .smart-row .console[data-v-597e289f]{display:flex}.overview-basics__name[data-v-597e289f]{flex:1}.overview-basics__ssh-key[data-v-597e289f]{min-width:150px}",""]),e.exports=t},5492:function(e,t,a){"use strict";a("b3be")},"569f":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".precent-data[data-v-07d0bbf4]{white-space:nowrap}",""]),e.exports=t},5800:function(e,t,a){var s=a("52c1");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("11f3b09d",s,!0,{sourceMap:!1,shadowMode:!1})},"592e":function(e,t,a){"use strict";a("f7ed")},"598a":function(e,t,a){var s=a("3cea");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("7d6ca04c",s,!0,{sourceMap:!1,shadowMode:!1})},5993:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hec-name"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),required:"",mode:e.mode},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hec-type"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.VOLUME_TYPE,mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hec-container"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.dockerImage"),value:e.value.container,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.virtualMachine.volume.dockerImage"),mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.container,callback:function(t){e.$set(e.value,"container",t)},expression:"value.container"}})],1)],1),t("div",{staticClass:"col span-3",attrs:{"data-testid":"input-hec-bus"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),options:e.InterfaceOption,mode:e.mode},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])])},r=[],i=a("d444"),l=a("53fe"),n=a("2aaa"),o=a("7c47"),d={name:"HarvesterEditContainer",components:{LabeledInput:i["a"],LabeledSelect:l["a"],InputOrDisplay:n["a"]},props:{mode:{type:String,default:"create"},value:{type:Object,required:!0}},data(){return{VOLUME_TYPE:o["h"],InterfaceOption:o["d"]}},watch:{"value.type"(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())}},methods:{update(){this.$emit("update")}}},u=d,c=a("d802"),v=Object(c["a"])(u,s,r,!1,null,null,null);t["default"]=v.exports},"5c0d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.isView?e._e():t("h2",[e._v(" "+e._s(e.t("harvester.virtualMachine.cloudConfig.title"))+" ")]),t("div",{staticClass:"mb-20"},[t("DataTemplate",{ref:"userTemplate",attrs:{type:"user","view-code":e.viewCode,mode:e.mode,"config-id":e.configUserId,options:e.optionUser},on:{show:e.show,update:e.update,updateTemplateId:e.updateTemplateId},model:{value:e.userScript,callback:function(t){e.userScript=t},expression:"userScript"}})],1),t("div",{staticClass:"mb-20"},[t("DataTemplate",{ref:"networkTemplate",attrs:{type:"network","view-code":e.viewCode,mode:e.mode,"config-id":e.configNetworkId,options:e.optionNetwork},on:{show:e.show,update:e.update},model:{value:e.networkScript,callback:function(t){e.networkScript=t},expression:"networkScript"}})],1),t("ModalWithCard",{ref:"createCloudTemplate",attrs:{name:"createCloudTemplate",width:"40%",errors:e.errors},on:{finish:e.save,close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.cloudConfig.createTemplateTitle",{name:e.createTypeLable}))+" ")]},proxy:!0},{key:"content",fn:function(){return[t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.name"),required:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:e.cloudTemplateName,callback:function(t){e.cloudTemplateName=t},expression:"cloudTemplateName"}}),t("div",{staticClass:"yaml"},[t("div",{staticClass:"resource-yaml"},[t("YamlEditor",{ref:"createTemplate",staticClass:"yaml-editor",attrs:{"editor-mode":e.editorMode},model:{value:e.cloudTemplate,callback:function(t){e.cloudTemplate=t},expression:"cloudTemplate"}})],1)])]},proxy:!0}])})],1)},r=[],i=a("9ce4"),l=a("d444"),n=a("c349"),o=a("5fe4"),d=a("56a4"),u=a("873f"),c=a("d6a6"),v=a("6b50");const p="_NEW",m="_NONE";var h={components:{DataTemplate:v["default"],YamlEditor:n["b"],LabeledInput:l["a"],ModalWithCard:o["a"]},props:{mode:{type:String,default:"create"},namespace:{type:String,default:""},userScript:{type:String,default:""},networkScript:{type:String,default:""},viewCode:{type:Boolean,default:!1}},data(){return{errors:[],templateType:"",cloudTemplate:"",cloudTemplateName:"",configUserId:"",configNetworkId:"",optionUser:[],optionNetwork:[]}},async fetch(){const e=await this.$store.dispatch("harvester/findAll",{type:d["e"]}),t=[],a=[];for(const n of e){var s,r,i,l;"user"===(null===(s=n.metadata)||void 0===s||null===(r=s.labels)||void 0===r?void 0:r[u["a"].CLOUD_INIT])&&t.push({label:null===n||void 0===n?void 0:n.id,value:null===n||void 0===n?void 0:n.id}),"network"===(null===(i=n.metadata)||void 0===i||null===(l=i.labels)||void 0===l?void 0:l[u["a"].CLOUD_INIT])&&a.push({label:null===n||void 0===n?void 0:n.id,value:null===n||void 0===n?void 0:n.id})}t.unshift({label:this.t("harvester.virtualMachine.cloudConfig.createNew"),value:p}),t.unshift({label:this.t("harvester.virtualMachine.cloudConfig.cloudInit.placeholder"),value:m}),a.unshift({label:this.t("harvester.virtualMachine.cloudConfig.createNew"),value:p}),a.unshift({label:this.t("harvester.virtualMachine.cloudConfig.cloudInit.placeholder"),value:m}),this.optionUser=t,this.optionNetwork=a},computed:{...Object(i["a"])({t:"i18n/t"}),createTypeLable(){const e=`harvester.virtualMachine.cloudConfig.${this.templateType}.label`;return this.t(e)},editorMode(){return this.isView?n["a"].VIEW_CODE:n["a"].EDIT_CODE},isView(){return this.mode===c["I"]}},methods:{updateValue(){this.$refs["userTemplate"].updateValue(),this.$refs["networkTemplate"].updateValue()},update(e,t){"user"===t&&this.$emit("updateUserData",e),"network"===t&&this.$emit("updateNetworkData",e)},updateTemplateId(e,t){this.$emit("updateDataTemplateId",e,t)},show(e){this.templateType=e,this.$modal.show("createCloudTemplate")},async save(e){if(this.errors=[],!this.cloudTemplateName)return this.errors.push(this.t("validation.required",{key:this.t("harvester.virtualMachine.input.name")},!0)),void e(!1);if(!this.cloudTemplate){const t="user"===this.templateType?"harvester.cloudTemplate.userData":"harvester.cloudTemplate.networkData";return this.errors.push(this.t("validation.required",{key:this.t(t)},!0)),void e(!1)}const t=await this.$store.dispatch("harvester/create",{type:d["e"],metadata:{labels:{[u["a"].CLOUD_INIT]:this.templateType},name:this.cloudTemplateName,namespace:this.namespace},data:{cloudInit:this.cloudTemplate}});try{const a=await t.save();a.id&&("user"===this.templateType?this.configUserId=a.id:this.configNetworkId=a.id,this.$fetch()),e(!0),this.cancel()}catch(a){this.errors=[a.message],e(!1)}},cancel(){this.cloudTemplate="",this.cloudTemplateName="",this.$set(this,"errors",[]),this.$modal.hide("createCloudTemplate")},refresh(){this.$refs["userTemplate"].refresh(),this.$refs["networkTemplate"].refresh()}}},b=h,f=(a("8944"),a("d802")),y=Object(f["a"])(b,s,r,!1,null,"e0fbc23c",null);t["default"]=y.exports},"600e":function(e,t,a){var s=a("6983");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("e65491b6",s,!0,{sourceMap:!1,shadowMode:!1})},"62a5":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".copy-to-clipboard-text[data-v-0865c2ae]{white-space:nowrap}.copy-to-clipboard-text.plain[data-v-0865c2ae]{color:var(--body-text)}.copy-to-clipboard-text.plain[data-v-0865c2ae]:hover{text-decoration:none}.copy-to-clipboard-text.copied[data-v-0865c2ae]{pointer-events:none;color:var(--success)}",""]),e.exports=t},6620:function(e,t,a){"use strict";a("fcf0")},"67cf":function(e,t,a){"use strict";a("c8d5")},6983:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".labels__header[data-v-0bd5f0d9]{display:flex;justify-content:space-between}",""]),e.exports=t},"6a69":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".entry[data-v-3200a581]{margin-top:10px}.entry[data-v-3200a581]:first-of-type{margin-top:0}",""]),e.exports=t},"6b50":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mb-20"},[t("h3",[e._v(e._s(e.t(`harvester.virtualMachine.cloudConfig.${e.type}.title`)))]),t("p",{staticClass:"text-muted mb-20"},[t("t",{attrs:{k:`harvester.virtualMachine.cloudConfig.${e.type}.tip`,raw:!0}})],1),e.isView?e._e():t("LabeledSelect",{staticClass:"mb-20",attrs:{options:e.options,disabled:e.viewCode,"label-key":`harvester.virtualMachine.cloudConfig.${e.type}.label`},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}}),t("div",{staticClass:"resource-yaml"},[t("YamlEditor",{ref:"yaml",staticClass:"yaml-editor",attrs:{"editor-mode":e.editorMode},model:{value:e.yamlScript,callback:function(t){e.yamlScript=t},expression:"yamlScript"}})],1)],1)},r=[],i=a("9ce4"),l=a("53fe"),n=a("c349"),o=a("d6a6"),d=a("56a4");const u="_NEW",c="_NONE";var v={components:{YamlEditor:n["b"],LabeledSelect:l["a"]},props:{mode:{type:String,default:"create"},value:{type:String,default:""},type:{type:String,default:""},options:{type:Array,default:()=>[]},configId:{type:String,default:""},viewCode:{type:Boolean,default:!1}},data(){return{id:"",yamlScript:this.value}},computed:{...Object(i["a"])({t:"i18n/t"}),editorMode(){return this.isView||this.viewCode?n["a"].VIEW_CODE:n["a"].EDIT_CODE},isView(){return this.mode===o["I"]}},watch:{value(e){this.yamlScript=e},configId(e){this.id=this.configId},id(e,t){var a,s;const r=(null===(a=this.$store.getters["harvester/byId"](d["e"],e))||void 0===a||null===(s=a.data)||void 0===s?void 0:s.cloudInit)||"";if(this.$emit("updateTemplateId",this.type,e),e){if(e===u)return this.$emit("show",this.type),void(this.id=t);this.yamlScript=e===c?"":r,this.$refs["yaml"].updateValue(r)}},yamlScript(e){this.$emit("update",e,this.type)}},methods:{refresh(){this.$refs.yaml.refresh()},updateValue(){this.$refs["yaml"].updateValue(this.value)}}},p=v,m=(a("d093"),a("d802")),h=Object(m["a"])(p,s,r,!1,null,"1cd38279",null);t["default"]=h.exports},"6e3a":function(e,t,a){"use strict";a.r(t),a.d(t,"NETWORK_HEADERS",(function(){return h}));var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[e.abnormalNetwork.length?e._l(e.abnormalNetwork,(function(a){return t("Banner",{key:a.name,attrs:{color:"error"}},[t("nuxt-link",{attrs:{to:a.to}},[e._v(" "+e._s(a.name)+": ")]),e._v(" "+e._s(a.message)+" ")],1)})):e._e(),t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,"default-sort-by":"age",schema:e.schema,groupable:!0,rows:e.filterRows,"key-field":"_key"},scopedSlots:e._u([{key:"cell:state",fn:function({row:a}){return[t("div",{staticClass:"state"},[t("BadgeState",{attrs:{row:a}}),a.clusterNetworkErrorMessage?t("v-popover",{attrs:{trigger:"hover",offset:"16"}},[t("span",{staticClass:"tooltip-target"},[t("i",{staticClass:"icon icon-warning icon-lg text-warning"})]),t("template",{slot:"popover"},[t("p",[e._v(" "+e._s(a.clusterNetworkErrorMessage)+" ")])])],2):e._e()],1)]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))],2)},r=[],i=a("dffb"),l=a("70a6"),n=a("efbe"),o=a("2c0b"),d=a("d6d1"),u=a("56a4"),c=a("873f"),v=a("90cd"),p=a("b837");const m={id:v["b"].NETWORK_ATTACHMENT,type:u["I"],attributes:{kind:v["b"].NETWORK_ATTACHMENT,namespaced:!0},metadata:{name:v["b"].NETWORK_ATTACHMENT}},h=[d["y"],d["z"],{name:"type",value:"vlanType",sort:"spec.config",labelKey:"tableHeaders.networkType"},{name:"vlan",value:"vlanId",sort:"spec.config",labelKey:"tableHeaders.networkVlan"},{name:"connectivity",value:"connectivity",labelKey:"tableHeaders.routeConnectivity",formatter:"BadgeStateFormatter",formatterOpts:{arbitrary:!0},width:130},d["c"]];var b={name:"HarvesterListNetworks",components:{ResourceTable:n["a"],Banner:i["a"],Loading:l["a"],BadgeState:o["a"]},async fetch(){const e=this.$store.getters["currentCluster"],t=e.isHarvester?"harvester":"cluster",a={rows:this.$store.dispatch(t+"/findAll",{type:u["x"]})};this.$store.getters[t+"/schemaFor"](v["b"].NODE_NETWORK)&&(a.hostNetworks=this.$store.dispatch(t+"/findAll",{type:v["b"].NODE_NETWORK})),this.$store.getters[t+"/schemaFor"](v["b"].CLUSTER_NETWORK)&&(a.clusterNetworks=this.$store.dispatch(t+"/findAll",{type:v["b"].CLUSTER_NETWORK}));const s=await Object(p["a"])(a);this.rows=s.rows,this.hostNetworks=s.hostNetworks||[]},data(){return{hash:{},rows:[],hosts:[],hostNetworks:[]}},computed:{headers(){return[d["S"],d["y"],d["z"],{name:"type",value:"vlanType",sort:"spec.config",labelKey:"tableHeaders.networkType"},{name:"clusterNetwork",value:"clusterNetwork",sort:"clusterNetwork",labelKey:"harvester.network.clusterNetwork.label"},{name:"vlan",value:"vlanId",sort:"spec.config",labelKey:"tableHeaders.networkVlan"},{name:"connectivity",value:"connectivity",labelKey:"tableHeaders.routeConnectivity",formatter:"NetworkRouteConnectivity",formatterOpts:{arbitrary:!0},width:130},d["c"]]},schema(){return m},abnormalNetwork(){const e=this.hostNetworks.filter(e=>!e.isReady);return e.map(e=>e.linkMessage)},filterRows(){return this.rows.filter(e=>{var t,a;return!(null!==(t=e.metadata)&&void 0!==t&&null!==(a=t.annotations)&&void 0!==a&&a[c["a"].STORAGE_NETWORK])})}},typeDisplay(){return this.$store.getters["type-map/labelFor"](m,99)}},f=b,y=(a("b83d"),a("d802")),g=Object(y["a"])(f,s,r,!1,null,"453e7022",null);t["default"]=g.exports},"722a":function(e,t,a){var s=a("d7d4");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("77766022",s,!0,{sourceMap:!1,shadowMode:!1})},"73e2":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"overview-web-console"},[t("ButtonDropdown",{attrs:{disabled:e.isOff,"no-drop":e.isOff,"button-label":"Console","dropdown-options":e.options,size:"sm"},on:{"click-action":e.handleDropdown}})],1)},r=[],i=a("98f3"),l=a("9ce4"),n=a("44f6"),o=a("4aac"),d={name:"VMConsoleBar",components:{ButtonDropdown:i["a"]},props:{resource:{type:Object,required:!0,default:()=>({})}},computed:{...Object(l["a"])({t:"i18n/t"}),isOff(){return this.resource.stateDisplay===n["OFF"]},options(){return[{label:this.t("harvester.virtualMachine.console.novnc"),value:"vnc"},{label:this.t("harvester.virtualMachine.console.serial"),value:"serial"}]}},methods:{handleDropdown(e){this.show(e.value)},show(e){var t,a,s,r;let i=null===(t=this.resource.metadata)||void 0===t||null===(a=t.ownerReferences)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.uid;void 0===i&&(i=this.resource.metadata.uid);const l=window.location.host,n=window.location.pathname.replace(this.$route.path,""),d=null===(r=this.$route)||void 0===r?void 0:r.params,u=`https://${l}${n}/${o["PRODUCT_NAME"]}/c/${d.cluster}/console/${i}/${e}`;window.open(u,"_blank","toolbars=0,width=900,height=700,left=0,top=0,noreferrer")},isEmpty(e){return void 0!==e&&0===Object.keys(e).length}}},u=d,c=(a("592e"),a("d802")),v=Object(c["a"])(u,s,r,!1,null,null,null);t["a"]=v.exports},7616:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".error[data-v-d79cf3f0]{color:var(--error)}",""]),e.exports=t},"79f2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,"apply-hooks":e.applyHooks}},[e.spec?t("Tabbed",{attrs:{"side-tabs":!0},on:{changed:e.onTabChanged}},[t("Tab",{attrs:{name:"Basics",label:e.t("harvester.virtualMachine.detail.tabs.basics")}},[t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.name"),value:e.name}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.fields.image"),value:e.imageName}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.hostname"),value:e.hostname}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.input.MachineType"),value:e.machineType}})],1)]),t("CpuMemory",{attrs:{cpu:e.cpu,mode:e.mode,memory:e.memory}}),t("Fpga",{attrs:{"bittware-ia420f":e.bittwareIa420f,"bittware-ia840f":e.bittwareIa840f,"intel-pac-a10":e.intelPacA10,"intel-pac-s10":e.intelPacS10,mode:e.mode}}),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.bootOrder")},scopedSlots:e._u([{key:"value",fn:function(){return[t("div",[t("ul",e._l(e.disks,(function(a){return t("li",{key:a.bootOrder},[e._v(" "+e._s(a.bootOrder)+". "+e._s(a.name)+" ("+e._s(e.getDeviceType(a))+") ")])})),0)])]},proxy:!0}],null,!1,1805671940)})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.CDROMs")},scopedSlots:e._u([{key:"value",fn:function(){return[t("div",[e.cdroms.length>0?t("ul",e._l(e.cdroms,(function(a){return t("li",{key:a.name},[e._v(" "+e._s(a.name)+" ")])})),0):t("span",[e._v(" "+e._s(e.t("harvester.virtualMachine.detail.notAvailable"))+" ")])])]},proxy:!0}],null,!1,988662186)})],1)])],1),t("Tab",{attrs:{name:"volume",label:e.t("harvester.tab.volume"),weight:-1}},[t("Volume",{attrs:{mode:e.mode},model:{value:e.diskRows,callback:function(t){e.diskRows=t},expression:"diskRows"}})],1),t("Tab",{attrs:{name:"network",label:e.t("harvester.tab.network"),weight:-2}},[t("Network",{attrs:{mode:e.mode},model:{value:e.networkRows,callback:function(t){e.networkRows=t},expression:"networkRows"}})],1),t("Tab",{staticClass:"bordered-table",attrs:{name:"keypairs",label:e.t("harvester.virtualMachine.detail.tabs.keypairs"),weight:-3}},[e.vm?t("OverviewKeypairs",{model:{value:e.vm,callback:function(t){e.vm=t},expression:"vm"}}):e._e()],1),t("Tab",{attrs:{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-4}},[t("CloudConfig",{ref:"yamlEditor",attrs:{"user-script":e.userScript,mode:e.mode,"network-script":e.networkScript}}),t("div",{staticClass:"spacer"}),t("Checkbox",{staticClass:"check",attrs:{mode:e.mode,type:"checkbox",label:e.t("harvester.virtualMachine.enableUsb")},model:{value:e.installUSBTablet,callback:function(t){e.installUSBTablet=t},expression:"installUSBTablet"}})],1)],1):e._e()],1)},r=[],i=a("ad61"),l=a("5ef9"),n=a("70a6"),o=a("2e2b"),d=a("efb2"),u=a("eb32"),c=a("6834"),v=a("b837"),p=a("c78c"),m=a("90cd"),h=a("e1c9"),b=a("1149"),f=a("bf80"),y=a("9216"),g=a("fea5"),w=a("5c0d");const C="n/a";var k={name:"VMSnapshotDetail",components:{Volume:y["default"],Network:g["default"],CruResource:o["a"],Tabbed:i["a"],Loading:n["a"],LabelValue:u["a"],Tab:l["a"],CloudConfig:w["default"],Checkbox:d["a"],CpuMemory:h["default"],Fpga:b["default"],OverviewKeypairs:f["a"]},mixins:[p["a"],c["c"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},async fetch(){await Object(v["a"])({allImages:this.$store.dispatch("harvester/findAll",{type:m["b"].IMAGE})})},data(){return{vm:null}},computed:{name(){var e,t;return(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name)||C},hostname(){var e,t,a;return null===this||void 0===this||null===(e=this.spec)||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.spec)||void 0===a?void 0:a.hostname},imageName(){var e;const t=this.$store.getters["harvester/all"](m["b"].IMAGE)||[],a=t.find(e=>this.imageId===e.id);return(null===a||void 0===a||null===(e=a.spec)||void 0===e?void 0:e.displayName)||"-"},disks(){var e,t,a,s,r;const i=(null===this||void 0===this||null===(e=this.spec)||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.spec)||void 0===a||null===(s=a.domain)||void 0===s||null===(r=s.devices)||void 0===r?void 0:r.disks)||[];return i.filter(e=>!!e.bootOrder).sort((e,t)=>e.bootOrder<t.bootOrder?-1:1)},cdroms(){var e,t,a,s,r;const i=(null===this||void 0===this||null===(e=this.spec)||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.spec)||void 0===a||null===(s=a.domain)||void 0===s||null===(r=s.devices)||void 0===r?void 0:r.disks)||[];return i.filter(e=>!!e.cdrom)}},methods:{getDeviceType(e){return e.disk?"Disk":"CD-ROM"},isEmpty(e){return void 0!==e&&0===Object.keys(e).length},onTabChanged({tab:e}){var t;"advanced"===e.name&&(null===(t=this.$refs.yamlEditor)||void 0===t||t.refresh())}}},S=k,_=a("d802"),x=Object(_["a"])(S,s,r,!1,null,null,null);t["default"]=x.exports},8287:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Banner",{staticClass:"mb-20",attrs:{color:"info",label:e.t("harvester.virtualMachine.accessCredentials.tips")}}),e._l(e.rows,(function(a,s){return t("div",{key:a.id},[t("InfoBox",{staticClass:"volume-source"},[e.isEdit?t("button",{staticClass:"role-link btn btn-sm remove-vol",attrs:{type:"button"},on:{click:function(t){return e.remove(a)}}},[t("i",{staticClass:"icon icon-x"})]):e._e(),t("h3",[t("span",[e._v(" "+e._s(e.headerFor(a.source))+" ")])]),t("div",[t(e.componentFor(a.source),{tag:"component",attrs:{rows:e.rows,resource:e.resource,"user-options":e.userOptions,mode:e.mode,idx:s},on:{update:e.update,"update:newUser":e.updateNewUser},model:{value:e.rows[s],callback:function(t){e.$set(e.rows,s,t)},expression:"rows[i]"}})],1)])],1)})),e.isEdit&&e.isQemuInstalled?t("div",{staticClass:"mt-20"},[t("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addCredentials(e.ACCESS_CREDENTIALS.RESET_PWD)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.accessCredentials.resetPwd.label"))+" ")]),t("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addCredentials(e.ACCESS_CREDENTIALS.INJECT_SSH)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.accessCredentials.injectSSH.label"))+" ")])]):e._e()],2)},r=[],i=a("9ce4"),l=a("dffb"),n=a("6583"),o=a("06f6"),d=a("e411"),u=a("7c47"),c=a("d6a6"),v=a("873f");const p="_NEW";var m={components:{Banner:l["a"],InfoBox:n["a"]},props:{value:{type:Array,default:()=>[]},resource:{type:Object,default:()=>({})},mode:{type:String,default:"create"},disableCreate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},isQemuInstalled:{type:Boolean,default:!1}},data(){return{ACCESS_CREDENTIALS:u["a"],toRemove:[],toSave:[],rows:[],newUserOptions:[]}},computed:{...Object(i["a"])({t:"i18n/t"}),isEdit(){return this.mode===c["B"]},historyUsersOptions(){var e,t,a,s,r;const i=JSON.parse((null===(e=this.resource)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.template)||void 0===a||null===(s=a.metadata)||void 0===s||null===(r=s.annotations)||void 0===r?void 0:r[v["a"].DYNAMIC_SSHKEYS_USERS])||"[]");return i.unshift({label:this.t("harvester.virtualMachine.accessCredentials.injectSSH.addUser"),value:p}),i},userOptions(){return Array.from(new Set([...this.historyUsersOptions,...this.newUserOptions]))}},watch:{value:{handler(e){this.rows=[...e]},deep:!0,immediate:!0}},methods:{addCredentials(e){const t={source:e,users:[],sshkeys:[],username:"",newPassword:"",secretName:this.generateSecretName(this.resource.metadata.name)};this.rows.push(t),this.update()},remove(e){Object(d["j"])(this.rows,e),this.update()},update(){this.$emit("input",this.rows)},updateNewUser(e){this.newUserOptions.push(e)},generateSecretName(e){return e?`${e}-${Object(o["p"])(5).toLowerCase()}`:void 0},componentFor(e){switch(e){case u["a"].RESET_PWD:return a("e299").default;case u["a"].INJECT_SSH:return a("db40").default}},headerFor(e){return{userPassword:this.$store.getters["i18n/t"]("harvester.virtualMachine.accessCredentials.resetPwd.label"),sshPublicKey:this.$store.getters["i18n/t"]("harvester.virtualMachine.accessCredentials.injectSSH.label")}[e]}}},h=m,b=(a("b50b"),a("d802")),f=Object(b["a"])(h,s,r,!1,null,"77458bc0",null);t["default"]=f.exports},8944:function(e,t,a){"use strict";a("eed9")},"91f6":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-name"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),required:"",mode:e.mode,disabled:e.isDisabled},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-model"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.model"),value:e.value.model,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.model"),disabled:e.isDisabled,options:e.modelOption,mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.model,callback:function(t){e.$set(e.value,"model",t)},expression:"value.model"}})],1)],1)]),t("div",{staticClass:"row",class:{"mb-20":!e.isMasquerade}},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-networkName"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.network"),value:e.value.networkName,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.network"),options:e.allNetworkOption,mode:e.mode,required:"",disabled:e.isDisabled},on:{input:e.updateNetworkName},model:{value:e.value.networkName,callback:function(t){e.$set(e.value,"networkName",t)},expression:"value.networkName"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-type"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.typeOption,mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),!e.isMasquerade&&e.isSingle?t("div",[t("div",{staticClass:"row mb-20"},[t("a",{attrs:{role:"button"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.showAdvanced?e.t("harvester.generic.hideMore"):e.t("harvester.generic.showMore"))+" ")])]),t("div",{staticClass:"row"},[e.showAdvanced?t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-macAddress"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.macAddress"),value:e.value.macAddress,mode:e.mode}},[t("LabeledInput",{attrs:{"label-key":"harvester.fields.macAddress",mode:e.mode,tooltip:e.t("harvester.virtualMachine.volume.macTip")},on:{input:e.update},model:{value:e.value.macAddress,callback:function(t){e.$set(e.value,"macAddress",t)},expression:"value.macAddress"}})],1)],1):e._e()])]):e._e()])},r=[],i=a("2aaa"),l=a("d444"),n=a("53fe"),o=a("1832"),d=a("d6a6"),u=a("6834");const c=[{label:"virtio",value:"virtio"},{label:"e1000",value:"e1000"},{label:"e1000e",value:"e1000e"},{label:"ne2k_pci",value:"ne2k_pci"},{label:"pcnet",value:"pcnet"},{label:"rtl8139",value:"rtl8139"}];var v={name:"HarvesterEditNetwork",components:{LabeledInput:l["a"],LabeledSelect:n["a"],InputOrDisplay:i["a"]},props:{value:{type:Object,default:()=>({})},networkOption:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},mode:{type:String,default:"create"},isSingle:{type:Boolean,default:!0}},data(){const e=this.value.isPod;return e&&(this.value.networkName=u["a"]),{isMasquerade:e,hasManagementNetwork:!1,showAdvanced:!1}},computed:{isDisabled(){return this.isMasquerade&&!this.value.newCreateId&&!this.isCreate},isView(){return this.mode===d["I"]},isCreate(){return this.mode===d["z"]},modelOption(){return c},allNetworkOption(){const e=Object(o["e"])(this.networkOption),t=[{label:u["a"],value:u["a"]}];return this.value.newCreateId&&this.hasManagementNetwork?e:this.value.newCreateId&&!this.hasManagementNetwork?[...t,...e]:this.isMasquerade?t:e},typeOption(){const e=[{label:"masquerade",value:"masquerade"},{label:"bridge",value:"bridge"}],t=[{label:"bridge",value:"bridge"}];return this.isMasquerade?e:t}},watch:{rows:{handler(e){const t=!!e.some(e=>e.isPod);this.$set(this,"hasManagementNetwork",t)},immediate:!0,deep:!0},isSingle(e){e||(this.$set(this.value,"macAddress",""),this.update())}},methods:{updateNetworkName(e){e===u["a"]?(this.value.isPod=!0,this.value.macAddress=""):this.value.isPod=!1,this.$set(this,"isMasquerade",this.value.isPod),this.value.isPod?this.value.type="masquerade":this.value.type="bridge",this.update()},update(){this.$emit("update")},toggleAdvanced(){this.showAdvanced=!this.showAdvanced}}},p=v,m=a("d802"),h=Object(m["a"])(p,s,r,!1,null,null,null);t["default"]=h.exports},9216:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.isView?e._e():t("Banner",{attrs:{color:"info","label-key":"harvester.virtualMachine.volume.dragTip"}}),t("draggable",{attrs:{disabled:e.isView},on:{end:e.update},model:{value:e.rows,callback:function(t){e.rows=t},expression:"rows"}},[t("transition-group",e._l(e.rows,(function(a,s){return t("div",{key:a.id},[t("InfoBox",{staticClass:"box"},[e.isView?e._e():t("button",{staticClass:"role-link btn btn-sm remove",attrs:{type:"button"},on:{click:function(t){return e.removeVolume(a)}}},[t("i",{staticClass:"icon icon-x"})]),a.hotpluggable&&e.isView?t("button",{staticClass:"role-link btn remove",attrs:{type:"button"},on:{click:function(t){return e.unplugVolume(a)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.unplug.detachVolume"))+" ")]):e._e(),t("h3",[a.to&&e.isVirtualType?t("span",{staticClass:"title"},[t("n-link",{attrs:{to:a.to}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.edit"))+" "+e._s(e.headerFor(a.source))+" ")]),a.pvc?t("BadgeStateFormatter",{staticClass:"ml-10 state",attrs:{arbitrary:!0,row:a.pvc,value:a.pvc.state}}):e._e(),e.dev&&a.pvc&&a.pvc.resourceExternalLink?t("a",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t(a.pvc.resourceExternalLink.tipsKey||"generic.resourceExternalLinkTips"),expression:"t(volume.pvc.resourceExternalLink.tipsKey || 'generic.resourceExternalLinkTips')"}],staticClass:"ml-5 resource-external",attrs:{rel:"nofollow noopener noreferrer",target:"_blank",href:a.pvc.resourceExternalLink.url}},[t("i",{staticClass:"icon icon-external-link"})]):e._e()],1):t("span",[e._v(" "+e._s(e.headerFor(a.source))+" ")])]),t("div",[t(e.componentFor(a.source),{tag:"component",attrs:{rows:e.rows,namespace:e.namespace,"is-create":e.isCreate,"is-edit":e.isEdit,"is-view":e.isView,"is-virtual-type":e.isVirtualType,mode:e.mode,idx:s,"validate-required":e.validateRequired},on:{update:e.update},model:{value:e.rows[s],callback:function(t){e.$set(e.rows,s,t)},expression:"rows[i]"}})],1),t("div",{staticClass:"bootOrder"},[e.isView?e._e():t("div",{staticClass:"mr-15"},[t("button",{staticClass:"btn btn-sm role-primary",attrs:{disabled:0===s},on:{click:function(t){return t.preventDefault(),e.changeSort(s,!1)}}},[t("i",{staticClass:"icon icon-lg icon-chevron-up"})]),t("button",{staticClass:"btn btn-sm role-primary",attrs:{disabled:s===e.rows.length-1},on:{click:function(t){return t.preventDefault(),e.changeSort(s,!0)}}},[t("i",{staticClass:"icon icon-lg icon-chevron-down"})])]),t("div",{staticClass:"text-muted"},[e._v(" bootOrder: "+e._s(s+1)+" ")])]),a.volumeStatus&&!e.isCreate?t("Banner",{staticClass:"mt-15 volume-status",attrs:{color:"warning",label:a.volumeStatus}}):e._e()],1)],1)})),0)],1),e.showVolumeTip?t("Banner",{attrs:{color:"warning",label:e.t("harvester.virtualMachine.volume.volumeTip")}}):e._e(),e.isView?e._e():t("div",[t("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button",disabled:0===e.rows.length},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.NEW)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addVolume"))+" ")]),e.existingVolumeDisabled?e._e():t("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.ATTACH_VOLUME)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addExistingVolume"))+" ")]),t("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.IMAGE)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addVmImage"))+" ")]),t("button",{staticClass:"btn btn-sm bg-primary mb-10",attrs:{type:"button"},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.CONTAINER)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addContainer"))+" ")])]),t("ModalWithCard",{ref:"deleteTip",attrs:{name:"deleteTip",width:400},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.unmount.title"))+" ")]},proxy:!0},{key:"content",fn:function(){return[t("span",[e._v(e._s(e.t("harvester.virtualMachine.volume.unmount.message")))])]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"buttons"},[t("button",{staticClass:"btn role-secondary mr-20",on:{click:function(t){return t.preventDefault(),e.cancel.apply(null,arguments)}}},[e._v(" "+e._s(e.t("generic.no"))+" ")]),t("button",{staticClass:"btn bg-primary mr-20",on:{click:function(t){return t.preventDefault(),e.deleteVolume.apply(null,arguments)}}},[e._v(" "+e._s(e.t("generic.yes"))+" ")])])]},proxy:!0}])})],1)},r=[],i=a("6e12"),l=a.n(i),n=a("6583"),o=a("dffb"),d=a("2c0b"),u=a("2007"),c=a("d444"),v=a("53fe"),p=a("5fe4"),m=a("56a4"),h=a("90cd"),b=a("1832"),f=a("e411"),y=a("06f6"),g=a("7c47"),w=a("d6a6"),C=a("4aac"),k=a("005f"),S={components:{Banner:o["a"],BadgeStateFormatter:d["a"],draggable:l.a,InfoBox:n["a"],LabeledInput:c["a"],UnitInput:u["a"],LabeledSelect:v["a"],ModalWithCard:p["a"]},props:{vm:{type:Object,default:()=>({})},mode:{type:String,default:w["z"]},value:{type:Array,default:()=>[]},namespace:{type:String,default:null},existingVolumeDisabled:{type:Boolean,default:!1},validateRequired:{type:Boolean,default:!1},customVolumeMode:{type:String,default:"Block"},customAccessMode:{type:String,default:"ReadWriteMany"},resourceType:{type:String,default:""}},async fetch(){await this.$store.dispatch("harvester/findAll",{type:m["E"]})},data(){return{SOURCE_TYPE:g["f"],rows:Object(b["e"])(this.value),nameIdx:1,vol:null}},computed:{dev(){try{return this.$store.getters["prefs/get"](k["o"])}catch{return this.$store.getters["prefs/get"](k["e"])}},isVirtualType(){return this.resourceType===h["b"].VM},isView(){return this.mode===w["I"]},isEdit(){return this.mode===w["B"]},isCreate(){return this.mode===w["z"]},showVolumeTip(){var e;const t=this.getImageDisplayName(null===(e=this.rows[0])||void 0===e?void 0:e.image);return!(1!==this.rows.length||"cd-rom"!==this.rows[0].type||!/.iso$/i.test(t))},pvcs(){return this.$store.getters["harvester/all"](m["E"])||[]}},watch:{value:{handler(e){const t=e.map(e=>(this.isCreate||e.source===g["f"].CONTAINER||e.newCreateId||(e.to={name:C["PRODUCT_NAME"]+"-c-cluster-resource-namespace-id",params:{resource:h["b"].VOLUME,namespace:this.namespace,id:e.realName},query:{mode:w["B"]}},e.pvc=this.pvcs.find(t=>t.metadata.name===e.realName)),e));this.$set(this,"rows",t)},deep:!0,immediate:!0}},methods:{addVolume(e){const t=this.generateName(),a={id:Object(y["p"])(5),name:t,source:e,size:"10Gi",type:"disk",accessMode:this.customAccessMode,volumeMode:this.customVolumeMode,volumeName:"",bus:"virtio",newCreateId:Object(y["p"])(10)};if(e===g["f"].NEW){var s;const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](m["O"]).find(e=>e.isDefault);a.storageClassName=(null===t||void 0===t||null===(s=t.metadata)||void 0===s?void 0:s.name)||"longhorn"}this.rows.push(a),this.update()},generateName(){let e="",t=!0;while(t)e="disk-"+this.nameIdx,t=this.rows.find(t=>t.name===e),this.nameIdx++;return e},removeVolume(e){this.vol=e,!e.newCreateId&&this.isEdit&&this.isVirtualType?this.$refs.deleteTip.open():(Object(f["j"])(this.rows,e),this.update())},unplugVolume(e){this.vm.unplugVolume(e.name)},componentFor(e){switch(e){case g["f"].NEW:return a("0e4c").default;case g["f"].IMAGE:return a("df1c").default;case g["f"].ATTACH_VOLUME:return a("4890").default;case g["f"].CONTAINER:return a("5993").default}},headerFor(e){return{[g["f"].NEW]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.volume"),[g["f"].IMAGE]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.vmImage"),[g["f"].ATTACH_VOLUME]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.existingVolume"),[g["f"].CONTAINER]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.container")}[e]},update(){this.$emit("input",this.rows)},deleteVolume(){Object(f["j"])(this.rows,this.vol),this.update(),this.cancel()},cancel(){this.$refs.deleteTip.hide()},changeSort(e,t){this.rows.splice(t?e:e-1,1,...this.rows.splice(t?e+1:e,1,this.rows[t?e:e-1])),this.update()},getImageDisplayName(e){var t,a;return null===(t=this.$store.getters["harvester/all"](h["b"].IMAGE).find(t=>t.id===e))||void 0===t||null===(a=t.spec)||void 0===a?void 0:a.displayName}}},_=S,x=(a("feb0"),a("d802")),O=Object(x["a"])(_,s,r,!1,null,"a999bef6",null);t["default"]=O.exports},9237:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0},on:{changed:e.onTabChanged}},"Tabbed",e.$attrs,!1),[t("Tab",{staticClass:"bordered-table",attrs:{name:"basics",label:e.t("harvester.virtualMachine.detail.tabs.basics"),weight:7}},[t("OverviewBasics",{attrs:{vmi:e.vmi,mode:"view"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),t("Tab",{staticClass:"bordered-table",attrs:{name:"disks",label:e.t("harvester.tab.volume"),weight:6}},[t("Volume",{attrs:{mode:"view",namespace:e.value.metadata.namespace,vm:e.value,"resource-type":e.value.type},model:{value:e.diskRows,callback:function(t){e.diskRows=t},expression:"diskRows"}})],1),t("Tab",{staticClass:"bordered-table",attrs:{name:"networks",label:e.t("harvester.virtualMachine.detail.tabs.networks"),weight:5}},[t("Network",{attrs:{mode:"view"},model:{value:e.networkRows,callback:function(t){e.networkRows=t},expression:"networkRows"}})],1),t("Tab",{staticClass:"bordered-table",attrs:{name:"keypairs",label:e.t("harvester.virtualMachine.detail.tabs.keypairs"),weight:3}},[t("OverviewKeypairs",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e.showVmMetrics?t("Tab",{attrs:{name:"vm-metrics",label:e.t("harvester.virtualMachine.detail.tabs.metrics"),weight:2.5},scopedSlots:e._u([{key:"default",fn:function(a){return[a.active?t("DashboardMetrics",{attrs:{"detail-url":e.VM_METRICS_DETAIL_URL,"graph-height":"550px","has-summary-and-detail":!1,vars:e.graphVars}}):e._e()]}}],null,!1,4264103987)}):e._e(),t("Tab",{attrs:{name:"nodeScheduling",label:e.t("workload.container.titles.nodeScheduling"),weight:2.4},scopedSlots:e._u([{key:"default",fn:function({active:a}){return[e.spec?t("NodeScheduling",{key:a,attrs:{mode:e.mode,value:e.spec.template.spec,nodes:e.nodesIdOptions}}):e._e()]}}])}),t("Tab",{attrs:{label:e.t("harvester.tab.vmScheduling"),name:"vmScheduling",weight:2.3},scopedSlots:e._u([{key:"default",fn:function({active:a}){return[e.spec?t("PodAffinity",{key:a,attrs:{mode:e.mode,value:e.spec.template.spec,nodes:e.nodes,"all-namespaces-option-available":!0,namespaces:e.filteredNamespaces,"overwrite-labels":e.affinityLabels}}):e._e()]}}])}),t("Tab",{staticClass:"bordered-table",attrs:{label:e.t("harvester.tab.accessCredentials"),name:"accessCredentials",weight:2.2}},[t("AccessCredentials",{attrs:{mode:"view",value:e.accessCredentials,resource:e.value}})],1),t("Tab",{staticClass:"bordered-table",attrs:{name:"cloudConfig",label:e.t("harvester.virtualMachine.detail.tabs.cloudConfig"),weight:2}},[t("CloudConfig",{ref:"yamlEditor",attrs:{mode:"view","user-script":e.userScript,"network-script":e.networkScript}})],1),t("Tab",{attrs:{name:"event",label:e.t("harvester.virtualMachine.detail.tabs.events"),weight:1}},[t("Events",{attrs:{resource:e.vmi,events:e.events}})],1),t("Tab",{attrs:{name:"migration",label:e.t("harvester.virtualMachine.detail.tabs.migration")}},[t("Migration",{attrs:{"vmi-resource":e.vmi},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),t("Tab",{attrs:{name:"instanceLabel",label:e.t("harvester.tab.instanceLabel"),weight:-99}},[t("Labels",{attrs:{"default-container-class":"labels-and-annotations-container",value:e.value,mode:e.mode,"display-side-by-side":!1,"show-annotations":!1,"show-label-title":!1},scopedSlots:e._u([{key:"labels",fn:function({toggler:a}){return[t("KeyValue",{key:"labels",attrs:{value:e.value.instanceLabels,"protected-keys":e.value.systemLabels||[],"toggle-filter":a,"add-label":e.t("labels.addLabel"),mode:e.mode,"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setInstanceLabels(t)}}})]}}])})],1)],1)],1)},r=[],i=a("9ce4"),l=a("ad61"),n=a("5ef9"),o=a("56a4"),d=a("90cd"),u=a("c78c"),c=a("6834"),v=a("1828"),p=a("b837"),m=a("4543"),h=a("5c0d"),b=a("9216"),f=a("fea5"),y=a("1b5f"),g=a("03d2"),w=a("8287"),C=function(){var e=this,t=e._self._c;return t("SortableTable",{attrs:{rows:e.events,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},scopedSlots:e._u([{key:"cell:resource",fn:function({row:a,value:s}){return[t("div",{staticClass:"text-info"},[e._v(" "+e._s(s)+" ")]),a.message?t("div",[e._v(" "+e._s(a.displayMessage)+" ")]):e._e()]}}])})},k=[],S=a("d6d1"),_=a("fc28"),x={name:"VirtualMachineEvents",components:{SortableTable:_["b"]},props:{events:{type:Array,required:!0}},data(){const e={...S["K"],canBeVariable:!0,width:180},t=[e,{name:"resource",label:"Resource",labelKey:"clusterIndexPage.sections.events.resource.label",value:"displayInvolvedObject",sort:["involvedObject.kind","involvedObject.name"],canBeVariable:!0},{align:"right",name:"date",label:"Date",labelKey:"clusterIndexPage.sections.events.date.label",value:"lastTimestamp",sort:"lastTimestamp:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,defaultSort:!0}];return{eventHeaders:t}}},O=x,N=a("d802"),I=Object(N["a"])(O,C,k,!1,null,null,null),T=I.exports,M=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.sourceNode"),value:e.sourceNode}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.targetNode"),value:e.targetNode}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.started"),value:e.started}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.ended"),value:e.ended}})],1)])])},E=[],$=a("eb32"),A={name:"VirtualMachineMigration",components:{LabelValue:$["a"]},props:{value:{type:Object,required:!0},vmiResource:{type:Object,required:!0,default:()=>({})}},data(){return{localResource:this.vmiResource}},computed:{migrationState(){var e,t;return null===(e=this.localResource)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.migrationState},sourceNode(){var e;return(null===(e=this.migrationState)||void 0===e?void 0:e.sourceNode)||"N/A"},targetNode(){var e;return(null===(e=this.migrationState)||void 0===e?void 0:e.targetNode)||"N/A"},started(){var e;return(null===(e=this.migrationState)||void 0===e?void 0:e.startTimestamp)||"N/A"},ended(){var e;return(null===(e=this.migrationState)||void 0===e?void 0:e.endTimestamp)||"N/A"},message(){return"N/A"}},watch:{vmiResource:{handler(e){this.localResource=e},deep:!0}}},L=A,P=Object(N["a"])(L,M,E,!1,null,null,null),D=P.exports,V=function(){var e=this,t=e._self._c;return t("div",{staticClass:"overview-basics"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.name"),value:e.value.nameDisplay},scopedSlots:e._u([{key:"value",fn:function(){return[t("div",{staticClass:"smart-row"},[t("div",{staticClass:"console"},[e._v(" "+e._s(e.value.nameDisplay)+" "),t("VMConsoleBar",{staticClass:"consoleBut",attrs:{resource:e.value}})],1)])]},proxy:!0}])})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.fields.image"),value:e.imageName}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.hostname"),value:e.hostname},scopedSlots:e._u([{key:"value",fn:function(){return[t("div",[e._v(" "+e._s(e.hostname)+" ")])]},proxy:!0}])})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.node"),value:e.node},scopedSlots:e._u([{key:"value",fn:function(){return[t("div",[e._v(" "+e._s(e.node)+" ")])]},proxy:!0}])})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.ipAddress")},scopedSlots:e._u([{key:"value",fn:function(){return[t("HarvesterIpAddress",{attrs:{row:e.value},model:{value:e.value.id,callback:function(t){e.$set(e.value,"id",t)},expression:"value.id"}})]},proxy:!0}])})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.created"),value:e.creationTimestamp}})],1)]),t("hr",{staticClass:"section-divider"}),t("h2",[e._v(e._s(e.t("harvester.virtualMachine.detail.tabs.configurations")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.detail.details.bootOrder"),value:e.disks,mode:e.mode},scopedSlots:e._u([{key:"value",fn:function(){return[t("ul",e._l(e.disks,(function(a){return t("li",{key:a.bootOrder},[e._v(" "+e._s(a.bootOrder)+". "+e._s(a.name)+" ("+e._s(e.getDeviceType(a))+") ")])})),0)]},proxy:!0}])})],1),t("div",{staticClass:"col span-6"},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.detail.details.CDROMs"),value:e.cdroms,mode:e.mode},scopedSlots:e._u([{key:"value",fn:function(){return[t("div",[e.cdroms.length>0?t("ul",e._l(e.cdroms,(function(a){return t("li",{key:a.name},[e._v(" "+e._s(a.name)+" ")])})),0):t("span",[e._v(" "+e._s(e.t("harvester.virtualMachine.detail.notAvailable"))+" ")])])]},proxy:!0}])})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.operatingSystem"),value:e.operatingSystem}})],1),t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.flavor"),value:e.flavor}})],1),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.kernelRelease"),value:e.kernelRelease}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.input.MachineType"),value:e.machineType}})],1)])])},j=[],R=a("a858"),U=a("73e2"),B=a("2aaa");const H="n/a";var q={name:"VMDetailsBasics",components:{VMConsoleBar:U["a"],HarvesterIpAddress:R["default"],LabelValue:$["a"],InputOrDisplay:B["a"]},mixins:[u["a"]],props:{value:{type:Object,required:!0},vmi:{type:Object,required:!0,default:()=>({})},mode:{type:String,required:!0}},computed:{creationTimestamp(){var e,t;const a=new Date(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.creationTimestamp);return a.getMonth?`${a.getMonth()+1}/${a.getDate()}/${a.getUTCFullYear()}`:H},node(){var e,t;const a=(null===(e=this.vmi)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.nodeName)||H;return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):a},hostname(){var e,t,a,s,r;const i=(null===(e=this.vmi)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.hostname)||(null===(a=this.vmi)||void 0===a||null===(s=a.status)||void 0===s||null===(r=s.guestOSInfo)||void 0===r?void 0:r.hostname)||this.t("harvester.virtualMachine.detail.GuestAgentNotInstalled");return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):i},imageName(){var e;const t=this.$store.getters["harvester/all"](d["b"].IMAGE)||[],a=t.find(e=>this.value.rootImageId===e.id);return(null===a||void 0===a||null===(e=a.spec)||void 0===e?void 0:e.displayName)||"N/A"},disks(){var e,t,a,s,r,i;const l=(null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.template)||void 0===a||null===(s=a.spec)||void 0===s||null===(r=s.domain)||void 0===r||null===(i=r.devices)||void 0===i?void 0:i.disks)||[];return l.filter(e=>!!e.bootOrder).sort((e,t)=>e.bootOrder<t.bootOrder?-1:1)},cdroms(){var e,t,a,s,r,i;const l=(null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.template)||void 0===a||null===(s=a.spec)||void 0===s||null===(r=s.domain)||void 0===r||null===(i=r.devices)||void 0===i?void 0:i.disks)||[];return l.filter(e=>!!e.cdrom)},flavor(){var e,t,a,s,r,i,l,n,o;const d=null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.template)||void 0===a||null===(s=a.spec)||void 0===s?void 0:s.domain;let u=0,c=0,v=0,p=0;null===(r=d.devices)||void 0===r||null===(i=r.hostDevices)||void 0===i||i.forEach(e=>{"bittware/ia420f"===e.deviceName&&u++,"bittware/ia840f"===e.deviceName&&c++,"intel/pac_a10"===e.deviceName&&v++,"intel/pac_s10"===e.deviceName&&p++});let m="";return u>0&&(m+=`, ${u} ${this.t("harvester.dashboard.hardwareResourceGauge.bittwareIa420f")} `),c>0&&(m+=`, ${c} ${this.t("harvester.dashboard.hardwareResourceGauge.bittwareIa840f")} `),v>0&&(m+=`, ${v} ${this.t("harvester.dashboard.hardwareResourceGauge.intelPacA10")} `),p>0&&(m+=`, ${p} ${this.t("harvester.dashboard.hardwareResourceGauge.intelPacS10")} `),`${null===(l=d.cpu)||void 0===l?void 0:l.cores} vCPU ${m}, ${null===(n=d.resources)||void 0===n||null===(o=n.limits)||void 0===o?void 0:o.memory} ${this.t("harvester.virtualMachine.input.memory")}`},kernelRelease(){var e,t,a;const s=(null===(e=this.vmi)||void 0===e||null===(t=e.status)||void 0===t||null===(a=t.guestOSInfo)||void 0===a?void 0:a.kernelRelease)||this.t("harvester.virtualMachine.detail.GuestAgentNotInstalled");return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):s},operatingSystem(){var e,t,a;const s=(null===(e=this.vmi)||void 0===e||null===(t=e.status)||void 0===t||null===(a=t.guestOSInfo)||void 0===a?void 0:a.prettyName)||this.t("harvester.virtualMachine.detail.GuestAgentNotInstalled");return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):s},isDown(){return this.isEmpty(this.vmi)},machineType(){var e,t,a,s,r,i;return(null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.template)||void 0===a||null===(s=a.spec)||void 0===s||null===(r=s.domain)||void 0===r||null===(i=r.machine)||void 0===i?void 0:i.type)||void 0}},methods:{getDeviceType(e){return e.disk?"Disk":"CD-ROM"},isEmpty(e){return void 0!==e&&0===Object.keys(e).length}}},K=q,G=(a("fb6d"),Object(N["a"])(K,V,j,!1,null,"597e289f",null)),F=G.exports,z=a("bf80"),W=a("2958"),Y=a("1eaf");const J="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/harvester-vm-detail-1/vm-info-detail?orgId=1";var Q={name:"VMIDetailsPage",components:{Tab:n["a"],Tabbed:l["a"],Events:T,OverviewBasics:F,Volume:b["default"],Network:f["default"],OverviewKeypairs:z["a"],CloudConfig:h["default"],Migration:D,DashboardMetrics:v["a"],AccessCredentials:w["default"],NodeScheduling:y["a"],PodAffinity:g["a"],KeyValue:W["a"],Labels:Y["a"]},mixins:[u["a"],c["c"]],props:{value:{type:Object,required:!0}},data(){return{switchToCloud:!1,VM_METRICS_DETAIL_URL:J,showVmMetrics:!1}},async created(){const e=this.$store.getters["currentProduct"].inStore,t={pods:this.$store.dispatch(e+"/findAll",{type:o["B"]}),services:this.$store.dispatch(e+"/findAll",{type:o["K"]}),events:this.$store.dispatch(e+"/findAll",{type:o["i"]}),allSSHs:this.$store.dispatch(e+"/findAll",{type:d["b"].SSH}),vmis:this.$store.dispatch(e+"/findAll",{type:d["b"].VMI}),restore:this.$store.dispatch(e+"/findAll",{type:d["b"].RESTORE})};await Object(p["a"])(t),Object(p["e"])(Object(m["a"])(this.$store,this.currentCluster.id,[J],"harvester"),this,"showVmMetrics","Determine vm metrics")},computed:{...Object(i["a"])(["currentCluster"]),vmi(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](d["b"].VMI)||[],a=t.find(e=>{var t,a,s,r,i;return(null===e||void 0===e||null===(t=e.metadata)||void 0===t||null===(a=t.ownerReferences)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.uid)===(null===(r=this.value)||void 0===r||null===(i=r.metadata)||void 0===i?void 0:i.uid)});return a},allEvents(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[e+"/all"](o["i"])},events(){return this.allEvents.filter(e=>{var t,a,s,r;const{name:i,creationTimestamp:l}=(null===(t=this.value)||void 0===t?void 0:t.metadata)||{},n=null===(a=this.value.podResource)||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.name,o=this.value.persistentVolumeClaimName||[],d=null===e||void 0===e||null===(r=e.involvedObject)||void 0===r?void 0:r.name,u=o.find(e=>e===d);return(d===i||d===n||u)&&e.firstTimestamp>=l}).sort((e,t)=>e.lastTimestamp>t.lastTimestamp?-1:1)},graphVars(){return{namespace:this.value.namespace,vm:this.value.name}}},methods:{onTabChanged({tab:e}){var t;"cloudConfig"===e.name&&(null===(t=this.$refs.yamlEditor)||void 0===t||t.refresh())}},watch:{value:{handler(e){const t=this.getDiskRows(e);this.$set(this,"diskRows",t)},deep:!0}}},Z=Q,X=Object(N["a"])(Z,s,r,!1,null,null,null);t["default"]=X.exports},"95c9":function(e,t,a){var s=a("afcd");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("15569898",s,!0,{sourceMap:!1,shadowMode:!1})},9651:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return e.text?t("a",{staticClass:"copy-to-clipboard-text",class:{copied:e.copied,plain:e.plain},attrs:{href:"#"},on:{click:e.clicked}},[e._v(" "+e._s(e.text)+" "),t("i",{staticClass:"icon",class:{"icon-copy":!e.copied,"icon-checkmark":e.copied}})]):e._e()},r=[],i={props:{text:{type:String,required:!0},plain:{type:Boolean,default:!1}},data(){return{copied:!1}},methods:{clicked(e){if(!this.copied){e.preventDefault(),this.$copyText(this.text),this.copied=!0;let t=e.target;"I"===t.tagName&&(t=t.parentElement||t),setTimeout(()=>{this.copied=!1},500)}}}},l=i,n=(a("dd06"),a("d802")),o=Object(n["a"])(l,s,r,!1,null,"0865c2ae",null);t["a"]=o.exports},"976d":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s={OPAQUE:"Opaque",SERVICE_ACCT:"kubernetes.io/service-account-token",DOCKER_JSON:"kubernetes.io/dockerconfigjson",BASIC:"kubernetes.io/basic-auth",SSH:"kubernetes.io/ssh-auth",TLS:"kubernetes.io/tls",BOOTSTRAP:"bootstrap.kubernetes.io/token",ISTIO_TLS:"istio.io/key-and-cert",HELM_RELEASE:"helm.sh/release.v1",FLEET_CLUSTER:"fleet.cattle.io/cluster-registration-values",CLOUD_CREDENTIAL:"provisioning.cattle.io/cloud-credential",RKE_AUTH_CONFIG:"rke.cattle.io/auth-config"}},"984b":function(e,t,a){"use strict";a.r(t),a.d(t,"VM_HEADERS",(function(){return C}));var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,"default-sort-by":"age",rows:e.rows,schema:e.schema,groupable:!0,"key-field":"_key"},scopedSlots:e._u([{key:"cell:state",fn:function(a){return[t("div",{staticClass:"state"},[t("HarvesterVmState",{staticClass:"vmstate",attrs:{row:a.row,"all-node-network":e.allNodeNetworks,"all-cluster-network":e.allClusterNetworks}})],1)]}},{key:"cell:name",fn:function(a){return[t("div",{staticClass:"name-console"},[a.row.type!==e.HCI.VMI?t("LinkDetail",{attrs:{row:a.row},model:{value:a.row.metadata.name,callback:function(t){e.$set(a.row.metadata,"name",t)},expression:"scope.row.metadata.name"}}):t("span",[e._v(" "+e._s(a.row.metadata.name)+" ")]),t("ConsoleBar",{staticClass:"console mr-10 ml-10",attrs:{resource:a.row}})],1)]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},r=[],i=a("73e2"),l=a("efbe"),n=function(){var e=this,t=e._self._c;return t("span",[e.to?t("n-link",{attrs:{to:e.to}},[e._v(" "+e._s(e.value)+" ")]):t("span",[e._v(" "+e._s(e.value)+" "),!e.value&&e.col.dashIfEmpty?[t("span",{staticClass:"text-muted"},[e._v("—")])]:e._e()],2)],1)},o=[],d=a("1832"),u={props:{value:{type:String,default:""},row:{type:Object,required:!0},col:{type:Object,default:()=>{}},reference:{type:String,default:null},getCustomDetailLink:{type:Function,default:null}},computed:{to(){var e;return this.getCustomDetailLink?this.getCustomDetailLink(this.row):this.row&&this.reference?Object(d["g"])(this.row,this.reference):null===(e=this.row)||void 0===e?void 0:e.detailLocation}}},c=u,v=a("d802"),p=Object(v["a"])(c,n,o,!1,null,null,null),m=p.exports,h=a("2c7c"),b=a("d6d1"),f=a("56a4"),y=a("90cd"),g=a("b837"),w=a("70a6");const C=[b["S"],{...b["y"],width:350},b["z"],{name:"CPU",label:"CPU",sort:["spec.template.spec.domain.cpu.cores"],value:"spec.template.spec.domain.cpu.cores",align:"center",dashIfEmpty:!0},{name:"FPGA",label:"FPGA",sort:["displayFpga"],value:"displayFpga",align:"center",dashIfEmpty:!0},{name:"Memory",value:"displayMemory",sort:["memorySort"],align:"center",labelKey:"tableHeaders.memory",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"ip",label:"IP Address",value:"id",formatter:"HarvesterIpAddress",labelKey:"tableHeaders.ipAddress"},{...b["c"],sort:"metadata.creationTimestamp:desc"}];var k={name:"HarvesterListVM",components:{Loading:w["a"],HarvesterVmState:h["default"],LinkDetail:m,ConsoleBar:i["a"],ResourceTable:l["a"]},props:{schema:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={vms:this.$store.dispatch(e+"/findAll",{type:y["b"].VM}),pod:this.$store.dispatch(e+"/findAll",{type:f["B"]}),restore:this.$store.dispatch(e+"/findAll",{type:y["b"].RESTORE}),backups:this.$store.dispatch(e+"/findAll",{type:y["b"].BACKUP})};this.$store.getters[e+"/schemaFor"](f["z"])&&(t.nodes=this.$store.dispatch(e+"/findAll",{type:f["z"]}),this.hasNode=!0),this.$store.getters[e+"/schemaFor"](y["b"].NODE_NETWORK)&&(t.nodeNetworks=this.$store.dispatch(e+"/findAll",{type:y["b"].NODE_NETWORK})),this.$store.getters[e+"/schemaFor"](y["b"].CLUSTER_NETWORK)&&(t.clusterNetworks=this.$store.dispatch(e+"/findAll",{type:y["b"].CLUSTER_NETWORK}));const a=await Object(g["a"])(t);this.allVMs=a.vms,this.allNodeNetworks=a.nodeNetworks||[],this.allClusterNetworks=a.clusterNetworks||[]},data(){return{hasNode:!1,allVMs:[],allVMIs:[],allNodeNetworks:[],allClusterNetworks:[],HCI:y["b"]}},computed:{headers(){const e={name:"restoreProgress",labelKey:"tableHeaders.restore",value:"restoreProgress",align:"left",formatter:"HarvesterBackupProgressBar",width:200},t={name:"node",label:"Node",value:"nodeName",sort:["realAttachNodeName"],formatter:"HarvesterHost",labelKey:"tableHeaders.node"},a=Object(d["e"])(C);return this.hasNode&&a.splice(-1,0,t),this.hasRestoredVMs&&a.splice(-1,0,e),a},rows(){const e=this.allVMIs.filter(e=>!this.allVMs.find(t=>t.id===e.id));return[...this.allVMs,...e]},hasRestoredVMs(){return!!this.rows.find(e=>!!e.restoreResource)}},async created(){const e=this.$store.getters["currentProduct"].inStore,t=await this.$store.dispatch(e+"/findAll",{type:y["b"].VMI});await this.$store.dispatch(e+"/findAll",{type:y["b"].VMIM}),this.$set(this,"allVMIs",t)}},S=k,_=(a("eb6e"),Object(v["a"])(S,s,r,!1,null,"7c0ec8ef",null));t["default"]=_.exports},"99bd":function(e,t,a){var s=a("a9f0");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("5ecc8d8a",s,!0,{sourceMap:!1,shadowMode:!1})},"9a16":function(e,t,a){"use strict";a("11e4")},"9a8e":function(e,t,a){var s=a("ebad");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("6b8bbdfe",s,!0,{sourceMap:!1,shadowMode:!1})},"9ade":function(e,t,a){var s=a("19ea");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("8521cfb6",s,!0,{sourceMap:!1,shadowMode:!1})},"9b45":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".infoBox[data-v-736f66fc]{position:relative}.remove-vol[data-v-736f66fc]{position:absolute;top:10px;right:16px;padding:0;max-height:28px;min-height:28px}",""]),e.exports=t},a32a:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,'.toggle-container[data-v-b1a6988c]{align-items:center;display:flex}.toggle-container span[data-v-b1a6988c]:first-child{padding-right:6px}.toggle-container span[data-v-b1a6988c]:last-child{padding-left:6px}.switch[data-v-b1a6988c]{position:relative;display:inline-block;width:48px;height:24px}.switch input[data-v-b1a6988c]{opacity:0;width:0;height:0}.slider[data-v-b1a6988c]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--checkbox-disabled-bg)}.slider[data-v-b1a6988c],.slider[data-v-b1a6988c]:before{position:absolute;transition:.4s}.slider[data-v-b1a6988c]:before{content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:var(--checkbox-tick)}input:checked+.slider[data-v-b1a6988c]{background-color:var(--checkbox-ticked-bg)}input:focus+.slider[data-v-b1a6988c]{box-shadow:0 0 1px var(--checkbox-ticked-bg)}input:checked+.slider[data-v-b1a6988c]:before{transform:translateX(24px)}.slider.round[data-v-b1a6988c]{border-radius:34px}.slider.round[data-v-b1a6988c]:before{border-radius:50%}',""]),e.exports=t},a858:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.showIP?t("div",e._l(e.ips,(function({ip:e,name:a}){return t("span",{key:e},[t("CopyToClipboardText",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:a,expression:"name"}],attrs:{text:e}})],1)})),0):e._e()},r=[],i=a("44f6"),l=a("1832"),n=a("06f6"),o=a("873f"),d=a("90cd"),u=a("6834"),c=a("9651"),v={components:{CopyToClipboardText:c["a"]},props:{value:{type:String,default:""},row:{type:Object,required:!0},col:{type:Object,default:()=>{}}},data(){return{inStore:"harvester"}},created(){const e=this.$store.getters["currentProduct"].inStore;this.inStore=e},computed:{ips(){return[...this.vmiIp,...this.networkAnnotationIP].filter(Boolean).sort((e,t)=>e.ip<t.ip?-1:1)},networkAnnotationIP(){if("Running"!==this.row.actualState)return[];const e=Object(l["g"])(this.row,`metadata.annotations."${o["a"].NETWORK_IPS}"`)||"[]";try{const t=JSON.parse(e);return t.map(e=>({ip:e.replace(/\/[\d\D]*/,""),name:""}))}catch(t){return[]}},vmiIp(){var e,t;const a=this.$store.getters[this.inStore+"/all"](d["b"].VMI),s=a.find(e=>e.id===this.value)||null,r=this.row.networksName||[],i=(null===s||void 0===s||null===(e=s.spec)||void 0===e?void 0:e.networks)||[];return((null===s||void 0===s||null===(t=s.status)||void 0===t?void 0:t.interfaces)||[]).filter(e=>Object(n["k"])(e.ipAddress)&&r.includes(e.name)).map(e=>{let t;const a=i.find(t=>t.name===e.name);return a&&a.multus?t=a.multus.networkName:a&&a.pod&&(t=u["a"]),{ip:e.ipAddress,name:t}})},showIP(){return this.row.stateDisplay!==i["OFF"]}}},p=v,m=a("d802"),h=Object(m["a"])(p,s,r,!1,null,null,null);t["default"]=h.exports},a9f0:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".label[data-v-16d50992]{display:flex;flex-direction:column}.label .value[data-v-16d50992]{font-size:14px;line-height:18px}",""]),e.exports=t},af59:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".action[data-v-b7cb7d9a]{display:flex;flex-direction:row-reverse}",""]),e.exports=t},afcd:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".box[data-v-a999bef6]{position:relative}.title[data-v-a999bef6]{display:flex}.title .state[data-v-a999bef6]{font-size:16px}.remove[data-v-a999bef6]{position:absolute;top:10px;right:10px;padding:0}.bootOrder[data-v-a999bef6]{display:flex;align-items:center}.buttons[data-v-a999bef6]{width:100%;display:flex;justify-content:flex-end}.volume-status[data-v-a999bef6]:first-letter{text-transform:uppercase}.resource-external[data-v-a999bef6]{display:flex;justify-content:center;align-items:center}",""]),e.exports=t},b068:function(e,t,a){var s=a("0807");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("215693fe",s,!0,{sourceMap:!1,shadowMode:!1})},b16e:function(e,t,a){"use strict";a("e695")},b32a:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".state[data-v-453e7022]{display:flex;justify-content:space-between}.state .icon-warning[data-v-453e7022]{margin-top:2px}",""]),e.exports=t},b3be:function(e,t,a){var s=a("d858");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("5514ed51",s,!0,{sourceMap:!1,shadowMode:!1})},b49a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("ResourceTabs",{attrs:{"need-events":!1,"need-related":!1,mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("Tab",{attrs:{name:"data",label:e.dataLabel}},[e.isRegistry||e.isBasicAuth?[e.isRegistry?t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("DetailText",{attrs:{value:e.registryUrl,"label-key":"secret.registry.domainName"}})],1)]):e._e(),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-6"},[t("DetailText",{attrs:{value:e.username,"label-key":"secret.registry.username"}})],1),t("div",{staticClass:"col span-6"},[t("DetailText",{attrs:{value:e.password,"label-key":"secret.registry.password",conceal:!0}})],1)])]:e.isCertificate?t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("DetailText",{attrs:{value:e.key,"label-key":"secret.certificate.privateKey",conceal:!0}})],1),t("div",{staticClass:"col span-6"},[t("DetailText",{attrs:{value:e.crt,"label-key":"secret.certificate.certificate"}})],1)]):e.isSvcAcctToken?t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("DetailText",{attrs:{value:e.crt,"label-key":"secret.serviceAcct.ca"}})],1),t("div",{staticClass:"col span-6"},[t("DetailText",{attrs:{value:e.key,"label-key":"secret.serviceAcct.token",conceal:!0}})],1)]):e.isSsh?t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("DetailText",{attrs:{value:e.username,"label-key":"secret.ssh.public"}})],1),t("div",{staticClass:"col span-6"},[t("DetailText",{attrs:{value:e.password,"label-key":"secret.ssh.private",conceal:!0}})],1)]):t("div",[e._l(e.parsedRows,(function(e,a){return t("div",{key:a,staticClass:"entry"},[t("DetailText",{attrs:{value:e.value,label:e.key,conceal:!0}})],1)})),e.parsedRows.length?e._e():t("div",[t("div",{directives:[{name:"t",rawName:"v-t",value:"sortableTable.noRows",expression:"'sortableTable.noRows'"}],staticClass:"m-20 text-center"})])],2)],2)],1)},r=[],i=a("976d"),l=a("8672"),n=a("c78c"),o=a("3921"),d=a("44f9"),u=a("5ef9");const c=[i["a"].OPAQUE,i["a"].DOCKER_JSON,i["a"].TLS,i["a"].SSH,i["a"].BASIC],v=["DockerHub","Quay.io","Artifactory","Custom"];var p={components:{ResourceTabs:o["a"],DetailText:d["a"],Tab:u["a"]},mixins:[n["a"]],props:{value:{type:Object,default:()=>({})}},data(){var e;let t,a,s,r,n,o="Custom";if(this.value._type===i["a"].DOCKER_JSON){const e=Object(l["a"])(this.value.data[".dockerconfigjson"]),{auths:r}=JSON.parse(e);s=Object.keys(r)[0],"index.docker.io/v1/"===s?o="DockerHub":"quay.io"===s?o="Quay.io":s.includes("artifactory")&&(o="Artifactory"),t=r[s].username,a=r[s].password}const d=(null===(e=this.value)||void 0===e?void 0:e.data)||{};return this.value._type===i["a"].TLS&&(r="edit"===this.mode?"":Object(l["a"])(d["tls.key"]),n=Object(l["a"])(d["tls.crt"])),this.value._type===i["a"].SERVICE_ACCT&&(r=Object(l["a"])(d["token"]),n=Object(l["a"])(d["ca.crt"])),this.value._type===i["a"].BASIC&&(t=Object(l["a"])(d.username||""),a=Object(l["a"])(d.password||"")),this.value._type===i["a"].SSH&&(t=Object(l["a"])(d["ssh-publickey"]||""),a=Object(l["a"])(d["ssh-privatekey"]||"")),this.value._type||this.$set(this.value,"_type",i["a"].OPAQUE),{types:c,registryAddresses:v,registryProvider:o,username:t,password:a,registryUrl:s,key:r,crt:n,relatedServices:[]}},computed:{isCertificate(){return this.value._type===i["a"].TLS},isSvcAcctToken(){return this.value._type===i["a"].SERVICE_ACCT},isRegistry(){return this.value._type===i["a"].DOCKER_JSON},isSsh(){return this.value._type===i["a"].SSH},isBasicAuth(){return this.value._type===i["a"].BASIC},parsedRows(){const e=[],{data:t={}}=this.value;return Object.keys(t).forEach(a=>{const s=Object(l["a"])(t[a]);e.push({key:a,value:s})}),e},dataLabel(){switch(this.value._type){case i["a"].TLS:return this.t("secret.certificate.certificate");case i["a"].SSH:return this.t("secret.ssh.keys");case i["a"].BASIC:return this.t("secret.authentication");default:return this.t("secret.data")}}}},m=p,h=(a("4e25"),a("d802")),b=Object(h["a"])(m,s,r,!1,null,"3200a581",null);t["default"]=b.exports},b50b:function(e,t,a){"use strict";a("511d")},b83d:function(e,t,a){"use strict";a("377a")},ba19:function(e,t,a){"use strict";a("4cf0")},beb6:function(e,t,a){"use strict";a("722a")},bf80:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"overview-sshKeys"},e._l(e.sshKeys,(function(a,s){return t("div",{key:s,staticClass:"row overview-sshKeys__item"},[t("div",{staticClass:"col span-4"},[e._v(" "+e._s(a.id)+" ")]),t("div",{staticClass:"col span-7 offset-1"},[a.showKey?t("div",{staticClass:"key-display"},[e._v(" "+e._s(a.publicKey)+" "),t("button",{staticClass:"btn btn-sm role-link hide-bar",on:{click:function(t){return e.toggleShow(s)}}},[t("i",{staticClass:"icon icon-x"})])]):t("button",{staticClass:"btn btn-sm role-link",on:{click:function(t){return e.toggleShow(s)}}},[e._v(" *******"),t("i",{staticClass:"icons icon-show"})])])])})),0)},r=[],i=a("9c38"),l=a.n(i),n=a("90cd"),o=a("b837"),d=a("4b06"),u={mixins:[d["c"]],props:{value:{type:Object,required:!0}},async fetch(){const e=await Object(o["a"])({allSSHs:this.$store.dispatch("harvester/findAll",{type:n["b"].SSH})});this.allSSHs=e.allSSHs},data(){return{allSSHs:[],sshKeys:[]}},methods:{toggleShow(e){const t=this.sshKeys[e];this.$set(this.sshKeys,e,{...t,showKey:!t.showKey})},getKeys(){var e;return this.mergeAllSSHs(null===(e=this.value)||void 0===e?void 0:e.spec)},isShow(e=""){const t=this.sshKeys.find(t=>{var a;return(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id)===e})||{};return t.showKey||!1}},watch:{allSSHs(e){const t=this.getKeys().map(e=>{var t,a;return{id:e.id,publicKey:l()(e.data)?e.data:null===(t=e.data)||void 0===t||null===(a=t.spec)||void 0===a?void 0:a.publicKey,showKey:this.isShow(e.id)}});this.$set(this,"sshKeys",t)}}},c=u,v=(a("da20"),a("d802")),p=Object(v["a"])(c,s,r,!1,null,"6d99ef38",null);t["a"]=p.exports},bfbb:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("ResourceTabs",{attrs:{"need-related":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},["pool"===e.value.spec.ipam?t("Tab",{attrs:{name:"ipPool","label-key":"harvester.loadBalancer.ipPool.label",weight:99}},[t("SortableTable",{attrs:{"key-field":"_key",headers:e.ipPoolHeaders,rows:e.ipPools,"row-actions":!1,"table-actions":!1,search:!1}})],1):e._e(),"vm"===e.value.spec.workloadType?t("Tab",{staticClass:"bordered-table",attrs:{name:"vm",label:e.t("harvester.loadBalancer.backendServers.label"),weight:98}},[t("SortableTable",{attrs:{rows:e.vms,headers:e.vmHeaders,"key-field":"id","row-actions":!1,"table-actions":!1,search:e.vms.length>10}})],1):e._e(),"vm"===e.value.spec.workloadType?t("Tab",{staticClass:"bordered-table",attrs:{name:"listeners",label:e.t("harvester.loadBalancer.tabs.listeners"),weight:89}},[t("SortableTable",{attrs:{"key-field":"_key",headers:e.listenerHeaders,rows:e.listeners,"row-actions":!1,"table-actions":!1,search:!1}})],1):e._e(),"vm"===e.value.spec.workloadType?t("Tab",{staticClass:"bordered-table",attrs:{name:"selector",label:e.t("harvester.loadBalancer.tabs.backendServer"),weight:79}},[t("SortableTable",{attrs:{"key-field":"_key",headers:e.serviceSelectorInfoHeaders,rows:e.backendServerSelectors,"row-actions":!1,"table-actions":!1,"show-headers":!0,search:!1}})],1):e._e()],1)},r=[],i=a("3921"),l=a("5ef9"),n=a("fc28"),o=a("90cd"),d=a("b837"),u=a("4aac"),c=a("d6d1"),v=a("984b"),p=a("348a"),m={components:{ResourceTabs:i["a"],Tab:l["a"],SortableTable:n["b"]},props:{value:{type:Object,default:()=>({})}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={ipPools:this.$store.dispatch(e+"/findAll",{type:o["b"].IP_POOL}),vms:this.$store.dispatch(e+"/findAll",{type:o["b"].VM})};await Object(d["a"])(t)},computed:{ipPools(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](o["b"].IP_POOL);return t.filter(e=>e.id===this.value.status.allocatedAddress.ipPool)},ipPoolHeaders(){return u["IP_POOL_HEADERS"]},listeners(){var e,t;const a=null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.listeners;return a},listenerHeaders(){return[{name:"name",label:this.t("tableHeaders.name"),value:"name",sort:"name:desc"},{name:"port",label:this.t("tableHeaders.port"),value:"port",sort:"port:desc"},{name:"protocol",label:this.t("tableHeaders.protocol"),value:"protocol",sort:"protocol:desc"},{name:"backendPort",label:this.t("harvester.loadBalancer.listeners.backendPort.label"),value:"backendPort",sort:"backendPort:desc"}]},backendServerSelectors(){var e;return Object.keys((null===(e=this.value.spec)||void 0===e?void 0:e.backendServerSelector)||{}).map(e=>({key:e,value:this.value.spec.backendServerSelector[e]}))},serviceSelectorInfoHeaders(){return[{...c["r"],width:200},c["cb"]]},vmHeaders(){const e=["state","ip","node"];return v["VM_HEADERS"].filter(t=>!e.includes(t.name))},vms(){var e,t;const a=this.$store.getters["currentProduct"].inStore,s=this.$store.getters[a+"/all"](o["b"].VM).filter(e=>e.metadata.namespace===this.value.metadata.namespace),r=Object(p["d"])(s,null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.backendServerSelector,"spec.template.metadata.labels");return r}}},h=m,b=a("d802"),f=Object(b["a"])(h,s,r,!1,null,null,null);t["default"]=f.exports},c8d5:function(e,t,a){var s=a("3169");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("25258af6",s,!0,{sourceMap:!1,shadowMode:!1})},c901:function(e,t,a){"use strict";a("e20a")},c9aa:function(e,t,a){"use strict";a("1002")},cf64:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,"apply-hooks":e.applyHooks}},[e.spec?t("Tabbed",{attrs:{"side-tabs":!0},on:{changed:e.onTabChanged}},[t("Tab",{attrs:{name:"Basics",label:e.t("harvester.virtualMachine.detail.tabs.basics")}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.name"),value:e.name}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.fields.image"),value:e.imageName}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.hostname"),value:e.hostname}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.input.MachineType"),value:e.machineType}})],1)]),t("CpuMemory",{attrs:{cpu:e.cpu,mode:e.mode,memory:e.memory}}),t("Fpga",{attrs:{"bittware-ia420f":e.bittwareIa420f,"bittware-ia840f":e.bittwareIa840f,"intel-pac-a10":e.intelPacA10,"intel-pac-s10":e.intelPacS10,mode:e.mode}}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.bootOrder")},scopedSlots:e._u([{key:"value",fn:function(){return[t("div",[t("ul",e._l(e.disks,(function(a){return t("li",{key:a.bootOrder},[e._v(" "+e._s(a.bootOrder)+". "+e._s(a.name)+" ("+e._s(e.getDeviceType(a))+") ")])})),0)])]},proxy:!0}],null,!1,1805671940)})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.virtualMachine.detail.details.CDROMs")},scopedSlots:e._u([{key:"value",fn:function(){return[t("div",[e.cdroms.length>0?t("ul",e._l(e.cdroms,(function(a){return t("li",{key:a.name},[e._v(" "+e._s(a.name)+" ")])})),0):t("span",[e._v(" "+e._s(e.t("harvester.virtualMachine.detail.notAvailable"))+" ")])])]},proxy:!0}],null,!1,988662186)})],1)])],1),t("Tab",{attrs:{name:"volume",label:e.t("harvester.tab.volume"),weight:-1}},[t("Volume",{attrs:{mode:e.mode},model:{value:e.diskRows,callback:function(t){e.diskRows=t},expression:"diskRows"}})],1),t("Tab",{attrs:{name:"network",label:e.t("harvester.tab.network"),weight:-2}},[t("Network",{attrs:{mode:e.mode},model:{value:e.networkRows,callback:function(t){e.networkRows=t},expression:"networkRows"}})],1),t("Tab",{staticClass:"bordered-table",attrs:{name:"keypairs",label:e.t("harvester.virtualMachine.detail.tabs.keypairs"),weight:-3}},[e.vm?t("OverviewKeypairs",{model:{value:e.vm,callback:function(t){e.vm=t},expression:"vm"}}):e._e()],1),t("Tab",{attrs:{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-4}},[t("CloudConfig",{ref:"yamlEditor",attrs:{"user-script":e.userScript,mode:e.mode,"network-script":e.networkScript}}),t("div",{staticClass:"spacer"}),t("Checkbox",{staticClass:"check",attrs:{mode:e.mode,type:"checkbox",label:e.t("harvester.virtualMachine.enableUsb")},model:{value:e.installUSBTablet,callback:function(t){e.installUSBTablet=t},expression:"installUSBTablet"}})],1)],1):e._e()],1)},r=[],i=a("ad61"),l=a("5ef9"),n=a("70a6"),o=a("2e2b"),d=a("efb2"),u=a("eb32"),c=a("6834"),v=a("b837"),p=a("c78c"),m=a("90cd"),h=a("e1c9"),b=a("1149"),f=a("bf80"),y=a("9216"),g=a("fea5"),w=a("5c0d");const C="n/a";var k={name:"BackupDetail",components:{Volume:y["default"],Network:g["default"],CruResource:o["a"],Tabbed:i["a"],Loading:n["a"],LabelValue:u["a"],Tab:l["a"],CloudConfig:w["default"],Checkbox:d["a"],CpuMemory:h["default"],Fpga:b["default"],OverviewKeypairs:f["a"]},mixins:[p["a"],c["c"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},async fetch(){await Object(v["a"])({allImages:this.$store.dispatch("harvester/findAll",{type:m["b"].IMAGE})})},data(){return{vm:null}},computed:{name(){var e,t;return(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name)||C},hostname(){var e,t,a;return null===this||void 0===this||null===(e=this.spec)||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.spec)||void 0===a?void 0:a.hostname},imageName(){var e;const t=this.$store.getters["harvester/all"](m["b"].IMAGE)||[],a=t.find(e=>this.imageId===e.id);return(null===a||void 0===a||null===(e=a.spec)||void 0===e?void 0:e.displayName)||"-"},disks(){var e,t,a,s,r;const i=(null===this||void 0===this||null===(e=this.spec)||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.spec)||void 0===a||null===(s=a.domain)||void 0===s||null===(r=s.devices)||void 0===r?void 0:r.disks)||[];return i.filter(e=>!!e.bootOrder).sort((e,t)=>e.bootOrder<t.bootOrder?-1:1)},cdroms(){var e,t,a,s,r;const i=(null===this||void 0===this||null===(e=this.spec)||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.spec)||void 0===a||null===(s=a.domain)||void 0===s||null===(r=s.devices)||void 0===r?void 0:r.disks)||[];return i.filter(e=>!!e.cdrom)}},methods:{getDeviceType(e){return e.disk?"Disk":"CD-ROM"},isEmpty(e){return void 0!==e&&0===Object.keys(e).length},onTabChanged({tab:e}){var t;"advanced"===e.name&&(null===(t=this.$refs.yamlEditor)||void 0===t||t.refresh())}}},S=k,_=a("d802"),x=Object(_["a"])(S,s,r,!1,null,null,null);t["default"]=x.exports},d093:function(e,t,a){"use strict";a("9ade")},d227:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".vm__credentials-users .hasUsers.labeled-select.edit.taggable .labeled-tooltip .icon.status-icon{top:30px}",""]),e.exports=t},d724:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".yaml[data-v-e0fbc23c]{height:350px;overflow:auto}[data-v-e0fbc23c] .resource-yaml{flex:1;display:flex;flex-direction:column}[data-v-e0fbc23c] .resource-yaml .yaml-editor{flex:1;min-height:350px}[data-v-e0fbc23c] .resource-yaml .yaml-editor .code-mirror .CodeMirror{min-height:350px}",""]),e.exports=t},d7d4:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".precent-data[data-v-720a134f]{white-space:nowrap}",""]),e.exports=t},d858:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".precent-data[data-v-363a8929]{white-space:nowrap}",""]),e.exports=t},d9a2:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".volume-source[data-v-77458bc0]{position:relative}.remove-vol[data-v-77458bc0]{position:absolute;top:10px;right:10px;padding:0}",""]),e.exports=t},da20:function(e,t,a){"use strict";a("598a")},db40:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"columns row"},[t("div",{staticClass:"col span-6"},[t("AccessCredentialsUsers",{attrs:{resource:e.resource,"user-options":e.userOptions,mode:e.mode,multiple:!0},on:{"update:user":e.updateUser,"update:newUser":e.updateNewUser},model:{value:e.value.users,callback:function(t){e.$set(e.value,"users",t)},expression:"value.users"}})],1),t("div",{staticClass:"col span-6"},[t("SSHKey",{staticClass:"mb-20",attrs:{namespace:e.resource.metadata.namespace,mode:e.mode,searchable:!1},on:{"update:sshKey":e.updateSSH},model:{value:e.value.sshkeys,callback:function(t){e.$set(e.value,"sshkeys",t)},expression:"value.sshkeys"}})],1)])])},r=[],i=a("2a79"),l=a("411b"),n={name:"HarvesterEditVolume",components:{SSHKey:i["default"],AccessCredentialsUsers:l["default"]},props:{mode:{type:String,default:"create"},resource:{type:Object,default:()=>({})},userOptions:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})}},methods:{update(){this.$emit("update")},updateUser(e){this.$set(this.value,"users",e),this.update()},updateSSH(e){this.$set(this.value,"sshkeys",e),this.update()},updateNewUser(e){this.$emit("update:newUser",e)}}},o=n,d=a("d802"),u=Object(d["a"])(o,s,r,!1,null,null,null);t["default"]=u.exports},dc84:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("ConsumptionGauge",{attrs:{capacity:e.memoryTotal,used:e.reserved,units:e.memoryUnits,"number-formatter":e.memoryFormatter,"resource-name":e.resourceName},scopedSlots:e._u([{key:"title",fn:function({amountTemplateValues:a,formattedPercentage:s}){return[t("span",[e._v(" "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.reserved"))+" ")]),t("span",{staticClass:"precent-data"},[e._v(" "+e._s(e.t("node.detail.glance.consumptionGauge.amount",a))+" "),t("span",{staticClass:"ml-10 percentage"},[e._v("/ "+e._s(s)+" ")])])]}}])}),e.showUsed?t("div",{staticClass:"mt-10"},[t("ConsumptionGauge",{attrs:{capacity:e.memoryTotal,used:e.used,units:e.memoryUnits,"number-formatter":e.memoryFormatter},scopedSlots:e._u([{key:"title",fn:function({amountTemplateValues:a,formattedPercentage:s}){return[t("span",[e._v(" "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.used"))+" ")]),t("span",{staticClass:"precent-data"},[e._v(" "+e._s(e.t("node.detail.glance.consumptionGauge.amount",a))+" "),t("span",{staticClass:"ml-10 percentage"},[e._v("/ "+e._s(s)+" ")])])]}}],null,!1,3882697491)})],1):e._e()],1)},r=[],i=a("3c8a"),l=a("56a4"),n=a("67ab"),o={name:"HarvesterMemoryUsed",components:{ConsumptionGauge:i["a"]},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showUsed:{type:Boolean,default:!1}},data(){return{}},computed:{metrics(){return this.$store.getters["harvester/byId"](l["u"].NODE,this.row.id)},memoryTotal(){let e=0;return this.metrics&&(e=this.metrics.memoryCapacity),e},memoryUnits(){const e=Object(n["d"])(this.memoryTotal,1024);return n["b"][e]+"iB"},node(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/byId"](l["z"],this.row.id);return t},reserved(){return this.metrics?this.node.memoryReserved:0},used(){var e,t;return this.metrics?Object(n["f"])((null===(e=this.metrics)||void 0===e||null===(t=e.usage)||void 0===t?void 0:t.memory)||"0m",{increment:1024}):0}},methods:{memoryFormatter(e){const t=Object(n["d"])(this.memoryTotal,1024),a={addSuffix:!1,increment:1024,minExponent:t};return Object(n["e"])(e,a)}}},d=o,u=(a("e5ca"),a("d802")),c=Object(u["a"])(d,s,r,!1,null,"11b8113c",null);t["default"]=c.exports},dcdf:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.showReserved?t("div",[t("ConsumptionGauge",{attrs:{capacity:e.fpgaCapacity,used:e.fpgaAllocatable,"resource-name":e.resourceName},scopedSlots:e._u([{key:"title",fn:function({amountTemplateValues:a,formattedPercentage:s}){return[t("span",[e._v(" "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.reserved"))+" ")]),t("span",{staticClass:"precent-data"},[e._v(" "+e._s(e.t("node.detail.glance.consumptionGauge.amount",a))+" "),t("span",{staticClass:"ml-10 percentage"},[e._v("/ "+e._s(s)+" ")])])]}}],null,!1,164093072)})],1):e._e(),t("ConsumptionGauge",{class:{"mt-10":e.showReserved},attrs:{capacity:e.fpgaCapacity,used:e.fpgaUsage,"resource-name":e.showReserved?"":e.resourceName},scopedSlots:e._u([{key:"title",fn:function({amountTemplateValues:a,formattedPercentage:s}){return[t("span",[e._v(" "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.used"))+" ")]),t("span",{staticClass:"precent-data"},[e._v(" "+e._s(e.t("node.detail.glance.consumptionGauge.amount",a))+" "),t("span",{staticClass:"ml-10 percentage"},[e._v("/ "+e._s(s)+" ")])])]}}])})],1)},r=[],i=a("3c8a"),l=a("56a4"),n={name:"HarvesterFpgaUsed",components:{ConsumptionGauge:i["a"]},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},bittwareIa420fOnly:{type:Boolean,default:!1},bittwareIa840fOnly:{type:Boolean,default:!1},intelPacA10Only:{type:Boolean,default:!1},intelPacS10Only:{type:Boolean,default:!1},showReserved:{type:Boolean,default:!1}},data(){return{}},computed:{node(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/byId"](l["z"],this.row.id);return t},pods(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](l["B"]);return t.filter(e=>e.spec.nodeName===this.node.name)},bittwareIa420fUsage(){return this.pods.filter(e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase).map(e=>{var t,a;let s=0;return null===(t=e.spec.containers)||void 0===t||t.forEach(e=>{var t,a;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(a=t.limits)||void 0===a?void 0:a["bittware/ia420f"])||"0");s+=r}),null===(a=e.spec.initContainers)||void 0===a||a.forEach(e=>{var t,a;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(a=t.limits)||void 0===a?void 0:a["bittware/ia420f"])||"0");r>s&&(s=r)}),s}).reduce((e,t)=>e+t,0)},bittwareIa420fAllocatable(){return Number.parseInt(this.node.status.allocatable["bittware/ia420f"]||"0")},bittwareIa420fCapacity(){return Number.parseInt(this.node.status.capacity["bittware/ia420f"]||"0")},bittwareIa840fUsage(){return this.pods.filter(e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase).map(e=>{var t,a;let s=0;return null===(t=e.spec.containers)||void 0===t||t.forEach(e=>{var t,a;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(a=t.limits)||void 0===a?void 0:a["bittware/ia840f"])||"0");s+=r}),null===(a=e.spec.initContainers)||void 0===a||a.forEach(e=>{var t,a;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(a=t.limits)||void 0===a?void 0:a["bittware/ia840f"])||"0");r>s&&(s=r)}),s}).reduce((e,t)=>e+t,0)},bittwareIa840fAllocatable(){return Number.parseInt(this.node.status.allocatable["bittware/ia840f"]||"0")},bittwareIa840fCapacity(){return Number.parseInt(this.node.status.capacity["bittware/ia840f"]||"0")},intelPacA10Usage(){return this.pods.filter(e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase).map(e=>{var t,a;let s=0;return null===(t=e.spec.containers)||void 0===t||t.forEach(e=>{var t,a;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(a=t.limits)||void 0===a?void 0:a["intel/pac_a10"])||"0");s+=r}),null===(a=e.spec.initContainers)||void 0===a||a.forEach(e=>{var t,a;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(a=t.limits)||void 0===a?void 0:a["intel/pac_a10"])||"0");r>s&&(s=r)}),s}).reduce((e,t)=>e+t,0)},intelPacA10Allocatable(){return Number.parseInt(this.node.status.allocatable["intel/pac_a10"]||"0")},intelPacA10Capacity(){return Number.parseInt(this.node.status.capacity["intel/pac_a10"]||"0")},intelPacS10Usage(){return this.pods.filter(e=>"Succeeded"!==e.status.phase&&"Failed"!==e.status.phase).map(e=>{var t,a;let s=0;return null===(t=e.spec.containers)||void 0===t||t.forEach(e=>{var t,a;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(a=t.limits)||void 0===a?void 0:a["intel/pac_s10"])||"0");s+=r}),null===(a=e.spec.initContainers)||void 0===a||a.forEach(e=>{var t,a;const r=Number.parseInt((null===(t=e.resources)||void 0===t||null===(a=t.limits)||void 0===a?void 0:a["intel/pac_s10"])||"0");r>s&&(s=r)}),s}).reduce((e,t)=>e+t,0)},intelPacS10Allocatable(){return Number.parseInt(this.node.status.capacity["intel/pac_s10"]||"0")},intelPacS10Capacity(){return Number.parseInt(this.node.status.capacity["intel/pac_s10"]||"0")},fpgaUsage(){return this.bittwareIa420fOnly?this.bittwareIa420fUsage:this.bittwareIa840fOnly?this.bittwareIa840fUsage:this.intelPacA10Only?this.intelPacA10Usage:this.intelPacS10Only?this.intelPacS10Usage:this.bittwareIa420fUsage+this.bittwareIa840fUsage+this.intelPacA10Usage+this.intelPacS10Usage},fpgaAllocatable(){return this.bittwareIa420fOnly?this.bittwareIa420fAllocatable:this.bittwareIa840fOnly?this.bittwareIa840fAllocatable:this.intelPacA10Only?this.intelPacA10Allocatable:this.intelPacS10Only?this.intelPacS10Allocatable:this.bittwareIa420fAllocatable+this.bittwareIa840fAllocatable+this.intelPacA10Allocatable+this.intelPacS10Allocatable},fpgaCapacity(){return this.bittwareIa420fOnly?this.bittwareIa420fCapacity:this.bittwareIa840fOnly?this.bittwareIa840fCapacity:this.intelPacA10Only?this.intelPacA10Capacity:this.intelPacS10Only?this.intelPacS10Capacity:this.bittwareIa420fCapacity+this.bittwareIa840fCapacity+this.intelPacA10Capacity+this.intelPacS10Capacity}}},o=n,d=(a("5492"),a("d802")),u=Object(d["a"])(o,s,r,!1,null,"363a8929",null);t["default"]=u.exports},dd06:function(e,t,a){"use strict";a("fa78")},dd18:function(e,t,a){"use strict";a("4aa3")},df1c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-name"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),required:"",mode:e.mode},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-type"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.VOLUME_TYPE,mode:e.mode},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-image"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.image"),value:e.imageName,mode:e.mode}},[t("LabeledSelect",{attrs:{disabled:0===e.idx&&!e.isCreate&&!e.value.newCreateId&&e.isVirtualType,label:e.t("harvester.fields.image"),options:e.imagesOption,mode:e.mode,searchable:!0,required:e.validateRequired},on:{input:e.onImageChange},model:{value:e.value.image,callback:function(t){e.$set(e.value,"image",t)},expression:"value.image"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-size"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.size"),value:e.value.size,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],attrs:{"output-modifier":!0,increment:1024,"input-exponent":3,label:e.t("harvester.fields.size"),mode:e.mode,required:e.validateRequired,suffix:"GiB"},on:{input:e.update},model:{value:e.value.size,callback:function(t){e.$set(e.value,"size",t)},expression:"value.size"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-3",attrs:{"data-testid":"input-hevi-bus"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),mode:e.mode,options:e.InterfaceOption},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])])},r=[],i=a("e411"),l=a("2007"),n=a("d444"),o=a("53fe"),d=a("2aaa"),u=a("56a4"),c=a("90cd"),v=a("67ab"),p=a("7c47"),m={name:"HarvesterEditVMImage",components:{UnitInput:l["a"],LabeledInput:n["a"],LabeledSelect:o["a"],InputOrDisplay:d["a"]},props:{value:{type:Object,default:()=>({})},namespace:{type:String,default:null},mode:{type:String,default:"create"},idx:{type:Number,required:!0},isCreate:{type:Boolean,default:!0},isEdit:{type:Boolean,default:!1},validateRequired:{type:Boolean,required:!0},isVirtualType:{type:Boolean,default:!0}},data(){return{VOLUME_TYPE:p["h"],InterfaceOption:p["d"],loading:!1,images:[]}},fetch(){this.images=this.$store.getters["harvester/all"](c["b"].IMAGE)},computed:{imagesOption(){return this.images.filter(e=>e.isReady).sort((e,t)=>e.creationTimestamp>t.creationTimestamp?-1:1).map(e=>({label:`${e.metadata.namespace}/${e.spec.displayName}`,value:e.id}))},imageName(){const e=this.imagesOption.find(e=>e.value===this.value.image);return e?e.label:"-"},pvcsResource(){const e=this.$store.getters["harvester/all"](u["E"])||[];return e.find(e=>!this.namespace||e.id===`${this.namespace}/${this.value.volumeName}`)}},watch:{"value.type"(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())},"value.image"(e){this.checkImageExists(e)},imagesOption(){this.checkImageExists(this.value.image)},pvcsResource:{handler(e){var t,a,s;if(null!==e&&void 0!==e&&null!==(t=e.spec)&&void 0!==t&&null!==(a=t.resources)&&void 0!==a&&null!==(s=a.requests)&&void 0!==s&&s.storage&&this.isVirtualType){const t=Object(v["f"])(e.spec.resources.requests.storage),a=Object(v["e"])(t,{increment:1024,addSuffix:!1,maxExponent:3,minExponent:3});this.value.size=a+"Gi"}},deep:!0,immediate:!0}},methods:{update(){this.$emit("update")},onImageChange(){var e;const t=null===(e=this.$store.getters["harvester/all"](c["b"].IMAGE))||void 0===e?void 0:e.find(e=>this.value.image===e.id);0===this.idx&&(/iso$/i.test(null===t||void 0===t?void 0:t.imageSuffix)?(this.$set(this.value,"type","cd-rom"),this.$set(this.value,"bus","sata")):(this.$set(this.value,"type","disk"),this.$set(this.value,"bus","virtio"))),this.update()},onOpen(){this.images=this.$store.getters["harvester/all"](c["b"].IMAGE)},checkImageExists(e){e&&this.imagesOption.length>0&&!Object(i["e"])(this.imagesOption,"value",e)&&(this.$store.dispatch("growl/error",{title:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistImage.title",{name:e}),message:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistImage.message")},{root:!0}),this.$set(this.value,"image",""))}}},h=m,b=a("d802"),f=Object(b["a"])(h,s,r,!1,null,null,null);t["default"]=f.exports},e1c9:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("InputOrDisplay",{staticClass:"mb-10",attrs:{name:"CPU",value:e.cupDisplay,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:"CPU",suffix:"C",delay:0,required:"",disabled:e.disabled,mode:e.mode},on:{input:e.change},model:{value:e.localCpu,callback:function(t){e.localCpu=t},expression:"localCpu"}})],1)],1),t("div",{staticClass:"col span-6"},[t("InputOrDisplay",{staticClass:"mb-10",attrs:{name:e.t("harvester.virtualMachine.input.memory"),value:e.memoryDisplay,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.memory"),mode:e.mode,"input-exponent":3,delay:0,increment:1024,"output-modifier":!0,disabled:e.disabled,required:""},on:{input:e.change},model:{value:e.localMemory,callback:function(t){e.localMemory=t},expression:"localMemory"}})],1)],1)])},r=[],i=a("2007"),l=a("2aaa"),n={name:"HarvesterEditCpuMemory",components:{UnitInput:i["a"],InputOrDisplay:l["a"]},props:{cpu:{type:Number,default:null},memory:{type:String,default:null},mode:{type:String,default:"create"},disabled:{type:Boolean,default:!1}},data(){return{localCpu:this.cpu,localMemory:this.memory}},computed:{cupDisplay(){return this.localCpu+" C"},memoryDisplay(){return""+this.localMemory}},watch:{cpu(e){this.localCpu=e},memory(e){e&&!e.includes("null")&&(this.localMemory=e)}},methods:{change(){let e="";e=String(this.localMemory).includes("Gi")?this.localMemory:this.localMemory+"Gi",e.includes("null")&&(e=null),this.$emit("updateCpuMemory",this.localCpu,e)}}},o=n,d=a("d802"),u=Object(d["a"])(o,s,r,!1,null,null,null);t["default"]=u.exports},e20a:function(e,t,a){var s=a("a32a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("546c3439",s,!0,{sourceMap:!1,shadowMode:!1})},e299:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",on:{input:e.update}},[t("div",{staticClass:"col span-6"},[t("AccessCredentialsUsers",{attrs:{resource:e.resource,"user-options":e.userOptions,multiple:!1,mode:e.mode},on:{"update:user":e.updateUser,"update:newUser":e.updateNewUser},model:{value:e.value.username,callback:function(t){e.$set(e.value,"username",t)},expression:"value.username"}})],1),t("div",{staticClass:"col span-6"},[t("Password",{ref:"password",attrs:{mode:e.mode,disabled:"edit"!==e.mode,label:e.t("harvester.virtualMachine.input.password"),required:""},model:{value:e.value.newPassword,callback:function(t){e.$set(e.value,"newPassword",t)},expression:"value.newPassword"}})],1)])},r=[],i=a("e519"),l=a("411b"),n={name:"HarvesterEditVolume",components:{Password:i["a"],AccessCredentialsUsers:l["default"]},props:{mode:{type:String,default:"create"},resource:{type:Object,default:()=>({})},userOptions:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})}},data(){return{defaultPwdValue:{username:"",newPassword:""}}},methods:{update(){this.$emit("update")},updateUser(e){this.$set(this.value,"username",e),this.update()},updateNewUser(e){this.$emit("update:newUser",e)}}},o=n,d=(a("489c"),a("d802")),u=Object(d["a"])(o,s,r,!1,null,"b7cb7d9a",null);t["default"]=u.exports},e519:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"password"},[t("LabeledInput",e._b({ref:"input",attrs:{type:e.isRandom||e.reveal?"text":"password",readonly:e.isRandom,label:e.label,required:e.required,disabled:e.isRandom,"ignore-password-managers":e.ignorePasswordManagers,mode:e.mode},on:{blur:function(t){return e.$emit("blur",t)}},scopedSlots:e._u([{key:"suffix",fn:function(){return[e.isRandom?t("div",{staticClass:"addon"},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$copyText(e.password)}}},[e._v(e._s(e.t("action.copy")))])]):t("div",{staticClass:"addon"},[e.reveal?t("a",{attrs:{tabindex:"-1",href:"#"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.reveal=!1}}},[e._v(e._s(e.t("action.hide")))]):t("a",{attrs:{tabindex:"-1",href:"#"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.reveal=!0}}},[e._v(e._s(e.t("action.show")))])])]},proxy:!0}]),model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},"LabeledInput",e.attributes,!1)),e.isRandom?t("div",{staticClass:"mt-10 genPassword"},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.generatePassword.apply(null,arguments)}}},[t("i",{staticClass:"icon icon-refresh"}),e._v(" "+e._s(e.t("changePassword.newGeneratedPassword")))])]):e._e()],1)},r=[],i=a("9ce4"),l=a("d444"),n=a("06f6"),o=a("d6a6"),d={components:{LabeledInput:l["a"]},props:{value:{default:"",type:String},isRandom:{default:!1,type:Boolean},label:{default:"",type:String},name:{default:"",type:String},autocomplete:{type:String,default:""},required:{default:!1,type:Boolean},ignorePasswordManagers:{default:!1,type:Boolean},mode:{type:String,default:o["z"]}},data(){return{reveal:!1}},computed:{...Object(i["a"])({t:"i18n/t"}),password:{get(){return this.value},set(e){this.$emit("input",e)}},attributes(){const e={};return this.name&&(e.id=this.name,e.name=this.name),this.autocomplete&&(e.autocomplete=this.autocomplete),e}},watch:{isRandom(){this.isRandom&&this.generatePassword()}},created(){this.isRandom&&this.generatePassword()},methods:{generatePassword(){this.password=Object(n["p"])(16,n["a"].ALPHA_NUM)},show(e){this.reveal=e},focus(){this.$refs.input.$refs.value.focus()}}},u=d,c=(a("6620"),a("d802")),v=Object(c["a"])(u,s,r,!1,null,"833c0be0",null);t["a"]=v.exports},e5ca:function(e,t,a){"use strict";a("9a8e")},e63b3:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".state[data-v-7c0ec8ef]{display:flex}.state .vmstate[data-v-7c0ec8ef]{margin-right:6px}.name-console[data-v-7c0ec8ef]{display:flex;align-items:center;justify-content:space-between}.name-console span[data-v-7c0ec8ef]{padding-right:4px;line-height:26px;white-space:nowrap}",""]),e.exports=t},e695:function(e,t,a){var s=a("019a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("1dbd505a",s,!0,{sourceMap:!1,shadowMode:!1})},e83a:function(e,t,a){"use strict";a("2fd0")},eb32:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"label"},[t("div",{staticClass:"text-label"},[e._t("name",(function(){return[e._v(" "+e._s(e.name)+" ")]}))],2),t("div",{staticClass:"value"},[e._t("value",(function(){return[e._v(" "+e._s(e.value)+" ")]}))],2)])},r=[],i={props:{name:{type:String,required:!0},value:{type:[Number,String,void 0],default:""}}},l=i,n=(a("5244"),a("d802")),o=Object(n["a"])(l,s,r,!1,null,"aa28af1a",null);t["a"]=o.exports},eb6e:function(e,t,a){"use strict";a("0b6b")},ebad:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".precent-data[data-v-11b8113c]{white-space:nowrap}",""]),e.exports=t},ec87:function(e,t,a){var s=a("9b45");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("b0673670",s,!0,{sourceMap:!1,shadowMode:!1})},eca1:function(e,t,a){"use strict";a("600e")},eed9:function(e,t,a){var s=a("d724");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("6844b6ce",s,!0,{sourceMap:!1,shadowMode:!1})},ef30:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("ResourceTabs",{attrs:{"need-related":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("Tab",{attrs:{name:"network","label-key":"harvester.ipPool.network.label",weight:99}},[t("SortableTable",{attrs:{"key-field":"_key",headers:e.networkHeaders,rows:e.networks,"row-actions":!1,"table-actions":!1,search:!1}})],1),t("Tab",{attrs:{name:"range","label-key":"harvester.ipPool.tabs.range",weight:89}},[t("SortableTable",{attrs:{"key-field":"_key",headers:e.rangeHeaders,rows:e.ranges,"row-actions":!1,"table-actions":!1,search:!1}})],1)],1)},r=[],i=a("3921"),l=a("5ef9"),n=a("fc28"),o=a("56a4"),d=a("b837"),u=a("6e3a"),c={components:{ResourceTabs:i["a"],Tab:l["a"],SortableTable:n["b"]},props:{value:{type:Object,default:()=>({})}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={ipPools:this.$store.dispatch(e+"/findAll",{type:o["x"]})};await Object(d["a"])(t)},computed:{networks(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](o["x"]);return t.filter(e=>{var t,a,s;return(null===e||void 0===e?void 0:e.id)===(null===(t=this.value)||void 0===t||null===(a=t.spec)||void 0===a||null===(s=a.selector)||void 0===s?void 0:s.network)})},networkHeaders(){return u["NETWORK_HEADERS"]},ranges(){return this.value.spec.ranges},rangeHeaders(){return[{name:"subnet",label:this.t("harvester.ipPool.subnet.label"),value:"subnet"},{name:"gateway",label:this.t("harvester.ipPool.gateway.label"),value:"gateway"},{name:"startIP",label:this.t("harvester.ipPool.startIP.label"),value:"rangeStart"},{name:"endIP",label:this.t("harvester.ipPool.endIP.label"),value:"rangeEnd"}]}}},v=c,p=a("d802"),m=Object(p["a"])(v,s,r,!1,null,null,null);t["default"]=m.exports},efc5:function(e,t,a){"use strict";a.r(t),a.d(t,"ksmtunedMode",(function(){return c})),a.d(t,"ksmtunedRunOption",(function(){return v}));var s=function(){var e=this,t=e._self._c;return t("div",[t("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.host.ksmtuned.run"),options:e.ksmtunedRunOption,mode:e.mode,required:""},model:{value:e.spec.run,callback:function(t){e.$set(e.spec,"run",t)},expression:"spec.run"}}),e.showKsmt?[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:e.t("harvester.host.ksmtuned.thresCoef"),suffix:"%",delay:0,required:"",mode:e.mode},model:{value:e.spec.thresCoef,callback:function(t){e.$set(e.spec,"thresCoef",t)},expression:"spec.thresCoef"}}),t("Checkbox",{staticClass:"check mb-20",attrs:{mode:e.mode,type:"checkbox",label:e.t("harvester.host.ksmtuned.enableMergeNodes")},model:{value:e.enableMergeAcrossNodes,callback:function(t){e.enableMergeAcrossNodes=t},expression:"enableMergeAcrossNodes"}}),t("h3",[t("t",{attrs:{k:"harvester.host.ksmtuned.modeLink",raw:!0}})],1),t("RadioGroup",{staticClass:"mb-20",attrs:{name:e.t("harvester.host.ksmtuned.mode"),options:e.ksmtunedMode},model:{value:e.spec.mode,callback:function(t){e.$set(e.spec,"mode",t)},expression:"spec.mode"}}),e.isCustomizedMode?[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.boost"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.boost"),mode:e.mode},model:{value:e.spec.ksmtunedParameters.boost,callback:function(t){e.$set(e.spec.ksmtunedParameters,"boost",e._n(t))},expression:"spec.ksmtunedParameters.boost"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.decay"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.decay"),mode:e.mode},model:{value:e.spec.ksmtunedParameters.decay,callback:function(t){e.$set(e.spec.ksmtunedParameters,"decay",e._n(t))},expression:"spec.ksmtunedParameters.decay"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.minPages"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.minPages"),mode:e.mode},model:{value:e.spec.ksmtunedParameters.minPages,callback:function(t){e.$set(e.spec.ksmtunedParameters,"minPages",e._n(t))},expression:"spec.ksmtunedParameters.minPages"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.maxPages"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.maxPages"),mode:e.mode},model:{value:e.spec.ksmtunedParameters.maxPages,callback:function(t){e.$set(e.spec.ksmtunedParameters,"maxPages",e._n(t))},expression:"spec.ksmtunedParameters.maxPages"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.sleepMsec"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.sleepMsec"),mode:e.mode},model:{value:e.spec.ksmtunedParameters.sleepMsec,callback:function(t){e.$set(e.spec.ksmtunedParameters,"sleepMsec",e._n(t))},expression:"spec.ksmtunedParameters.sleepMsec"}})],1)])]:e._e()]:e._e()],2)},r=[],i=a("53fe"),l=a("d444"),n=a("2007"),o=a("f032"),d=a("efb2"),u=a("90cd");const c=[{value:"standard",label:"Standard"},{value:"high",label:"High-Perfomanace"},{value:"customized",label:"Customized"}],v=[{label:"Run",value:"run"},{label:"Stop",value:"stop"},{label:"Prune",value:"prune"}];var p={name:"HarvesterKsmtuned",components:{Checkbox:d["a"],LabeledInput:l["a"],LabeledSelect:i["a"],RadioGroup:o["b"],UnitInput:n["a"]},props:{mode:{type:String,required:!0},node:{type:Object,required:!0},registerBeforeHook:{type:Function,required:!0}},async fetch(){var e;const t=this.$store.getters["currentProduct"].inStore,a=await this.$store.dispatch(t+"/findAll",{type:u["b"].KSTUNED});this.ksmtuned=a.find(e=>e.id===this.node.id),this.enableMergeAcrossNodes=!(null===(e=this.ksmtuned.spec)||void 0===e||!e.mergeAcrossNodes),this.spec=this.ksmtuned.spec},data(){return{ksmtuned:{},spec:{},thresCoef:30,ksmtunedMode:c,ksmtunedRunOption:v,enableMergeAcrossNodes:!0}},created(){this.registerBeforeHook(this.saveKsmtuned,"saveKsmtuned")},computed:{isCustomizedMode(){return"customized"===this.spec.mode},showKsmt(){return"run"===this.spec.run}},methods:{async saveKsmtuned(){this.spec.mergeAcrossNodes=this.enableMergeAcrossNodes?1:0,this.$set(this.ksmtuned,"spec",this.spec),await this.ksmtuned.save().catch(e=>{if("error"===(null===e||void 0===e?void 0:e.type))return this.$store.dispatch("growl/error",{title:this.t("harvester.notification.title.error"),message:null===e||void 0===e?void 0:e.message},{root:!0}),Promise.reject(new Error("saveKsmtuned error"))})}}},m=p,h=a("d802"),b=Object(h["a"])(m,s,r,!1,null,null,null);t["default"]=b.exports},f7ed:function(e,t,a){var s=a("3b61");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("545544f0",s,!0,{sourceMap:!1,shadowMode:!1})},fa3a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",["disabled"===e.ntpSyncedStatus.status?t("Banner",{attrs:{color:"warning"}},[t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t(e.ntpSyncedStatus.warning.key),expression:"t(ntpSyncedStatus.warning.key)"}]})]):e._e(),"unsynced"===e.ntpSyncedStatus.status?t("Banner",{attrs:{color:"warning"}},[t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t(e.ntpSyncedStatus.warning.key,{current:e.ntpSyncedStatus.warning.current},!0),expression:"t(ntpSyncedStatus.warning.key, { current: ntpSyncedStatus.warning.current }, true)"}]})]):e._e(),t("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0},on:{changed:e.tabChange}},"Tabbed",e.$attrs,!1),[t("Tab",{staticClass:"bordered-table",attrs:{name:"basics",label:e.t("harvester.host.tabs.basics"),weight:4}},[t("Basic",{attrs:{metrics:e.metrics,mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),t("Tab",{staticClass:"bordered-table",attrs:{name:"instance",label:e.t("harvester.host.tabs.instance"),weight:3}},[t("Instance",{attrs:{node:e.value}})],1),e.hasHostNetworksSchema&&e.vlanStatuses.length>0?t("Tab",{staticClass:"bordered-table",attrs:{name:"network",label:e.t("harvester.host.tabs.network"),weight:2}},e._l(e.vlanStatuses,(function(a){return t("InfoBox",{key:a.id},[t("VlanStatus",{attrs:{value:a,mode:e.mode}})],1)})),1):e._e(),e.hasBlockDevicesSchema?t("Tab",{attrs:{name:"disk",weight:1,label:e.t("harvester.host.tabs.storage")}},[e.longhornNode?t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-12"},[e.longhornNode.spec.tags.length?t("LabelValue",{attrs:{name:e.t("harvester.host.tags.label")},scopedSlots:e._u([{key:"value",fn:function(){return[t("div",{staticClass:"mt-5"},e._l(e.longhornNode.spec.tags,(function(a,s){return t("Tag",{key:s+a,staticClass:"mr-5"},[e._v(" "+e._s(a)+" ")])})),1)]},proxy:!0}],null,!1,2755436465)}):e._e()],1)]):e._e(),t("ArrayListGrouped",{attrs:{mode:e.mode,"can-remove":!1,"initial-empty-row":!1},scopedSlots:e._u([{key:"default",fn:function(a){return[t("Disk",{staticClass:"mb-20",attrs:{mode:e.mode,disks:e.disks},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"props.row.value"}})]}}],null,!1,2516310713),model:{value:e.newDisks,callback:function(t){e.newDisks=t},expression:"newDisks"}})],1):e._e(),e.hasKsmtunedSchema?t("Tab",{attrs:{name:"ksmtuned",weight:0,"show-header":!1,label:e.t("harvester.host.tabs.ksmtuned")}},[t("HarvesterKsmtuned",{attrs:{mode:e.mode,node:e.value}})],1):e._e(),e.seederEnabled?t("Tab",{attrs:{name:"seeder",weight:-1,label:e.t("harvester.host.tabs.seeder")}},[t("HarvesterSeeder",{attrs:{mode:e.mode,node:e.value,inventory:e.inventory}})],1):e._e(),t("Tab",{attrs:{"label-key":"harvester.virtualMachine.detail.tabs.events",name:"events",weight:-99}},[t("SortableTable",{attrs:{rows:e.events,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,"default-sort-by":"date"}})],1)],1)],1)},r=[],i=a("9ce4"),l=a("dde8"),n=a("ad61"),o=a("5ef9"),d=a("6583"),u=a("eb32"),c=a("d003"),v=a("70a6"),p=a("fc28"),m=a("2a88"),h=a("500e"),b=a("56a4"),f=a("90cd"),y=a("873f"),g=a("b837"),w=a("67ab"),C=a("e411"),k=a("1832"),S=a("06f6"),_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"host-detail"},[e.value.isKVMDisable?t("Banner",{attrs:{color:"error","label-key":"harvester.host.detail.kvm.disableMessage"}}):e._e(),t("h3",[e._v(e._s(e.t("harvester.host.tabs.overview")))]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.customName"),value:e.customName}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.hostIP"),value:e.value.internalIp}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.os"),value:e.value.status.nodeInfo.osImage}})],1),t("div",{staticClass:"col span-6"},[t("div",{staticClass:"role"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.role")},scopedSlots:e._u([{key:"value",fn:function(){return[e._v(" "+e._s(e.nodeType)+" "),e.nodeRoleState?t("span",{staticClass:"text-warning ml-20"},[e._v(" "+e._s(e.nodeRoleState)+" ")]):e._e()]},proxy:!0}])})],1)])]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.create"),value:e.value.metadata.creationTimestamp}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.update"),value:e.lastUpdateTime}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.consoleUrl"),value:e.consoleUrl.value}},[t("a",{attrs:{slot:"value",href:e.consoleUrl.value,target:"_blank"},slot:"value"},[e._v(e._s(e.consoleUrl.display))])])],1)]),e.hasMetricNodeSchema?t("div",[t("hr",{staticClass:"divider"}),t("h3",[e._v(e._s(e.t("harvester.host.tabs.monitor")))]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col",class:{"span-4":e.hasLonghornSchema,"span-6":!e.hasLonghornSchema}},[t("HarvesterCPUUsed",{attrs:{row:e.value,"resource-name":e.t("node.detail.glance.consumptionGauge.cpu"),"show-used":!0}})],1),t("div",{staticClass:"col",class:{"span-4":e.hasLonghornSchema,"span-6":!e.hasLonghornSchema}},[t("HarvesterMemoryUsed",{attrs:{row:e.value,"resource-name":e.t("node.detail.glance.consumptionGauge.memory"),"show-used":!0}})],1),e.hasLonghornSchema?t("div",{staticClass:"col span-4"},[t("HarvesterStorageUsed",{attrs:{row:e.value,"resource-name":e.t("harvester.host.detail.storage"),"show-reserved":!0}})],1):e._e()]),e.fpgaCapacity?t("div",{staticClass:"row mb-20"},[e.bittwareIa420fCapacity?t("div",{staticClass:"col span-4"},[t("HarvesterFPGAUsed",{attrs:{row:e.value,"resource-name":e.t("harvester.dashboard.hardwareResourceGauge.bittwareIa420f"),"bittware-ia420f-only":!0,"show-reserved":!0}})],1):e._e(),e.bittwareIa840fCapacity?t("div",{staticClass:"col span-4"},[t("HarvesterFPGAUsed",{attrs:{row:e.value,"resource-name":e.t("harvester.dashboard.hardwareResourceGauge.bittwareIa840f"),"bittware-ia840f-only":!0,"show-reserved":!0}})],1):e._e(),e.intelPacA10Capacity?t("div",{staticClass:"col span-4"},[t("HarvesterFPGAUsed",{attrs:{row:e.value,"resource-name":e.t("harvester.dashboard.hardwareResourceGauge.intelPacA10"),"intel-pac-a10-only":!0,"show-reserved":!0}})],1):e._e(),e.intelPacS10Capacity?t("div",{staticClass:"col span-4"},[t("HarvesterFPGAUsed",{attrs:{row:e.value,"resource-name":e.t("harvester.dashboard.hardwareResourceGauge.intelPacS10"),"intel-pac-s10-only":!0,"show-reserved":!0}})],1):e._e()]):e._e()]):e._e(),t("hr",{staticClass:"section-divider"}),t("h3",[e._v(e._s(e.t("harvester.host.detail.more")))]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.uuid"),value:e.value.status.nodeInfo.systemUUID}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.kernel"),value:e.value.status.nodeInfo.kernelVersion}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.containerRuntime"),value:e.value.status.nodeInfo.containerRuntimeVersion}})],1)]),e.value.manufacturer||e.value.serialNumber||e.value.model?t("div",{staticClass:"row mb-20"},[e.value.manufacturer?t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.manufacturer"),value:e.value.manufacturer}})],1):e._e(),e.value.serialNumber?t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.serialNumber"),value:e.value.serialNumber}})],1):e._e(),e.value.model?t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.detail.model"),value:e.value.model}})],1):e._e()]):e._e()],1)},x=[],O=a("dffb"),N=a("220e"),I=a("dcdf"),T=a("dc84"),M=a("42c6");const E="complete",$="promoteRestart",A="promoteSucceed";var L={name:"BasicNode",components:{Banner:O["a"],LabelValue:u["a"],HarvesterCPUUsed:N["default"],HarvesterFPGAUsed:I["default"],HarvesterMemoryUsed:T["default"],HarvesterStorageUsed:M["default"]},props:{value:{type:Object,required:!0},metrics:{type:Object,required:!1,default:()=>null},mode:{type:String,required:!1,default:"view"}},computed:{customName(){var e,t;return null===(e=this.value.metadata)||void 0===e||null===(t=e.annotations)||void 0===t?void 0:t[y["a"].HOST_CUSTOM_NAME]},consoleUrl(){var e,t;const a=null===(e=this.value.metadata)||void 0===e||null===(t=e.annotations)||void 0===t?void 0:t[y["a"].HOST_CONSOLE_URL];let s=a;return a?(a.startsWith("http://")||a.startsWith("https://")||(s="http://"+a),{display:a,value:s}):""},cpuTotal(){let e=0;return this.metrics&&(e=this.metrics.cpuCapacity),e},cpuUsage(){let e=0;return this.metrics&&(e=this.metrics.cpuUsage),e},memoryTotal(){let e=0;return this.metrics&&(e=this.metrics.memoryCapacity),e},memoryUsage(){let e=0;return this.metrics&&(e=this.metrics.memoryUsage),e},cpuUnits(){return"C"},memoryUnits(){const e=Object(w["d"])(this.memoryTotal,1024);return w["b"][e]+"iB"},bittwareIa420fCapacity(){return Number.parseInt(this.value.status.capacity["bittware/ia420f"]||"0")},bittwareIa840fCapacity(){return Number.parseInt(this.value.status.capacity["bittware/ia840f"]||"0")},intelPacA10Capacity(){return Number.parseInt(this.value.status.capacity["intel/pac_a10"]||"0")},intelPacS10Capacity(){return Number.parseInt(this.value.status.capacity["intel/pac_s10"]||"0")},fpgaCapacity(){return this.bittwareIa420fCapacity+this.bittwareIa840fCapacity+this.intelPacA10Capacity+this.intelPacS10Capacity},nodeType(){return this.value.isEtcd?this.t("harvester.host.detail.etcd"):this.value.isMaster?this.t("harvester.host.detail.management"):this.t("harvester.host.detail.compute")},lastUpdateTime(){var e,t,a;return null===(e=this.value.status)||void 0===e||null===(t=e.conditions)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.lastHeartbeatTime},nodeRoleState(){if(!this.value.isEtcd){var e,t;const l=null===(e=this.value.metadata)||void 0===e||null===(t=e.annotations)||void 0===t?void 0:t[y["a"].PROMOTE_STATUS];if(l===E){var a,s,r,i;const e=void 0!==(null===(a=this.value.metadata)||void 0===a||null===(s=a.labels)||void 0===s?void 0:s[y["a"].NODE_ROLE_MASTER])||void 0!==(null===(r=this.value.metadata)||void 0===r||null===(i=r.labels)||void 0===i?void 0:i[y["a"].NODE_ROLE_CONTROL_PLANE]);return this.t("harvester.host.promote."+(e?A:$))}}return null},hasMetricNodeSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[e+"/schemaFor"](b["u"].NODE)},hasLonghornSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[e+"/schemaFor"](b["s"].NODES)}},methods:{memoryFormatter(e){const t=Object(w["d"])(this.memoryTotal,1024),a={addSuffix:!1,increment:1024,minExponent:t};return Object(w["e"])(e,a)}}},P=L,D=(a("b16e"),a("d802")),V=Object(D["a"])(P,_,x,!1,null,"72779bbe",null),j=V.exports,R=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",{staticClass:"row",attrs:{id:"host-instances"}},[t("div",{staticClass:"col span-12"},[t("SortableTable",e._g(e._b({attrs:{headers:e.headers,"default-sort-by":"age",rows:e.rows,"key-field":"_key"},scopedSlots:e._u([{key:"cell:state",fn:function(a){return[t("div",{staticClass:"state"},[t("HarvesterVmState",{staticClass:"vmstate",attrs:{row:a.row,"all-cluster-network":e.allClusterNetwork}})],1)]}}])},"SortableTable",e.$attrs,!1),e.$listeners))],1)])},U=[],B=a("d6d1"),H=a("2c7c"),q=a("b0bd"),K={name:"InstanceNode",components:{SortableTable:p["b"],Loading:v["a"],HarvesterVmState:H["default"]},props:{node:{type:Object,required:!0}},async fetch(){const e=await Object(g["a"])({vms:this.$store.dispatch("harvester/findAll",{type:f["b"].VM}),vmis:this.$store.dispatch("harvester/findAll",{type:f["b"].VMI}),allClusterNetwork:this.$store.dispatch("harvester/findAll",{type:f["b"].CLUSTER_NETWORK})}),t={};(e.vmis||[]).forEach(e=>{var a,s,r;const i=null===e||void 0===e||null===(a=e.metadata)||void 0===a||null===(s=a.ownerReferences)||void 0===s||null===(r=s[0])||void 0===r?void 0:r.uid;i&&(t[i]=e)}),this.allClusterNetwork=e.allClusterNetwork,this.rows=e.vms.filter(e=>{var a,s,r,i,l,n;return(null===(a=t[null===(r=e.metadata)||void 0===r?void 0:r.uid])||void 0===a||null===(s=a.status)||void 0===s?void 0:s.nodeName)===(null===(i=this.node)||void 0===i||null===(l=i.metadata)||void 0===l||null===(n=l.labels)||void 0===n?void 0:n[q["n"]])})},data(){return{rows:[],allClusterNetwork:[]}},computed:{headers(){return[B["S"],B["y"],{name:"vmCPU",labelKey:"tableHeaders.cpu",search:!1,sort:["spec.template.spec.domain.cpu.cores"],value:"spec.template.spec.domain.cpu.cores",width:120},{name:"vmFPGA",labelKey:"tableHeaders.fpga",search:!1,sort:["displayFpga"],value:"displayFpga",width:120},{name:"vmRAM",labelKey:"glance.memory",search:!1,sort:["memorySort"],value:"spec.template.spec.domain.resources.limits.memory",width:120},{name:"ip",label:"IP Address",labelKey:"harvester.tableHeaders.vm.ipAddress",value:"id",formatter:"HarvesterIpAddress"},{...B["c"],sort:"metadata.creationTimestamp:desc"}]}},methods:{}},G=K,F=(a("c9aa"),Object(D["a"])(G,R,U,!1,null,"070817e4",null)),z=F.exports,W=function(){var e=this,t=e._self._c;return t("div",{staticClass:"disk",on:{input:e.update}},[e.mountedMessage?t("Banner",{attrs:{color:"error",label:e.mountedMessage}}):e._e(),e.value.isNew?e._e():t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[e.value.tags.length?t("LabelValue",{attrs:{name:e.t("harvester.host.disk.tags.label")},scopedSlots:e._u([{key:"value",fn:function(){return[t("div",{staticClass:"mt-5"},e._l(e.value.tags,(function(a,s){return t("Tag",{key:s+a,staticClass:"mr-5"},[e._v(" "+e._s(a)+" ")])})),1)]},proxy:!0}],null,!1,2609519040)}):e._e()],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-12"},[t("div",{staticClass:"pull-right"},[e._v(" "+e._s(e.t("harvester.host.disk.conditions"))+": "),t("BadgeState",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.readyCondition.message,expression:"readyCondition.message"}],staticClass:"mr-10 ml-10 state",attrs:{color:"True"===e.readyCondition.status?"bg-success":"bg-error",icon:"True"===e.readyCondition.status?"icon-checkmark":"icon-warning",label:"Ready"}}),t("BadgeState",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.schedulableCondition.message,expression:"schedulableCondition.message"}],staticClass:"mr-10 state",attrs:{color:"True"===e.schedulableCondition.status?"bg-success":"bg-error",icon:"True"===e.schedulableCondition.status?"icon-checkmark":"icon-warning",label:"Schedulable"}}),e.provisionPhase.label?t("BadgeState",{staticClass:"mr-10 state",attrs:{color:e.provisionPhase.color,icon:e.provisionPhase.icon,label:e.provisionPhase.label}}):e._e()],1)])]),e.value.isNew?e._e():t("div",{staticClass:"row mt-30"},[t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.disk.storageAvailable.label"),value:e.value.storageAvailable}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.disk.storageScheduled.label"),value:e.value.storageScheduled}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.disk.storageMaximum.label"),value:e.value.storageMaximum}})],1)]),t("hr",{staticClass:"mt-10"})]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("generic.name"),value:e.value.displayName}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.disk.path.label"),value:e.value.path}})],1)])],1)},Y=[],J=a("57ab"),Q=a("1e8f"),Z={components:{LabelValue:u["a"],BadgeState:J["a"],Banner:O["a"],Tag:l["a"]},mixins:[Q["a"]],props:{value:{type:Object,default:()=>({})},disks:{type:Array,default:()=>[]},mode:{type:String,default:"edit"}},data(){return{}},computed:{allowSchedulingOptions(){return[{label:this.t("generic.enabled"),value:!0},{label:this.t("generic.disabled"),value:!1}]},evictionRequestedOptions(){return[{label:this.t("generic.yes"),value:!0},{label:this.t("generic.no"),value:!1}]},provisionPhase(){var e,t;return(null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t?void 0:t.provisionPhase)||{}},mountedMessage(){var e,t,a;const s=(null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.state)||{};return null!==s&&void 0!==s&&s.error?null===s||void 0===s?void 0:s.message:""}},methods:{update(){this.$emit("input",this.value)},canEditPath(e){return!!this.mountedMessage||!(!e.isNew||!e.originPath)}}},X=Z,ee=(a("dd18"),Object(D["a"])(X,W,Y,!1,null,"ce85c400",null)),te=ee.exports,ae=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("div",{staticClass:"pull-right"},[e._v(" "+e._s(e.t("resourceTabs.conditions.tab"))+": "),t("BadgeState",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.readyCondition.message,expression:"readyCondition.message"}],staticClass:"mr-10 ml-10 state",attrs:{color:"True"===e.readyCondition.status?"bg-success":"bg-error",icon:"True"===e.readyCondition.status?"icon-checkmark":"icon-warning",label:e.t("tableHeaders.ready")}})],1)])]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.network.clusterNetwork.label"),value:e.value.status.clusterNetwork}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.vlanStatus.vlanConfig.label"),value:e.value.status.vlanConfig}})],1)]),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-12"},[t("ArrayListGrouped",{attrs:{mode:e.mode,"can-remove":!1},scopedSlots:e._u([{key:"default",fn:function(a){return[t("LinkStatus",{attrs:{value:a.row.value,mode:e.mode}})]}}]),model:{value:e.linkStatus,callback:function(t){e.linkStatus=t},expression:"linkStatus"}})],1)])])},se=[],re=a("d6a6"),ie=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("generic.name"),value:e.value.name}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("tableHeaders.state"),value:e.value.state}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("tableHeaders.type"),value:e.value.type}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.fields.macAddress"),value:e.value.mac}})],1)]),t("div",{staticClass:"row mt-10"},["true"===e.value.promiscuous?t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.fields.promiscuous"),value:e.value.promiscuous},scopedSlots:e._u([{key:"value",fn:function(){return[e._v(" "+e._s("true"===e.value.promiscuous?e.t("generic.yes"):e.t("generic.no"))+" ")]},proxy:!0}],null,!1,1777622139)})],1):e._e()])])},le=[],ne={name:"LinkStatus",components:{LabelValue:u["a"]},props:{value:{type:Object,required:!0},mode:{type:String,default:re["z"]}}},oe=ne,de=Object(D["a"])(oe,ie,le,!1,null,null,null),ue=de.exports,ce={name:"HarvesterHostNetwork",components:{LabelValue:u["a"],LinkStatus:ue,ArrayListGrouped:c["a"],BadgeState:J["a"]},props:{value:{type:Object,required:!0},mode:{type:String,default:re["z"]}},computed:{conditions(){var e,t;return(null===(e=this.value)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.conditions)||[]},readyCondition(){return Object(C["e"])(this.conditions,"type","ready")||{}},linkStatus(){var e,t,a,s,r,i;const l=null===(e=this.value)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.linkMonitor,n=null===(a=this.value)||void 0===a||null===(s=a.status)||void 0===s?void 0:s.node,o=this.$store.getters["currentProduct"].inStore,d=this.$store.getters[o+"/all"](f["b"].LINK_MONITOR),u=(d.filter(e=>e.id===l)||[])[0]||{};return(null===u||void 0===u||null===(r=u.status)||void 0===r||null===(i=r.linkStatus)||void 0===i?void 0:i[n])||[]}}},ve=ce,pe=Object(D["a"])(ve,ae,se,!1,null,null,null),me=pe.exports,he=function(){var e=this,t=e._self._c;return t("div",[e.ksmtuned.status?[t("h2",[e._v(" "+e._s(e.t("harvester.host.ksmtuned.configure"))+" ")]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.run"),value:e.runText}})],1)]),e.showRunInformation?t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.thresCoef"),value:e.thresCoef}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.mode"),value:e.modeText}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.enableMergeNodes"),value:e.mergeNodesText}})],1)]):e._e(),e.showRunInformation?t("div",[t("hr",{staticClass:"divider"}),t("h3",[e._v(e._s(e.t("harvester.host.ksmtuned.parameters.title")))]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.parameters.boost"),value:e.ksmtuned.spec.ksmtunedParameters.boost}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.parameters.decay"),value:e.ksmtuned.spec.ksmtunedParameters.decay}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.parameters.sleepMsec"),value:e.ksmtuned.spec.ksmtunedParameters.sleepMsec}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.parameters.minPages"),value:e.ksmtuned.spec.ksmtunedParameters.minPages}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.parameters.maxPages"),value:e.ksmtuned.spec.ksmtunedParameters.maxPages}})],1)])]):e._e(),t("div",[t("hr",{staticClass:"divider"}),t("h3",[t("t",{attrs:{k:"harvester.host.ksmtuned.statistics.title",raw:!0}})],1),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.ksmStatus")},scopedSlots:e._u([{key:"value",fn:function(){return[t("span",{class:e.ksmdPhaseTextColor},[e._v(e._s(e.ksmdPhase))])]},proxy:!0}],null,!1,1330433662)})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.statistics.sharing"),value:e.ksmtuned.status.sharing}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.statistics.shared"),value:e.ksmtuned.status.shared}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.statistics.unshared"),value:e.ksmtuned.status.unshared}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.statistics.volatile"),value:e.ksmtuned.status.volatile}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.statistics.fullScans"),value:e.ksmtuned.status.fullScans}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.statistics.stableNodeDups"),value:e.ksmtuned.status.stableNodeDups}})],1),t("div",{staticClass:"col span-4"},[t("LabelValue",{attrs:{name:e.t("harvester.host.ksmtuned.statistics.stableNodeChains"),value:e.ksmtuned.status.stableNodeChains}})],1)])])]:e._e()],2)},be=[],fe=a("efc5"),ye={name:"HarvesterKsmtuned",components:{LabelValue:u["a"]},props:{mode:{type:String,required:!0},node:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await this.$store.dispatch(e+"/findAll",{type:f["b"].KSTUNED});this.ksmtuned=t.find(e=>e.id===this.node.id)},data(){return{ksmtuned:{}}},computed:{modeText(){const e=this.ksmtuned.spec.mode;return fe["ksmtunedMode"].find(t=>t.value===e).label},thresCoef(){return this.ksmtuned.spec.thresCoef+" %"},runText(){const e=this.ksmtuned.spec.run;return fe["ksmtunedRunOption"].find(t=>t.value===e).label},showRunInformation(){return"run"===this.ksmtuned.spec.run},mergeNodesText(){var e;return null!==(e=this.ksmtuned.spec)&&void 0!==e&&e.mergeAcrossNodes?this.t("harvester.host.ksmtuned.enable"):this.t("harvester.host.ksmtuned.disable")},ksmdPhase(){var e,t;return null===(e=this.ksmtuned)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.ksmdPhase},ksmdPhaseTextColor(){return"Running"===this.ksmdPhase?"text-success":"text-warning"}}},ge=ye,we=Object(D["a"])(ge,he,be,!1,null,null,null),Ce=we.exports,ke=function(){var e=this,t=e._self._c;return t("div",[e.inventory.warningMessages.length>0?t("div",e._l(e.inventory.warningMessages,(function(e){return t("Banner",{key:e.text,attrs:{color:"error",label:e.text}})})),1):e._e(),e.enableInventory?t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.seeder.inventory.host.label"),value:e.value.spec.baseboardSpec.connection.host}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.seeder.inventory.port.label"),value:e.value.spec.baseboardSpec.connection.port}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.seeder.inventory.insecureTLS.label"),value:e.value.spec.baseboardSpec.connection.insecureTLS?e.t("generic.yes"):e.t("generic.no")}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.seeder.inventory.secret.label"),value:e.selectedSecret}})],1)]),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.seeder.inventory.event.label"),value:e.value.spec.events.enabled?e.t("generic.enabled"):e.t("generic.disabled")}})],1),e.value.spec.events.enabled?t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.seeder.inventory.pollingInterval.label"),value:e.value.spec.events.pollingInterval}})],1):e._e()])]):t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("RadioGroup",{attrs:{options:[{label:e.t("generic.enabled"),value:!0},{label:e.t("generic.disabled"),value:!1}],mode:e.mode,name:"enableInventory"},model:{value:e.enableInventory,callback:function(t){e.enableInventory=t},expression:"enableInventory"}})],1)])])},Se=[],_e=a("f032"),xe={name:"HarvesterSeeder",components:{RadioGroup:_e["b"],LabelValue:u["a"],Banner:O["a"]},props:{mode:{type:String,required:!0},node:{type:Object,required:!0},inventory:{type:Object,required:!0}},data(){var e;const t=!(null===(e=this.inventory)||void 0===e||!e.id);return{enableInventory:t,value:this.inventory}},computed:{selectedSecret(){var e,t,a,s,r,i,l,n,o;const d=null===(e=this.value.spec)||void 0===e||null===(t=e.baseboardSpec)||void 0===t||null===(a=t.connection)||void 0===a||null===(s=a.authSecretRef)||void 0===s?void 0:s.namespace,u=null===(r=this.value)||void 0===r||null===(i=r.spec)||void 0===i||null===(l=i.baseboardSpec)||void 0===l||null===(n=l.connection)||void 0===n||null===(o=n.authSecretRef)||void 0===o?void 0:o.name;return d&&u?`${d}/${u}`:"N/A"}}},Oe=xe,Ne=Object(D["a"])(Oe,ke,Se,!1,null,null,null),Ie=Ne.exports;const Te="longhorn-system";var Me={name:"DetailHost",components:{Tabbed:n["a"],Tab:o["a"],Tag:l["a"],Basic:j,Instance:z,ArrayListGrouped:c["a"],Disk:te,InfoBox:d["a"],VlanStatus:me,LabelValue:u["a"],HarvesterKsmtuned:Ce,Loading:v["a"],SortableTable:p["b"],HarvesterSeeder:Ie,Banner:m["a"]},mixins:[h["a"]],props:{value:{type:Object,required:!0}},async fetch(){var e;const t=this.$store.getters["currentProduct"].inStore,a={nodes:this.$store.dispatch("harvester/findAll",{type:b["z"]}),pods:this.$store.dispatch(t+"/findAll",{type:b["B"]})};this.$store.getters["harvester/schemaFor"](f["b"].VLAN_STATUS)&&(a.hostNetworks=this.$store.dispatch("harvester/findAll",{type:f["b"].VLAN_STATUS})),this.$store.getters["harvester/schemaFor"](f["b"].BLOCK_DEVICE)&&(a.blockDevices=this.$store.dispatch("harvester/findAll",{type:f["b"].BLOCK_DEVICE})),this.$store.getters["harvester/schemaFor"](b["s"].NODES)&&(a.longhornNodes=this.$store.dispatch("harvester/findAll",{type:b["s"].NODES})),this.$store.getters["harvester/schemaFor"](f["b"].LINK_MONITOR)&&(a.linkMonitors=this.$store.dispatch("harvester/findAll",{type:f["b"].LINK_MONITOR})),this.$store.getters["harvester/schemaFor"](f["b"].ADD_ONS)&&(a.addons=this.$store.dispatch(t+"/findAll",{type:f["b"].ADD_ONS})),this.$store.getters["harvester/schemaFor"](f["b"].INVENTORY)&&(a.inventories=this.$store.dispatch(t+"/findAll",{type:f["b"].INVENTORY}));const s=await Object(g["a"])(a),r=(s.hostNetworks||[]).find(e=>this.value.id===e.attachNodeName);this.loadMetrics(),r&&(this.hostNetworkResource=r);const i=this.$store.getters[t+"/all"](f["b"].BLOCK_DEVICE),l=i.filter(e=>{var t,a,s;const r=null===e||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.fileSystem)||void 0===a?void 0:a.provisioned,i=(null===e||void 0===e||null===(s=e.spec)||void 0===s?void 0:s.nodeName)===this.value.id,l=Object(C["e"])(this.longhornDisks,"name",e.metadata.name);return r&&i&&!l}).map(e=>{var t,a,s,r,i,l,n;return{isNew:!0,name:null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name,originPath:null===e||void 0===e||null===(a=e.spec)||void 0===a||null===(s=a.fileSystem)||void 0===s?void 0:s.mountPoint,path:null===e||void 0===e||null===(r=e.spec)||void 0===r||null===(i=r.fileSystem)||void 0===i?void 0:i.mountPoint,blockDevice:e,displayName:null===e||void 0===e?void 0:e.displayName,forceFormatted:(null===e||void 0===e||null===(l=e.spec)||void 0===l||null===(n=l.fileSystem)||void 0===n?void 0:n.forceFormatted)||!1}}),n=[...this.longhornDisks,...l];this.disks=n,this.newDisks=Object(k["e"])(n);const o=this.$store.getters[t+"/all"](f["b"].ADD_ONS),d=o.find(e=>"harvester-system/harvester-seeder"===e.id),u=!!d&&(null===d||void 0===d||null===(e=d.spec)||void 0===e?void 0:e.enabled);if(u){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](f["b"].INVENTORY)||[],a=t.find(e=>e.id==="harvester-system/"+this.value.id);a?this.inventory=a:(this.inventory=await this.$store.dispatch(e+"/create",{type:f["b"].INVENTORY,metadata:{name:this.value.id,namespace:"harvester-system"}}),this.inventory.applyDefaults())}},data(){return{metrics:null,mode:"view",hostNetworkResource:null,newDisks:[],disks:[],allEvents:[],didLoadEvents:!1,inventory:{}}},computed:{...Object(i["a"])({t:"i18n/t"}),longhornDisks(){var e,t;const a=this.$store.getters["currentProduct"].inStore,s=this.$store.getters[a+"/byId"](b["s"].NODES,"longhorn-system/"+this.value.id),r=(null===s||void 0===s||null===(e=s.status)||void 0===e?void 0:e.diskStatus)||{},i=(null===s||void 0===s||null===(t=s.spec)||void 0===t?void 0:t.disks)||{},l={increment:1024,minExponent:3,maxExponent:3,maxPrecision:2,suffix:"iB"},n=Object.keys(r).map(e=>{var t,s,n,o,d,u,c;const v=this.$store.getters[a+"/byId"](f["b"].BLOCK_DEVICE,"longhorn-system/"+e);return{...r[e],...null===i||void 0===i?void 0:i[e],name:e,isNew:!1,storageReserved:Object(w["e"])(null===(t=i[e])||void 0===t?void 0:t.storageReserved,l),storageAvailable:Object(w["e"])(null===(s=r[e])||void 0===s?void 0:s.storageAvailable,l),storageMaximum:Object(w["e"])(null===(n=r[e])||void 0===n?void 0:n.storageMaximum,l),storageScheduled:Object(w["e"])(null===(o=r[e])||void 0===o?void 0:o.storageScheduled,l),blockDevice:v,displayName:(null===v||void 0===v?void 0:v.displayName)||e,forceFormatted:(null===v||void 0===v||null===(d=v.spec)||void 0===d||null===(u=d.fileSystem)||void 0===u?void 0:u.forceFormatted)||!1,tags:(null===i||void 0===i||null===(c=i[e])||void 0===c?void 0:c.tags)||[]}});return n},hasKsmtunedSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[e+"/schemaFor"](f["b"].KSTUNED)},hasBlockDevicesSchema(){return!!this.$store.getters["harvester/schemaFor"](f["b"].BLOCK_DEVICE)},hasHostNetworksSchema(){return!!this.$store.getters["harvester/schemaFor"](f["b"].VLAN_STATUS)},vlanStatuses(){const e=this.$store.getters["currentProduct"].inStore,t=this.value.id,a=this.$store.getters[e+"/all"](f["b"].VLAN_STATUS);return a.filter(e=>{var a;return(null===e||void 0===e||null===(a=e.status)||void 0===a?void 0:a.node)===t})||[]},longhornNode(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](b["s"].NODES);return t.find(e=>e.id===`${Te}/${this.value.id}`)},events(){return this.allEvents.filter(e=>{var t,a,s;return(null===(t=e.involvedObject)||void 0===t?void 0:t.uid)===(null===(a=this.value)||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.uid)&&"SeederUpdated"!==e.reason}).map(e=>({reason:`${e.reason||this.t("generic.unknown")}${e.count>1?` (${e.count})`:""}`.trim(),message:e.message||this.t("generic.unknown"),date:e.lastTimestamp||e.firstTimestamp||e.metadata.creationTimestamp,eventType:e.eventType}))},eventHeaders(){return[{name:"reason",label:this.t("tableHeaders.reason"),value:"reason",sort:"reason"},{name:"message",label:this.t("tableHeaders.message"),value:"message",sort:"message"},{name:"date",label:this.t("tableHeaders.updated"),value:"date",sort:"date:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125}]},seederEnabled(){var e;const t=this.$store.getters["currentProduct"].inStore,a=this.$store.getters[t+"/all"](f["b"].ADD_ONS),s=a.find(e=>"harvester-system/harvester-seeder"===e.id);return!!s&&(null===s||void 0===s||null===(e=s.spec)||void 0===e?void 0:e.enabled)},ntpSync(){var e,t;const a=null===(e=this.value.metadata)||void 0===e||null===(t=e.annotations)||void 0===t?void 0:t[y["a"].NODE_NTP_SYNC_STATUS];let s=null;if(!a)return s;try{s=JSON.parse(a)}catch(r){this.$store.dispatch("growl/fromError",{title:this.t("generic.notification.title.error",{name:Object(S["g"])(this.value.metadata.name)}),err:r},{root:!0})}return s},ntpSyncedStatus(){var e,t;const a=null===(e=this.ntpSync)||void 0===e?void 0:e.ntpSyncStatus;if("disabled"===a)return{status:"disabled",warning:{key:"harvester.host.ntp.ntpSyncStatus.isDisabled"}};const s=(null===(t=this.ntpSync)||void 0===t?void 0:t.currentNtpServers)||"";return"unsynced"===a?{status:"unsynced",warning:{key:"harvester.host.ntp.ntpSyncStatus.isUnsynced",current:s}}:{}}},methods:{async loadMetrics(){const e=this.$store.getters["harvester/schemaFor"](b["u"].NODE);e&&(this.metrics=await this.$store.dispatch("harvester/find",{type:b["u"].NODE,id:this.value.id,opt:{force:!0,watch:!1}}),this.$forceUpdate())},tabChange(e){this.didLoadEvents||"events"!==(null===e||void 0===e?void 0:e.selectedName)||this.$store.dispatch("harvester/findAll",{type:b["i"]}).then(e=>{this.allEvents=e,this.didLoadEvents=!0})}}},Ee=Me,$e=Object(D["a"])(Ee,s,r,!1,null,null,null);t["default"]=$e.exports},fa78:function(e,t,a){var s=a("62a5");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("190dc8ae",s,!0,{sourceMap:!1,shadowMode:!1})},fb6d:function(e,t,a){"use strict";a("5800")},fcf0:function(e,t,a){var s=a("3fba");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("439e1452",s,!0,{sourceMap:!1,shadowMode:!1})},fea5:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e._l(e.rows,(function(a,s){return t("InfoBox",{key:s,staticClass:"infoBox"},[e.isView?e._e():t("button",{staticClass:"role-link remove-vol",attrs:{type:"button"},on:{click:function(t){return e.remove(a)}}},[t("i",{staticClass:"icon icon-x"})]),t("h3",[e._v(" "+e._s(e.t("harvester.virtualMachine.network.title"))+" ")]),t("Base",{key:e.rows[s].rowKeyId,attrs:{rows:e.rows,mode:e.mode,"is-single":e.isSingle,"network-option":e.networkOption},on:{update:e.update},model:{value:e.rows[s],callback:function(t){e.$set(e.rows,s,t)},expression:"rows[i]"}})],1)})),e.isView?e._e():t("button",{staticClass:"btn btn-sm bg-primary",attrs:{type:"button"},on:{click:e.add}},[e._v(" "+e._s(e.t("harvester.virtualMachine.network.addNetwork"))+" ")])],2)},r=[],i=a("6583"),l=a("91f6"),n=a("56a4"),o=a("873f"),d=a("7592"),u=a("1832"),c=a("06f6"),v=a("e411"),p=a("d6a6"),m={components:{InfoBox:i["a"],Base:l["default"]},props:{mode:{type:String,default:"create"},value:{type:Array,default:()=>[]},isSingle:{type:Boolean,default:!0}},data(){return{rows:this.addKeyId(Object(u["e"])(this.value)),nameIdx:1}},computed:{isView(){return this.mode===p["I"]},networkOption(){const e=this.$store.getters["harvester/all"](n["x"]).filter(e=>{var t,a;return!(null!==(t=e.metadata)&&void 0!==t&&null!==(a=t.annotations)&&void 0!==a&&a[o["a"].STORAGE_NETWORK])}),t=Object(d["b"])(e.map(e=>{const t=e.isNotReady?`${e.id} (${this.t("generic.notReady")})`:e.id;return{label:t,value:e.id,disabled:e.isNotReady}}),"label");return t}},watch:{value(e){this.rows=e}},methods:{add(e){const t=this.generateName(),a={name:t,networkName:"",model:"virtio",type:"bridge",newCreateId:Object(c["p"])(10),rowKeyId:Object(c["p"])(10)};this.rows.push(a),this.update()},remove(e){Object(v["j"])(this.rows,e),this.update()},addKeyId(e){return e.map(e=>({...e,rowKeyId:Object(c["p"])(10)}))},generateName(){let e="",t=!0;while(t)e="nic-"+this.nameIdx,t=this.rows.find(t=>t.name===e),this.nameIdx++;return e},update(){this.$emit("input",this.rows)}}},h=m,b=(a("028b"),a("d802")),f=Object(b["a"])(h,s,r,!1,null,"736f66fc",null);t["default"]=f.exports},feb0:function(e,t,a){"use strict";a("95c9")}}]);
//# sourceMappingURL=harvester-v1.3.0.umd.min.detail.js.map