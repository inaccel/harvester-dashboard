(("undefined"!==typeof self?self:this)["webpackJsonpharvester_v1_3_0"]=("undefined"!==typeof self?self:this)["webpackJsonpharvester_v1_3_0"]||[]).push([[7],{"01b8":function(e,t,a){var s=a("2378");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("5cbf7d7c",s,!0,{sourceMap:!1,shadowMode:!1})},"01ea":function(e,t,a){var s=a("d7a0");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("7e00879c",s,!0,{sourceMap:!1,shadowMode:!1})},"028b":function(e,t,a){"use strict";a("ec87")},"035b":function(e,t,a){"use strict";a("0776")},"03d0":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"source-name",attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.sumologic.sourceName")},model:{value:e.value.source_name,callback:function(t){e.$set(e.value,"source_name",t)},expression:"value.source_name"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.sumologic.endpoint"),"show-key-selector":!0},model:{value:e.value.endpoint,callback:function(t){e.$set(e.value,"endpoint",t)},expression:"value.endpoint"}})],1)])])},l=[],i=a("d444"),r=a("0b97"),o={components:{LabeledInput:i["a"],SecretSelector:r["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},"03d2":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",style:{width:"100%"},on:{input:e.queueUpdate}},[t("div",{staticClass:"col span-12"},[t("ArrayListGrouped",{staticClass:"mt-20",attrs:{"default-add-value":e.defaultAddValue,mode:e.mode,"add-label":e.addLabel},on:{remove:e.remove},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"row mt-20 mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{mode:e.mode,options:[e.t("workload.scheduling.affinity.affinityOption"),e.t("workload.scheduling.affinity.antiAffinityOption")],value:a.row.value._anti?e.t("workload.scheduling.affinity.antiAffinityOption"):e.t("workload.scheduling.affinity.affinityOption"),label:e.t("workload.scheduling.affinity.type"),"data-testid":"pod-affinity-type-index"+a.i},on:{input:function(t){return e.$set(a.row.value,"_anti",!a.row.value._anti)}}})],1),t("div",{staticClass:"col span-6"},[t("LabeledSelect",{key:e.priorityDisplay(a.row.value),attrs:{mode:e.mode,options:[e.t("workload.scheduling.affinity.preferred"),e.t("workload.scheduling.affinity.required")],value:e.priorityDisplay(a.row.value),label:e.t("workload.scheduling.affinity.priority"),"data-testid":"pod-affinity-priority-index"+a.i},on:{input:function(t){return e.changePriority(a.row.value,a.i)}}})],1)]),t("div",{staticClass:"row"},[t("RadioGroup",{attrs:{options:e.namespaceSelectionOptions,labels:e.namespaceSelectionLabels,name:"namespaces-"+a.row.value._id,mode:e.mode,value:a.row.value._namespaceOption,"data-testid":"pod-affinity-namespacetype-index"+a.i},on:{input:function(t){return e.changeNamespaceMode(t,a.row.value,a.i)}}})],1),a.row.value._namespaceOption===e.NAMESPACE_SELECTION_OPTION_VALUES.SELECTED?t("div",{staticClass:"row mt-10 mb-20"},[e.hasNamespaces&&!e.forceInputNamespaceSelection?t("LabeledSelect",{attrs:{mode:e.mode,multiple:!0,taggable:!0,options:e.allNamespacesOptions,label:e.labeledInputNamespaceLabel,"data-testid":"pod-affinity-namespace-select-index"+a.i},on:{input:function(t){return e.updateNamespaces(a.row.value,a.row.value.namespaces)}},model:{value:a.row.value.namespaces,callback:function(t){e.$set(a.row.value,"namespaces",t)},expression:"props.row.value.namespaces"}}):t("LabeledInput",{attrs:{mode:e.mode,label:e.labeledInputNamespaceLabel,placeholder:e.t("harvesterManager.affinity.namespaces.placeholder"),"data-testid":"pod-affinity-namespace-input-index"+a.i},on:{input:function(t){return e.updateNamespaces(a.row.value,a.row.value._namespaces)}},model:{value:a.row.value._namespaces,callback:function(t){e.$set(a.row.value,"_namespaces",t)},expression:"props.row.value._namespaces"}})],1):e._e(),t("MatchExpressions",{key:e.rerenderNums,staticClass:"col span-12 mt-20",attrs:{mode:e.mode,type:e.pod,value:e.get(a.row.value,"labelSelector.matchExpressions"),"show-remove":!1,"data-testid":"pod-affinity-expressions-index"+a.i},on:{input:t=>e.updateLabelSelector(t,a)}}),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-9"},[e.hasNodes?t("LabeledSelect",{attrs:{taggable:!0,searchable:!0,"close-on-select":!1,mode:e.mode,required:"",label:e.t("workload.scheduling.affinity.topologyKey.label"),placeholder:e.topologyKeyPlaceholder,options:e.existingNodeLabels,disabled:"view"===e.mode,loading:e.loading,"data-testid":"pod-affinity-topology-select-index"+a.i},on:{input:e.update},model:{value:a.row.value.topologyKey,callback:function(t){e.$set(a.row.value,"topologyKey",t)},expression:"props.row.value.topologyKey"}}):t("LabeledInput",{attrs:{mode:e.mode,label:e.t("workload.scheduling.affinity.topologyKey.label"),placeholder:e.topologyKeyPlaceholder,required:"","data-testid":"pod-affinity-topology-input-index"+a.i},on:{input:e.update},model:{value:a.row.value.topologyKey,callback:function(t){e.$set(a.row.value,"topologyKey",t)},expression:"props.row.value.topologyKey"}})],1),"weight"in a.row.value?t("div",{staticClass:"col span-3"},[t("LabeledInput",{attrs:{mode:e.mode,type:"number",min:"1",max:"100",label:e.t("workload.scheduling.affinity.weight.label"),placeholder:e.t("workload.scheduling.affinity.weight.placeholder"),"data-testid":"pod-affinity-weight-index"+a.i},model:{value:a.row.value.weight,callback:function(t){e.$set(a.row.value,"weight",e._n(t))},expression:"props.row.value.weight"}})],1):e._e()])]}}]),model:{value:e.allSelectorTerms,callback:function(t){e.allSelectorTerms=t},expression:"allSelectorTerms"}})],1)])},l=[],i=a("9ce4"),r=a("d6a6"),o=a("1832"),n=a("56a4"),c=a("7395"),d=a("53fe"),u=a("f032"),p=a("d444"),v=a("06f6"),m=a("7592"),h=a("44db"),b=a.n(h),f=a("d003"),g=a("e411");const y={POD:"pod",ALL:"all",SELECTED:"selected"};var C={components:{ArrayListGrouped:f["a"],MatchExpressions:c["a"],LabeledSelect:d["a"],RadioGroup:u["b"],LabeledInput:p["a"]},props:{value:{type:Object,default:()=>({})},field:{type:String,default:"affinity"},mode:{type:String,default:"create"},nodes:{type:Array,default:()=>[]},namespaces:{type:Array,default:null},allNamespacesOptionAvailable:{default:!1,type:Boolean},forceInputNamespaceSelection:{default:!1,type:Boolean},removeLabeledInputNamespaceLabel:{default:!1,type:Boolean},overwriteLabels:{type:Object,default:null},loading:{default:!1,type:Boolean}},data(){this.value[this.field]||this.$set(this.value,this.field,{});const{podAffinity:e={},podAntiAffinity:t={}}=this.value[this.field],a=[...e.preferredDuringSchedulingIgnoredDuringExecution||[],...e.requiredDuringSchedulingIgnoredDuringExecution||[]].map(e=>{let t=Object(o["e"])(e);return t._id=Object(v["p"])(4),t._anti=!1,e.podAffinityTerm?(Object.assign(t,e.podAffinityTerm),t=this.parsePodAffinityTerm(t),delete t.podAffinityTerm):t=this.parsePodAffinityTerm(t),t}),s=[...t.preferredDuringSchedulingIgnoredDuringExecution||[],...t.requiredDuringSchedulingIgnoredDuringExecution||[]].map(e=>{let t=Object(o["e"])(e);return t._id=Object(v["p"])(4),t._anti=!0,e.podAffinityTerm?(Object.assign(t,e.podAffinityTerm),t=this.parsePodAffinityTerm(t),delete t.podAffinityTerm):t=this.parsePodAffinityTerm(t),t}),l=[...a,...s];return{allSelectorTerms:l,defaultWeight:1,rerenderNums:Object(v["p"])(4),NAMESPACE_SELECTION_OPTION_VALUES:y,defaultAddValue:{_namespaceOption:y.POD,matchExpressions:[],namespaces:null,_namespaces:null}}},computed:{...Object(i["a"])({t:"i18n/t"}),isView(){return this.mode===r["I"]},pod(){return n["B"]},node(){return n["z"]},labeledInputNamespaceLabel(){var e;return this.removeLabeledInputNamespaceLabel?"":(null===(e=this.overwriteLabels)||void 0===e?void 0:e.namespaceInputLabel)||this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")},allNamespacesOptions(){const e=this.$store.getters["currentStore"](n["w"]),t=this.namespaces||this.$store.getters[e+"/all"](n["w"]),a=Object(m["b"])(t.map(e=>({label:e.nameDisplay,value:e.id})),"label");return a},existingNodeLabels(){return Object(g["f"])(this.nodes)},hasNodes(){return this.nodes.length},namespaceSelectionOptions(){return this.allNamespacesOptionAvailable?[y.POD,y.ALL,y.SELECTED]:[y.POD,y.SELECTED]},namespaceSelectionLabels(){var e,t;return null!==(e=this.overwriteLabels)&&void 0!==e&&e.namespaceSelectionLabels?null===(t=this.overwriteLabels)||void 0===t?void 0:t.namespaceSelectionLabels:this.allNamespacesOptionAvailable?[this.t("workload.scheduling.affinity.thisPodNamespace"),this.t("workload.scheduling.affinity.allNamespaces"),this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")]:[this.t("workload.scheduling.affinity.thisPodNamespace"),this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")]},addLabel(){var e;return(null===(e=this.overwriteLabels)||void 0===e?void 0:e.addLabel)||this.t("podAffinity.addLabel")},topologyKeyPlaceholder(){var e;return(null===(e=this.overwriteLabels)||void 0===e?void 0:e.topologyKeyPlaceholder)||this.t("workload.scheduling.affinity.topologyKey.placeholder")},hasNamespaces(){return this.allNamespacesOptions.length},namespaceModeLabel(){return this.overwriteNsModeLabel||[this.t("workload.scheduling.affinity.thisPodNamespace"),this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")]},namespaceLabel(){var e;return(null===(e=this.overwriteNsModeLabel)||void 0===e?void 0:e[2])||this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")}},created(){this.queueUpdate=b()(this.update,500)},methods:{parsePodAffinityTerm(e){var t;return e.namespaceSelector&&"object"===typeof e.namespaceSelector&&!Object.keys(e.namespaceSelector).length&&this.allNamespacesOptionAvailable?e._namespaceOption=y.ALL:null!==(t=e.namespaces)&&void 0!==t&&t.length?e._namespaceOption=y.SELECTED:e._namespaceOption=y.POD,e._namespaces=(e.namespaces||[]).toString(),e},update(){const e={requiredDuringSchedulingIgnoredDuringExecution:[],preferredDuringSchedulingIgnoredDuringExecution:[]},t={requiredDuringSchedulingIgnoredDuringExecution:[],preferredDuringSchedulingIgnoredDuringExecution:[]};this.allSelectorTerms.forEach(a=>{if(a._anti)if(a.weight){const e={podAffinityTerm:{...a},weight:a.weight||this.defaultWeight};delete e.podAffinityTerm.weight,t.preferredDuringSchedulingIgnoredDuringExecution.push(e)}else t.requiredDuringSchedulingIgnoredDuringExecution.push(a);else if(a.weight){const t={podAffinityTerm:a,weight:a.weight||this.defaultWeight};e.preferredDuringSchedulingIgnoredDuringExecution.push(t)}else e.requiredDuringSchedulingIgnoredDuringExecution.push(a)}),Object.assign(this.value[this.field],{podAffinity:e,podAntiAffinity:t}),this.$emit("update",this.value)},remove(){this.rerenderNums=Object(v["p"])(4),this.queueUpdate()},changePriority(e,t){e.weight?delete e.weight:e.weight=this.defaultWeight,this.$set(this.allSelectorTerms,t,Object(o["e"])(e)),this.queueUpdate()},priorityDisplay(e){return"weight"in e?this.t("workload.scheduling.affinity.preferred"):this.t("workload.scheduling.affinity.required")},changeNamespaceMode(e,t,a){switch(this.$set(t,"_namespaceOption",e),e){case y.POD:t.namespaces=null,t._namespaces=null,(t.namespaceSelector||null===t.namespaceSelector)&&delete t.namespaceSelector;break;case y.ALL:t.namespaceSelector={},(t.namespaces||null===t.namespaces)&&delete t.namespaces,(t._namespaces||null===t._namespaces)&&delete t._namespaces;break;default:this.$set(t,"namespaces",[]),this.$set(t,"_namespaces",""),(t.namespaceSelector||null===t.namespaceSelector)&&delete t.namespaceSelector;break}this.$set(this.allSelectorTerms,a,t),this.queueUpdate()},updateNamespaces(e,t){let a=t;"string"===typeof t&&(a=t.split(",").map(e=>e.trim()).filter(e=>null===e||void 0===e?void 0:e.length)),this.$set(e,"namespaces",a),this.queueUpdate()},updateLabelSelector(e,t){this.set(t.row.value,"labelSelector.matchExpressions",e),this.queueUpdate()},isEmpty:o["i"],get:o["g"],set:o["j"]}},k=C,w=(a("67cf"),a("d802")),x=Object(w["a"])(k,s,l,!1,null,null,null);t["a"]=x.exports},"0404":function(e,t,a){"use strict";a("9839")},"04d5":function(e,t,a){"use strict";a("4d5d")},"05b4":function(e,t,a){"use strict";a.r(t),a.d(t,"protocol",(function(){return s})),a.d(t,"sslVersions",(function(){return l})),a.d(t,"updatePort",(function(){return i})),a.d(t,"normalizePort",(function(){return r}));const s=["http","https"],l=["TLSv1_2","TLSv1_1","TLSv1","SSLv23"];function i(e,t){e(0),e(r(t))}function r(e){const t=Number.parseInt(e,10);return t<1?1:t>65535?65535:t}},"0770":function(e,t,a){"use strict";a("2171")},"0776":function(e,t,a){var s=a("e11a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("68a7dca4",s,!0,{sourceMap:!1,shadowMode:!1})},"0807":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".label[data-v-aa28af1a]{display:flex;flex-direction:column}.label .value[data-v-aa28af1a]{font-size:14px;line-height:18px}",""]),e.exports=t},"08ba":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{type:"multiline",label:e.t("secret.ssh.public"),mode:e.mode,required:"",placeholder:e.t("secret.ssh.publicPlaceholder")},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t("FileSelector",{staticClass:"btn btn-sm bg-primary mt-10",attrs:{label:e.t("generic.readFromFile")},on:{selected:e.onUsernameSelected}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{type:"multiline",label:e.t("secret.ssh.private"),mode:e.mode,required:"",placeholder:e.t("secret.ssh.privatePlaceholder")},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("FileSelector",{staticClass:"btn btn-sm bg-primary mt-10",attrs:{label:e.t("generic.readFromFile")},on:{selected:e.onPasswordSelected}})],1)])])},l=[],i=a("d444"),r=a("3204"),o={components:{LabeledInput:i["a"],FileSelector:r["b"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){const e=this.value.decodedData["ssh-publickey"]||"",t=this.value.decodedData["ssh-privatekey"]||"";return{username:e,password:t}},watch:{username:"update",password:"update"},methods:{onUsernameSelected:Object(r["a"])("username"),onPasswordSelected:Object(r["a"])("password"),update(){this.value.setData("ssh-publickey",this.username),this.value.setData("ssh-privatekey",this.password)}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},"08f8":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".pool-headers[data-v-02c7544e]{display:grid;grid-column-gap:1.75%;margin-bottom:10px;align-items:center;grid-template-columns:40% 40% 15%}.pool-headers.show-project-and-cluster[data-v-02c7544e]{grid-template-columns:25% 25% 25% 15%}",""]),e.exports=t},"0914":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-12"},[t("FileSelector",{staticClass:"btn btn-sm bg-primary mb-10",attrs:{label:e.t("generic.readFromFile")},on:{selected:e.onKeySelected}}),t("div",[t("TextAreaAutoGrow",{attrs:{"min-height":254},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1)],1)])])},l=[],i=a("c78c"),r=a("3204"),o=a("cd3a"),n={name:"HarvesterAdditionalCA",components:{FileSelector:r["b"],TextAreaAutoGrow:o["a"]},mixins:[i["a"]],methods:{onKeySelected:Object(r["a"])("value.value")}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},"0a8c":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".headers[data-v-11e76cd4]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;border-bottom:1px solid var(--border);height:30px;width:calc(100% - 75px)}.headers div[data-v-11e76cd4]{width:100%}",""]),e.exports=t},"0af8":function(e,t,a){"use strict";a("70c8")},"0b97":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"secret-selector",class:{"show-key-selector":e.showKeySelector}},[t("div",{staticClass:"input-container"},[t("LabeledSelect",{attrs:{disabled:!e.isView&&e.disabled,options:e.secretNames,label:e.secretNameLabel,mode:e.mode},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e.showKeySelector?t("LabeledSelect",{staticClass:"col span-6",attrs:{disabled:e.isKeyDisabled,options:e.keys,label:e.keyNameLabel,mode:e.mode},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}}):e._e()],1)])},l=[],i=a("53fe"),r=a("56a4"),o=a("d6a6"),n=a("976d"),c=a("bba0"),d=a.n(c);const u="__[[NONE]]__";var p={components:{LabeledSelect:i["a"]},props:{value:{type:[String,Object],required:!1,default:void 0},namespace:{type:String,required:!0},types:{type:Array,default:()=>Object.values(n["a"])},disabled:{type:Boolean,default:!1},mountKey:{type:String,default:"valueFrom"},nameKey:{type:String,default:"name"},keyKey:{type:String,default:"key"},showKeySelector:{type:Boolean,default:!1},secretNameLabel:{type:String,default:"Secret Name"},keyNameLabel:{type:String,default:"Key"},mode:{type:String,default:o["B"]},inStore:{type:String,default:"cluster"}},computed:{name:{get(){var e,t,a;const s=this.showKeySelector?null===(e=this.value)||void 0===e||null===(t=e[this.mountKey])||void 0===t||null===(a=t.secretKeyRef)||void 0===a?void 0:a[this.nameKey]:this.value;return s||u},set(e){const t=e===u,a=t?void 0:e;this.showKeySelector?this.$emit("input",{[this.mountKey]:{secretKeyRef:{[this.nameKey]:a,[this.keyKey]:""}}}):this.$emit("input",a)}},key:{get(){var e,t,a;return(null===(e=this.value)||void 0===e||null===(t=e[this.mountKey])||void 0===t||null===(a=t.secretKeyRef)||void 0===a?void 0:a[this.keyKey])||""},set(e){this.$emit("input",{[this.mountKey]:{secretKeyRef:{[this.nameKey]:this.name,[this.keyKey]:e}}})}},secrets(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](r["J"]);return t.filter(e=>this.types.includes(e._type)&&e.namespace===this.namespace)},secretNames(){const e=this.secrets.map(e=>({label:e.name,value:e.name})).sort();return[{label:"None",value:u},...d()(e,"label")]},keys(){const e=this.secrets.find(e=>e.name===this.name)||{};return Object.keys(e.data||{}).map(e=>({label:e,value:e}))},isView(){return this.mode===o["I"]},isKeyDisabled(){return!this.isView&&(!this.name||this.name===u||this.disabled)}}},v=p,m=(a("d710"),a("d802")),h=Object(m["a"])(v,s,l,!1,null,null,null);t["a"]=h.exports},"0e4c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Loading",{attrs:{mode:"relative",loading:e.loading}}),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hev-name"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hev-type"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.VOLUME_TYPE,required:"",mode:e.mode},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hav-storage"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.storage.storageClass.label"),value:e.value.storageClassName,mode:e.mode}},[t("LabeledSelect",{attrs:{options:e.storageClassOptions,label:e.t("harvester.storage.storageClass.label"),mode:e.mode,disabled:e.isDisabled,required:e.validateRequired},on:{input:e.update},model:{value:e.value.storageClassName,callback:function(t){e.$set(e.value,"storageClassName",t)},expression:"value.storageClassName"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hev-size"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.size"),value:e.value.size,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],attrs:{"output-modifier":!0,increment:1024,"input-exponent":3,mode:e.mode,required:e.validateRequired,label:e.t("harvester.fields.size")},on:{input:e.update},model:{value:e.value.size,callback:function(t){e.$set(e.value,"size",t)},expression:"value.size"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-3",attrs:{"data-testid":"input-hev-bus"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),mode:e.mode,options:e.InterfaceOption,required:""},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])],1)},l=[],i=a("70a6"),r=a("2007"),o=a("2aaa"),n=a("d444"),c=a("53fe"),d=a("56a4"),u=a("67ab"),p=a("7c47"),v={name:"HarvesterEditVolume",components:{InputOrDisplay:o["a"],Loading:i["a"],LabeledInput:n["a"],LabeledSelect:c["a"],UnitInput:r["a"]},props:{mode:{type:String,default:"create"},isEdit:{type:Boolean,default:!1},namespace:{type:String,default:null},value:{type:Object,default:()=>({})},validateRequired:{type:Boolean,required:!0},isVirtualType:{type:Boolean,default:!0}},data(){return{VOLUME_TYPE:p["h"],InterfaceOption:p["d"],loading:!1}},computed:{pvcsResource(){const e=this.$store.getters["harvester/all"](d["E"])||[];return e.find(e=>e.id===`${this.namespace}/${this.value.volumeName}`)},isDisabled(){return!this.value.newCreateId&&this.isEdit&&this.isVirtualType},storageClassOptions(){const e=this.$store.getters["harvester/all"](d["O"])||[],t=e.filter(e=>{var t;return!(null!==(t=e.parameters)&&void 0!==t&&t.backingImage)}).map(e=>{const t=e.isDefault?`${e.name} (${this.t("generic.default")})`:e.name;return{label:t,value:e.name}})||[];return t}},watch:{"value.type"(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())},pvcsResource:{handler(e){var t,a,s;if(null!==e&&void 0!==e&&null!==(t=e.spec)&&void 0!==t&&null!==(a=t.resources)&&void 0!==a&&null!==(s=a.requests)&&void 0!==s&&s.storage){const t=Object(u["f"])(e.spec.resources.requests.storage),a=Object(u["e"])(t,{increment:1024,addSuffix:!1,maxExponent:3,minExponent:3});this.value.size=a+"Gi"}},deep:!0,immediate:!0}},methods:{update(){this.$emit("update")}}},m=v,h=a("d802"),b=Object(h["a"])(m,s,l,!1,null,null,null);t["default"]=b.exports},1094:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[[t("ArrayList",{attrs:{title:e.t("harvester.host.ntp.label"),protip:e.t("harvester.host.ntp.tips"),"value-placeholder":e.t("harvester.host.ntp.placeholder"),mode:e.mode},on:{input:e.update},model:{value:e.parseDefaultValue.ntpServers,callback:function(t){e.$set(e.parseDefaultValue,"ntpServers",t)},expression:"parseDefaultValue.ntpServers"}})]],2)])},l=[],i=a("c78c"),r=a("da9e"),o={name:"HarvesterNtpServersConfig",components:{ArrayList:r["a"]},mixins:[i["a"]],data(){let e={};try{e=JSON.parse(this.value.value)}catch(t){e={ntpServers:[]}}return{parseDefaultValue:e}},watch:{value:{handler(e){let t;try{t=JSON.parse(e.value)}catch(a){t={ntpServers:[]}}this.$set(this,"parseDefaultValue",t),this.update()},deep:!0}},methods:{useDefault(){const e={ntpServers:[]};this.$set(this,"parseDefaultValue",e)},update(){const e=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",e)}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},"139b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"elasticsearch"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-2"},[t("LabeledSelect",{staticClass:"scheme",attrs:{mode:e.mode,disabled:e.disabled,options:e.protocolOptions,label:e.t("logging.elasticsearch.scheme")},model:{value:e.value.scheme,callback:function(t){e.$set(e.value,"scheme",t)},expression:"value.scheme"}})],1),t("div",{staticClass:"col span-8"},[t("LabeledInput",{staticClass:"host",attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.elasticsearch.host")},model:{value:e.value.host,callback:function(t){e.$set(e.value,"host",t)},expression:"value.host"}})],1),t("div",{staticClass:"col span-2"},[t("LabeledInput",{staticClass:"port",attrs:{mode:e.mode,disabled:e.disabled,type:"number",min:"1",max:"65535",label:e.t("logging.elasticsearch.port")},model:{value:e.port,callback:function(t){e.port=e._n(t)},expression:"port"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.elasticsearch.indexName")},model:{value:e.value.index_name,callback:function(t){e.$set(e.value,"index_name",t)},expression:"value.index_name"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.elasticsearch.user")},model:{value:e.value.user,callback:function(t){e.$set(e.value,"user",t)},expression:"value.user"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"secret-name-label":e.t("logging.elasticsearch.password"),mode:e.mode,namespace:e.namespace,disabled:e.disabled,"show-key-selector":!0},model:{value:e.value.password,callback:function(t){e.$set(e.value,"password",t)},expression:"value.password"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.certificate")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.elasticsearch.caFile.label"),"show-key-selector":!0},model:{value:e.value.ca_file,callback:function(t){e.$set(e.value,"ca_file",t)},expression:"value.ca_file"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.elasticsearch.clientCert.label"),"show-key-selector":!0},model:{value:e.value.client_cert,callback:function(t){e.$set(e.value,"client_cert",t)},expression:"value.client_cert"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.elasticsearch.clientKey.label"),"show-key-selector":!0},model:{value:e.value.client_key,callback:function(t){e.$set(e.value,"client_key",t)},expression:"value.client_key"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.elasticsearch.clientKeyPass"),"show-key-selector":!0},model:{value:e.value.client_key_pass,callback:function(t){e.$set(e.value,"client_key_pass",t)},expression:"value.client_key_pass"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{mode:e.mode,disabled:e.disabled,options:e.sslVersions,label:e.t("logging.elasticsearch.sslVersion")},model:{value:e.value.ssl_version,callback:function(t){e.$set(e.value,"ssl_version",t)},expression:"value.ssl_version"}})],1),t("div",{staticClass:"col span-6 vertically-center"},[t("Checkbox",{attrs:{label:e.t("logging.elasticsearch.verifySsl"),disabled:e.disabled,mode:e.mode},model:{value:e.value.ssl_verify,callback:function(t){e.$set(e.value,"ssl_verify",t)},expression:"value.ssl_verify"}}),t("Checkbox",{attrs:{label:e.t("logging.elasticsearch.suppressTypeName.label"),tooltip:e.t("logging.elasticsearch.suppressTypeName.elasticSearchTips"),disabled:e.disabled,mode:e.mode},model:{value:e.value.suppress_type_name,callback:function(t){e.$set(e.value,"suppress_type_name",t)},expression:"value.suppress_type_name"}})],1)])])},l=[],i=a("d444"),r=a("53fe"),o=a("0b97"),n=a("efb2"),c=a("d6a6"),d=a("05b4"),u={components:{LabeledInput:i["a"],LabeledSelect:r["a"],SecretSelector:o["a"],Checkbox:n["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}},data(){return this.mode===c["z"]&&("undefined"===typeof this.value.ssl_verify&&this.$set(this.value,"ssl_verify",!0),"undefined"===typeof this.value.ssl_version&&this.$set(this.value,"ssl_version",d["sslVersions"][0]),"undefined"===typeof this.value.suppress_type_name&&this.$set(this.value,"suppress_type_name",!0)),{protocolOptions:d["protocol"],sslVersions:d["sslVersions"]}},computed:{port:{get(){return this.value.port},set(e){Object(d["updatePort"])(e=>this.$set(this.value,"port",e),e)}}}},p=u,v=(a("deb2"),a("d802")),m=Object(v["a"])(p,s,l,!1,null,null,null);t["default"]=m.exports},"139e":function(e,t,a){"use strict";a("3ab0")},"13fb":function(e,t,a){"use strict";a("aebc")},"155d":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-088121bb] .yaml-editor{flex:1;min-height:200px}[data-v-088121bb] .yaml-editor .code-mirror .CodeMirror{position:static;height:auto;min-height:200px}",""]),e.exports=t},"16a3":function(e,t,a){var s=a("8c67");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("2d675994",s,!0,{sourceMap:!1,shadowMode:!1})},1780:function(e,t,a){"use strict";a("fb47")},"184a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.rows.length?t("div",[t("div",{staticClass:"listener-headers"},[t("span",{staticClass:"listener-name"},[t("t",{attrs:{k:"harvester.loadBalancer.listeners.name.label"}})],1),t("span",{staticClass:"listener-protocol"},[t("t",{attrs:{k:"harvester.loadBalancer.listeners.protocol.label"}})],1),t("span",{staticClass:"listener-port"},[t("t",{attrs:{k:"harvester.loadBalancer.listeners.port.label"}}),t("span",{staticClass:"text-error"},[e._v(" * ")])],1),t("span",{staticClass:"listener-backendPort"},[t("t",{attrs:{k:"harvester.loadBalancer.listeners.backendPort.label"}}),t("span",{staticClass:"text-error"},[e._v(" * ")])],1),e.showRemove?t("span",{staticClass:"remove"}):e._e()]),e._l(e.rows,(function(a,s){return t("div",{key:s,staticClass:"listener-row"},[t("div",{staticClass:"port-name"},[e.isView?t("span",[e._v(" "+e._s(a.name)+" ")]):t("input",{directives:[{name:"model",rawName:"v-model.number",value:a.name,expression:"row.name",modifiers:{number:!0}}],ref:"port-name",refInFor:!0,attrs:{type:"text",placeholder:e.t("servicePorts.rules.name.placeholder")},domProps:{value:a.name},on:{input:[function(t){t.target.composing||e.$set(a,"name",e._n(t.target.value))},e.queueUpdate],blur:function(t){return e.$forceUpdate()}}})]),t("div",{staticClass:"port-protocol"},[e.isView?t("span",[e._v(" "+e._s(a.protocol)+" ")]):t("Select",{attrs:{options:e.protocolOptions},on:{input:e.queueUpdate},model:{value:a.protocol,callback:function(t){e.$set(a,"protocol",t)},expression:"row.protocol"}})],1),t("div",{staticClass:"port"},[e.isView?t("span",[e._v(" "+e._s(a.port)+" ")]):t("input",{directives:[{name:"model",rawName:"v-model.number",value:a.port,expression:"row.port",modifiers:{number:!0}}],ref:"port",refInFor:!0,attrs:{type:"number",min:"1",max:"65535",placeholder:e.t("servicePorts.rules.listening.placeholder")},domProps:{value:a.port},on:{input:[function(t){t.target.composing||e.$set(a,"port",e._n(t.target.value))},e.queueUpdate],blur:function(t){return e.$forceUpdate()}}})]),t("div",{staticClass:"target-port"},[e.isView?t("span",[e._v(e._s(a.backendPort))]):t("input",{directives:[{name:"model",rawName:"v-model.number",value:a.backendPort,expression:"row.backendPort",modifiers:{number:!0}}],attrs:{placeholder:e.t("harvester.loadBalancer.listeners.backendPort.placeholder")},domProps:{value:a.backendPort},on:{input:[function(t){t.target.composing||e.$set(a,"backendPort",e._n(t.target.value))},e.queueUpdate],blur:function(t){return e.$forceUpdate()}}})]),e.showRemove?t("div",{staticClass:"remove"},[t("button",{staticClass:"btn role-link",attrs:{type:"button"},on:{click:function(t){return e.remove(s)}}},[t("t",{attrs:{k:"generic.remove"}})],1)]):e._e()])}))],2):e._e(),e.showAdd?t("div",{staticClass:"footer"},[t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button"},on:{click:function(t){return e.add()}}},[t("t",{attrs:{k:"generic.add"}})],1)]):e._e()])},l=[],i=a("44db"),r=a.n(i),o=a("d6a6"),n=a("e411"),c=a("1832"),d=a("81a6"),u={components:{Select:d["a"]},props:{value:{type:Array,default:null},mode:{type:String,default:o["B"]},autoAddIfEmpty:{type:Boolean,default:!0}},data(){const e=Object(c["e"])(this.value||[]);return{rows:e}},computed:{isView(){return this.mode===o["I"]},showAdd(){return!this.isView},showRemove(){return!this.isView},protocolOptions(){return["TCP","UDP"]}},created(){this.queueUpdate=r()(this.update,500)},mounted(){this.isView||this.autoAddIfEmpty&&this.mode!==o["B"]&&(null===this||void 0===this?void 0:this.rows.length)<1&&this.add(!1)},methods:{add(e=!0){this.rows.push({name:"",port:null,protocol:"TCP",backendPort:null}),this.queueUpdate(),this.rows.length>0&&e&&this.$nextTick(()=>{const e=this.$refs["port-name"];e[e.length-1].focus()})},remove(e){Object(n["i"])(this.rows,e),this.queueUpdate()},update(){this.isView||this.$emit("input",this.rows)}}},p=u,v=(a("04d5"),a("d802")),m=Object(v["a"])(p,s,l,!1,null,"0cb03c46",null);t["default"]=m.exports},1872:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Banner",{attrs:{color:"warning"}},[t("t",{attrs:{k:"harvester.setting.httpProxy.warning",raw:!0}})],1),t("div",{staticClass:"row",on:{input:e.update}},[t("div",{staticClass:"col span-12"},[[t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,label:"http-proxy"},model:{value:e.parseDefaultValue.httpProxy,callback:function(t){e.$set(e.parseDefaultValue,"httpProxy",t)},expression:"parseDefaultValue.httpProxy"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,label:"https-proxy"},model:{value:e.parseDefaultValue.httpsProxy,callback:function(t){e.$set(e.parseDefaultValue,"httpsProxy",t)},expression:"parseDefaultValue.httpsProxy"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,label:"no-proxy"},model:{value:e.parseDefaultValue.noProxy,callback:function(t){e.$set(e.parseDefaultValue,"noProxy",t)},expression:"parseDefaultValue.noProxy"}})]],2)])],1)},l=[],i=a("c78c"),r=a("dffb"),o=a("d444"),n={name:"HarvesterHttpProxy",components:{Banner:r["a"],LabeledInput:o["a"]},mixins:[i["a"]],data(){let e={};try{e=JSON.parse(this.value.value)}catch(t){e=JSON.parse(this.value.default)}return{parseDefaultValue:e,errors:[]}},created(){this.update()},methods:{update(){const e=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",e)}},watch:{value:{handler(e){const t=JSON.parse(e.value);this.$set(this,"parseDefaultValue",t)},deep:!0}}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},"18b8":function(e,t,a){"use strict";a("5f11")},"19ea":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-1cd38279] .resource-yaml{flex:1;display:flex;flex-direction:column}[data-v-1cd38279] .resource-yaml .yaml-editor{flex:1;min-height:200px}[data-v-1cd38279] .resource-yaml .yaml-editor .code-mirror .CodeMirror{min-height:200px}",""]),e.exports=t},"1ae9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.newrelic.baseURI")},model:{value:e.value.base_uri,callback:function(t){e.$set(e.value,"base_uri",t)},expression:"value.base_uri"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.newrelic.apiKey"),"show-key-selector":!0},model:{value:e.value.api_key,callback:function(t){e.$set(e.value,"api_key",t)},expression:"value.api_key"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.newrelic.licenseKey"),"show-key-selector":!0},model:{value:e.value.license_key,callback:function(t){e.$set(e.value,"license_key",t)},expression:"value.license_key"}})],1)])])},l=[],i=a("d444"),r=a("0b97"),o={components:{LabeledInput:i["a"],SecretSelector:r["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},"1b5f":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("RadioGroup",{attrs:{name:"selectNode",options:e.selectNodeOptions,mode:e.mode},on:{input:e.update},model:{value:e.selectNode,callback:function(t){e.selectNode=t},expression:"selectNode"}})],1),"nodeSelector"===e.selectNode?[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:e.t("workload.scheduling.affinity.nodeName"),options:e.nodes||[],mode:e.mode,multiple:!1,loading:e.loading},on:{input:e.update},model:{value:e.nodeName,callback:function(t){e.nodeName=t},expression:"nodeName"}})],1)])]:"affinity"===e.selectNode?[t("NodeAffinity",{attrs:{mode:e.mode},on:{input:e.update},model:{value:e.nodeAffinity,callback:function(t){e.nodeAffinity=t},expression:"nodeAffinity"}})]:e._e()],2)},l=[],i=a("9ce4"),r=a("f032"),o=a("53fe"),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",on:{input:e.queueUpdate}},[t("div",{staticClass:"col span-12"},[t("ArrayListGrouped",{staticClass:"mt-20",attrs:{mode:e.mode,"default-add-value":{matchExpressions:[]},"add-label":e.t("workload.scheduling.affinity.addNodeSelector")},on:{remove:e.remove},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-9"},[t("LabeledSelect",{attrs:{options:e.affinityOptions,value:e.priorityDisplay(a.row.value),label:e.t("workload.scheduling.affinity.priority"),mode:e.mode,"data-testid":"node-affinity-priority-index"+a.i},on:{input:function(t){e.changePriority(a.row.value)}}})],1),a.row.value.weight?t("div",{staticClass:"col span-3"},[t("LabeledInput",{attrs:{mode:e.mode,type:"number",min:"1",max:"100",label:e.t("workload.scheduling.affinity.weight.label"),placeholder:e.t("workload.scheduling.affinity.weight.placeholder"),"data-testid":"node-affinity-weight-index"+a.i},model:{value:a.row.value.weight,callback:function(t){e.$set(a.row.value,"weight",e._n(t))},expression:"props.row.value.weight"}})],1):e._e()]),t("MatchExpressions",{key:e.rerenderNums,staticClass:"col span-12 mt-20",attrs:{value:e.matchingSelectorDisplay?a.row.value:a.row.value.matchExpressions,"matching-selector-display":e.matchingSelectorDisplay,mode:e.mode,type:e.node,"show-remove":!1,"data-testid":"node-affinity-expressions-index"+a.i},on:{input:function(t){e.updateExpressions(a.row.value,t)}}})]}}]),model:{value:e.allSelectorTerms,callback:function(t){e.allSelectorTerms=t},expression:"allSelectorTerms"}})],1)])},c=[],d=a("44db"),u=a.n(d),p=a("d6a6"),v=a("1832"),m=a("56a4"),h=a("7395"),b=a("d444"),f=a("06f6"),g=a("d003"),y={components:{ArrayListGrouped:g["a"],MatchExpressions:h["a"],LabeledSelect:o["a"],LabeledInput:b["a"]},props:{value:{type:Object,default:()=>({})},mode:{type:String,default:"create"},matchingSelectorDisplay:{type:Boolean,default:!1}},data(){if(this.value.required)return{nodeSelectorTerms:this.value.required.nodeSelectorTerms};{const{preferredDuringSchedulingIgnoredDuringExecution:e=[],requiredDuringSchedulingIgnoredDuringExecution:t={}}=this.value,{nodeSelectorTerms:a=[]}=t,s=[...e,...a].map(e=>{const t=Object(v["e"])(e);return t._id=Object(f["p"])(4),e.preference&&(Object.assign(t,e.preference),delete t.preference),t});return{allSelectorTerms:s,weightedNodeSelectorTerms:e,defaultWeight:1,rerenderNums:Object(f["p"])(4)}}},computed:{...Object(i["a"])({t:"i18n/t"}),isView(){return this.mode===p["I"]},hasWeighted(){return!!this.weightedNodeSelectorTerms},node(){return m["z"]},affinityOptions(){const e=[this.t("workload.scheduling.affinity.preferred"),this.t("workload.scheduling.affinity.required")];return e}},created(){this.queueUpdate=u()(this.update,500)},methods:{update(){const e={},t={nodeSelectorTerms:[]},a=[];this.allSelectorTerms.forEach(e=>{const s={...e};if(s.matchExpressions&&(s.matchExpressions=(s.matchExpressions||[]).map(e=>{const t={...e};return delete t.matching,t})),s.matchFields&&(s.matchFields=(s.matchFields||[]).map(e=>{const t={...e};return delete t.matching,t})),s.weight){const e={weight:s.weight,preference:s};delete e.preference.weight,a.push(e)}else t.nodeSelectorTerms.push(s)}),a.length&&(e.preferredDuringSchedulingIgnoredDuringExecution=a),t.nodeSelectorTerms.length&&(e.requiredDuringSchedulingIgnoredDuringExecution=t),this.$emit("input",e)},remove(){this.rerenderNums=Object(f["p"])(4),this.queueUpdate()},changePriority(e){e.weight?this.$delete(e,"weight"):this.$set(e,"weight",1),this.update()},priorityDisplay(e){return e.weight?this.t("workload.scheduling.affinity.preferred"):this.t("workload.scheduling.affinity.required")},updateExpressions(e,t){const a={matchFields:[],matchExpressions:[]};t.length&&(t.forEach(e=>{a[e.matching||"matchExpressions"].push(e)}),this.$set(e,"matchFields",a.matchFields),this.$set(e,"matchExpressions",a.matchExpressions),this.update())},get:v["g"],isEmpty:v["i"]}},C=y,k=a("d802"),w=Object(k["a"])(C,n,c,!1,null,null,null),x=w.exports,S=a("9314"),_=a("b0bd"),O={components:{RadioGroup:r["b"],LabeledSelect:o["a"],NodeAffinity:x},props:{value:{type:Object,default:()=>({})},nodes:{type:Array,default:()=>[]},mode:{type:String,default:"create"},loading:{default:!1,type:Boolean}},data(){var e,t;const a=this.$store.getters["currentProduct"].inStore===S["a"];let{nodeName:s=""}=this.value;const{affinity:l={},nodeSelector:i={}}=this.value,{nodeAffinity:r={}}=l;let o=null;return this.value.nodeName?o="nodeSelector":a&&null!==(e=this.value)&&void 0!==e&&null!==(t=e.nodeSelector)&&void 0!==t&&t[_["n"]]?(o="nodeSelector",s=i[_["n"]]):Object(v["i"])(r)||(o="affinity"),r.requiredDuringSchedulingIgnoredDuringExecution||this.$set(r,"requiredDuringSchedulingIgnoredDuringExecution",{nodeSelectorTerms:[]}),r.preferredDuringSchedulingIgnoredDuringExecution||this.$set(r,"preferredDuringSchedulingIgnoredDuringExecution",[]),{selectNode:o,nodeName:s,nodeAffinity:r,nodeSelector:i}},computed:{...Object(i["a"])({t:"i18n/t"}),isView(){return this.mode===p["I"]},isHarvester(){return this.$store.getters["currentProduct"].inStore===S["a"]},selectNodeOptions(){const e=this.isHarvester?"harvester.virtualMachine":"workload",t=[{label:this.t(e+".scheduling.affinity.anyNode"),value:null},{label:this.t(e+".scheduling.affinity.specificNode"),value:"nodeSelector"},{label:this.t(e+".scheduling.affinity.schedulingRules"),value:"affinity"}];return t}},methods:{update(){var e,t,a,s;const{nodeName:l,nodeSelector:i,nodeAffinity:r}=this;switch(this.selectNode){case"nodeSelector":this.isHarvester?Object.assign(this.value,{nodeSelector:{[_["n"]]:l}}):Object.assign(this.value,{nodeSelector:i,nodeName:l}),null!==(e=this.value)&&void 0!==e&&null!==(t=e.affinity)&&void 0!==t&&t.nodeAffinity&&delete this.value.affinity.nodeAffinity;break;case"affinity":delete this.value.nodeName,delete this.value.nodeSelector,this.value.affinity?Object.assign(this.value.affinity,{nodeAffinity:r}):Object.assign(this.value,{affinity:{nodeAffinity:r}});break;default:delete this.value.nodeName,delete this.value.nodeSelector,null!==(a=this.value)&&void 0!==a&&null!==(s=a.affinity)&&void 0!==s&&s.nodeAffinity&&delete this.value.affinity.nodeAffinity}},isEmpty:v["i"]},watch:{"value.nodeSelector":{handler(e){if(this.isHarvester&&null!==e&&void 0!==e&&e[_["n"]]){this.selectNode="nodeSelector";const t=e[_["n"]];this.nodeName=t;const a=this.nodes.map(e=>e.value);t&&!a.includes(t)&&(this.$store.dispatch("growl/error",{title:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistNode.title",{name:t}),message:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistNode.message")},{root:!0}),delete this.value.nodeSelector,this.$set(this,"nodeName",""),this.$set(this,"selectNode",null))}}}}},N=O,$=Object(k["a"])(N,s,l,!1,null,null,null);t["a"]=$.exports},"1d27":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{required:"",label:e.t("secret.basic.username"),mode:e.mode},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("secret.basic.password"),mode:e.mode,type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)])])},l=[],i=a("d444"),r={components:{LabeledInput:i["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){const e=this.value.decodedData.username||"",t=this.value.decodedData.password||"";return{username:e,password:t}},watch:{username:"update",password:"update"},methods:{update(){this.value.setData("username",this.username),this.value.setData("password",this.password)}}},o=r,n=a("d802"),c=Object(n["a"])(o,s,l,!1,null,null,null);t["default"]=c.exports},"1d2e":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return e.rows.length?t("div",{staticClass:"grid"},e._l(e.rows,(function(a,s){return t(e.asLink?"a":"div",{key:e.get(a,e.keyField),tag:"div",staticClass:"item",class:{"has-description":!!e.get(a,e.descriptionField),"has-side-label":!!e.get(a,e.sideLabelField),[e.colorFor(a,s)]:!0,disabled:!0===e.get(a,e.disabledField)},attrs:{href:e.asLink?e.get(a,e.linkField):null,target:e.get(a,e.targetField),rel:e.rel,"data-testid":e.componentTestid+"-"+s},on:{click:function(t){return e.select(a,s)}}},[t("div",{staticClass:"side-label",class:{indicator:!0}}),a.deploysOnWindows?t("div",[t("label",{staticClass:"deploys-os-label"},[e._v(" "+e._s(e.t("catalog.charts.deploysOnWindows"))+" ")])]):e._e(),a.windowsIncompatible?t("div",[t("label",{staticClass:"os-incompatible-label"},[e._v(" "+e._s(e.t("catalog.charts.windowsIncompatible"))+" ")])]):e._e(),e.get(a,e.sideLabelField)?t("div",{staticClass:"side-label",class:{indicator:!1}},[t("label",[e._v(e._s(e.get(a,e.sideLabelField)))])]):e._e(),t("div",{staticClass:"logo"},[a.iconClass?t("i",{class:a.iconClass}):t("LazyImage",{attrs:{src:e.get(a,e.iconField)}})],1),t("h4",{staticClass:"name"},[e._v(" "+e._s(e.get(a,e.nameField))+" ")]),e.get(a,e.descriptionField)?t("div",{staticClass:"description"},[e._v(" "+e._s(e.get(a,e.descriptionField))+" ")]):e._e()])})),1):t("div",{staticClass:"m-50 text-center"},[t("h1",{directives:[{name:"t",rawName:"v-t",value:e.noDataKey,expression:"noDataKey"}]})])},l=[],i=a("cf12"),r=a("1832"),o=a("87ef"),n=a.n(o),c={components:{LazyImage:i["a"]},props:{rows:{type:Array,required:!0},keyField:{type:String,default:"key"},iconField:{type:String,default:"icon"},nameField:{type:String,default:"name"},descriptionField:{type:String,default:"description"},sideLabelField:{type:String,default:"sideLabel"},disabledField:{type:String,default:"disabled"},asLink:{type:Boolean,default:!1},linkField:{type:String,default:"link"},targetField:{type:String,default:"target"},rel:{type:String,default:"noopener noreferrer nofollow"},noDataKey:{type:String,default:"sortableTable.noRows"},colorFor:{type:Function,default:(e,t)=>"color"+(t%8+1)},componentTestid:{type:String,default:"select-icon-grid"}},methods:{get:r["g"],isDisabled(e){return!0===Object(r["g"])(this.rows[e],this.disabledField)},select(e,t){this.isDisabled(t)||this.$emit("clicked",e,t)},capitalize:n.a}},d=c,u=(a("4278"),a("d802")),p=Object(u["a"])(d,s,l,!1,null,"40bd913c",null);t["a"]=p.exports},"1e8f":function(e,t,a){"use strict";var s=a("e411");t["a"]={computed:{conditions(){var e;return(null===(e=this.value)||void 0===e?void 0:e.conditions)||[]},readyCondition(){return Object(s["h"])(this.conditions)?Object(s["e"])(this.conditions,"type","Ready")||{}:this.conditions.Ready},schedulableCondition(){return Object(s["h"])(this.conditions)?Object(s["e"])(this.conditions,"type","Schedulable")||{}:this.conditions.Schedulable}}}},"1eaf":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{class:e.containerClass},[t("div",{class:e.defaultSectionClass},[t("div",{staticClass:"labels"},[t("div",{staticClass:"labels__header"},[e.showLabelTitle?t("h3",[t("t",{attrs:{k:"labels.labels.title"}})],1):e._e(),e.value.hasSystemLabels?t("ToggleSwitch",{attrs:{name:"label-system-toggle","on-label":e.t("labels.labels.show")},model:{value:e.toggler,callback:function(t){e.toggler=t},expression:"toggler"}}):e._e()],1),t("p",{staticClass:"mt-10 mb-10"},[t("t",{attrs:{k:"labels.labels.description"}})],1),t("div",{class:e.columnsClass},[e._t("labels",(function(){return[[t("KeyValue",{key:"labels",attrs:{value:e.value.labels,"protected-keys":e.value.systemLabels||[],"toggle-filter":e.toggler,"add-label":e.t("labels.addLabel"),mode:e.mode,"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setLabels(t)}}})]]}),{toggler:e.toggler})],2)])]),t("div",{staticClass:"spacer"}),e.showAnnotations?t("div",{class:e.sectionClass},[t("KeyValue",{key:"annotations",attrs:{value:e.value.annotations,"add-label":e.t("labels.addAnnotation"),mode:e.mode,title:e.t("labels.annotations.title"),"title-protip":e.annotationTitleTooltip,"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setAnnotations(t)}}})],1):e._e()])},l=[],i=a("2958"),r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"toggle-container"},[t("span",{staticClass:"label no-select hand",class:{active:!e.state},on:{click:function(t){return e.toggle(!1)}}},[e._v(e._s(e.offLabel))]),t("label",{staticClass:"switch hand"},[t("input",{attrs:{type:"checkbox"},domProps:{checked:e.state},on:{input:function(t){return e.toggle(null)}}}),t("span",{staticClass:"slider round"})]),t("span",{staticClass:"label no-select hand",class:{active:e.state},on:{click:function(t){return e.toggle(!0)}}},[e._v(e._s(e.onLabel))])])},o=[],n=a("8bbf"),c=a.n(n),d=c.a.extend({props:{value:{type:[Boolean,String,Number],default:!1},offValue:{type:[Boolean,String,Number],default:!1},onValue:{type:[Boolean,String,Number],default:!0},offLabel:{type:String,default:""},onLabel:{type:String,default:""}},data(){return{state:!1}},methods:{toggle(e){this.state=null===e?!this.state:e,this.$emit("input",this.state?this.onValue:this.offValue)}},watch:{value:{handler(){this.state=this.value===this.onValue},immediate:!0}}}),u=d,p=(a("c901"),a("d802")),v=Object(p["a"])(u,r,o,!1,null,"b1a6988c",null),m=v.exports,h={components:{ToggleSwitch:m,KeyValue:i["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},displaySideBySide:{type:Boolean,default:!1},defaultContainerClass:{type:String,default:""},defaultSectionClass:{type:String,default:""},labelTitleTooltip:{type:String,default:""},annotationTitleTooltip:{type:String,default:""},showAnnotations:{type:Boolean,default:!0},showLabelTitle:{type:Boolean,default:!0}},data(){return{toggler:!1}},computed:{containerClass(){return`${this.displaySideBySide?"row":""} ${this.defaultContainerClass}`.trim()},sectionClass(){return`${this.displaySideBySide?"col span-6":"row"} ${this.defaultSectionClass}`.trim()},columnsClass(){return(""+(this.displaySideBySide?"col span-6":"row")).trim()}}},b=h,f=(a("eca1"),Object(p["a"])(b,s,l,!1,null,"0bd5f0d9",null));t["a"]=f.exports},"1f18":function(e,t,a){var s=a("f949");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("7e735633",s,!0,{sourceMap:!1,shadowMode:!1})},"1f6e":function(e,t,a){"use strict";a("9813")},"1fc2":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tip"},[t("span",{staticClass:"my-icon",class:e.icon}),e._t("default",(function(){return[t("span",{staticClass:"text"},[e._v(e._s(e.text))])]}))],2)},l=[],i={props:{icon:{type:String,default:""},text:{type:String,default:""}}},r=i,o=(a("62ed"),a("d802")),n=Object(o["a"])(r,s,l,!1,null,"60f52e79",null);t["a"]=n.exports},"1fc5":function(e,t,a){"use strict";a.r(t);var s,l,i=a("005f"),r=a("d4dd"),o={extends:r["default"],created(){this.isCreate&&(this.value.metadata.namespace="cattle-logging-system"),this.registerAfterHook(()=>{var e;const t=this.$store.getters["allNamespaces"],a=t.find(e=>"default"===e.id),s=(null===a||void 0===a?void 0:a.id)||(null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.id)||"";this.value.$dispatch("prefs/set",{key:i["m"],value:s},{root:!0})})}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},"202c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("RadioGroup",{attrs:{name:"selectNode",options:e.selectNodeOptions,mode:e.mode},on:{input:e.update},model:{value:e.selectNode,callback:function(t){e.selectNode=t},expression:"selectNode"}})],1),"nodeSelector"===e.selectNode?[t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:e.t("workload.scheduling.affinity.nodeName"),options:e.nodes||[],mode:e.mode,multiple:!1},on:{input:e.update},model:{value:e.nodeName,callback:function(t){e.nodeName=t},expression:"nodeName"}})],1)])]:"custom"===e.selectNode?[t("KeyValue",{attrs:{"key-label":e.t("generic.key"),mode:e.mode,"add-label":e.t("workload.scheduling.affinity.addNodeSelector"),"read-allowed":!1,"value-label":e.t("generic.value"),"initial-empty-row":!0},on:{input:e.update},model:{value:e.nodeSelector,callback:function(t){e.nodeSelector=t},expression:"nodeSelector"}})]:e._e()],2)},l=[],i=a("9ce4"),r=a("f032"),o=a("53fe"),n=a("2958"),c=a("b0bd"),d=a("e411"),u=a("90cd"),p={components:{RadioGroup:r["b"],LabeledSelect:o["a"],KeyValue:n["a"]},props:{value:{type:Object,default:()=>({})},nodes:{type:Array,default:()=>[]},mode:{type:String,default:"create"}},data(){const{nodeSelector:e={}}=this.value;let t="all",a="";return e[c["n"]]&&1===Object.keys(e).length?(t="nodeSelector",a=e[c["n"]]):Object.keys(e).length>0&&(t="custom"),{selectNode:t,nodeName:a,nodeSelector:e}},computed:{...Object(i["a"])({t:"i18n/t"}),selectNodeOptions(){const e=[{label:this.t("harvester.vlanConfig.scheduling.affinity.allNodes"),value:"all"},{label:this.t("harvester.vlanConfig.scheduling.affinity.specificNode"),value:"nodeSelector"},{label:this.t("harvester.vlanConfig.scheduling.affinity.schedulingRules"),value:"custom"}];return e},nics(){var e;const t=this.$store.getters["currentProduct"].inStore,a=this.$store.getters[t+"/byId"](u["b"].LINK_MONITOR,"nic")||{},s=(null===a||void 0===a||null===(e=a.status)||void 0===e?void 0:e.linkStatus)||{},l=[];return Object.keys(s).map(e=>{const t=s[e]||[];t.map(t=>{Object(d["e"])(l,"name",t.name)||t.masterIndex||l.push({...t,nodeName:e})})}),l}},methods:{update(){var e,t;const{nodeName:a,nodeSelector:s}=this;switch(this.selectNode){case"all":null===(e=this.value)||void 0===e||delete e.nodeSelector;break;case"nodeSelector":null===(t=this.value)||void 0===t||delete t.nodeSelector,Object.assign(this.value,{nodeSelector:{[c["n"]]:a}});break;case"custom":delete this.value.nodeName,delete this.value.nodeSelector,Object.assign(this.value,{nodeSelector:s});break;default:delete this.value.nodeSelector}this.$emit("updateMatchingNICs"),this.$emit("updateMatchingNodes")}}},v=p,m=a("d802"),h=Object(m["a"])(v,s,l,!1,null,null,null);t["default"]=h.exports},"203a":function(e,t,a){var s=a("810e");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("5eb4fbd8",s,!0,{sourceMap:!1,shadowMode:!1})},"203b":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[e._t("prefix",(function(){return[e.prefixLabel?t("t",{attrs:{k:e.prefixLabel,raw:!0}}):e._e(),e._v(" "+e._s(e.prefix)+" ")]})),t("nuxt-link",{attrs:{to:e.to,target:e.target}},[e._t("middle",(function(){return[e.middleLabel?t("t",{attrs:{k:e.middleLabel,raw:!0}}):e._e(),e._v(" "+e._s(e.middle)+" ")]}))],2),e._t("suffix",(function(){return[e.suffixLabel?t("t",{attrs:{k:e.suffixLabel,raw:!0}}):e._e(),e._v(" "+e._s(e.suffix)+" ")]}))],2)},l=[],i={props:{to:{type:[String,Object],required:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},middle:{type:String,default:""},prefixLabel:{type:String,default:""},suffixLabel:{type:String,default:""},middleLabel:{type:String,default:""},target:{type:String,default:"self"}}},r=i,o=a("d802"),n=Object(o["a"])(r,s,l,!1,null,null,null);t["a"]=n.exports},2071:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("CruResource",{attrs:{"done-route":e.doneRoute,mode:e.mode,resource:e.value,subtypes:[],"validation-passed":!0,"apply-hooks":e.applyHooks,errors:e.errors},on:{error:t=>e.errors=t,finish:e.save,cancel:e.done}},[t("NameNsDescription",{attrs:{namespaced:!1,value:e.value,mode:e.mode,"register-before-hook":e.registerBeforeHook}}),t("LabeledSelect",{staticClass:"mb-20",attrs:{value:e.value.provisioner,label:"Provisioner",options:e.provisioners,"localized-label":!0,mode:e.modeOverride,searchable:!0,taggable:!0},on:{input:function(t){return e.updateProvisioner(t)}}}),t("Tabbed",{attrs:{"side-tabs":!0}},[t("Tab",{attrs:{name:"parameters",label:e.t("storageClass.parameters.label"),weight:2}},[t(e.getComponent(e.value.provisioner),{key:e.value.provisioner,tag:"component",attrs:{value:e.value,mode:e.modeOverride,"real-mode":e.realMode}})],1),t("Tab",{attrs:{name:"customize",label:e.t("storageClass.customize.label")}},[t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-6"},[t("RadioGroup",{attrs:{name:"reclaimPolicy",label:e.t("storageClass.customize.reclaimPolicy.label"),mode:e.modeOverride,options:e.reclaimPolicyOptions},model:{value:e.value.reclaimPolicy,callback:function(t){e.$set(e.value,"reclaimPolicy",t)},expression:"value.reclaimPolicy"}})],1),t("div",{staticClass:"col span-6"},[t("RadioGroup",{attrs:{name:"allowVolumeExpansion",label:e.t("storageClass.customize.allowVolumeExpansion.label"),mode:e.modeOverride,options:e.allowVolumeExpansionOptions},model:{value:e.value.allowVolumeExpansion,callback:function(t){e.$set(e.value,"allowVolumeExpansion",t)},expression:"value.allowVolumeExpansion"}})],1)]),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-6"},[t("RadioGroup",{attrs:{name:"volumeBindingMode",label:e.t("storageClass.customize.volumeBindingMode.label"),mode:e.modeOverride,options:e.volumeBindingModeOptions},model:{value:e.value.volumeBindingMode,callback:function(t){e.$set(e.value,"volumeBindingMode",t)},expression:"value.volumeBindingMode"}})],1)])]),t("Tab",{attrs:{name:"allowedTopologies",label:e.t("harvester.storage.allowedTopologies.title"),weight:-1,tooltip:e.t("harvester.storage.allowedTopologies.tooltip")}},[t("ArrayList",{attrs:{"default-add-value":e.defaultAddValue,"initial-empty-row":!0,"show-header":!0,mode:e.modeOverride},scopedSlots:e._u([{key:"column-headers",fn:function(){return[t("div",{staticClass:"box"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-4 key"},[e._v(" "+e._s(e.t("generic.key"))+" "),t("span",{staticClass:"required"},[e._v("*")])]),t("div",{staticClass:"col span-8 value"},[e._v(" "+e._s(e.t("generic.value"))+" ")])])])]},proxy:!0},{key:"columns",fn:function(a){return[t("div",{staticClass:"row custom-headers"},[t("div",{staticClass:"col span-4 key"},[t("LabeledInput",{attrs:{required:!0,mode:e.modeOverride},model:{value:a.row.value.key,callback:function(t){e.$set(a.row.value,"key",t)},expression:"scope.row.value.key"}})],1),t("div",{staticClass:"col span-8 value"},[t("Tags",{attrs:{"add-label":e.t("generic.add"),mode:e.modeOverride},model:{value:a.row.value.values,callback:function(t){e.$set(a.row.value,"values",t)},expression:"scope.row.value.values"}})],1)])]}}]),model:{value:e.allowedTopologies,callback:function(t){e.allowedTopologies=t},expression:"allowedTopologies"}})],1)],1)],1)},l=[],i=a("c78c"),r=a("2e2b"),o=a("65b0"),n=a("32cf"),c=a("da9e"),d=a("5ef9"),u=a("ad61"),p=a("f032"),v=a("d076"),m=a("53fe"),h=a("70a6"),b=a("d6a6"),f=a("d441"),g=a("56a4"),y=a("90cd"),C=a("b837"),k=a("1832");const w="driver.longhorn.io";var x={name:"HarvesterStorage",components:{ArrayList:c["a"],CruResource:r["a"],LabeledSelect:m["a"],LabeledInput:v["a"],NameNsDescription:o["a"],RadioGroup:p["b"],Tab:d["a"],Tabbed:u["a"],Loading:h["a"],Tags:n["a"]},mixins:[i["a"]],data(){var e,t;const a=[{label:this.t("storageClass.customize.reclaimPolicy.delete"),value:"Delete"},{label:this.t("storageClass.customize.reclaimPolicy.retain"),value:"Retain"}],s=[{label:this.t("generic.enabled"),value:!0},{label:this.t("generic.disabled"),value:!1}],l=[{label:this.t("storageClass.customize.volumeBindingMode.now"),value:"Immediate"},{label:this.t("harvester.storage.customize.volumeBindingMode.later"),value:"WaitForFirstConsumer"}],i=Object(k["e"])((null===(e=this.value.allowedTopologies)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.matchLabelExpressions)||[]);return this.$set(this.value,"parameters",this.value.parameters||{}),this.$set(this.value,"provisioner",this.value.provisioner||w),this.$set(this.value,"allowVolumeExpansion",this.value.allowVolumeExpansion||s[0].value),this.$set(this.value,"reclaimPolicy",this.value.reclaimPolicy||a[0].value),this.$set(this.value,"volumeBindingMode",this.value.volumeBindingMode||l[0].value),{reclaimPolicyOptions:a,allowVolumeExpansionOptions:s,volumeBindingModeOptions:l,mountOptions:[],provisioner:w,STORAGE_CLASS:g["O"],allowedTopologies:i,defaultAddValue:{key:"",values:[]}}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={storages:this.$store.dispatch(e+"/findAll",{type:g["O"]}),longhornNodes:this.$store.dispatch(e+"/findAll",{type:g["s"].NODES}),csiDrivers:this.$store.dispatch(e+"/findAll",{type:y["a"]})};await Object(C["a"])(t)},computed:{showUnsupportedStorage:Object(f["d"])(f["c"]),inStore(){return this.$store.getters["currentProduct"].inStore},modeOverride(){return this.isCreate?b["z"]:b["I"]},provisionerWatch(){return this.value.provisioner},provisioners(){const e=this.$store.getters[this.inStore+"/all"](y["a"])||[],t={[w]:"storageClass.longhorn.title"};return e.map(e=>({label:t[e.name]||e.name,value:e.name}))},schema(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[e+"/schemaFor"](g["O"])}},watch:{provisionerWatch(){this.$set(this.value,"parameters",{})}},created(){this.registerBeforeHook(this.willSave,"willSave")},methods:{getComponent(e){try{return a("8101")("./"+e).default}catch{return a("ba1a").default}},updateProvisioner(e){this.$set(this.value,"provisioner",e),this.$set(this.value,"allowVolumeExpansion",e===w)},willSave(){Object.keys(this.value.parameters).forEach(e=>{null!==this.value.parameters[e]&&""!==this.value.parameters[e]||delete this.value.parameters[e]}),this.formatAllowedTopoloties()},formatAllowedTopoloties(){const e=this.allowedTopologies;if(!e||0===e.length)return void delete this.value.allowedTopologies;const t=e.filter(e=>!!e.key.trim()&&e.values.length>0&&!e.values.find(e=>!e.trim()));t.length>0&&(this.value.allowedTopologies=[{matchLabelExpressions:t}])}}},S=x,_=(a("8785"),a("d802")),O=Object(_["a"])(S,s,l,!1,null,"2d583d26",null);t["default"]=O.exports},"20e2":function(e,t,a){"use strict";a("3e9e")},2171:function(e,t,a){var s=a("fcb2");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("b7874d40",s,!0,{sourceMap:!1,shadowMode:!1})},2378:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".custom-headers[data-v-2d583d26]{align-items:center}",""]),e.exports=t},"23eb":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"restore"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"mb-20"},[t("RadioGroup",{attrs:{name:"model",options:[!0,!1],labels:[e.t("harvester.backup.restore.createNew"),e.t("harvester.backup.restore.replaceExisting")],disabled:e.disableExisting,mode:e.mode},model:{value:e.restoreNewVm,callback:function(t){e.restoreNewVm=t},expression:"restoreNewVm"}})],1),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{disabled:!e.restoreNewVm,label:e.t("nameNsDescription.namespace.label"),options:e.namespaces},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{disabled:!e.restoreNewVm,label:e.t("harvester.backup.restore.virtualMachineName"),placeholder:e.t("nameNsDescription.name.placeholder")},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),t("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.backup.restore.backup"),options:e.backupOption},model:{value:e.backupName,callback:function(t){e.backupName=t},expression:"backupName"}}),e.restoreNewVm?t("Checkbox",{attrs:{type:"checkbox",label:e.t("harvester.backup.restore.keepMacAddress")},model:{value:e.restoreResource.spec.keepMacAddress,callback:function(t){e.$set(e.restoreResource.spec,"keepMacAddress",t)},expression:"restoreResource.spec.keepMacAddress"}}):e._e(),e.restoreNewVm?e._e():t("LabeledSelect",{attrs:{label:e.t("harvester.backup.restore.deletePreviousVolumes"),options:e.deletionPolicyOption},model:{value:e.deletionPolicy,callback:function(t){e.deletionPolicy=t},expression:"deletionPolicy"}})],1),t("Footer",{staticClass:"footer",attrs:{mode:"create",errors:e.errors},on:{save:e.saveRestore,done:e.done}})],1)},l=[],i=a("9aaf"),r=a("f032"),o=a("d444"),n=a("fd22"),c=a("53fe"),d=a("c78c"),u=a("b837"),p=a("3792"),v=a("90cd"),m=a("7592"),h=a("1832"),b=a("e603");const f={apiVersion:"harvesterhci.io/v1beta1",kind:"VirtualMachineRestore",metadata:{name:"",namespace:""},type:v["b"].RESTORE,spec:{target:{apiGroup:"kubevirt.io",kind:"VirtualMachine",name:""},virtualMachineBackupName:"",newVM:!0,deletionPolicy:"delete"}};var g={name:"CreateRestore",components:{Checkbox:n["a"],Footer:i["a"],RadioGroup:r["b"],LabeledInput:o["a"],LabeledSelect:c["a"]},mixins:[d["a"]],async fetch(){await Object(u["a"])({backups:this.$store.dispatch("harvester/findAll",{type:v["b"].BACKUP}),vms:this.$store.dispatch("harvester/findAll",{type:v["b"].VM})})},data(){var e,t;const a=null===(e=this.$route.query)||void 0===e?void 0:e.restoreMode,s=null===(t=this.$route.query)||void 0===t?void 0:t.resourceName,l=Object(h["e"])(f),i="new"===a||void 0===a;return{backupName:s,restoreNewVm:i,restoreResource:l,name:"",description:"",deletionPolicy:"delete",namespace:""}},computed:{backupOption(){const e=this.$store.getters["harvester/all"](v["b"].BACKUP);return e.filter(e=>{var t,a;const s=this.restoreNewVm||e.attachVmExisting;return s&&(null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.readyToUse)&&(null===(a=e.spec)||void 0===a?void 0:a.type)!==b["a"].SNAPSHOT}).map(e=>({label:e.metadata.name,value:e.metadata.name}))},deletionPolicyOption(){return[{value:"delete",label:"Delete"},{value:"retain",label:"Retain"}]},currentBackupResource(){const e=this.backupName,t=this.$store.getters["harvester/all"](v["b"].BACKUP);return t.find(t=>t.name===e)},disableExisting(){var e;return!(null!==(e=this.currentBackupResource)&&void 0!==e&&e.attachVmExisting)},backupNamespace(){var e,t;const a=this.$store.getters["harvester/all"](v["b"].BACKUP);return null===(e=a.find(e=>e.metadata.name===this.backupName))||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.namespace},namespaces(){const e=this.$store.getters["allNamespaces"],t=Object(m["b"])(e.map(e=>({label:e.nameDisplay,value:e.id})),"label");return t}},watch:{backupName:{handler(e){var t;this.currentBackupResource&&(this.restoreNewVm||(this.name=null===this||void 0===this||null===(t=this.currentBackupResource)||void 0===t?void 0:t.attachVM));this.restoreResource.spec.virtualMachineBackupName=e},immediate:!0},restoreNewVm(e){var t;e?this.name="":this.name=null===this||void 0===this||null===(t=this.currentBackupResource)||void 0===t?void 0:t.attachVM},backupNamespace:{handler(e){this.namespace=e},immediate:!0}},methods:{async saveRestore(e){this.update();const t=await this.$store.dispatch("harvester/create",this.restoreResource);t.metadata.namespace=this.namespace,t.spec.virtualMachineBackupNamespace=this.backupNamespace;try{await t.save(),e(!0),this.$router.push({name:this.doneRoute,params:{resource:v["b"].VM}})}catch(a){this.errors=Object(p["c"])(a)||a,e(!1)}},update(){this.restoreResource.metadata.generateName=`restore-${this.backupName}-`,this.name&&(this.restoreResource.spec.target.name=this.name),this.restoreNewVm?(delete this.restoreResource.spec.deletionPolicy,this.restoreResource.spec.newVM=!0):(this.restoreResource.spec.deletionPolicy=this.deletionPolicy,delete this.restoreResource.spec.newVM,delete this.restoreResource.spec.keepMacAddress)}},componentTitle(){return"restoreVM"}},y=g,C=(a("ef85"),a("d802")),k=Object(C["a"])(y,s,l,!1,null,"8036f512",null);t["default"]=k.exports},2456:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.oldFormatDevices.length>0?t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("Banner",{attrs:{color:"warning"}},[t("p",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("harvester.pci.oldFormatDevices.help",{oldFormatDevicesHTML:e.oldFormatDevicesHTML},!0),expression:"t('harvester.pci.oldFormatDevices.help', {oldFormatDevicesHTML}, true)"}]})])],1)]):t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("Banner",{attrs:{color:"info"}},[t("t",{attrs:{k:"harvester.pci.howToUseDevice"}})],1),e.selectedDevices.length>0?t("Banner",{attrs:{color:"info"}},[t("t",{attrs:{k:"harvester.pci.deviceInTheSameHost"}})],1):e._e()],1)]),e.enabledDevices.length?[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:"Available PCI Devices",searchable:"",multiple:"",taggable:"",options:e.deviceOpts,mode:e.mode},scopedSlots:e._u([{key:"option",fn:function(a){return[t("span",[e._v(e._s(a.value)+" "),t("span",{staticClass:"text-label"},[e._v("("+e._s(a.displayLabel)+")")])])]}}],null,!1,975880344),model:{value:e.selectedDevices,callback:function(t){e.selectedDevices=t},expression:"selectedDevices"}})],1)]),e.compatibleNodes.length&&e.selectedDevices.length?t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12 text-muted"},[e._v(" Compatible hosts: "),e._l(e.compatibleNodes,(function(a,s){return t("span",{key:a},[e._v(e._s(a)+e._s(s<e.compatibleNodes.length-1?", ":""))])}))],2)]):e.selectedDevices.length?t("div",{staticClass:"text-error"},[e._v(" "+e._s(e.t("harvester.pci.impossibleSelection"))+" ")]):e._e(),t("button",{staticClass:"btn btn-sm role-link pl-0",attrs:{type:"button"},on:{click:t=>{e.showMatrix=!e.showMatrix,t.target.blur()}}},[e._v(" "+e._s(e.showMatrix?e.t("harvester.pci.hideCompatibility"):e.t("harvester.pci.showCompatibility"))+" ")]),e.showMatrix?t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-12"},[t("CompatibilityMatrix",{attrs:{"enabled-devices":e.enabledDevices,"devices-by-node":e.devicesByNode,"devices-in-use":e.devicesInUse}})],1)]):e._e()]:e._e(),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-12"},[t("DeviceList",{attrs:{schema:e.pciDeviceSchema,devices:e.pciDevices},on:{submit:function(e){e.preventDefault()}}})],1)])],2)])},l=[],i=a("d6a6"),r=a("b837"),o=a("90cd"),n=a("53fe"),c=a("2a88"),d=a("f671"),u=a("9a01"),p=a("9274"),v=a.n(p),m=a("1832"),h={name:"VirtualMachinePCIDevices",components:{LabeledSelect:n["a"],DeviceList:u["default"],CompatibilityMatrix:d["default"],Banner:c["a"]},props:{mode:{type:String,default:i["B"]},value:{type:Object,default:()=>{}},vm:{type:Object,default:()=>{}}},async fetch(){var e,t,a;const s={pciDevices:this.$store.dispatch("harvester/findAll",{type:o["b"].PCI_DEVICE}),claims:this.$store.dispatch("harvester/findAll",{type:o["b"].PCI_CLAIM}),vms:this.$store.dispatch("harvester/findAll",{type:o["b"].VM})},l=await Object(r["a"])(s);for(const r in l)this[r]=l[r];const i=[],n=[];((null===(e=this.value)||void 0===e||null===(t=e.domain)||void 0===t||null===(a=t.devices)||void 0===a?void 0:a.hostDevices)||[]).forEach(({name:e,deviceName:t})=>{var a;const s=null===(a=(t||"").split("/"))||void 0===a?void 0:a[1];s&&e.includes(s)?n.push(e):this.enabledDevices.find(t=>{var a;return(null===t||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.name)===e})&&i.push(e)}),n.length>0?this.oldFormatDevices=n:this.selectedDevices=i},data(){return{pciDevices:[],claims:[],vms:[],selectedDevices:[],pciDeviceSchema:this.$store.getters["harvester/schemaFor"](o["b"].PCI_DEVICE),showMatrix:!1,oldFormatDevices:[]}},watch:{selectedDevices(e){const t=e.map(e=>{var t;const a=this.enabledDevices.find(t=>t.metadata.name===e),s=null===a||void 0===a||null===(t=a.status)||void 0===t?void 0:t.resourceName;return{deviceName:s,name:null===a||void 0===a?void 0:a.metadata.name}});Object(m["j"])(this.value.domain.devices,"hostDevices",t)}},computed:{enabledDevices(){return this.pciDevices.filter(e=>e.isEnabled&&e.claimedByMe)||[]},devicesInUse(){const e=this.vms.reduce((e,t)=>{var a,s;if(t.metadata.name===(null===(a=this.vm)||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.name))return e;const l=Object(m["g"])(t,"spec.template.spec.domain.devices.hostDevices")||[];return l.forEach(a=>{e[a.name]={usedBy:[t.metadata.name]}}),e},{});return e},devicesByNode(){const e={};return this.enabledDevices.forEach(t=>{var a;const s=null===(a=t.status)||void 0===a?void 0:a.nodeName;e[s]?e[s].push(t):e[s]=[t]}),e},compatibleNodes(){const e=[...Object.keys(this.devicesByNode)];return this.selectedDevices.forEach(t=>{v()(e,e=>{const a=this.enabledDevices.find(e=>e.metadata.name===t);return a.status.nodeName!==e})}),e},deviceOpts(){const e=this.enabledDevices.filter(e=>{if(this.selectedDevices.length>0){const t=this.enabledDevices.find(e=>e.metadata.name===this.selectedDevices[0]);return!this.devicesInUse[null===e||void 0===e?void 0:e.metadata.name]&&e.status.nodeName===t.status.nodeName}return!this.devicesInUse[null===e||void 0===e?void 0:e.metadata.name]});return e.map(e=>{var t;return{value:null===e||void 0===e?void 0:e.metadata.name,label:null===e||void 0===e?void 0:e.metadata.name,displayLabel:null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.resourceName}})},oldFormatDevicesHTML(){return this.oldFormatDevices.map(e=>`<li>${e}</li>`).join("")}},methods:{nodeNameFromUid(e){for(const t in this.uniqueDevices){const a=this.uniqueDevices[t].nodes,s=a.find(t=>t.systemUUID===e);if(s)return s.name}}}},b=h,f=a("d802"),g=Object(f["a"])(b,s,l,!1,null,null,null);t["default"]=g.exports},2525:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".box[data-v-985ef200]{position:relative;padding-top:40px}.remove[data-v-985ef200]{position:absolute;top:10px;right:10px;padding:0}",""]),e.exports=t},"273f":function(e,t,a){"use strict";a("d013")},"281a":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".header[data-v-65e6855e]{display:flex;justify-content:flex-end}",""]),e.exports=t},"28fb":function(e,t,a){"use strict";a("b9b4")},"293a":function(e,t,a){"use strict";a("7c61")},"2a1a":function(e,t,a){var s=a("af59");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("593638f4",s,!0,{sourceMap:!1,shadowMode:!1})},"2a79":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.input.sshKey"),taggable:!0,mode:e.mode,multiple:!0,searchable:e.searchable,disabled:e.disabled,options:e.sshOption},on:{input:e.update},model:{value:e.checkedSsh,callback:function(t){e.checkedSsh=t},expression:"checkedSsh"}}),t("ModalWithCard",{ref:e.randomStr,attrs:{name:e.randomStr,width:"40%",errors:e.errors},on:{finish:e.save,close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.sshTitle"))+" ")]},proxy:!0},{key:"content",fn:function(){return[t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.name"),required:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:e.sshName,callback:function(t){e.sshName=t},expression:"sshName"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.sshKeyValue"),"min-height":160,type:"multiline",required:""},model:{value:e.publicKey,callback:function(t){e.publicKey=t},expression:"publicKey"}})]},proxy:!0}])})],1)},l=[],i=a("9ce4"),r=a("06f6"),o=a("d444"),n=a("53fe"),c=a("5fe4"),d=a("90cd"),u=a("1832"),p=a("d6a6");const v="_NEW";var m={components:{LabeledInput:o["a"],ModalWithCard:c["a"],LabeledSelect:n["a"]},props:{value:{type:Array,default:()=>[]},mode:{type:String,default:"create"},disableCreate:{type:Boolean,default:!1},namespace:{type:String,default:""},searchable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},data(){return{checkedSsh:this.value,publicKey:"",sshName:"",randomStr:Object(r["p"])(5).toLowerCase(),errors:[],isAll:!1,checkAll:!1}},computed:{...Object(i["a"])({t:"i18n/t"}),schema(){return this.$store.getters["harvester/schemaFor"](d["b"].SSH)},isCreatable(){var e;return!(this.schema&&(null===(e=this.schema)||void 0===e||!e.collectionMethods.find(e=>["blocked-post","post"].includes(e.toLowerCase()))))},sshOption(){const e=this.$store.getters["harvester/all"](d["b"].SSH).map(e=>({label:e.id,value:e.id}));return!this.disableCreate&&this.mode!==p["I"]&&this.isCreatable&&e.unshift({label:this.t("harvester.virtualMachine.createSSHKey"),value:v}),e}},watch:{publicKey(e){const t=e.split(/\s+/);3===t.length&&t[2].includes("@")&&t[2].split("@")&&(this.sshName||(this.sshName=t[2].split("@")[0]))},value(e){this.checkedSsh=e},checkedSsh(e,t){e.includes(v)&&(this.$set(this,"checkedSsh",t),this.update(),this.show())}},methods:{show(){this.$modal.show(this.randomStr)},hide(){this.$modal.hide(this.randomStr)},async save(e){if(this.errors=[],!this.sshName){const e=this.t("harvester.virtualMachine.input.name"),t=this.t("validation.required",{key:e});this.errors.push(t)}if(!this.publicKey){const e=this.t("harvester.virtualMachine.input.sshKeyValue"),t=this.t("validation.required",{key:e});this.errors.push(t)}if(this.sshName.length>63){const e=this.t("harvester.validation.custom.tooLongName",{max:63});this.errors.push(e)}if(this.errors.length>0)e(!1);else try{const t=await this.$store.dispatch("harvester/create",{metadata:{name:this.sshName,namespace:this.namespace},spec:{publicKey:this.publicKey},type:d["b"].SSH}),a=await t.save();a.id&&this.checkedSsh.push(`${this.namespace}/${this.sshName}`),e(!0),this.cancel()}catch(t){this.errors=[t.message],e(!1)}},cancel(){this.hide(),this.resetFields()},resetFields(){this.sshName="",this.publicKey="",this.errors=[]},update(){this.$emit("update:sshKey",Object(u["e"])(this.checkedSsh))}}},h=m,b=a("d802"),f=Object(b["a"])(h,s,l,!1,null,null,null);t["default"]=f.exports},"2aaa":function(e,t,a){"use strict";var s=a("8bbf"),l=a.n(s),i=a("d6a6");const r=l.a.component("InputOrDisplay",{render(e){return this.isView?e("div",{attrs:{class:"label"}},[e("div",{attrs:{class:"text-label"}},this.$slots.name?this.$slots.name:this.name),e("div",{attrs:{class:"value"}},this.$slots.value?this.$slots.value:this.displayValue)]):this.$slots.default},props:{name:{type:String,required:!0},value:{type:[Number,String,Array,void 0],default:""},mode:{type:String,default:"edit"}},computed:{isView(){return this.mode===i["I"]},displayValue(){return Array.isArray(this.value)&&0===this.value.length?"":this.value}}});var o,n,c=r,d=c,u=(a("42e9"),a("d802")),p=Object(u["a"])(d,o,n,!1,null,"16d50992",null);t["a"]=p.exports},"2eeb":function(e,t,a){"use strict";a("9cb4")},3169:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".node-selector{position:relative}",""]),e.exports=t},"32cf":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"label"},[t("div",{staticClass:"text-label"},[e.labelKey?t("t",{attrs:{k:e.labelKey}}):e.label?[e._v(" "+e._s(e.label)+" ")]:e._e()],2)]),t("div",{staticClass:"mt-10"},[e._l(e.value,(function(a){return t("Tag",{key:a,staticClass:"tag"},[t("span",[e._v(" "+e._s(a)+" ")]),e.canRemove?t("i",{staticClass:"icon icon-close ml-5 icon-sm",on:{click:t=>e.onRemoveTag(a)}}):e._e()])})),e.addVisible&&!e.inputVisible?t("span",{staticClass:"tag add",on:{click:e.onClickPlusButton}},[t("i",{staticClass:"icon icon-plus icon-sm"}),t("span",[e.addLabelKey?t("t",{attrs:{k:e.addLabelKey}}):e.addLabel?[e._v(" "+e._s(e.addLabel)+" ")]:e._e()],2)]):e.addVisible&&e.inputVisible?t("span",{staticClass:"tag input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"addTagInput",attrs:{type:"text",size:"small"},domProps:{value:e.inputValue},on:{blur:e.confirmAdd,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.confirmAdd.apply(null,arguments))},input:function(t){t.target.composing||(e.inputValue=t.target.value)}}})]):e._e()],2)])},l=[],i=a("d6a6"),r=a("dde8"),o={name:"Tags",components:{Tag:r["a"]},props:{value:{type:Array,required:!0},label:{type:String,default:""},labelKey:{type:String,default:""},addLabel:{type:String,default:""},addLabelKey:{type:String,default:""},canAdd:{type:Boolean,default:!0},mode:{type:String,default:i["z"]},disabled:{type:Boolean,default:!1}},data(){return{tags:this.value,inputVisible:!1,inputValue:""}},computed:{isCreate(){return this.mode===i["z"]},isView(){return this.mode===i["I"]},isEdit(){return this.mode===i["B"]},canRemove(){return!this.isView},addVisible(){return this.canAdd&&!this.isView}},methods:{onClickPlusButton(){this.inputVisible=!0,this.$nextTick(()=>{this.$refs.addTagInput&&this.$refs.addTagInput.focus()})},confirmAdd(){this.inputValue&&!this.value.includes(this.inputValue)&&(this.tags.push(this.inputValue),this.$emit("input",this.tags)),this.inputValue="",this.inputVisible=!1},onRemoveTag(e){this.tags=this.tags.filter(t=>t!==e),this.$emit("input",this.tags)}}},n=o,c=(a("b6d3"),a("d802")),d=Object(c["a"])(n,s,l,!1,null,"3dbf0e5d",null);t["a"]=d.exports},3378:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".row{margin-bottom:5px}",""]),e.exports=t},"340e7":function(e,t,a){var s=a("155d");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("6ede5dd2",s,!0,{sourceMap:!1,shadowMode:!1})},"3443a":function(e,t,a){"use strict";a("16a3")},"34bc":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"disk",on:{input:e.update}},[t("div",{staticClass:"mt-10"}),e.mountedMessage&&e.isProvisioned?t("Banner",{attrs:{color:"error",label:e.mountedMessage}}):e._e(),e.isFormatting?t("Banner",{attrs:{color:"info",label:e.t("harvester.host.disk.fileSystem.formatting")}}):e.isFormatted&&!e.isCorrupted?t("Banner",{attrs:{color:"info",label:e.formattedBannerLabel}}):e._e(),e.value.isNew?e._e():t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("Tags",{attrs:{label:e.t("harvester.host.disk.tags.label"),"add-label":e.t("harvester.host.disk.tags.addLabel"),mode:e.mode},model:{value:e.value.tags,callback:function(t){e.$set(e.value,"tags",t)},expression:"value.tags"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-12"},[t("div",{staticClass:"pull-right"},[e._v(" "+e._s(e.t("harvester.host.disk.conditions"))+": "),t("BadgeState",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.readyCondition.message,expression:"readyCondition.message"}],staticClass:"mr-10 ml-10 state",attrs:{color:"True"===e.readyCondition.status?"bg-success":"bg-error",icon:"True"===e.readyCondition.status?"icon-checkmark":"icon-warning",label:"Ready"}}),t("BadgeState",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.schedulableCondition.message,expression:"schedulableCondition.message"}],staticClass:"mr-10 state",attrs:{color:"True"===e.schedulableCondition.status?"bg-success":"bg-error",icon:"True"===e.schedulableCondition.status?"icon-checkmark":"icon-warning",label:"Schedulable"}}),e.provisionPhase.label?t("BadgeState",{staticClass:"mr-10 state",attrs:{color:e.provisionPhase.color,icon:e.provisionPhase.icon,label:e.provisionPhase.label}}):e._e()],1)])]),e.value.isNew?e._e():t("div",{staticClass:"row mt-30"},[t("div",{staticClass:"col flex span-12"},[t("LabelValue",{attrs:{name:e.t("harvester.host.disk.storageAvailable.label"),value:e.value.storageAvailable}}),t("LabelValue",{attrs:{name:e.t("harvester.host.disk.storageScheduled.label"),value:e.value.storageScheduled}}),t("LabelValue",{attrs:{name:e.t("harvester.host.disk.storageMaximum.label"),value:e.value.storageMaximum}})],1)]),t("hr",{staticClass:"mt-10"})]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-12"},[t("LabeledInput",{attrs:{label:e.t("generic.name"),disabled:!0},model:{value:e.value.displayName,callback:function(t){e.$set(e.value,"displayName",t)},expression:"value.displayName"}})],1)]),e.value.isNew&&!e.isFormatted||e.isCorrupted?t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("RadioGroup",{attrs:{mode:e.mode,name:"forceFormatted","label-key":"harvester.host.disk.forceFormatted.label",labels:[e.t("generic.no"),e.t("harvester.host.disk.forceFormatted.yes")],options:[!1,!0],disabled:e.forceFormattedDisabled,"tooltip-key":"harvester.host.disk.forceFormatted.toolTip"},scopedSlots:e._u([{key:"1",fn:function({option:a,listeners:s}){return[t("RadioButton",e._g({attrs:{label:a.label,val:a.value,value:e.value.forceFormatted,disabled:e.forceFormattedDisabled&&!e.value.forceFormatted}},s))]}}],null,!1,1939983621),model:{value:e.value.forceFormatted,callback:function(t){e.$set(e.value,"forceFormatted",t)},expression:"value.forceFormatted"}})],1)]):e._e()],1)},l=[],i=a("d444"),r=a("eb32"),o=a("57ab"),n=a("dffb"),c=a("f032"),d=a("1e8f"),u=a("32cf"),p=a("90cd"),v=a("5fdb"),m={components:{LabeledInput:i["a"],LabelValue:r["a"],BadgeState:o["a"],Banner:n["a"],RadioGroup:c["b"],RadioButton:c["a"],Tags:u["a"]},mixins:[d["a"]],props:{value:{type:Object,default:()=>({})},disks:{type:Array,default:()=>[]},mode:{type:String,default:"edit"}},data(){return{}},computed:{allowSchedulingOptions(){return[{label:this.t("generic.enabled"),value:!0},{label:this.t("generic.disabled"),value:!1}]},evictionRequestedOptions(){return[{label:this.t("generic.yes"),value:!0},{label:this.t("generic.no"),value:!1}]},mountedMessage(){var e,t;const a=(null===(e=this.blockDevice)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.state)||{};return null!==a&&void 0!==a&&a.error?null===a||void 0===a?void 0:a.message:""},isProvisioned(){var e;return null===(e=this.blockDevice)||void 0===e?void 0:e.spec.fileSystem.provisioned},forceFormattedDisabled(){var e,t,a,s,l,i,r,o,n;const c=null===(e=this.blockDevice)||void 0===e||null===(t=e.status)||void 0===t||null===(a=t.deviceStatus)||void 0===a||null===(s=a.fileSystem)||void 0===s?void 0:s.LastFormattedAt,d=null===(l=this.blockDevice)||void 0===l||null===(i=l.status)||void 0===i||null===(r=i.deviceStatus)||void 0===r?void 0:r.fileSystem.type,u=["ext4","XFS"];return!!(c||(null===(o=this.blockDevice)||void 0===o||null===(n=o.childParts)||void 0===n?void 0:n.length)>0)||!u.includes(d)&&(!d||!this.canEditPath)},canEditPath(){return!!this.mountedMessage||!(!this.value.isNew||this.value.originPath)},isFormatted(){var e,t,a,s;return!(null===(e=this.blockDevice)||void 0===e||null===(t=e.status)||void 0===t||null===(a=t.deviceStatus)||void 0===a||null===(s=a.fileSystem)||void 0===s||!s.LastFormattedAt)},formattedBannerLabel(){var e,t,a,s;const l=null===(e=this.blockDevice)||void 0===e||null===(t=e.status)||void 0===t||null===(a=t.deviceStatus)||void 0===a||null===(s=a.fileSystem)||void 0===s?void 0:s.type,i=this.t("harvester.host.disk.lastFormattedAt.info");return l?`${i} ${this.t("harvester.host.disk.fileSystem.info",{system:l})}`:i},provisionPhase(){var e;return(null===(e=this.blockDevice)||void 0===e?void 0:e.provisionPhase)||{}},blockDevice(){var e;const t=this.$store.getters["currentProduct"].inStore,a=null===(e=this.value)||void 0===e?void 0:e.name;return this.$store.getters[t+"/byId"](p["b"].BLOCK_DEVICE,`${v["LONGHORN_SYSTEM"]}/${a}`)||{}},isCorrupted(){var e,t,a,s;return null===(e=this.blockDevice)||void 0===e||null===(t=e.status)||void 0===t||null===(a=t.deviceStatus)||void 0===a||null===(s=a.fileSystem)||void 0===s?void 0:s.corrupted},isFormatting(){return this.blockDevice.isFormatting}},methods:{update(){this.$emit("input",this.value)}}},h=m,b=(a("5590"),a("d802")),f=Object(b["a"])(h,s,l,!1,null,"6ec505b0",null);t["default"]=f.exports},"352a":function(e,t,a){"use strict";a("1f18")},"3597b":function(e,t,a){"use strict";a("5c6b")},"35a9":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"#restore[data-v-19c2a6b2]{flex-grow:1;flex-direction:column}#restore[data-v-19c2a6b2],#restore[data-v-19c2a6b2] .radio-group{display:flex}#restore[data-v-19c2a6b2] .radio-group .radio-container{margin-right:30px}#restore .content[data-v-19c2a6b2]{flex-grow:1}#restore .footer[data-v-19c2a6b2]{border-top:var(--header-border-size) solid var(--header-border);margin-left:-20px;margin-right:-20px;margin-bottom:-20px;padding:10px 20px}#restore .footer[data-v-19c2a6b2] .spacer-small{padding:0}",""]),e.exports=t},"374e":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".compat-matrix,.device-col{display:flex}.device-col{flex-direction:column;border-right:1px solid var(--border)}.device-col>*{border-bottom:1px solid var(--border)}.compat-cell{flex-basis:1em;padding:0 10px 0 10px}.compat-cell.has-device{background-color:var(--info-banner-bg)}.device-label,.node-label{display:flex;align-items:center;color:var(--input-label)}.node-label{padding:0 10px;justify-content:center}.blank-corner,.compat-cell,.device-label,.node-label{flex-basis:calc(2em + 10px)}.blank-corner{background:linear-gradient(to top right,#fff 0,#fff calc(50% - 1px),var(--body-text) 50%,#fff calc(50% + 1px),#fff)}.blank-corner DIV.text-right{padding-left:80px}",""]),e.exports=t},"3ab0":function(e,t,a){var s=a("4f5e");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("03f499c0",s,!0,{sourceMap:!1,shadowMode:!1})},"3db4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("harvester.storage.parameters.numberOfReplicas.label"),required:!0,mode:e.mode,min:"1",max:"3",type:"number"},model:{value:e.numberOfReplicas,callback:function(t){e.numberOfReplicas=t},expression:"numberOfReplicas"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("harvester.storage.parameters.staleReplicaTimeout.label"),required:!0,mode:e.mode,type:"number"},model:{value:e.value.parameters.staleReplicaTimeout,callback:function(t){e.$set(e.value.parameters,"staleReplicaTimeout",t)},expression:"value.parameters.staleReplicaTimeout"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:e.t("harvester.storage.parameters.nodeSelector.label"),options:e.nodeTags,taggable:!0,multiple:!0,mode:e.mode},scopedSlots:e._u([{key:"no-options",fn:function({searching:a}){return[a?e._e():t("span",{staticClass:"text-muted"},[e._v(" "+e._s(e.t("harvester.storage.parameters.nodeSelector.no-options",null,!0))+" ")])]}}]),model:{value:e.nodeSelector,callback:function(t){e.nodeSelector=t},expression:"nodeSelector"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:e.t("harvester.storage.parameters.diskSelector.label"),options:e.diskTags,taggable:!0,multiple:!0,mode:e.mode},scopedSlots:e._u([{key:"no-options",fn:function({searching:a}){return[a?e._e():t("span",{staticClass:"text-muted"},[e._v(" "+e._s(e.t("harvester.storage.parameters.diskSelector.no-options",null,!0))+" ")])]}}]),model:{value:e.diskSelector,callback:function(t){e.diskSelector=t},expression:"diskSelector"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("RadioGroup",{attrs:{name:"layer3NetworkMode",label:e.t("harvester.storage.parameters.migratable.label"),mode:e.mode,options:e.migratableOptions},model:{value:e.value.parameters.migratable,callback:function(t){e.$set(e.value.parameters,"migratable",t)},expression:"value.parameters.migratable"}})],1)]),t("KeyValue",{staticClass:"mt-10",attrs:{"add-label":e.t("storageClass.longhorn.addLabel"),"read-allowed":!1,mode:e.mode},model:{value:e.parameters,callback:function(t){e.parameters=t},expression:"parameters"}})],1)},l=[],i=a("2958"),r=a("53fe"),o=a("d444"),n=a("df85"),c=a("d6a6"),d=a("56a4"),u=a("1832"),p=a("e411");const v=["numberOfReplicas","staleReplicaTimeout","diskSelector","nodeSelector","migratable"];var m={components:{KeyValue:i["a"],LabeledSelect:r["a"],LabeledInput:o["a"],RadioGroup:n["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},realMode:{type:String,required:!0}},data(){return this.realMode===c["z"]&&this.$set(this.value,"parameters",{numberOfReplicas:"3",staleReplicaTimeout:"30",diskSelector:null,nodeSelector:null,migratable:"true"}),{}},computed:{longhornNodes(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[e+"/all"](d["s"].NODES)},nodeTags(){return(this.longhornNodes||[]).reduce((e,t)=>{var a;const s=(null===(a=t.spec)||void 0===a?void 0:a.tags)||[];return Object(p["m"])([...e,...s])},[])},diskTags(){return(this.longhornNodes||[]).reduce((e,t)=>{var a;const s=null===(a=t.spec)||void 0===a?void 0:a.disks,l=Object.keys(s).reduce((e,t)=>{var a;const l=(null===(a=s[t])||void 0===a?void 0:a.tags)||[];return Object(p["m"])([...e,...l])},[]);return Object(p["m"])([...e,...l])},[])},isView(){return this.mode===c["I"]},migratableOptions(){return[{label:this.t("generic.yes"),value:"true"},{label:this.t("generic.no"),value:"false"}]},parameters:{get(){var e;const t=Object(u["e"])(null===(e=this.value)||void 0===e?void 0:e.parameters)||{};return v.map(e=>{delete t[e]}),t},set(e){Object.assign(this.value.parameters,e)}},nodeSelector:{get(){var e,t;const a=null===(e=this.value)||void 0===e||null===(t=e.parameters)||void 0===t?void 0:t.nodeSelector;return(a||"").includes(",")?a.split(","):a?[a]:[]},set(e){this.value.parameters.nodeSelector=(e||[]).join(",")}},diskSelector:{get(){var e,t;const a=null===(e=this.value)||void 0===e||null===(t=e.parameters)||void 0===t?void 0:t.diskSelector;return(a||"").includes(",")?a.split(","):a?[a]:[]},set(e){this.value.parameters.diskSelector=(e||[]).join(",")}},numberOfReplicas:{get(){var e,t;return null===(e=this.value)||void 0===e||null===(t=e.parameters)||void 0===t?void 0:t.numberOfReplicas},set(e){e>=1&&e<=3&&(this.value.parameters.numberOfReplicas=String(e))}}}},h=m,b=(a("1780"),a("d802")),f=Object(b["a"])(h,s,l,!1,null,"d241759a",null);t["default"]=f.exports},"3e9e":function(e,t,a){var s=a("6c3a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("a8bc053a",s,!0,{sourceMap:!1,shadowMode:!1})},"3f23":function(e,t,a){"use strict";a("e61e")},"3fba":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".password[data-v-833c0be0]{display:flex;flex-direction:column}.password .labeled-input .addon[data-v-833c0be0]{padding-left:12px;min-width:65px}.password .genPassword[data-v-833c0be0]{display:flex;justify-content:flex-end}",""]),e.exports=t},"3fc1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-12"},[t("LabeledSelect",{attrs:{mode:e.mode,"label-key":"harvester.sslParameters.protocols.label",multiple:!0,options:e.protocolOptions},on:{input:e.update},model:{value:e.parsedDefaultValue.protocols,callback:function(t){e.$set(e.parsedDefaultValue,"protocols",t)},expression:"parsedDefaultValue.protocols"}})],1)]),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-12"},[t("LabeledInput",{attrs:{mode:e.mode,"label-key":"harvester.sslParameters.ciphers.label"},on:{input:e.update},model:{value:e.parsedDefaultValue.ciphers,callback:function(t){e.$set(e.parsedDefaultValue,"ciphers",t)},expression:"parsedDefaultValue.ciphers"}})],1)])])},l=[],i=a("d444"),r=a("d6a6"),o=a("53fe"),n={name:"HarvesterSslParameters",components:{LabeledInput:i["a"],LabeledSelect:o["a"]},props:{mode:{type:String,default:r["B"]},value:{type:Object,default:()=>({})},registerBeforeHook:{type:Function,required:!0}},data(){let e={};try{e=JSON.parse(this.value.value)}catch(a){e=JSON.parse(this.value.default)}const t=e.protocols&&(e.protocols||"").split(" ");return{parsedDefaultValue:{protocols:t,ciphers:e.ciphers}}},created(){this.registerBeforeHook&&this.registerBeforeHook(this.willSave,"willSave")},computed:{protocolOptions(){return[{label:"TLSv1.3",value:"TLSv1.3"},{label:"TLSv1.2",value:"TLSv1.2"},{label:`TLSv1.1 (${this.t("generic.deprecated")})`,value:"TLSv1.1"},{label:`TLSv1 (${this.t("generic.deprecated")})`,value:"TLSv1"},{label:`SSLv3 (${this.t("generic.deprecated")})`,value:"SSLv3"},{label:`SSLv2 (${this.t("generic.deprecated")})`,value:"SSLv2"}]}},methods:{update(){const e={protocols:(this.parsedDefaultValue.protocols||[]).join(" "),ciphers:this.parsedDefaultValue.ciphers},t=JSON.stringify(e);this.$set(this.value,"value",t)},willSave(){const e=[],t=this.parsedDefaultValue.ciphers,a=this.parsedDefaultValue.protocols||[];t&&0===a.length&&e.push(this.t("validation.required",{key:this.t("harvester.sslParameters.protocols.label")},!0)),!t&&a.length>0&&e.push(this.t("validation.required",{key:this.t("harvester.sslParameters.ciphers.label")},!0));const s=/^(:?[A-Z0-9]+(?:-[A-Z0-9]+)+)+$/gm;return!t||t.match(s)&&!t.startsWith(":")||e.push(this.t("validation.invalid",{key:this.t("harvester.sslParameters.ciphers.label")},!0)),e.length>0?Promise.reject(e):Promise.resolve()}},watch:{"value.value":{handler(e){e===this.value.default&&(this.parsedDefaultValue.protocols=[],this.parsedDefaultValue.ciphers="")},deep:!0}}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},"411b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vm__credentials-users"},[t("LabeledSelect",{class:{hasUsers:e.selectedUser.length>0},attrs:{options:e.userOptions,label:e.t("harvester.virtualMachine.accessCredentials.injectSSH.users"),taggable:e.multiple,mode:e.mode,multiple:e.multiple,searchable:!1,tooltip:e.t("harvester.virtualMachine.accessCredentials.userTips")},on:{input:e.update},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}}),t("ModalWithCard",{ref:e.randomStr,attrs:{name:e.randomStr,width:"40%",errors:e.errors},on:{finish:e.addUser,close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.accessCredentials.injectSSH.addUser"))+" ")]},proxy:!0},{key:"content",fn:function(){return[t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.username"),required:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:e.newUsername,callback:function(t){e.newUsername=t},expression:"newUsername"}})]},proxy:!0}])})],1)},l=[],i=a("9ce4"),r=a("1832"),o=a("06f6"),n=a("d444"),c=a("53fe"),d=a("5fe4");const u="_NEW";var p={components:{LabeledInput:n["a"],LabeledSelect:c["a"],ModalWithCard:d["a"]},props:{value:{type:[Array,String],default:()=>[]},resource:{type:Object,default:()=>({})},userOptions:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},mode:{type:String,default:"create"},disabled:{type:Boolean,default:!1}},data(){return{selectedUser:this.value,newUsername:"",randomStr:Object(o["p"])(5).toLowerCase(),errors:[]}},computed:{...Object(i["a"])({t:"i18n/t"})},watch:{value(e){this.selectedUser=e},selectedUser(e,t){e.includes(u)&&(this.$set(this,"selectedUser",t),this.update(),this.show())}},methods:{update(){this.$emit("update:user",Object(r["e"])(this.selectedUser))},addUser(e){const t=/^[-._0-9a-zA-Z]+$/;if(this.errors=[],!t.test(this.newUsername)){const t=this.t("harvester.virtualMachine.accessCredentials.invalidUser");return this.errors.push(t),void e(!1)}if(this.userOptions.includes(this.newUsername)){const t=this.t("harvester.virtualMachine.accessCredentials.duplicatedUser");return this.errors.push(t),void e(!1)}this.multiple?this.selectedUser.push(this.newUsername):this.selectedUser=this.newUsername,this.$emit("update:newUser",this.newUsername),this.update(),e(!0),this.cancel()},show(){this.$modal.show(this.randomStr)},hide(){this.$modal.hide(this.randomStr)},cancel(){this.hide(),this.newUsername=""}}},v=p,m=(a("ba19"),a("d802")),h=Object(m["a"])(v,s,l,!1,null,null,null);t["default"]=h.exports},"414d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("CruResource",{staticClass:"route",attrs:{errors:e.errors,mode:e.mode,resource:e.value,subtypes:[],"can-yaml":!1,"cancel-event":!0},on:{error:t=>e.errors=t,finish:e.saveSettings,cancel:e.done}},[t("h4",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.description,expression:"description"}]}),e.editHelp?t("h5",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.editHelp,expression:"editHelp"}],staticClass:"edit-help"}):e._e(),t("div",{staticClass:"edit-change mt-20"},[t("h5",{directives:[{name:"t",rawName:"v-t",value:"advancedSettings.edit.changeSetting",expression:"'advancedSettings.edit.changeSetting'"}]}),t("button",{staticClass:"btn role-primary",attrs:{disabled:!e.canReset,type:"button"},on:{click:e.useDefault}},[e._v(" "+e._s(e.t("advancedSettings.edit.useDefault"))+" ")])]),t("div",{staticClass:"mt-20"},["import"===e.setting.from?t("div",[e.hasCustomComponent?t(e.customComponent,{ref:"settingComp",tag:"component",attrs:{"register-before-hook":e.registerBeforeHook,mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e()],1):"enum"===e.setting.kind?t("div",[t("LabeledSelect",{attrs:{label:e.t("advancedSettings.edit.value"),"localized-label":!0,mode:e.mode,options:e.enumOptions},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1):"boolean"===e.setting.kind?t("div",[t("RadioGroup",{attrs:{name:"settings_value",labels:[e.t("advancedSettings.edit.trueOption"),e.t("advancedSettings.edit.falseOption")],options:["true","false"]},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1):"multiline"===e.setting.kind||"json"===e.setting.kind?t("div",[t("TextAreaAutoGrow",{attrs:{"min-height":254},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1):t("div",[t("LabeledInput",{attrs:{label:e.t("advancedSettings.edit.value")},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1)])])},l=[],i=a("2e2b"),r=a("f032"),o=a("d444"),n=a("53fe"),c=a("cd3a"),d=a("c78c"),u=a("fa85"),p={components:{CruResource:i["a"],LabeledInput:o["a"],LabeledSelect:n["a"],RadioGroup:r["b"],TextAreaAutoGrow:c["a"]},mixins:[d["a"]],data(){var e,t;const s=this.$store.getters["i18n/t"],l=u["a"][this.value.id]||u["c"][this.value.id];let i=[];"enum"===l.kind&&(i=l.options.map(e=>({label:`advancedSettings.enum.harv-${this.value.id}.${e}`,value:e})));const r=l.canReset||!!this.value.default||this.value.canReset;void 0===this.value.value&&this.$set(this.value,"value",null),this.value.value=this.value.value||this.value.default||"";const o=this.value.value,n=null===(e=this.value)||void 0===e||null===(t=e.type)||void 0===t?void 0:t.includes("harvesterhci"),c=a("b852").keys().map(e=>e.replace(/(\.\/)|(.vue)/g,""));return{setting:l,description:s(n?"advancedSettings.descriptions.harv-"+this.value.id:"advancedSettings.descriptions."+this.value.id),editHelp:s("advancedSettings.editHelp."+this.value.id),enumOptions:i,canReset:r,errors:[],hasCustomComponent:!1,customComponent:null,customSettingComponents:c,oldValue:o}},computed:{doneLocationOverride(){return this.value.doneOverride}},created(){let e=!1;const t=this.customSettingComponents.includes(this.value.id);if(t)try{e=a("f98e")(`./${this.value.id}.vue`).default}catch{}else{const t=this.$route.params.resource,s=this.value.metadata.name;try{e=a("95d4")(`./${t}/${s}.vue`).default}catch{}}this.hasCustomComponent=!!e,this.customComponent=e,this.registerAfterHook(()=>{this.value.id===u["b"].RANCHER_MANAGER_SUPPORT&&this.$store.commit("isRancherInHarvester","true"===this.value.value)})},methods:{done(){this.$router.go(-1)},async saveSettings(e){const t=this.$store.getters["i18n/t"];if("json"===this.setting.kind&&this.value.default)try{JSON.parse(this.value.value),this.errors=[]}catch(a){return this.errors=[t("advancedSettings.edit.invalidJSON")],e(!1)}this.value.metadata.name===u["b"].CLUSTER_REGISTRATION_URL&&this.oldValue&&this.value.value!==this.oldValue&&await this.clusterRegistrationUrlTip(),this.save(e)},clusterRegistrationUrlTip(){return new Promise(e=>{this.$store.dispatch("harvester/promptModal",{component:"MessageBox",callback:t=>{"ok"===t&&e()},contentKey:"harvester.setting.clusterRegistrationUrl.message"},{root:!0})})},useDefault(e){var t;e&&e.srcElement&&e.srcElement.blur(),this.value.id===u["b"].VLAN?(this.value.enable=!1,this.value.config&&(this.value.config.defaultPhysicalNIC="")):this.value.value=this.value.default||"","function"===typeof(null===(t=this.$refs.settingComp)||void 0===t?void 0:t.useDefault)&&this.$refs.settingComp.useDefault()}}},v=p,m=(a("596b"),a("d802")),h=Object(m["a"])(v,s,l,!1,null,"7906887b",null);t["default"]=h.exports},4278:function(e,t,a){"use strict";a("fc62")},4284:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("Banner",{attrs:{color:"info"}},[t("t",{attrs:{k:"harvester.vgpu.howToUseDevice"}})],1),e.selectedDevices.length>0?t("Banner",{attrs:{color:"info"}},[t("t",{attrs:{k:"harvester.vgpu.deviceInTheSameHost"}})],1):e._e()],1)]),e.enabledDevices.length?[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:"Available vGPU Devices",searchable:"",multiple:"",taggable:"",options:e.deviceOpts,mode:e.mode},scopedSlots:e._u([{key:"option",fn:function(a){return[t("span",[e._v(e._s(a.value))])]}}],null,!1,3557490625),model:{value:e.selectedDevices,callback:function(t){e.selectedDevices=t},expression:"selectedDevices"}})],1)]),e.compatibleNodes.length&&e.selectedDevices.length?t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12 text-muted"},[e._v(" Compatible hosts: "),e._l(e.compatibleNodes,(function(a,s){return t("span",{key:a},[e._v(e._s(a)+e._s(s<e.compatibleNodes.length-1?", ":""))])}))],2)]):e.selectedDevices.length?t("div",{staticClass:"text-error"},[e._v(" "+e._s(e.t("harvester.vgpu.impossibleSelection"))+" ")]):e._e()]:e._e(),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-12"},[t("VGpuDeviceList",{attrs:{schema:e.deviceSchema,devices:e.devices},on:{submit:function(e){e.preventDefault()}}})],1)])],2)},l=[],i=a("d6a6"),r=a("b837"),o=a("90cd"),n=a("53fe"),c=a("2a88"),d=a("8fcc"),u=a("9274"),p=a.n(u),v=a("1832"),m={name:"VirtualMachinedevices",components:{Banner:c["a"],LabeledSelect:n["a"],VGpuDeviceList:d["default"]},props:{mode:{type:String,default:i["B"]},value:{type:Object,default:()=>{}},vm:{type:Object,default:()=>{}}},async fetch(){var e,t,a;const s={devices:this.$store.dispatch("harvester/findAll",{type:o["b"].VGPU_DEVICE}),vms:this.$store.dispatch("harvester/findAll",{type:o["b"].VM})},l=await Object(r["a"])(s);for(const i in l)this[i]=l[i];((null===(e=this.value)||void 0===e||null===(t=e.domain)||void 0===t||null===(a=t.devices)||void 0===a?void 0:a.gpus)||[]).forEach(({name:e})=>{this.enabledDevices.find(t=>{var a;return(null===t||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.name)===e})&&this.selectedDevices.push(e)})},data(){return{deviceSchema:this.$store.getters["harvester/schemaFor"](o["b"].VGPU_DEVICE),devices:[],vms:[],selectedDevices:[]}},watch:{selectedDevices(e){const t=e.map(e=>{var t,a;const s=this.enabledDevices.find(t=>t.metadata.name===e),l="nvidia.com/"+(null===s||void 0===s||null===(t=s.status)||void 0===t||null===(a=t.configureVGPUTypeName)||void 0===a?void 0:a.replace(/\s+/g,"_"));return{deviceName:l,name:null===s||void 0===s?void 0:s.metadata.name}});Object(v["j"])(this.value.domain.devices,"gpus",t)}},computed:{enabledDevices(){return this.devices.filter(e=>e.isEnabled)||[]},devicesInUse(){const e=this.vms.reduce((e,t)=>{var a,s;if(t.metadata.name===(null===(a=this.vm)||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.name))return e;const l=Object(v["g"])(t,"spec.template.spec.domain.devices.hostDevices")||[];return l.forEach(a=>{e[a.name]={usedBy:[t.metadata.name]}}),e},{});return e},devicesByNode(){const e={};return this.enabledDevices.forEach(t=>{var a;const s=null===(a=t.spec)||void 0===a?void 0:a.nodeName;e[s]?e[s].push(t):e[s]=[t]}),e},compatibleNodes(){const e=[...Object.keys(this.devicesByNode)];return this.selectedDevices.forEach(t=>{p()(e,e=>{const a=this.enabledDevices.find(e=>e.metadata.name===t);return a.spec.nodeName!==e})}),e},deviceOpts(){const e=this.enabledDevices.filter(e=>{if(this.selectedDevices.length>0){const t=this.enabledDevices.find(e=>e.metadata.name===this.selectedDevices[0]);return!this.devicesInUse[null===e||void 0===e?void 0:e.metadata.name]&&e.spec.nodeName===t.spec.nodeName}return!this.devicesInUse[null===e||void 0===e?void 0:e.metadata.name]});return e.map(e=>({value:null===e||void 0===e?void 0:e.metadata.name,label:null===e||void 0===e?void 0:e.metadata.name}))}}},h=m,b=a("d802"),f=Object(b["a"])(h,s,l,!1,null,null,null);t["default"]=f.exports},"42e9":function(e,t,a){"use strict";a("99bd")},"4302e":function(e,t,a){var s=a("b4af");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("216e9be5",s,!0,{sourceMap:!1,shadowMode:!1})},4595:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.s3.endpoint")},model:{value:e.value.s3_endpoint,callback:function(t){e.$set(e.value,"s3_endpoint",t)},expression:"value.s3_endpoint"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.s3.bucket")},model:{value:e.value.s3_bucket,callback:function(t){e.$set(e.value,"s3_bucket",t)},expression:"value.s3_bucket"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.s3.path")},model:{value:e.value.path,callback:function(t){e.$set(e.value,"path",t)},expression:"value.path"}})],1),t("div",{staticClass:"col span-6 overwrite"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.s3.overwriteExistingPath")},model:{value:e.overwrite,callback:function(t){e.overwrite=t},expression:"overwrite"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.s3.keyId"),"show-key-selector":!0},model:{value:e.value.aws_key_id,callback:function(t){e.$set(e.value,"aws_key_id",t)},expression:"value.aws_key_id"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.s3.secretKey"),"show-key-selector":!0},model:{value:e.value.aws_sec_key,callback:function(t){e.$set(e.value,"aws_sec_key",t)},expression:"value.aws_sec_key"}})],1)])])},l=[],i=a("efb2"),r=a("d444"),o=a("0b97"),n={components:{Checkbox:i["a"],LabeledInput:r["a"],SecretSelector:o["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}},computed:{overwrite:{get(){return"true"===this.value.overwrite},set(e){this.$set(this.value,"overwrite",e.toString())}}}},c=n,d=(a("1f6e"),a("d802")),u=Object(d["a"])(c,s,l,!1,null,"8c7d0cf6",null);t["default"]=u.exports},4890:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-name"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-type"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),mode:e.mode,options:e.VOLUME_TYPE,required:""},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-volumeName"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.volume"),value:e.value.volumeName,mode:e.mode}},[t("LabeledSelect",{attrs:{disabled:e.isDisabled,label:e.t("harvester.fields.volume"),mode:e.mode,options:e.volumeOption,required:""},on:{input:e.update},model:{value:e.value.volumeName,callback:function(t){e.$set(e.value,"volumeName",t)},expression:"value.volumeName"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-size"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.size"),value:e.value.size,mode:e.mode}},[t("UnitInput",{attrs:{"output-modifier":!0,increment:1024,"input-exponent":3,label:e.t("harvester.fields.size"),mode:e.mode,disabled:!0},on:{input:e.update},model:{value:e.value.size,callback:function(t){e.$set(e.value,"size",t)},expression:"value.size"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[e.image?t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-image"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.image"),value:e.image,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.image"),mode:e.mode,disabled:!0},on:{input:e.update},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}})],1)],1):e._e(),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-bus"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),mode:e.mode,options:e.InterfaceOption,disabled:!0,required:""},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])])},l=[],i=a("2007"),r=a("d444"),o=a("53fe"),n=a("2aaa"),c=a("7592"),d=a("56a4"),u=a("90cd"),p=a("d6a6"),v=a("7c47"),m=a("873f"),h={name:"HarvesterEditExisting",components:{UnitInput:i["a"],LabeledInput:r["a"],LabeledSelect:o["a"],InputOrDisplay:n["a"]},props:{mode:{type:String,default:p["z"]},value:{type:Object,required:!0},isEdit:{type:Boolean,default:!1},namespace:{type:String,default:null},idx:{type:Number,default:0},rows:{type:Array,required:!0}},data(){return this.value.realName&&(this.value.volumeName=this.value.realName),{VOLUME_TYPE:v["h"],InterfaceOption:v["d"],loading:!1}},computed:{isDisabled(){return!this.value.newCreateId&&this.isEdit},allPVCs(){const e=this.$store.getters["harvester/all"](d["E"]);return e.filter(e=>!this.namespace||this.namespace===e.metadata.namespace)||[]},image(){const e=this.$store.getters["harvester/all"](u["b"].IMAGE).find(e=>{var t,a,s;return e.id===(null===(t=this.pvcResource)||void 0===t||null===(a=t.metadata)||void 0===a||null===(s=a.annotations)||void 0===s?void 0:s[m["a"].IMAGE_ID])});if(e)return`${e.metadata.namespace}/${e.spec.displayName}`},pvcResource(){return this.allPVCs.find(e=>e.metadata.name===this.value.volumeName)},volumeOption(){return Object(c["b"])(this.allPVCs.filter(e=>{var t,a,s,l;let i=!0,r=!1;return this.rows.forEach(t=>{t.volumeName===e.metadata.name&&(i=!1)}),!!(0!==this.idx||null!==(t=e.metadata)&&void 0!==t&&null!==(a=t.annotations)&&void 0!==a&&a[m["a"].IMAGE_ID])&&(e.attachVM&&i&&(null===(s=e.attachVM)||void 0===s?void 0:s.id)===(null===(l=this.vm)||void 0===l?void 0:l.id)&&this.isEdit?r=!1:e.attachVM&&(r=!0),i&&!r&&e.isAvailable)}).map(e=>({label:e.metadata.name,value:e.metadata.name})),"label")}},watch:{"value.volumeName"(e){const t=this.allPVCs.find(t=>t.metadata.name===e);t&&(this.value.accessModes=t.spec.accessModes[0],this.value.size=t.spec.resources.requests.storage,this.value.storageClassName=t.spec.storageClassName,this.value.volumeMode=t.spec.volumeMode)},"value.type"(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())},pvcResource:{handler(e){var t;!this.value.volumeName&&null!==e&&void 0!==e&&null!==(t=e.metadata)&&void 0!==t&&t.name&&(this.value.volumeName=e.metadata.name)},deep:!0,immediate:!0}},methods:{update(){this.$emit("update")}}},b=h,f=a("d802"),g=Object(f["a"])(b,s,l,!1,null,null,null);t["default"]=g.exports},"489c":function(e,t,a){"use strict";a("2a1a")},"4a03":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"loki"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"url",attrs:{mode:e.mode,disabled:e.disabled,placeholder:"https://127.0.0.1:8000","data-testid":"loki-url",label:e.t("logging.loki.url")},model:{value:e.value.url,callback:function(t){e.$set(e.value,"url",t)},expression:"value.url"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.loki.tenant")},model:{value:e.value.tenant,callback:function(t){e.$set(e.value,"tenant",t)},expression:"value.tenant"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.loki.username"),"show-key-selector":!0},model:{value:e.value.username,callback:function(t){e.$set(e.value,"username",t)},expression:"value.username"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.loki.password"),"show-key-selector":!0},model:{value:e.value.password,callback:function(t){e.$set(e.value,"password",t)},expression:"value.password"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.certificate")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.loki.caCert"),"show-key-selector":!0},model:{value:e.value.ca_cert,callback:function(t){e.$set(e.value,"ca_cert",t)},expression:"value.ca_cert"}})],1),t("div",{staticClass:"col span-6 mb-10"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.loki.cert"),"show-key-selector":!0},model:{value:e.value.cert,callback:function(t){e.$set(e.value,"cert",t)},expression:"value.cert"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.loki.key"),"show-key-selector":!0},model:{value:e.value.key,callback:function(t){e.$set(e.value,"key",t)},expression:"value.key"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.labels")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-12"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.loki.configureKubernetesLabels")},model:{value:e.value.configure_kubernetes_labels,callback:function(t){e.$set(e.value,"configure_kubernetes_labels",t)},expression:"value.configure_kubernetes_labels"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-12"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.loki.extractKubernetesLabels")},model:{value:e.value.extract_kubernetes_labels,callback:function(t){e.$set(e.value,"extract_kubernetes_labels",t)},expression:"value.extract_kubernetes_labels"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-12"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.loki.dropSingleKey")},model:{value:e.value.drop_single_key,callback:function(t){e.$set(e.value,"drop_single_key",t)},expression:"value.drop_single_key"}})],1)])])},l=[],i=a("d444"),r=a("0b97"),o=a("efb2"),n={components:{Checkbox:o["a"],LabeledInput:i["a"],SecretSelector:r["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}},data(){return{}}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},"4aec":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".edit-change[data-v-7906887b]{align-items:center;display:flex}.edit-change>h5[data-v-7906887b]{flex:1}[data-v-7906887b] .edit-help code{padding:1px 5px}",""]),e.exports=t},"4b29":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.awsElasticsearch.url")},model:{value:e.value.endpoint.url,callback:function(t){e.$set(e.value.endpoint,"url",t)},expression:"value.endpoint.url"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row mb-10"},[e._v(" "+e._s(e.value.namespace)+" "),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.awsElasticsearch.keyId"),"show-key-selector":!0},model:{value:e.value.endpoint.access_key_id,callback:function(t){e.$set(e.value.endpoint,"access_key_id",t)},expression:"value.endpoint.access_key_id"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.awsElasticsearch.secretKey"),"show-key-selector":!0},model:{value:e.value.endpoint.secret_access_key,callback:function(t){e.$set(e.value.endpoint,"secret_access_key",t)},expression:"value.endpoint.secret_access_key"}})],1)])])},l=[],i=a("d444"),r=a("0b97"),o={components:{LabeledInput:i["a"],SecretSelector:r["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},"4c43":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.save}},[t("NameNsDescription",{attrs:{value:e.value,namespaced:!0,mode:e.mode}}),t("ResourceTabs",{staticClass:"mt-15",attrs:{"need-conditions":!1,"need-related":!1,"side-tabs":!0,mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("Tab",{staticClass:"bordered-table",attrs:{name:"basics",label:e.t("harvester.virtualMachine.detail.tabs.basics")}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("LabeledInput",{staticClass:"mt-20",attrs:{label:e.t("harvester.snapshot.size"),disabled:!0},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("LabeledInput",{staticClass:"mt-20",attrs:{label:e.t("harvester.snapshot.targetVolume"),disabled:!0},model:{value:e.targetVolume,callback:function(t){e.targetVolume=t},expression:"targetVolume"}})],1)]),e.isImageVolume?t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("LabeledInput",{staticClass:"mt-20",attrs:{label:e.t("harvester.snapshot.image"),disabled:!0},model:{value:e.imageName,callback:function(t){e.imageName=t},expression:"imageName"}})],1)]):e._e()])],1)],1)],1)},l=[],i=a("5ef9"),r=a("2e2b"),o=a("3921"),n=a("d444"),c=a("65b0"),d=a("1832"),u=a("90cd"),p=a("c78c"),v=a("b0bd"),m={name:"HarvesterSnapshot",components:{LabeledInput:n["a"],Tab:i["a"],ResourceTabs:o["a"],CruResource:r["a"],NameNsDescription:c["a"]},mixins:[p["a"]],computed:{volume(){return this.volumes.find(e=>e.metadata.name===this.targetVolume)},size(){var e,t;return null===(e=this.value)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.restoreSize},isImageVolume(){return!!Object(d["g"])(this.value,`metadata.annotations."${v["m"].IMAGE_ID}"`)},imageName(){var e;const t=this.$store.getters["harvester/all"](u["b"].IMAGE).find(e=>e.id===Object(d["g"])(this.value,`metadata.annotations."${v["m"].IMAGE_ID}"`));return null===t||void 0===t||null===(e=t.spec)||void 0===e?void 0:e.displayName},targetVolume(){var e,t,a;return null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.source)||void 0===a?void 0:a.persistentVolumeClaimName}}},h=m,b=a("d802"),f=Object(b["a"])(h,s,l,!1,null,null,null);t["default"]=f.exports},"4cf0":function(e,t,a){var s=a("d227");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("26651581",s,!0,{sourceMap:!1,shadowMode:!1})},"4d5d":function(e,t,a){var s=a("5d6f");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("0a29c82c",s,!0,{sourceMap:!1,shadowMode:!1})},"4f5e":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-7b152fa4] .radio-group{display:flex}[data-v-7b152fa4] .radio-group .radio-container{margin-right:30px}",""]),e.exports=t},"50cf":function(e,t,a){var s=a("3378");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("744fa0c2",s,!0,{sourceMap:!1,shadowMode:!1})},"50e8":function(e,t,a){"use strict";var s=a("976d"),l=a("56a4"),i=a("c78c"),r=a("65b0"),o=a("d444"),n=a("53fe"),c=a("2e2b"),d=a("d6a6"),u=a("70a6"),p=a("ad61"),v=a("5ef9"),m=a("1eaf"),h=a("005f"),b=a("b0bd"),f=a("e411"),g=a("da34"),y=a("1d2e"),C=a("7592"),k=a("06f6");const w=[s["a"].OPAQUE,s["a"].DOCKER_JSON,s["a"].TLS,s["a"].SSH,s["a"].BASIC];var x={name:"CruSecret",components:{LabeledInput:o["a"],LabeledSelect:n["a"],Loading:u["a"],NameNsDescription:r["a"],CruResource:c["a"],Tabbed:p["a"],Tab:v["a"],Labels:m["a"],SelectIconGrid:y["a"]},mixins:[i["a"]],async fetch(){this.isCloud&&(this.nodeDrivers=await this.$store.dispatch("management/findAll",{type:l["t"].NODE_DRIVER}))},data(){const e=this.$route.query[d["d"]]===d["C"],t=this.mode===d["B"]&&this.value._type===s["a"].CLOUD_CREDENTIAL,a=this.realMode===d["x"]&&this.liveValue._type===s["a"].CLOUD_CREDENTIAL,i=e||t||a;e&&(this.value.metadata.namespace=l["g"],this.$set(this.value.metadata,"name",""),this.$set(this.value,"data",{}));const r=[{label:"Custom",value:"custom"},{label:"divider",disabled:!0,kind:"divider"}];return Object.values(s["a"]).forEach(e=>{r.push({label:e,value:e})}),{isCloud:i,nodeDrivers:null,secretTypes:r,secretType:this.value._type,initialSecretType:this.value._type}},computed:{isCustomSecretCreate(){return this.mode===d["z"]&&"custom"===this.$route.query.type},showCustomSecretType(){return"custom"===this.secretType},typeKey(){if(this.isCloud)return"cloud";switch(this.value._type){case s["a"].TLS:return"tls";case s["a"].BASIC:return"basic";case s["a"].DOCKER_JSON:return"registry";case s["a"].SSH:return"ssh"}return"generic"},dataComponent(){return a("5ed9")("./"+this.typeKey).default},driverName(){var e,t;const a=null===(e=this.value.metadata)||void 0===e||null===(t=e.annotations)||void 0===t?void 0:t[b["c"].CREDENTIAL_DRIVER];return a},cloudComponent(){return this.$store.getters["type-map/hasCustomCloudCredentialComponent"](this.driverName)?this.$store.getters["type-map/importCloudCredential"](this.driverName):this.$store.getters["type-map/importCloudCredential"]("generic")},secretSubTypes(){const e=[];if(this.isCloud){const s=Object(f["m"])(this.nodeDrivers.filter(e=>e.spec.active).map(e=>e.spec.displayName||e.id).map(e=>this.$store.getters["plugins/credentialDriverFor"](e)));for(const l of s){let s,i;try{s=a("499d")(`./${l}.svg`)}catch(t){s=null,i=this.initialDisplayFor(l)}e.push({id:l,label:this.typeDisplay(b["c"].CREDENTIAL_DRIVER,l),bannerImage:s,bannerAbbrv:i})}}else{for(const t of w)e.push({id:t,label:this.typeDisplay(t),bannerAbbrv:this.initialDisplayFor(t),description:this.t(`secret.typeDescriptions.'${t}'.description`),docLink:this.t(`secret.typeDescriptions.'${t}'.docLink`)});e.push({id:"custom",label:this.t("secret.customType"),bannerAbbrv:this.initialDisplayFor("custom"),description:this.t("secret.typeDescriptions.custom.description")})}return Object(C["b"])(e,"label")},namespaces(){return this.$store.getters["cluster/all"](l["w"]).map(e=>({label:e.nameDisplay,value:e.id}))},hideSensitiveData(){return this.$store.getters["prefs/get"](h["k"])},dataLabel(){switch(this.value._type){case s["a"].TLS:return this.t("secret.certificate.certificate");case s["a"].SSH:return this.t("secret.ssh.keys");case s["a"].BASIC:return this.t("secret.authentication");default:return this.t("secret.data")}},doneRoute(){return this.$store.getters["currentProduct"].name===g["a"]?"c-cluster-manager-secret":"c-cluster-product-resource"}},methods:{async saveSecret(e){var t;if(this.errors&&Object(f["c"])(this.errors),"function"===typeof(null===(t=this.$refs.cloudComponent)||void 0===t?void 0:t.test))try{const t=await this.$refs.cloudComponent.test();if(!t||null!==t&&void 0!==t&&t.errors)return null!==t&&void 0!==t&&t.errors?this.errors=t.errors:this.errors=["Authentication test failed, please check your credentials"],void e(!1)}catch(a){return this.errors=[a],void e(!1)}return this.save(e)},selectType(e){let t;this.isCloud&&(e===s["a"].CLOUD_CREDENTIAL?t=this.driverName:(t=e,e=s["a"].CLOUD_CREDENTIAL),this.mode===d["z"]&&this.value.setAnnotation(b["c"].CREDENTIAL_DRIVER,t)),this.$set(this.value,"_type",e),this.$emit("set-subtype",this.typeDisplay(e,t)),this.secretType=e,this.mode===d["z"]&&"custom"===e&&this.$set(this.value,"_type","")},typeDisplay(e,t){if(e===b["c"].CREDENTIAL_DRIVER)return this.$store.getters["i18n/withFallback"](`cluster.provider."${t}"`,null,t);{const t=e.replace(/^kubernetes.io\//,"");return this.$store.getters["i18n/withFallback"](`secret.types."${e}"`,null,t)}},initialDisplayFor(e){const t=(Object(k["u"])(this.typeDisplay(e)||"").replace(/[^A-Z]/g,"")||e).substr(0,3);return this.$store.getters["i18n/withFallback"](`secret.initials."${e}"`,null,t)},selectCustomType(e){"custom"!==e&&this.$set(this.value,"_type",e)}}};t["a"]=x},"50ef":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.gcs.project")},model:{value:e.value.project,callback:function(t){e.$set(e.value,"project",t)},expression:"value.project"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.gcs.bucket")},model:{value:e.value.bucket,callback:function(t){e.$set(e.value,"bucket",t)},expression:"value.bucket"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.gcs.path")},model:{value:e.value.path,callback:function(t){e.$set(e.value,"path",t)},expression:"value.path"}})],1),t("div",{staticClass:"col span-6 overwrite"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.gcs.overwriteExistingPath")},model:{value:e.value.overwrite,callback:function(t){e.$set(e.value,"overwrite",t)},expression:"value.overwrite"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.gcs.credentialsJson"),"show-key-selector":!0},model:{value:e.value.credentials_json,callback:function(t){e.$set(e.value,"credentials_json",t)},expression:"value.credentials_json"}})],1)])])},l=[],i=a("efb2"),r=a("d444"),o=a("0b97"),n={components:{Checkbox:i["a"],LabeledInput:r["a"],SecretSelector:o["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}}},c=n,d=(a("b8d4"),a("d802")),u=Object(d["a"])(c,s,l,!1,null,"3a16bf47",null);t["default"]=u.exports},"511d":function(e,t,a){var s=a("d9a2");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("666c8b01",s,!0,{sourceMap:!1,shadowMode:!1})},"51c9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("Tabbed",{attrs:{"side-tabs":!0}},[t("Tab",{attrs:{name:"basic",label:e.t("harvester.addons.vmImport.titles.basic"),weight:99}},[t("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",mode:e.mode,options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},model:{value:e.value.spec.enabled,callback:function(t){e.$set(e.value.spec,"enabled",t)},expression:"value.spec.enabled"}})],1)],1)},l=[],i=a("ad61"),r=a("5ef9"),o=a("f032"),n=a("c78c"),c={name:"EditAddonPCI",components:{Tabbed:i["a"],Tab:r["a"],RadioGroup:o["b"]},mixins:[n["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}}},d=c,u=(a("9a30"),a("d802")),p=Object(u["a"])(d,s,l,!1,null,"d02a5b74",null);t["default"]=p.exports},5244:function(e,t,a){"use strict";a("b068")},5456:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-2a1b149f] .radio-group{display:flex}[data-v-2a1b149f] .radio-group .radio-container{margin-right:30px}",""]),e.exports=t},5590:function(e,t,a){"use strict";a("f5b7")},"56b1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("h3",[e._v(" "+e._s(e.t("harvester.ipPool.scope.label"))+" ")]),e.rows.length?t("div",[t("div",{staticClass:"pool-headers",class:{"show-project-and-cluster":e.showProjectAndCluster}},[e.showProjectAndCluster?t("span",{staticClass:"pool-project"},[t("t",{attrs:{k:"harvester.ipPool.project.label"}})],1):e._e(),t("span",{staticClass:"pool-namespace"},[t("t",{attrs:{k:"harvester.ipPool.namespace.label"}})],1),e.showProjectAndCluster?t("span",{staticClass:"pool-guestCluster"},[t("t",{attrs:{k:"harvester.ipPool.guestCluster.label"}})],1):e._e(),e.showRemove?t("span",{staticClass:"remove"}):e._e()]),e._l(e.rows,(function(a,s){return t("div",{key:s},[t("PriorityRow",{attrs:{row:a,mode:e.mode,rows:e.rows,idx:s},on:{input:e.queueUpdate,remove:function(t){return e.remove(s)}}})],1)}))],2):e._e(),e.showAdd?t("div",{staticClass:"footer"},[t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button"},on:{click:function(t){return e.add()}}},[t("t",{attrs:{k:"harvester.ipPool.scope.addLabel"}})],1)]):e._e()])},l=[],i=a("44db"),r=a.n(i),o=a("d6a6"),n=a("e411"),c=a("1832"),d=a("9ce4"),u=a("ee22"),p={components:{PriorityRow:u["default"]},props:{value:{type:Array,default:null},mode:{type:String,default:o["B"]},autoAddIfEmpty:{type:Boolean,default:!0}},data(){const e=Object(c["e"])(this.value||[]);return{rows:e}},computed:{...Object(d["a"])(["isRancherInHarvester","isStandaloneHarvester"]),isView(){return this.mode===o["I"]},showAdd(){return!this.isView},showRemove(){return!this.isView},showProjectAndCluster(){return!this.isStandaloneHarvester}},created(){this.queueUpdate=r()(this.update,500)},methods:{add(){const e={namespace:"*"};this.showProjectAndCluster?this.rows.push({...e,project:"*",guestCluster:"*"}):this.rows.push(e),this.queueUpdate()},remove(e){Object(n["i"])(this.rows,e),this.queueUpdate()},update(){this.isView||this.$emit("input",this.rows)}}},v=p,m=(a("18b8"),a("d802")),h=Object(m["a"])(v,s,l,!1,null,"02c7544e",null);t["default"]=h.exports},"596a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.cloudwatch.region")},model:{value:e.value.region,callback:function(t){e.$set(e.value,"region",t)},expression:"value.region"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.cloudwatch.endpoint")},model:{value:e.value.endpoint,callback:function(t){e.$set(e.value,"endpoint",t)},expression:"value.endpoint"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.cloudwatch.keyId"),"show-key-selector":!0},model:{value:e.value.aws_key_id,callback:function(t){e.$set(e.value,"aws_key_id",t)},expression:"value.aws_key_id"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.cloudwatch.secretKey"),"show-key-selector":!0},model:{value:e.value.aws_sec_key,callback:function(t){e.$set(e.value,"aws_sec_key",t)},expression:"value.aws_sec_key"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.configuration")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.cloudwatch.logGroupName")},model:{value:e.value.log_group_name,callback:function(t){e.$set(e.value,"log_group_name",t)},expression:"value.log_group_name"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.cloudwatch.logStreamName")},model:{value:e.value.log_stream_name,callback:function(t){e.$set(e.value,"log_stream_name",t)},expression:"value.log_stream_name"}})],1)])])},l=[],i=a("d444"),r=a("0b97"),o={components:{LabeledInput:i["a"],SecretSelector:r["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}}},n=o,c=(a("d152"),a("d802")),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},"596b":function(e,t,a){"use strict";a("7fa6")},5993:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hec-name"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),required:"",mode:e.mode},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hec-type"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.VOLUME_TYPE,mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hec-container"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.dockerImage"),value:e.value.container,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.virtualMachine.volume.dockerImage"),mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.container,callback:function(t){e.$set(e.value,"container",t)},expression:"value.container"}})],1)],1),t("div",{staticClass:"col span-3",attrs:{"data-testid":"input-hec-bus"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),options:e.InterfaceOption,mode:e.mode},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])])},l=[],i=a("d444"),r=a("53fe"),o=a("2aaa"),n=a("7c47"),c={name:"HarvesterEditContainer",components:{LabeledInput:i["a"],LabeledSelect:r["a"],InputOrDisplay:o["a"]},props:{mode:{type:String,default:"create"},value:{type:Object,required:!0}},data(){return{VOLUME_TYPE:n["h"],InterfaceOption:n["d"]}},watch:{"value.type"(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())}},methods:{update(){this.$emit("update")}}},d=c,u=a("d802"),p=Object(u["a"])(d,s,l,!1,null,null,null);t["default"]=p.exports},"59d1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",on:{input:e.update}},[t("div",{staticClass:"col span-12"},[t("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.fields.type"),options:e.typeOption},on:{input:e.update},model:{value:e.parseDefaultValue.type,callback:function(t){e.$set(e.parseDefaultValue,"type",t)},expression:"parseDefaultValue.type"}}),t("LabeledInput",{staticClass:"mb-5",attrs:{placeholder:e.endpointPlaceholder,mode:e.mode,label:"Endpoint"},model:{value:e.parseDefaultValue.endpoint,callback:function(t){e.$set(e.parseDefaultValue,"endpoint",t)},expression:"parseDefaultValue.endpoint"}}),t("Tip",{staticClass:"mb-20",attrs:{icon:"icon icon-info",text:e.t("harvester.backup.backupTargetTip")}}),e.isS3?[t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,label:"Bucket Name",required:""},model:{value:e.parseDefaultValue.bucketName,callback:function(t){e.$set(e.parseDefaultValue,"bucketName",t)},expression:"parseDefaultValue.bucketName"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,label:"Bucket Region",required:""},model:{value:e.parseDefaultValue.bucketRegion,callback:function(t){e.$set(e.parseDefaultValue,"bucketRegion",t)},expression:"parseDefaultValue.bucketRegion"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{placeholder:e.t("harvester.setting.placeholder.accessKeyId"),mode:e.mode,label:"Access Key ID",required:""},model:{value:e.parseDefaultValue.accessKeyId,callback:function(t){e.$set(e.parseDefaultValue,"accessKeyId",t)},expression:"parseDefaultValue.accessKeyId"}}),t("Password",{staticClass:"mb-20",attrs:{mode:e.mode,placeholder:e.t("harvester.setting.placeholder.secretAccessKey"),label:"Secret Access Key",required:""},model:{value:e.parseDefaultValue.secretAccessKey,callback:function(t){e.$set(e.parseDefaultValue,"secretAccessKey",t)},expression:"parseDefaultValue.secretAccessKey"}}),t("LabeledSelect",{staticClass:"mb-20",attrs:{label:"Virtual Hosted-Style",options:e.virtualHostedStyleType},on:{input:e.update},model:{value:e.parseDefaultValue.virtualHostedStyle,callback:function(t){e.$set(e.parseDefaultValue,"virtualHostedStyle",t)},expression:"parseDefaultValue.virtualHostedStyle"}}),t("div",{staticClass:"mb-20"},[t("Tip",{attrs:{icon:"icon icon-info"}},[t("MessageLink",{attrs:{to:e.toCA,target:"_blank","prefix-label":"harvester.setting.message.ca.prefix","middle-label":"harvester.setting.message.ca.middle","suffix-label":"harvester.setting.message.ca.suffix"}})],1)],1)]:e._e()],2)])},l=[],i=a("1fc2"),r=a("fa85"),o=a("e519"),n=a("203b"),c=a("c78c"),d=a("d444"),u=a("53fe"),p={name:"HarvesterEditBackupTarget",components:{LabeledInput:d["a"],LabeledSelect:u["a"],Tip:i["a"],Password:o["a"],MessageLink:n["a"]},mixins:[c["a"]],data(){let e={};try{e=JSON.parse(this.value.value)}catch(t){e={type:"",endpoint:""}}return e.type||(e.type="s3"),{parseDefaultValue:e,errors:[]}},computed:{typeOption(){return[{value:"nfs",label:"NFS"},{value:"s3",label:"S3"}]},virtualHostedStyleType(){return[{value:!0,label:"True"},{value:!1,label:"False"}]},isS3(){return"s3"===this.parseDefaultValue.type},endpointPlaceholder(){return this.isS3?"":"nfs://server:/path/"},toCA(){return r["b"].ADDITIONAL_CA+"?mode=edit"}},watch:{value:{handler(e){let t;try{t=JSON.parse(e.value)}catch(a){t={type:"",endpoint:""}}this.$set(this,"parseDefaultValue",t),this.update()},deep:!0}},created(){this.update()},methods:{update(){this.isS3||(delete this.parseDefaultValue.accessKeyId,delete this.parseDefaultValue.secretAccessKey,delete this.parseDefaultValue.bucketName,delete this.parseDefaultValue.bucketRegion,delete this.parseDefaultValue.virtualHostedStyle,delete this.parseDefaultValue.cert);const e=JSON.stringify(this.parseDefaultValue);this.parseDefaultValue.type?this.$set(this.value,"value",e):this.$delete(this.value,"value")},useDefault(){const e={type:"",endpoint:""};this.$set(this,"parseDefaultValue",e)}}},v=p,m=(a("273f"),a("d802")),h=Object(m["a"])(v,s,l,!1,null,"199ff844",null);t["default"]=h.exports},"59ef":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-48191ff8] .icon-info{margin-top:-3px;margin-right:4px}",""]),e.exports=t},"5a4c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-12"},[t("div",{staticClass:"mb-10"},[e._v(" "+e._s(e.t("harvester.setting.sslCertificates.publicCertificate"))+" ")]),t("div",{staticClass:"chooseFile"},[t("FileSelector",{staticClass:"btn btn-sm bg-primary mr-20",attrs:{"include-file-name":!0,label:"Choose File"},on:{selected:function(t){return e.onKeySelectedCa("publicCertificate",t)}}}),t("span",{class:{"text-muted":!e.publicCertificateFileName}},[e._v(e._s(e.publicCertificateFileName?e.publicCertificateFileName:e.t("harvester.generic.noFileChosen")))])],1)])]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-12"},[t("div",{staticClass:"mb-10"},[e._v(" "+e._s(e.t("harvester.setting.sslCertificates.privateKey"))+" ")]),t("div",{staticClass:"chooseFile"},[t("FileSelector",{staticClass:"btn btn-sm bg-primary mr-20",attrs:{"include-file-name":!0,label:"Choose File"},on:{selected:function(t){return e.onKeySelectedCa("privateKey",t)}}}),t("span",{class:{"text-muted":!e.privateKeyFileName}},[e._v(e._s(e.privateKeyFileName?e.privateKeyFileName:e.t("harvester.generic.noFileChosen")))])],1)])]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-12"},[t("div",{staticClass:"mb-10"},[e._v(" "+e._s(e.t("harvester.setting.sslCertificates.ca"))+" ")]),t("div",{staticClass:"chooseFile"},[t("FileSelector",{staticClass:"btn btn-sm bg-primary mr-20",attrs:{"include-file-name":!0,label:"Choose File"},on:{selected:function(t){return e.onKeySelectedCa("ca",t)}}}),t("span",{class:{"text-muted":!e.caFileName}},[e._v(e._s(e.caFileName?e.caFileName:e.t("harvester.generic.noFileChosen")))])],1)])])])},l=[],i=a("c78c"),r=a("3204"),o={name:"HarvesterSSLCertificates",components:{FileSelector:r["b"]},mixins:[i["a"]],data(){let e={};try{e=JSON.parse(this.value.value)}catch(t){e=JSON.parse(this.value.default)}return{parseDefaultValue:e,caFileName:"",publicCertificateFileName:"",privateKeyFileName:""}},methods:{onKeySelectedCa(e,t){const{name:a,value:s}=t;this.$set(this.parseDefaultValue,e,s),this.$set(this,e+"FileName",a);const l=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",l)}},watch:{value:{handler(e){const t=JSON.parse(e.value);this.$set(this,"parseDefaultValue",t)},deep:!0}}},n=o,c=(a("035b"),a("d802")),d=Object(c["a"])(n,s,l,!1,null,"7c781792",null);t["default"]=d.exports},"5bd9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("CruResource",{staticClass:"route",attrs:{"done-route":e.doneRoute,errors:e.errors,mode:e.mode,resource:e.value,subtypes:[],"cancel-event":!0},on:{error:t=>e.errors=t,finish:e.save,cancel:e.done}},[t("NameNsDescription",{attrs:{mode:e.mode,namespaced:e.isNamespaced},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("Tabbed",[t("Tab",{attrs:{label:e.t("monitoring.route.label"),weight:1,name:"route"}},[t("RouteConfig",{attrs:{value:e.value.spec.route,mode:e.mode,"receiver-options":e.receiverOptions}})],1),t("Tab",{attrs:{label:e.t("alertmanagerConfigReceiver.receivers"),weight:2,name:"receivers"}},[t("ResourceTable",{attrs:{headers:e.receiverTableHeaders,schema:e.receiverSchema,rows:e.value.spec.receivers||[],"get-custom-detail-link":e.getReceiverDetailLink,"table-actions":!1,"custom-actions":e.value.receiverActions},on:{clickedActionButton:e.setActionMenuState},scopedSlots:e._u([{key:"header-button",fn:function(){return[e.createReceiverLink&&e.createReceiverLink.name?t("nuxt-link",{attrs:{to:e.mode!==e.create?e.createReceiverLink:{}}},[t("button",{staticClass:"btn role-primary",attrs:{disabled:e.mode===e.create,tooltip:e.t("monitoring.alertmanagerConfig.disabledReceiverButton")}},[e._v(" "+e._s(e.t("monitoring.receiver.addReceiver"))+" "),e.mode===e.create?t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("monitoring.alertmanagerConfig.disabledReceiverButton"),expression:"t('monitoring.alertmanagerConfig.disabledReceiverButton')"}],staticClass:"icon icon-info"}):e._e()])]):e._e()]},proxy:!0}])})],1)],1),t("ActionMenu",{attrs:{"custom-actions":e.receiverActions,open:e.receiverActionMenuIsOpen,"use-custom-target-element":!0,"custom-target-element":e.actionMenuTargetElement,"custom-target-event":e.actionMenuTargetEvent},on:{close:function(t){e.receiverActionMenuIsOpen=!1},goToEdit:e.goToEdit,goToEditYaml:e.goToEditYaml,promptRemove:e.promptRemove}})],1)},l=[],i=a("2e2b"),r=a("c78c"),o=a("ad61"),n=a("5ef9"),c=a("56a4"),d=a("70a6"),u=a("65b0"),p=a("c349"),v=a("b88a"),m=function(){var e=this,t=e._self._c;return t("div",[t("h3",[e._v(" Receiver "),t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("monitoring.alertmanagerConfig.receiverTooltip"),expression:"t('monitoring.alertmanagerConfig.receiverTooltip')"}],staticClass:"icon icon-info"})]),t("Banner",{attrs:{color:"info",label:e.t("monitoring.alertmanagerConfig.routeInfo")}}),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{mode:e.mode,options:e.receiverOptions},model:{value:e.value.receiver,callback:function(t){e.$set(e.value,"receiver",t)},expression:"value.receiver"}})],1)]),t("h3",[e._v("Grouping")]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("span",{staticClass:"label"},[e._v(" "+e._s(e.t("monitoringRoute.groups.addGroupByLabel'"))+" "),t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("monitoringRoute.groups.groupByTooltip"),expression:"t('monitoringRoute.groups.groupByTooltip')"}],staticClass:"icon icon-info"})]),t("ArrayList",{staticClass:"mt-10",attrs:{mode:e.mode,"initial-empty-row":!0},model:{value:e.value.groupBy,callback:function(t){e.$set(e.value,"groupBy",t)},expression:"value.groupBy"}})],1)]),t("h3",[e._v("Waiting and Intervals")]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoringRoute.wait.label"),mode:e.mode},model:{value:e.value.groupWait,callback:function(t){e.$set(e.value,"groupWait",t)},expression:"value.groupWait"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoringRoute.interval.label"),mode:e.mode},model:{value:e.value.groupInterval,callback:function(t){e.$set(e.value,"groupInterval",t)},expression:"value.groupInterval"}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoringRoute.repeatInterval.label"),mode:e.mode},model:{value:e.value.repeatInterval,callback:function(t){e.$set(e.value,"repeatInterval",t)},expression:"value.repeatInterval"}})],1)]),t("h3",[e._v("Matchers")]),t("ArrayListGrouped",{staticClass:"mt-20",attrs:{mode:e.mode,"add-label":e.t("monitoringRoute.matching.addMatcher"),"default-add-value":{matchers:[]}},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"row mt-20 mb-20"},[t("div",{staticClass:"col span-4"},[t("LabeledInput",{attrs:{label:e.t("monitoringRoute.matching.name"),tooltip:e.t("monitoringRoute.matching.nameTooltip"),mode:e.mode},model:{value:a.row.value.name,callback:function(t){e.$set(a.row.value,"name",t)},expression:"props.row.value.name"}})],1),t("div",{staticClass:"col span-4"},[t("LabeledInput",{attrs:{label:e.t("monitoringRoute.matching.value"),tooltip:e.t("monitoringRoute.matching.valueTooltip"),mode:e.mode},model:{value:a.row.value.value,callback:function(t){e.$set(a.row.value,"value",t)},expression:"props.row.value.value"}})],1),t("div",{staticClass:"col span-4"},[t("LabeledSelect",{attrs:{label:e.t("monitoringRoute.matching.matchType"),mode:e.mode,options:e.matchTypes},model:{value:a.row.value.matchType,callback:function(t){e.$set(a.row.value,"matchType",t)},expression:"props.row.value.matchType"}})],1)])]}}]),model:{value:e.value.matchers,callback:function(t){e.$set(e.value,"matchers",t)},expression:"value.matchers"}})],1)},h=[],b=a("da9e"),f=a("dffb"),g=a("d444"),y=a("53fe"),C=a("d6a6"),k=a("d003"),w={components:{ArrayList:b["a"],Banner:f["a"],ArrayListGrouped:k["a"],LabeledInput:g["a"],LabeledSelect:y["a"]},props:{mode:{type:String,required:!0},value:{type:Object,required:!0},receiverOptions:{type:Array,required:!0}},data(){return this.$set(this.value,"matchers",this.value.matchers||[]),this.$set(this.value,"groupBy",this.value.groupBy||[]),{isView:C["I"],matchTypes:[{label:"Match Equal",value:"="},{label:"Match Not Equal",value:"!="},{label:"Match Regexp",value:"=~"},{label:"Match Not Regexp",value:"!~"}]}}},x=w,S=a("d802"),_=Object(S["a"])(x,m,h,!1,null,null,null),O=_.exports,N=a("efbe"),$=a("3c2f"),L={components:{ActionMenu:$["a"],CruResource:i["a"],Loading:d["a"],NameNsDescription:u["a"],ResourceTable:N["a"],RouteConfig:O,Tab:n["a"],Tabbed:o["a"]},mixins:[r["a"]],async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=this.value.id,a=await this.$store.dispatch(e+"/find",{type:c["v"].ALERTMANAGERCONFIG,id:t});this.alertmanagerConfigId=t,this.alertmanagerConfigResource=a,this.alertmanagerConfigDetailRoute=a._detailLocation;const s=a.availableActions,l=a.getReceiverActions(s);this.receiverActions=l},data(){var e,t;this.value.applyDefaults();const a={},s=this.$store.getters["harvester/schemaFor"](c["v"].SPOOFED.ALERTMANAGERCONFIG_RECEIVER_SPEC),l=this.$store.getters["harvester/schemaFor"](c["v"].SPOOFED.ALERTMANAGERCONFIG_ROUTE_SPEC),i=((null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.receivers)||[]).map(e=>e.name);return{actionMenuTargetElement:null,actionMenuTargetEvent:null,config:C["y"],create:C["z"],createReceiverLink:this.value.getCreateReceiverRoute(),defaultReceiverValues:a,receiverActionMenuIsOpen:!1,receiverTableHeaders:[{name:"name",labelKey:"tableHeaders.name",value:"name",sort:["nameSort"],formatter:"LinkDetail",canBeVariable:!0},{name:"type",labelKey:"tableHeaders.type",value:"name",formatter:"ReceiverIcons",canBeVariable:!0}],newReceiverType:null,receiverActions:[],receiverOptions:i,receiverTypes:v["RECEIVERS_TYPES"],routeSchema:l,receiverSchema:s,selectedReceiverName:"",selectedRowValue:null,view:C["I"]}},computed:{editorMode(){return this.mode===C["I"]?p["a"].VIEW_CODE:p["a"].EDIT_CODE}},methods:{translateReceiverTypes(){return this.receiverTypes.map(e=>({...e,label:this.t(e.label)}))},getReceiverDetailLink(e){if(e&&e.name)return this.value.getReceiverDetailLink(e.name)},toggleReceiverActionMenu(){this.receiverActionMenuIsOpen=!0},setActionMenuState(e){const{event:t,targetElement:a}=e;if(!t||!a)throw new Error("Could not find action menu target element.");this.actionMenuTargetElement=a,this.actionMenuTargetEvent=t,this.selectedReceiverName=a.id.split("+").slice(2).join(""),this.toggleReceiverActionMenu()},goToEdit(){this.$router.push(this.alertmanagerConfigResource.getEditReceiverConfigRoute(this.selectedReceiverName,C["B"]))},goToEditYaml(){this.$router.push(this.alertmanagerConfigResource.getEditReceiverYamlRoute(this.selectedReceiverName,C["B"]))},promptRemove(){const e=this.selectedReceiverName,t=this.alertmanagerConfigResource.spec.receivers||[],a=t.filter(t=>t.name!==e);this.alertmanagerConfigResource.spec.receivers=a,this.alertmanagerConfigResource.save(...arguments)}}},I=L,T=(a("787e"),Object(S["a"])(I,s,l,!1,null,"0a7b7be2",null));t["default"]=T.exports},"5c0d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.isView?e._e():t("h2",[e._v(" "+e._s(e.t("harvester.virtualMachine.cloudConfig.title"))+" ")]),t("div",{staticClass:"mb-20"},[t("DataTemplate",{ref:"userTemplate",attrs:{type:"user","view-code":e.viewCode,mode:e.mode,"config-id":e.configUserId,options:e.optionUser},on:{show:e.show,update:e.update,updateTemplateId:e.updateTemplateId},model:{value:e.userScript,callback:function(t){e.userScript=t},expression:"userScript"}})],1),t("div",{staticClass:"mb-20"},[t("DataTemplate",{ref:"networkTemplate",attrs:{type:"network","view-code":e.viewCode,mode:e.mode,"config-id":e.configNetworkId,options:e.optionNetwork},on:{show:e.show,update:e.update},model:{value:e.networkScript,callback:function(t){e.networkScript=t},expression:"networkScript"}})],1),t("ModalWithCard",{ref:"createCloudTemplate",attrs:{name:"createCloudTemplate",width:"40%",errors:e.errors},on:{finish:e.save,close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.cloudConfig.createTemplateTitle",{name:e.createTypeLable}))+" ")]},proxy:!0},{key:"content",fn:function(){return[t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.name"),required:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:e.cloudTemplateName,callback:function(t){e.cloudTemplateName=t},expression:"cloudTemplateName"}}),t("div",{staticClass:"yaml"},[t("div",{staticClass:"resource-yaml"},[t("YamlEditor",{ref:"createTemplate",staticClass:"yaml-editor",attrs:{"editor-mode":e.editorMode},model:{value:e.cloudTemplate,callback:function(t){e.cloudTemplate=t},expression:"cloudTemplate"}})],1)])]},proxy:!0}])})],1)},l=[],i=a("9ce4"),r=a("d444"),o=a("c349"),n=a("5fe4"),c=a("56a4"),d=a("873f"),u=a("d6a6"),p=a("6b50");const v="_NEW",m="_NONE";var h={components:{DataTemplate:p["default"],YamlEditor:o["b"],LabeledInput:r["a"],ModalWithCard:n["a"]},props:{mode:{type:String,default:"create"},namespace:{type:String,default:""},userScript:{type:String,default:""},networkScript:{type:String,default:""},viewCode:{type:Boolean,default:!1}},data(){return{errors:[],templateType:"",cloudTemplate:"",cloudTemplateName:"",configUserId:"",configNetworkId:"",optionUser:[],optionNetwork:[]}},async fetch(){const e=await this.$store.dispatch("harvester/findAll",{type:c["e"]}),t=[],a=[];for(const o of e){var s,l,i,r;"user"===(null===(s=o.metadata)||void 0===s||null===(l=s.labels)||void 0===l?void 0:l[d["a"].CLOUD_INIT])&&t.push({label:null===o||void 0===o?void 0:o.id,value:null===o||void 0===o?void 0:o.id}),"network"===(null===(i=o.metadata)||void 0===i||null===(r=i.labels)||void 0===r?void 0:r[d["a"].CLOUD_INIT])&&a.push({label:null===o||void 0===o?void 0:o.id,value:null===o||void 0===o?void 0:o.id})}t.unshift({label:this.t("harvester.virtualMachine.cloudConfig.createNew"),value:v}),t.unshift({label:this.t("harvester.virtualMachine.cloudConfig.cloudInit.placeholder"),value:m}),a.unshift({label:this.t("harvester.virtualMachine.cloudConfig.createNew"),value:v}),a.unshift({label:this.t("harvester.virtualMachine.cloudConfig.cloudInit.placeholder"),value:m}),this.optionUser=t,this.optionNetwork=a},computed:{...Object(i["a"])({t:"i18n/t"}),createTypeLable(){const e=`harvester.virtualMachine.cloudConfig.${this.templateType}.label`;return this.t(e)},editorMode(){return this.isView?o["a"].VIEW_CODE:o["a"].EDIT_CODE},isView(){return this.mode===u["I"]}},methods:{updateValue(){this.$refs["userTemplate"].updateValue(),this.$refs["networkTemplate"].updateValue()},update(e,t){"user"===t&&this.$emit("updateUserData",e),"network"===t&&this.$emit("updateNetworkData",e)},updateTemplateId(e,t){this.$emit("updateDataTemplateId",e,t)},show(e){this.templateType=e,this.$modal.show("createCloudTemplate")},async save(e){if(this.errors=[],!this.cloudTemplateName)return this.errors.push(this.t("validation.required",{key:this.t("harvester.virtualMachine.input.name")},!0)),void e(!1);if(!this.cloudTemplate){const t="user"===this.templateType?"harvester.cloudTemplate.userData":"harvester.cloudTemplate.networkData";return this.errors.push(this.t("validation.required",{key:this.t(t)},!0)),void e(!1)}const t=await this.$store.dispatch("harvester/create",{type:c["e"],metadata:{labels:{[d["a"].CLOUD_INIT]:this.templateType},name:this.cloudTemplateName,namespace:this.namespace},data:{cloudInit:this.cloudTemplate}});try{const a=await t.save();a.id&&("user"===this.templateType?this.configUserId=a.id:this.configNetworkId=a.id,this.$fetch()),e(!0),this.cancel()}catch(a){this.errors=[a.message],e(!1)}},cancel(){this.cloudTemplate="",this.cloudTemplateName="",this.$set(this,"errors",[]),this.$modal.hide("createCloudTemplate")},refresh(){this.$refs["userTemplate"].refresh(),this.$refs["networkTemplate"].refresh()}}},b=h,f=(a("8944"),a("d802")),g=Object(f["a"])(b,s,l,!1,null,"e0fbc23c",null);t["default"]=g.exports},"5c6b":function(e,t,a){var s=a("7f4e");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("6125a3a6",s,!0,{sourceMap:!1,shadowMode:!1})},"5d6f":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".listener-headers[data-v-0cb03c46],.listener-row[data-v-0cb03c46]{display:grid;grid-column-gap:1.75%;margin-bottom:10px;align-items:center;grid-template-columns:35% 15% 15% 15% 15%}",""]),e.exports=t},"5ed9":function(e,t,a){var s={"./":"bef4","./basic":"1d27","./basic.vue":"1d27","./generic":"62c1","./generic.vue":"62c1","./index":"d975","./index.vue":"d975","./registry":"7ce9","./registry.vue":"7ce9","./ssh":"08ba","./ssh.vue":"08ba","./tls":"ed82","./tls.vue":"ed82"};function l(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=i,e.exports=l,l.id="5ed9"},"5f11":function(e,t,a){var s=a("08f8");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("0b56c860",s,!0,{sourceMap:!1,shadowMode:!1})},"5fc2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("Tabbed",{attrs:{"side-tabs":!0}},[t("Tab",{attrs:{name:"basic",label:e.t("harvester.addons.vmImport.titles.basic"),weight:99}},[t("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",mode:e.mode,options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},model:{value:e.value.spec.enabled,callback:function(t){e.$set(e.value.spec,"enabled",t)},expression:"value.spec.enabled"}})],1),e.value.spec.enabled?t("Tab",{attrs:{name:"prometheus",label:e.t("harvester.setting.harvesterMonitoring.section.prometheus"),weight:-1}},[t("a",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.externalLinks.prometheus.enabled?void 0:e.t("monitoring.overview.linkedList.na"),expression:"!externalLinks.prometheus.enabled ? t('monitoring.overview.linkedList.na') : undefined"}],staticClass:"subtype-banner m-0 mt-10 mb-10",attrs:{disabled:!e.externalLinks.prometheus.enabled,href:e.externalLinks.prometheus.link,target:"_blank",rel:"noopener noreferrer"}},[t("div",{staticClass:"subtype-content"},[t("div",{staticClass:"title"},[t("div",{staticClass:"subtype-logo round-image"},[t("LazyImage",{attrs:{src:e.externalLinks.prometheus.iconSrc}})],1),t("h5",[t("span",[t("t",{attrs:{k:e.externalLinks.prometheus.label}})],1)]),t("div",{staticClass:"flex-right"},[t("i",{staticClass:"icon icon-external-link mr-10"})])])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.scrape"),tooltip:e.t("harvester.setting.harvesterMonitoring.tips.scrape"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.prometheus.prometheusSpec.scrapeInterval,callback:function(t){e.$set(e.valuesContentJson.prometheus.prometheusSpec,"scrapeInterval",t)},expression:"valuesContentJson.prometheus.prometheusSpec.scrapeInterval"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.evaluation"),tooltip:e.t("harvester.setting.harvesterMonitoring.tips.evaluation"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.prometheus.prometheusSpec.evaluationInterval,callback:function(t){e.$set(e.valuesContentJson.prometheus.prometheusSpec,"evaluationInterval",t)},expression:"valuesContentJson.prometheus.prometheusSpec.evaluationInterval"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.retention"),tooltip:e.t("harvester.setting.harvesterMonitoring.tips.retention"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.prometheus.prometheusSpec.retention,callback:function(t){e.$set(e.valuesContentJson.prometheus.prometheusSpec,"retention",t)},expression:"valuesContentJson.prometheus.prometheusSpec.retention"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.retentionSize"),tooltip:e.t("harvester.setting.harvesterMonitoring.tips.retentionSize"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.prometheus.prometheusSpec.retentionSize,callback:function(t){e.$set(e.valuesContentJson.prometheus.prometheusSpec,"retentionSize",t)},expression:"valuesContentJson.prometheus.prometheusSpec.retentionSize"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-12 mt-5"},[t("h4",{staticClass:"mb-0"},[e._v(" "+e._s(e.t("monitoring.prometheus.config.resourceLimits"))+" ")])])]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.cpu"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.prometheus.prometheusSpec.resources.requests.cpu,callback:function(t){e.$set(e.valuesContentJson.prometheus.prometheusSpec.resources.requests,"cpu",t)},expression:"valuesContentJson.prometheus.prometheusSpec.resources.requests.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.memory"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.prometheus.prometheusSpec.resources.requests.memory,callback:function(t){e.$set(e.valuesContentJson.prometheus.prometheusSpec.resources.requests,"memory",t)},expression:"valuesContentJson.prometheus.prometheusSpec.resources.requests.memory"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.cpu"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.prometheus.prometheusSpec.resources.limits.cpu,callback:function(t){e.$set(e.valuesContentJson.prometheus.prometheusSpec.resources.limits,"cpu",t)},expression:"valuesContentJson.prometheus.prometheusSpec.resources.limits.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.memory"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.prometheus.prometheusSpec.resources.limits.memory,callback:function(t){e.$set(e.valuesContentJson.prometheus.prometheusSpec.resources.limits,"memory",t)},expression:"valuesContentJson.prometheus.prometheusSpec.resources.limits.memory"}})],1)])]):e._e(),e.value.spec.enabled?t("Tab",{attrs:{name:"nodeExporter",label:e.t("harvester.setting.harvesterMonitoring.section.prometheusNodeExporter"),weight:-2}},[t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.cpu"),required:!0,mode:e.mode},model:{value:e.prometheusNodeExporter.resources.limits.cpu,callback:function(t){e.$set(e.prometheusNodeExporter.resources.limits,"cpu",t)},expression:"prometheusNodeExporter.resources.limits.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.memory"),required:!0,mode:e.mode},model:{value:e.prometheusNodeExporter.resources.limits.memory,callback:function(t){e.$set(e.prometheusNodeExporter.resources.limits,"memory",t)},expression:"prometheusNodeExporter.resources.limits.memory"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.cpu"),required:!0,mode:e.mode},model:{value:e.prometheusNodeExporter.resources.requests.cpu,callback:function(t){e.$set(e.prometheusNodeExporter.resources.requests,"cpu",t)},expression:"prometheusNodeExporter.resources.requests.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.memory"),required:!0,mode:e.mode},model:{value:e.prometheusNodeExporter.resources.requests.memory,callback:function(t){e.$set(e.prometheusNodeExporter.resources.requests,"memory",t)},expression:"prometheusNodeExporter.resources.requests.memory"}})],1)])]):e._e(),e.value.spec.enabled&&e.valuesContentJson.grafana.resources?t("Tab",{attrs:{name:"grafana",label:e.t("harvester.setting.harvesterMonitoring.section.grafana"),weight:-3}},[t("a",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.externalLinks.grafana.enabled?void 0:e.t("monitoring.overview.linkedList.na"),expression:"!externalLinks.grafana.enabled ? t('monitoring.overview.linkedList.na') : undefined"}],staticClass:"subtype-banner m-0 mt-10 mb-10",attrs:{disabled:!e.externalLinks.grafana.enabled,href:e.externalLinks.grafana.link,target:"_blank",rel:"noopener nofollow"}},[t("div",{staticClass:"subtype-content"},[t("div",{staticClass:"title"},[t("div",{staticClass:"subtype-logo round-image"},[t("LazyImage",{attrs:{src:e.externalLinks.grafana.iconSrc}})],1),t("h5",[t("span",[t("t",{attrs:{k:e.externalLinks.grafana.label}})],1)]),t("div",{staticClass:"flex-right"},[t("i",{staticClass:"icon icon-external-link mr-10"})])])])]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.cpu"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.grafana.resources.requests.cpu,callback:function(t){e.$set(e.valuesContentJson.grafana.resources.requests,"cpu",t)},expression:"valuesContentJson.grafana.resources.requests.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.memory"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.grafana.resources.requests.memory,callback:function(t){e.$set(e.valuesContentJson.grafana.resources.requests,"memory",t)},expression:"valuesContentJson.grafana.resources.requests.memory"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.cpu"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.grafana.resources.limits.cpu,callback:function(t){e.$set(e.valuesContentJson.grafana.resources.limits,"cpu",t)},expression:"valuesContentJson.grafana.resources.limits.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.memory"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.grafana.resources.limits.memory,callback:function(t){e.$set(e.valuesContentJson.grafana.resources.limits,"memory",t)},expression:"valuesContentJson.grafana.resources.limits.memory"}})],1)])]):e._e(),e.value.spec.enabled?t("Tab",{attrs:{name:"alertmanager",label:e.t("harvester.setting.harvesterMonitoring.section.alertmanager"),weight:-4}},[t("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",mode:e.mode,options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},model:{value:e.valuesContentJson.alertmanager.enabled,callback:function(t){e.$set(e.valuesContentJson.alertmanager,"enabled",t)},expression:"valuesContentJson.alertmanager.enabled"}}),e.valuesContentJson.alertmanager.enabled?t("a",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.externalLinks.alertmanager.enabled?void 0:e.t("monitoring.overview.linkedList.na"),expression:"!externalLinks.alertmanager.enabled ? t('monitoring.overview.linkedList.na') : undefined"}],staticClass:"subtype-banner m-0 mt-10 mb-10",attrs:{disabled:!e.externalLinks.alertmanager.enabled,href:e.externalLinks.alertmanager.link,target:"_blank",rel:"noopener noreferrer"}},[t("div",{staticClass:"subtype-content"},[t("div",{staticClass:"title"},[t("div",{staticClass:"subtype-logo round-image"},[t("LazyImage",{attrs:{src:e.externalLinks.alertmanager.iconSrc}})],1),t("h5",[t("span",[t("t",{attrs:{k:e.externalLinks.alertmanager.label}})],1)]),t("div",{staticClass:"flex-right"},[t("i",{staticClass:"icon icon-external-link mr-10"})])])])]):e._e(),e.valuesContentJson.alertmanager.enabled?t("div",[t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.retention"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.alertmanager.alertmanagerSpec.retention,callback:function(t){e.$set(e.valuesContentJson.alertmanager.alertmanagerSpec,"retention",t)},expression:"valuesContentJson.alertmanager.alertmanagerSpec.retention"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.cpu"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.alertmanager.alertmanagerSpec.resources.limits.cpu,callback:function(t){e.$set(e.valuesContentJson.alertmanager.alertmanagerSpec.resources.limits,"cpu",t)},expression:"valuesContentJson.alertmanager.alertmanagerSpec.resources.limits.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.memory"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.alertmanager.alertmanagerSpec.resources.limits.memory,callback:function(t){e.$set(e.valuesContentJson.alertmanager.alertmanagerSpec.resources.limits,"memory",t)},expression:"valuesContentJson.alertmanager.alertmanagerSpec.resources.limits.memory"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.cpu"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.alertmanager.alertmanagerSpec.resources.requests.cpu,callback:function(t){e.$set(e.valuesContentJson.alertmanager.alertmanagerSpec.resources.requests,"cpu",t)},expression:"valuesContentJson.alertmanager.alertmanagerSpec.resources.requests.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.memory"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.alertmanager.alertmanagerSpec.resources.requests.memory,callback:function(t){e.$set(e.valuesContentJson.alertmanager.alertmanagerSpec.resources.requests,"memory",t)},expression:"valuesContentJson.alertmanager.alertmanagerSpec.resources.requests.memory"}})],1)])]):e._e()],1):e._e()],1)},l=[],i=a("1fcb"),r=a.n(i),o=a("330a"),n=a.n(o),c=a("7838"),d=a.n(c),u=a("b837"),p=a("e411"),v=a("d444"),m=a("f032"),h=a("cf12"),b=a("ad61"),f=a("5ef9"),g=a("c78c"),y=a("56a4");const C="cattle-monitoring-system",k={prometheus:{prometheusSpec:{resources:{limits:{cpu:"1000m",memory:"3000Mi"},requests:{cpu:"750m",memory:"750Mi"}},evaluationInterval:"1m",scrapeInterval:"1m",retention:"5d",retentionSize:"50GiB"}},"prometheus-node-exporter":{resources:{limits:{cpu:"200m",memory:"180Mi"},requests:{cpu:"100m",memory:"30Mi"}}},grafana:{resources:{limits:{cpu:"200m",memory:"500Mi"},requests:{cpu:"100m",memory:"200Mi"}}},alertmanager:{enabled:!1,alertmanagerSpec:{retention:"120h",resources:{limits:{cpu:"1000m",memory:"600Mi"},requests:{cpu:"100m",memory:"100Mi"}}}}};var w={name:"EditAddonMonitoring",components:{LabeledInput:v["a"],RadioGroup:m["b"],LazyImage:h["a"],Tabbed:b["a"],Tab:f["a"]},mixins:[g["a"]],async fetch(){const{$store:e,externalLinks:t}=this;if(!e.getters["harvester/schemaFor"](y["h"]))return;const a=await Object(u["a"])({endpoints:e.dispatch("harvester/findAll",{type:y["h"]})});if(!n()(a.endpoints)){const e=t.alertmanager,s=t.grafana,l=t.prometheus,i=Object(p["e"])(a.endpoints,"id",C+"/rancher-monitoring-alertmanager"),r=Object(p["e"])(a.endpoints,"id",C+"/rancher-monitoring-grafana"),o=Object(p["e"])(a.endpoints,"id",C+"/rancher-monitoring-prometheus");n()(i)||n()(i.subsets)||(e.enabled=!0),n()(r)||n()(r.subsets)||(s.enabled=!0),n()(o)||n()(o.subsets)||(l.enabled=!0)}},props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){const e=a("dbb0"),t=a("cad1"),s=this.$store.getters["currentCluster"];let l=k;try{l=r()({},k,d.a.load(this.value.spec.valuesContent))}catch(i){l=k,this.$store.dispatch("growl/fromError",{title:this.$store.getters["i18n/t"]("generic.notification.title.error"),err:i.data||i},{root:!0})}return{valuesContentJson:l,externalLinks:{alertmanager:{enabled:!1,iconSrc:t,label:"monitoring.overview.linkedList.alertManager.label",description:"monitoring.overview.linkedList.alertManager.description",link:`/k8s/clusters/${s.id}/api/v1/namespaces/${C}/services/http:rancher-monitoring-alertmanager:9093/proxy`},grafana:{enabled:!1,iconSrc:e,label:"monitoring.overview.linkedList.grafana.label",description:"monitoring.overview.linkedList.grafana.description",link:`/k8s/clusters/${s.id}/api/v1/namespaces/${C}/services/http:rancher-monitoring-grafana:80/proxy`},prometheus:{enabled:!1,iconSrc:t,label:"monitoring.overview.linkedList.prometheusPromQl.label",description:"monitoring.overview.linkedList.prometheusPromQl.description",link:`/k8s/clusters/${s.id}/api/v1/namespaces/${C}/services/http:rancher-monitoring-prometheus:9090/proxy`}}}},computed:{prometheusNodeExporter(){return this.valuesContentJson["prometheus-node-exporter"]}},watch:{valuesContentJson:{handler(e){this.$set(this.value.spec,"valuesContent",d.a.dump(e))},deep:!0,immediate:!0}}},x=w,S=(a("6988"),a("d802")),_=Object(S["a"])(x,s,l,!1,null,"18364e32",null);t["default"]=_.exports},"5fdb":function(e,t,a){"use strict";a.r(t),a.d(t,"LONGHORN_SYSTEM",(function(){return E}));var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",{attrs:{id:"node"}},[t("div",{staticClass:"content"},[t("NameNsDescription",{attrs:{value:e.value,namespaced:!1,mode:e.mode}}),t("Tabbed",{ref:"tabbed",staticClass:"mt-15",attrs:{"side-tabs":!0}},[t("Tab",{attrs:{name:"basics",weight:100,label:e.t("harvester.host.tabs.basics")}},[t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.host.detail.customName"),mode:e.mode},model:{value:e.customName,callback:function(t){e.customName=t},expression:"customName"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.host.detail.consoleUrl"),mode:e.mode},model:{value:e.consoleUrl,callback:function(t){e.consoleUrl=t},expression:"consoleUrl"}})],1),e.hasBlockDevicesSchema?t("Tab",{attrs:{name:"disk",weight:80,label:e.t("harvester.host.tabs.storage")}},[e.longhornNode?t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-12"},[t("Tags",{attrs:{label:e.t("harvester.host.tags.label"),"add-label":e.t("harvester.host.tags.addLabel"),mode:e.mode},model:{value:e.longhornNode.spec.tags,callback:function(t){e.$set(e.longhornNode.spec,"tags",t)},expression:"longhornNode.spec.tags"}})],1)]):e._e(),t("ArrayListGrouped",{attrs:{mode:e.mode,"initial-empty-row":!1},scopedSlots:e._u([{key:"default",fn:function(a){return[t("HarvesterDisk",{staticClass:"mb-20",attrs:{mode:e.mode,disks:e.disks},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"props.row.value"}})]}},{key:"add",fn:function(){return[e.isView?e._e():t("ButtonDropdown",{attrs:{"button-label":e.t("harvester.host.disk.add"),"dropdown-options":e.blockDeviceOpts,size:"sm",selectable:e.selectable},on:{"click-action":t=>e.addDisk(t.value),"dd-button-action":e.ddButtonAction},scopedSlots:e._u([{key:"option",fn:function(a){return["group"===a.kind?[t("b",[e._v(" "+e._s(a.label)+" ")])]:t("div",[e._v(" "+e._s(a.label)+" ")])]}}],null,!1,3653410021)})]},proxy:!0},{key:"remove-button",fn:function(a){return[e.canRemove(a.row,a.i)&&!e.isView?t("button",{staticClass:"btn role-link close btn-sm",attrs:{type:"button"},on:{click:()=>e.onRemove(a)}},[t("i",{staticClass:"icon icon-x"})]):t("span")]}}],null,!1,1488272972),model:{value:e.newDisks,callback:function(t){e.newDisks=t},expression:"newDisks"}})],1):e._e(),e.hasKsmtunedSchema?t("Tab",{attrs:{name:"Ksmtuned",weight:70,label:e.t("harvester.host.tabs.ksmtuned")}},[t("HarvesterKsmtuned",{attrs:{mode:e.mode,node:e.value,"register-before-hook":e.registerBeforeHook}})],1):e._e(),e.hasAddonSchema?t("Tab",{attrs:{name:"seeder",weight:60,label:e.t("harvester.host.tabs.seeder")}},[e.seederEnabled&&e.hasInventorySchema?t("HarvesterSeeder",{attrs:{mode:e.mode,node:e.value,"register-after-hook":e.registerAfterHook,inventory:e.inventory}}):e.seederEnabled&&!e.hasInventorySchema?t("div",[t("Banner",{attrs:{color:"info",label:e.t("harvester.seeder.banner.noInventory")}})],1):t("div",[e.hasSeederAddon?t("Banner",{attrs:{color:"info"}},[t("MessageLink",{attrs:{to:e.toEnableSeederAddon,"prefix-label":"harvester.seeder.banner.enable.prefix","middle-label":"harvester.seeder.banner.enable.middle","suffix-label":"harvester.seeder.banner.enable.suffix"}})],1):t("Banner",{attrs:{color:"warning",label:e.t("harvester.seeder.banner.noAddon")}})],1)],1):e._e(),t("Tab",{attrs:{name:"labels","label-key":"harvester.host.tabs.labels"}},[t("KeyValue",{key:"labels",attrs:{value:e.filteredLabels,"add-label":e.t("labels.addLabel"),mode:e.mode,title:e.t("labels.labels.title"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:e.updateHostLabels}})],1)],1),e.showFormattedWarning?t("Banner",{attrs:{color:"warning",label:e.t("harvester.host.disk.forceFormatted.toolTip")}}):e._e()],1),t("Footer",{staticClass:"footer",attrs:{mode:e.mode,errors:e.errors},on:{save:e.save,done:e.done}})],1)},l=[],i=a("9ce4"),r=a("ad61"),o=a("5ef9"),n=a("9aaf"),c=a("65b0"),d=a("d444"),u=a("d003"),p=a("98f3"),v=a("c78c"),m=a("873f"),h=a("56a4"),b=a("90cd"),f=a("b837"),g=a("67ab"),y=a("e411"),C=a("1832"),k=a("3792"),w=a("2958"),x=a("70a6"),S=a("203b"),_=a("7c47"),O=a("4aac"),N=a("d6a6"),$=a("7592"),L=a("dffb"),I=a("34bc"),T=a("efc5"),D=a("a701"),M=a("32cf");const E="longhorn-system";var R={name:"HarvesterEditNode",components:{Footer:n["a"],Tabbed:r["a"],Tab:o["a"],LabeledInput:d["a"],NameNsDescription:c["a"],ArrayListGrouped:u["a"],HarvesterDisk:I["default"],HarvesterKsmtuned:T["default"],ButtonDropdown:p["a"],KeyValue:w["a"],Banner:L["a"],Tags:M["a"],Loading:x["a"],HarvesterSeeder:D["default"],MessageLink:S["a"]},mixins:[v["a"]],props:{value:{type:Object,required:!0}},async fetch(){var e;const t=this.$store.getters["currentProduct"].inStore,a={longhornNodes:this.$store.dispatch(t+"/findAll",{type:h["s"].NODES}),blockDevices:this.$store.dispatch(t+"/findAll",{type:b["b"].BLOCK_DEVICE}),addons:this.$store.dispatch(t+"/findAll",{type:b["b"].ADD_ONS}),secrets:this.$store.dispatch(t+"/findAll",{type:h["J"]})};this.$store.getters[t+"/schemaFor"](b["b"].INVENTORY)&&(a.inventories=this.$store.dispatch(t+"/findAll",{type:b["b"].INVENTORY})),await Object(f["a"])(a);const s=this.$store.getters[t+"/all"](b["b"].BLOCK_DEVICE),l=s.filter(e=>{var t,a,s;const l=null===e||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.fileSystem)||void 0===a?void 0:a.provisioned,i=(null===e||void 0===e||null===(s=e.spec)||void 0===s?void 0:s.nodeName)===this.value.id,r=Object(y["e"])(this.longhornDisks,"name",e.metadata.name);return l&&i&&!r}).map(e=>{var t,a,s,l,i,r,o,n,c,d;const u=null===e||void 0===e||null===(t=e.status)||void 0===t||null===(a=t.deviceStatus)||void 0===a||null===(s=a.fileSystem)||void 0===s?void 0:s.corrupted;return{isNew:!0,name:null===e||void 0===e||null===(l=e.metadata)||void 0===l?void 0:l.name,originPath:null===e||void 0===e||null===(i=e.spec)||void 0===i||null===(r=i.fileSystem)||void 0===r?void 0:r.mountPoint,path:null===e||void 0===e||null===(o=e.spec)||void 0===o||null===(n=o.fileSystem)||void 0===n?void 0:n.mountPoint,blockDevice:e,displayName:null===e||void 0===e?void 0:e.displayName,forceFormatted:!!u||((null===e||void 0===e||null===(c=e.spec)||void 0===c||null===(d=c.fileSystem)||void 0===d?void 0:d.forceFormatted)||!1)}}),i=[...this.longhornDisks,...l];this.disks=i,this.newDisks=Object(C["e"])(i),this.blockDeviceOpts=this.getBlockDeviceOpts();const r=this.$store.getters[t+"/all"](b["b"].ADD_ONS),o=r.find(e=>e.id==="harvester-system/"+_["b"].HARVESTER_SEEDER),n=!!o&&(null===o||void 0===o||null===(e=o.spec)||void 0===e?void 0:e.enabled);if(n){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](b["b"].INVENTORY)||[],a=t.find(e=>e.id==="harvester-system/"+this.value.id);a?this.inventory=await this.$store.dispatch(e+"/clone",{resource:a}):(this.inventory=await this.$store.dispatch(e+"/create",{type:b["b"].INVENTORY,metadata:{name:this.value.id,namespace:"harvester-system"}}),this.inventory.applyDefaults())}},data(){var e,t,a,s;const l=(null===(e=this.value.metadata)||void 0===e||null===(t=e.annotations)||void 0===t?void 0:t[m["a"].HOST_CUSTOM_NAME])||"",i=(null===(a=this.value.metadata)||void 0===a||null===(s=a.annotations)||void 0===s?void 0:s[m["a"].HOST_CONSOLE_URL])||"";return{customName:l,consoleUrl:i,disks:[],newDisks:[],blockDevice:[],blockDeviceOpts:[],filteredLabels:Object(C["e"])(this.value.filteredSystemLabels),inventory:{},originValue:Object(C["e"])(this.value)}},computed:{...Object(i["a"])({t:"i18n/t"}),removedDisks(){const e=this.disks.filter(e=>!Object(y["e"])(this.newDisks,"name",e.name))||[];return e},longhornDisks(){var e,t;const a=this.$store.getters["currentProduct"].inStore,s=this.$store.getters[a+"/byId"](h["s"].NODES,`${E}/${this.value.id}`),l=(null===s||void 0===s||null===(e=s.status)||void 0===e?void 0:e.diskStatus)||{},i=(null===s||void 0===s||null===(t=s.spec)||void 0===t?void 0:t.disks)||{},r={increment:1024,minExponent:3,maxExponent:3,maxPrecision:2,suffix:"iB"},o=Object.keys(l).map(e=>{var t,s,o,n,c,d,u;const p=this.$store.getters[a+"/byId"](b["b"].BLOCK_DEVICE,`${E}/${e}`);return{...l[e],...null===i||void 0===i?void 0:i[e],name:e,isNew:!1,storageReserved:Object(g["e"])(null===(t=i[e])||void 0===t?void 0:t.storageReserved,r),storageAvailable:Object(g["e"])(null===(s=l[e])||void 0===s?void 0:s.storageAvailable,r),storageMaximum:Object(g["e"])(null===(o=l[e])||void 0===o?void 0:o.storageMaximum,r),storageScheduled:Object(g["e"])(null===(n=l[e])||void 0===n?void 0:n.storageScheduled,r),blockDevice:p,displayName:(null===p||void 0===p?void 0:p.displayName)||e,forceFormatted:(null===p||void 0===p||null===(c=p.spec)||void 0===c||null===(d=c.fileSystem)||void 0===d?void 0:d.forceFormatted)||!1,tags:(null===i||void 0===i||null===(u=i[e])||void 0===u?void 0:u.tags)||[]}});return o},showFormattedWarning(){const e=this.newDisks.filter(e=>e.forceFormatted&&e.isNew)||[];return e.length>0},hasKsmtunedSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[e+"/schemaFor"](b["b"].KSTUNED)},hasBlockDevicesSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[e+"/schemaFor"](b["b"].BLOCK_DEVICE)},longhornNode(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](h["s"].NODES);return t.find(e=>e.id===`${E}/${this.value.id}`)},seederEnabled(){var e;const t=this.$store.getters["currentProduct"].inStore,a=this.$store.getters[t+"/all"](b["b"].ADD_ONS),s=a.find(e=>e.id==="harvester-system/"+_["b"].HARVESTER_SEEDER);return!!s&&(null===s||void 0===s||null===(e=s.spec)||void 0===e?void 0:e.enabled)},toEnableSeederAddon(){var e,t;const{cluster:a}=(null===(e=this.$router)||void 0===e||null===(t=e.currentRoute)||void 0===t?void 0:t.params)||{};return{name:O["PRODUCT_NAME"]+"-c-cluster-resource-namespace-id",params:{resource:""+b["b"].ADD_ONS,namespace:"harvester-system",cluster:a,id:""+_["b"].HARVESTER_SEEDER},query:{mode:N["B"]}}},hasAddonSchema(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[e+"/schemaFor"](b["b"].ADD_ONS)},hasSeederAddon(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](b["b"].ADD_ONS);return t.find(e=>e.id==="harvester-system/"+_["b"].HARVESTER_SEEDER)},hasInventorySchema(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[e+"/schemaFor"](b["b"].INVENTORY)}},watch:{customName(e){this.value.setAnnotation(m["a"].HOST_CUSTOM_NAME,e)},consoleUrl(e){this.value.setAnnotation(m["a"].HOST_CONSOLE_URL,e)},newDisks(){this.blockDeviceOpts=this.getBlockDeviceOpts()}},created(){this.registerBeforeHook&&this.registerBeforeHook(this.willSave,"willSave"),this.registerAfterHook&&(this.registerAfterHook(this.saveDisk),this.registerAfterHook(this.saveLonghornNode))},methods:{addDisk(e){var t,a,s,l,i,r,o,n,c,d,u,p;const v=Object(y["e"])(this.removedDisks,"blockDevice.id",e);if(v)return this.newDisks.push(v);const m=this.$store.getters["currentProduct"].inStore,h=this.$store.getters[m+"/byId"](b["b"].BLOCK_DEVICE,e),f=null===h||void 0===h||null===(t=h.spec)||void 0===t||null===(a=t.fileSystem)||void 0===a?void 0:a.mountPoint,g=null===h||void 0===h||null===(s=h.status)||void 0===s||null===(l=s.deviceStatus)||void 0===l||null===(i=l.fileSystem)||void 0===i?void 0:i.LastFormattedAt;let C=!0;const k=["ext4","XFS"];(null===(r=h.childParts)||void 0===r?void 0:r.length)>0?C=!0:(g||k.includes(null===h||void 0===h||null===(o=h.status)||void 0===o||null===(n=o.deviceStatus)||void 0===n||null===(c=n.fileSystem)||void 0===c?void 0:c.type))&&(C=!1);const w=null===h||void 0===h||null===(d=h.metadata)||void 0===d?void 0:d.name;this.newDisks.push({name:w,path:f,allowScheduling:!1,evictionRequested:!1,storageReserved:0,isNew:!0,originPath:null===h||void 0===h||null===(u=h.spec)||void 0===u||null===(p=u.fileSystem)||void 0===p?void 0:p.mountPoint,blockDevice:h,displayName:null===h||void 0===h?void 0:h.displayName,forceFormatted:C})},async saveDisk(){const e=this.$store.getters["currentProduct"].inStore,t=this.newDisks.filter(e=>e.isNew),a=this.disks.filter(e=>!Object(y["e"])(this.newDisks,"name",e.name)&&e.blockDevice);if(0===t.length&&0===a.length)return Promise.resolve();if(0!==t.length&&0===a.length){const a=t.filter(t=>{const a=this.$store.getters[e+"/byId"](b["b"].BLOCK_DEVICE,`${E}/${t.name}`),{provisioned:s,forceFormatted:l}=a.spec.fileSystem;return!s||l!==t.forceFormatted});if(0===a.length)return Promise.resolve()}try{var s;await Promise.all(t.map(t=>{const a=this.$store.getters[e+"/byId"](b["b"].BLOCK_DEVICE,`${E}/${t.name}`);return a.spec.fileSystem.provisioned=!0,a.spec.fileSystem.forceFormatted=t.forceFormatted,a.save()})),await Promise.all(a.map(t=>{const a=this.$store.getters[e+"/byId"](b["b"].BLOCK_DEVICE,`${E}/${t.name}`);return a.spec.fileSystem.provisioned=!1,a.save()})),this.$store.dispatch("growl/success",{title:this.t("generic.notification.title.succeed"),message:this.t("harvester.host.disk.notification.success",{name:(null===(s=this.value.metadata)||void 0===s?void 0:s.name)||""})},{root:!0})}catch(l){return Promise.reject(Object(k["c"])(l))}},canRemove(e){var t;return!(null===e||void 0===e||null===(t=e.value)||void 0===t||!t.blockDevice)},onRemove(e){e.remove()},updateHostLabels(e){this.filteredLabels=e},selectable(e){return!e.disabled},getBlockDeviceOpts(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](b["b"].BLOCK_DEVICE),a=t.filter(e=>{var t,a,s,l,i,r,o,n;const c=Object(y["e"])((null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.conditions)||[],"type","AddedToNode"),d=Object(y["e"])(this.newDisks,"name",e.metadata.name),u=Object(y["e"])(this.removedDisks,"name",e.metadata.name),p=null===(a=e.status)||void 0===a||null===(s=a.deviceStatus)||void 0===s||null===(l=s.details)||void 0===l?void 0:l.deviceType;return"disk"===p&&"Active"===(null===e||void 0===e||null===(i=e.status)||void 0===i?void 0:i.state)&&!((Object(y["e"])(this.disks||[],"name",e.metadata.name)||(null===e||void 0===e||null===(r=e.spec)||void 0===r?void 0:r.nodeName)!==this.value.id||c&&"False"!==(null===c||void 0===c?void 0:c.status)||null!==(o=e.spec)&&void 0!==o&&null!==(n=o.fileSystem)&&void 0!==n&&n.provisioned||d)&&!u)}).map(e=>{var t,a,s,l,i,r,o,n,c;const d=null===(t=e.spec)||void 0===t?void 0:t.devPath,u=null===(a=e.status)||void 0===a||null===(s=a.deviceStatus)||void 0===s||null===(l=s.details)||void 0===l?void 0:l.deviceType,p=null===(i=e.status)||void 0===i||null===(r=i.deviceStatus)||void 0===r||null===(o=r.capacity)||void 0===o?void 0:o.sizeBytes,v=Object(g["e"])(p,{increment:1024}),m=null===(n=e.status)||void 0===n||null===(c=n.deviceStatus)||void 0===c?void 0:c.parentDevice,h=this.newDisks.find(e=>{var t,a,s;return(null===(t=e.blockDevice)||void 0===t||null===(a=t.status)||void 0===a||null===(s=a.deviceStatus)||void 0===s?void 0:s.parentDevice)===d}),b=e.displayName;let f=`${b} (Type: ${u}, Size: ${v})`;return m&&(f="- "+f),{label:f,value:e.id,action:this.addDisk,kind:m?"":"group",disabled:!!h,group:m||d,isParent:!!m}});return Object($["b"])(a,["group","isParent","label"])},ddButtonAction(){this.blockDeviceOpts=this.getBlockDeviceOpts()},willSave(){const e=this.filteredLabels||{};this.value.metadata.labels={...this.value.metadata.labels,...e};const t=this.value.filteredSystemLabels;Object.keys(t).map(t=>{e[t]||delete this.value.metadata.labels[t]})},async saveLonghornNode(){var e,t;const a=this.$store.getters["currentProduct"].inStore,s=(null===(e=this.longhornNode)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.disks)||{};this.newDisks.map(e=>{(s[e.name]||{}).tags=e.tags});let l=0;const i=async()=>{try{await this.longhornNode.save()}catch(e){if(409!==e.status&&403!==e.status||!(l<3))return Promise.reject(Object(k["c"])(e));l++,await this.$store.dispatch(a+"/find",{type:h["s"].NODES,id:this.longhornNode.id,opt:{force:!0}}),await new Promise(e=>setTimeout(e,"5000")),await i()}};await i()}}},V=R,j=(a("a676"),a("d802")),P=Object(j["a"])(V,s,l,!1,null,"d7315d74",null);t["default"]=P.exports},"600e":function(e,t,a){var s=a("6983");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("e65491b6",s,!0,{sourceMap:!1,shadowMode:!1})},6035:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks,"yaml-modifiers":e.yamlModifiers},on:{finish:e.save}},[t("NameNsDescription",{attrs:{value:e.value,namespaced:!1,mode:e.mode}}),t("ResourceTabs",{staticClass:"mt-15",attrs:{"need-conditions":!1,"need-related":!1,"side-tabs":!0,mode:e.mode}},[t("Tab",{staticClass:"bordered-table",attrs:{name:"range",label:e.t("harvester.ipPool.tabs.range"),weight:98}},[t("Range",{staticClass:"col span-12",attrs:{mode:e.mode},model:{value:e.value.spec.ranges,callback:function(t){e.$set(e.value.spec,"ranges",t)},expression:"value.spec.ranges"}})],1),t("Tab",{staticClass:"bordered-table",attrs:{name:"selector",label:e.t("harvester.ipPool.tabs.selector"),weight:97}},[t("Selector",{attrs:{mode:e.mode},model:{value:e.value.spec.selector,callback:function(t){e.$set(e.value.spec,"selector",t)},expression:"value.spec.selector"}})],1)],1)],1)},l=[],i=a("65b0"),r=a("3921"),o=a("5ef9"),n=a("c78c"),c=a("56a4"),d=a("b837"),u=a("2e2b"),p=a("a581"),v=a("b1bc"),m=a("90cd"),h={name:"HarvesterIPPool",components:{NameNsDescription:i["a"],ResourceTabs:r["a"],Tab:o["a"],CruResource:u["a"],Range:p["default"],Selector:v["default"]},mixins:[n["a"]],async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={networks:this.$store.dispatch(e+"/findAll",{type:c["x"]}),settings:this.$store.dispatch(e+"/findAll",{type:m["b"].SETTING})};this.$store.getters["management/schemaFor"](m["b"].HARVESTER_CONFIG)&&(t.harvesterConfigs=this.$store.dispatch("management/findAll",{type:m["b"].HARVESTER_CONFIG})),this.$store.getters["management/schemaFor"](c["b"].RANCHER_CLUSTER)&&(t.rancherClusters=this.$store.dispatch("management/findAll",{type:c["b"].RANCHER_CLUSTER})),await Object(d["a"])(t)},data(){return{errors:[]}},computed:{yamlModifiers(){const e=["metadata.managedFields","metadata.relationships","metadata.state","links","type","id"];return this.isCreate&&e.push("status"),{activelyRemove:e}}}},b=h,f=a("d802"),g=Object(f["a"])(b,s,l,!1,null,null,null);t["default"]=g.exports},"60aa":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-ea8b4034] .radio-group{display:flex}[data-v-ea8b4034] .radio-group .radio-container{margin-right:30px}",""]),e.exports=t},"61a1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("modal",{staticClass:"restart-modal",attrs:{name:"restartDialog",width:600,height:"auto","click-to-close":!1},on:{closed:e.close}},[t("Card",{staticClass:"prompt-restart",attrs:{"show-highlight-border":!1}},[t("h4",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("harvester.modal.restart.title"),expression:"t('harvester.modal.restart.title')"}],staticClass:"text-default-text",attrs:{slot:"title"},slot:"title"}),t("template",{slot:"body"},[e._t("body",(function(){return[t("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("harvester.modal.restart.tip"),expression:"t('harvester.modal.restart.tip')"}],staticClass:"pl-10 pr-10"})]}))],2),t("div",{staticClass:"bottom",attrs:{slot:"actions"},slot:"actions"},[e._l(e.errors,(function(e,a){return t("Banner",{key:a,attrs:{color:"error",label:e}})})),t("div",{staticClass:"buttons"},[t("button",{staticClass:"btn role-secondary mr-10",on:{click:e.close}},[e._v(" "+e._s(e.t("harvester.modal.restart.cancel"))+" ")]),t("AsyncButton",{attrs:{mode:"restart"},on:{click:e.apply}})],1)],2)],2)],1)},l=[],i=a("9ce4"),r=a("a967"),o=a("09c6"),n=a("dffb"),c=a("3792"),d={components:{Card:o["a"],AsyncButton:r["b"],Banner:n["a"]},props:{vm:{type:Object,required:!0}},data(){return{errors:[],resolve:null}},computed:{...Object(i["a"])({t:"i18n/t"})},methods:{close(){this.resolve(),this.$emit("close")},apply(e){try{this.vm.doActionGrowl("restart",{}),e(!0),this.resolve(),this.close()}catch(t){console.error(t),this.errors=Object(c["c"])(t),e(!1)}}}},u=d,p=(a("cdd3"),a("d802")),v=Object(p["a"])(u,s,l,!1,null,"7e15e5b7",null);t["default"]=v.exports},"61a8":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".output{display:flex;flex-direction:column;flex-grow:1}.output .provider h1{display:inline-block}.output .box-container{display:flex;justify-content:flex-start;flex-wrap:wrap;margin:0 -10px}@media only screen and (min-width:480px){.output .box-container .toggle-gradient-box{width:100%}}@media only screen and (min-width:768px){.output .box-container .toggle-gradient-box{width:calc(50% - 20px)}}@media only screen and (min-width:992px){.output .box-container .toggle-gradient-box{width:calc(33.33333% - 20px)}}@media only screen and (min-width:1281px){.output .box-container .toggle-gradient-box{width:calc(25% - 20px)}}.output .box-container .toggle-gradient-box{margin:10px;padding:10px;position:relative;border-radius:calc(var(--border-radius)*1.5)}.output .box-container .toggle-gradient-box:hover{box-shadow:0 0 30px var(--shadow);transition:box-shadow .1s ease-in-out;cursor:pointer}.output .box-container .toggle-gradient-box .side-label{transform:rotate(180deg);position:absolute;top:0;left:0;bottom:0;min-width:calc(var(--border-radius)*1.5);width:15px;border-top-right-radius:calc(var(--border-radius)*1.5);border-bottom-right-radius:calc(var(--border-radius)*1.5)}.output .box-container .toggle-gradient-box .side-label label{text-align:center;writing-mode:tb;height:100%;padding:0 2px;display:block;white-space:no-wrap;text-overflow:ellipsis}.output .box-container .toggle-gradient-box .logo{text-align:center;width:60px;height:60px;border-radius:calc(var(--border-radius)*2);overflow:hidden;background-color:#fff;display:inline-block;vertical-align:middle}.output .box-container .toggle-gradient-box .logo img{width:56px;height:56px;-o-object-fit:contain;object-fit:contain;position:relative;top:2px}.output .box-container .toggle-gradient-box:hover{background-position:100%}.output .box-container .toggle-gradient-box .name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:0;display:inline-block;vertical-align:middle}",""]),e.exports=t},"624f":function(e,t,a){"use strict";a("6a03")},6269:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("CruResource",{attrs:{resource:e.value,mode:e.mode,errors:e.errors},on:{finish:e.save}},[t("NameNsDescription",{attrs:{value:e.value,mode:e.mode,namespaced:!1}}),t("ResourceTabs",{attrs:{mode:e.mode,"side-tabs":!0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("Tab",{attrs:{name:"labels-and-annotations","label-key":"generic.labelsAndAnnotations",weight:-1}},[t("Labels",{attrs:{"default-container-class":"labels-and-annotations-container",value:e.value,mode:e.mode,"display-side-by-side":!1}})],1)],1)],1)},l=[],i=a("2e2b"),r=a("65b0"),o=a("3921"),n=a("5ef9"),c=a("1eaf"),d=a("c78c"),u={name:"EditClusterNetwork",components:{CruResource:i["a"],NameNsDescription:r["a"],ResourceTabs:o["a"],Tab:n["a"],Labels:c["a"]},mixins:[d["a"]],computed:{doneLocationOverride(){return this.value.doneOverride}},created(){this.registerBeforeHook&&this.registerBeforeHook(this.validate)},methods:{validate(){var e,t;const a=[],s=null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name;return s?s.length>12&&a.push(this.t("validation.stringLength.max",{key:this.t("generic.name"),count:12},!0)):a.push(this.t("validation.required",{key:this.t("generic.name")},!0)),a.length>0?Promise.reject(a):Promise.resolve()}}},p=u,v=a("d802"),m=Object(v["a"])(p,s,l,!1,null,null,null);t["default"]=m.exports},"62c1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("KeyValue",{key:"data",attrs:{mode:e.mode,"initial-empty-row":!0,"handle-base64":!0,"value-trim":!1,"add-allowed":!0,"read-allowed":!0,"value-concealed":e.isView&&e.hideSensitiveData,"file-modifier":e.fileModifier,"parse-lines-from-file":!0,"read-icon":"","add-icon":""},model:{value:e.value.data,callback:function(t){e.$set(e.value,"data",t)},expression:"value.data"}})},l=[],i=a("2958"),r=a("d6a6");const o=/^[-._a-zA-Z0-9]*$/;var n={components:{KeyValue:i["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},hideSensitiveData:{type:Boolean,default:!0}},computed:{isView(){return this.mode===r["I"]}},methods:{fileModifier(e,t){return o.test(e)||(e=e.split("").map(e=>o.test(e)?e:"_").join("")),{name:e,value:t}}}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},"62ed":function(e,t,a){"use strict";a("f689")},"645f":function(e,t,a){"use strict";a.r(t);var s=a("3455"),l=a("4a03");describe("component: Loki",()=>{it("should display URL placeholder",()=>{const e=Object(s["shallowMount"])(l["default"],{propsData:{mode:"edit",namespace:"whatever"}}),t="https://127.0.0.1:8000",a=e.find('[data-testid="loki-url"]').attributes("placeholder");expect(a).toBe(t)})})},"65b0":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row mb-20"},[e.namespaced&&!e.nameNsHidden&&e.createNamespace?t("div",{staticClass:"col span-3",attrs:{"data-testid":e.componentTestid+"-namespace-create"}},[t("LabeledInput",{ref:"namespace",attrs:{label:e.t("namespace.label"),placeholder:e.t("namespace.createNamespace"),disabled:e.namespaceReallyDisabled,mode:e.mode,"min-height":30,required:e.nameRequired,rules:e.rules.namespace},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}}),t("button",{attrs:{aria:"Cancel create"},on:{click:e.cancelCreateNamespace}},[t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("generic.cancel"),expression:"t('generic.cancel')"}],staticClass:"icon icon-close align-value"})])],1):e._e(),!e.namespaced||e.nameNsHidden||e.createNamespace?e._e():t("div",{staticClass:"col span-3",attrs:{"data-testid":e.componentTestid+"-namespace"}},[t("LabeledSelect",{directives:[{name:"show",rawName:"v-show",value:!e.createNamespace,expression:"!createNamespace"}],attrs:{clearable:!0,options:e.options,disabled:e.namespaceReallyDisabled,searchable:!0,mode:e.mode,multiple:!1,label:e.t("namespace.label"),placeholder:e.t("namespace.selectOrCreate"),rules:e.rules.namespace,required:""},on:{selecting:e.selectNamespace},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}})],1),e.nameNsHidden?e._e():t("div",{staticClass:"col span-3",attrs:{"data-testid":e.componentTestid+"-name"}},[t("LabeledInput",{key:"name",ref:"name",attrs:{label:e.t(e.nameLabel),placeholder:e.t(e.namePlaceholder),disabled:e.nameReallyDisabled,mode:e.mode,"min-height":30,required:e.nameRequired,rules:e.rules.name},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.descriptionHidden,expression:"!descriptionHidden"}],class:["col",e.extraColumns.length>0?"span-3":"span-6"],attrs:{"data-testid":e.componentTestid+"-description"}},[t("LabeledInput",{key:"description",attrs:{mode:e.mode,disabled:e.descriptionDisabled,label:e.t(e.descriptionLabel),placeholder:e.t(e.descriptionPlaceholder),"min-height":30,rules:e.rules.description},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._l(e.extraColumns,(function(a){return t("div",{key:a,class:{col:!0,[e.colSpan]:!0}},[e._t(a)],2)})),e.showSpacer?t("div",{staticClass:"spacer"}):e._e()],2)},l=[],i=a("8bbf"),r=a.n(i),o=a("9ce4"),n=a("1832"),c=a("7592"),d=a("56a4"),u=a("b0bd"),p=a("d6a6"),v=a("d444"),m=a("53fe");function h(e){return(e||"").trim().toLowerCase().replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}var b={name:"NameNsDescription",components:{LabeledInput:v["a"],LabeledSelect:m["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},nameNsHidden:{type:Boolean,default:!1},descriptionHidden:{type:Boolean,default:!1},extraColumns:{type:Array,default:()=>[]},nameLabel:{type:String,default:"nameNsDescription.name.label"},nameEditable:{type:Boolean,default:!1},namePlaceholder:{type:String,default:"nameNsDescription.name.placeholder"},nameDisabled:{type:Boolean,default:!1},nameRequired:{type:Boolean,default:!0},nameNormalized:{type:Boolean,default:!0},namespaced:{type:Boolean,default:!0},namespaceFilter:{type:Function,default:null},namespaceMapper:{type:Function,default:null},namespaceType:{type:String,default:d["w"]},namespaceLabel:{type:String,default:"nameNsDescription.namespace.label"},namespacePlaceholder:{type:String,default:"nameNsDescription.namespace.placeholder"},namespaceDisabled:{type:Boolean,default:!1},namespaceNewAllowed:{type:Boolean,default:!1},noDefaultNamespace:{type:Boolean,default:!1},namespacesOverride:{type:Array,default:null},descriptionLabel:{type:String,default:"nameNsDescription.description.label"},descriptionPlaceholder:{type:String,default:"nameNsDescription.description.placeholder"},descriptionDisabled:{type:Boolean,default:!1},nameKey:{type:String,default:null},namespaceKey:{type:String,default:null},descriptionKey:{type:String,default:null},forceNamespace:{type:String,default:null},showSpacer:{type:Boolean,default:!0},horizontal:{type:Boolean,default:!0},rules:{default:()=>({namespace:[],name:[],description:[]}),type:Object},componentTestid:{type:String,default:"name-ns-description"}},data(){const e=this.value,t=e.metadata;let a,s,l;var i;(s=this.nameKey?Object(n["g"])(e,this.nameKey):null===t||void 0===t?void 0:t.name,this.namespaced&&(this.forceNamespace?(a=this.forceNamespace,this.updateNamespace(a)):a=this.namespaceKey?Object(n["g"])(e,this.namespaceKey):null===t||void 0===t?void 0:t.namespace,a||this.noDefaultNamespace||(a=this.$store.getters["defaultNamespace"],t&&(t.namespace=a))),this.descriptionKey)?l=Object(n["g"])(e,this.descriptionKey):l=null===t||void 0===t||null===(i=t.annotations)||void 0===i?void 0:i[u["k"]];const r=this.$store.getters["currentStore"](),o=this.$store.getters[r+"/schemaFor"](d["w"]);return{namespace:a,name:s,description:l,createNamespace:!1,nsSchema:o}},computed:{...Object(o["a"])(["currentProduct","currentCluster","namespaces","allowedNamespaces"]),namespaceReallyDisabled(){return!!this.forceNamespace||this.namespaceDisabled||this.mode===p["B"]},nameReallyDisabled(){return this.nameDisabled||this.mode===p["B"]&&!this.nameEditable},options(){let e=[];e=this.allowedNamespaces?Object.keys(this.isCreate?this.allowedNamespaces():this.namespaces()):Object.keys(this.namespaces());const t=e.map(e=>({nameDisplay:e,id:e})).map(this.namespaceMapper||(e=>({label:e.nameDisplay,value:e.id}))),a=Object(c["b"])(t,"label");this.forceNamespace&&a.unshift({label:this.forceNamespace,value:this.forceNamespace});const s={label:this.t("namespace.createNamespace"),value:"",kind:"highlighted"},l={label:"divider",disabled:!0,kind:"divider"},i=this.canCreateNamespace?[s,l]:[];return[...i,...a]},isView(){return this.mode===p["I"]},isCreate(){return this.mode===p["z"]},colSpan(){if(!this.horizontal)return"span-8";let e=(this.nameNsHidden?0:2)+(this.descriptionHidden?0:1)+this.extraColumns.length;e=Math.max(2,e);const t=12/e;return"span-"+t},canCreateNamespace(){var e,t;return((null===(e=this.nsSchema)||void 0===e?void 0:e.collectionMethods)||[]).includes("POST")&&(null===(t=this.currentCluster)||void 0===t?void 0:t.canUpdate)}},watch:{name(e){this.normalizeName&&(e=h(e)),this.nameKey?Object(n["j"])(this.value,this.nameKey,e):this.$set(this.value.metadata,"name",e),this.$emit("change")},namespace(e){this.updateNamespace(e),this.$emit("change")},description(e){this.descriptionKey?Object(n["j"])(this.value,this.descriptionKey,e):this.value.setAnnotation(u["k"],e),this.$emit("change")}},mounted(){this.$nextTick(()=>{this.$refs.name&&this.$refs.name.focus()})},methods:{updateNamespace(e){this.forceNamespace&&(e=this.forceNamespace),this.namespaced&&this.$emit("isNamespaceNew",!e||this.options&&!this.options.find(t=>t.value===e)),this.namespaceKey?Object(n["j"])(this.value,this.namespaceKey,e):this.value.metadata.namespace=e},changeNameAndNamespace(e){this.name=(e.text||"").toLowerCase(),this.namespace=e.selected},cancelCreateNamespace(e){this.createNamespace=!1,this.$parent.$emit("createNamespace",!1),this.namespace=this.$store.getters["defaultNamespace"]},selectNamespace(e){e&&""!==e.value?(this.createNamespace=!1,this.$parent.$emit("createNamespace",!1),this.$emit("isNamespaceNew",!1)):(this.createNamespace=!0,this.$parent.$emit("createNamespace",!0),this.$emit("isNamespaceNew",!0),r.a.nextTick(()=>this.$refs.namespace.focus()))}}},f=b,g=(a("0770"),a("d802")),y=Object(g["a"])(f,s,l,!1,null,"c5390aec",null);t["a"]=y.exports},6620:function(e,t,a){"use strict";a("fcf0")},6621:function(e,t,a){"use strict";a("4302e")},6692:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"opensearch"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-8"},[t("LabeledInput",{staticClass:"host",attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.redis.host")},model:{value:e.value.host,callback:function(t){e.$set(e.value,"host",t)},expression:"value.host"}})],1),t("div",{staticClass:"col span-2"},[t("LabeledInput",{staticClass:"port",attrs:{mode:e.mode,disabled:e.disabled,type:"number",min:"1",max:"65535",label:e.t("logging.redis.port")},model:{value:e.port,callback:function(t){e.port=e._n(t)},expression:"port"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,type:"number",label:e.t("logging.redis.dbNumber")},model:{value:e.value.db_number,callback:function(t){e.$set(e.value,"db_number",e._n(t))},expression:"value.db_number"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,type:"number",label:e.t("logging.redis.ttl")},model:{value:e.value.ttl,callback:function(t){e.$set(e.value,"ttl",e._n(t))},expression:"value.ttl"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.redis.format.title")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{options:e.formatTypeOptions,mode:e.mode,disabled:e.disabled,label:e.t("logging.redis.format.type")},model:{value:e.value.format.type,callback:function(t){e.$set(e.value.format,"type",t)},expression:"value.format.type"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"secret-name-label":e.t("logging.elasticsearch.password"),mode:e.mode,namespace:e.namespace,disabled:e.disabled,"show-key-selector":!0},model:{value:e.value.password,callback:function(t){e.$set(e.value,"password",t)},expression:"value.password"}})],1)])])},l=[],i=a("d444"),r=a("0b97"),o=a("05b4"),n=a("53fe"),c={components:{LabeledInput:i["a"],LabeledSelect:n["a"],SecretSelector:r["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}},data(){const e=["json","out_file","ltsv","csv","msgpack","hash","single_value"];return this.$set(this.value,"format",this.value.format||{type:e[0]}),{formatTypeOptions:e}},computed:{port:{get(){return this.value.port},set(e){Object(o["updatePort"])(e=>this.$set(this.value,"port",e),e)}}}},d=c,u=(a("b95a"),a("d802")),p=Object(u["a"])(d,s,l,!1,null,null,null);t["default"]=p.exports},"674d":function(e,t,a){"use strict";a("340e7")},"67cf":function(e,t,a){"use strict";a("c8d5")},6823:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"kafka"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.kafka.brokers")},model:{value:e.value.brokers,callback:function(t){e.$set(e.value,"brokers",t)},expression:"value.brokers"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.kafka.defaultTopic")},model:{value:e.value.default_topic,callback:function(t){e.$set(e.value,"default_topic",t)},expression:"value.default_topic"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.kafka.username"),"show-key-selector":!0},model:{value:e.value.username,callback:function(t){e.$set(e.value,"username",t)},expression:"value.username"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.kafka.password"),"show-key-selector":!0},model:{value:e.value.password,callback:function(t){e.$set(e.value,"password",t)},expression:"value.password"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.kafka.scramMechanism")},model:{value:e.value.scram_mechanism,callback:function(t){e.$set(e.value,"scram_mechanism",t)},expression:"value.scram_mechanism"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.certificate")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.kafka.saslOverSsl")},model:{value:e.value.sasl_over_ssl,callback:function(t){e.$set(e.value,"sasl_over_ssl",t)},expression:"value.sasl_over_ssl"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.kafka.sslCaCert.label"),"show-key-selector":!0},model:{value:e.value.ssl_ca_cert,callback:function(t){e.$set(e.value,"ssl_ca_cert",t)},expression:"value.ssl_ca_cert"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.kafka.sslClientCert.label"),"show-key-selector":!0},model:{value:e.value.ssl_client_cert,callback:function(t){e.$set(e.value,"ssl_client_cert",t)},expression:"value.ssl_client_cert"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.kafka.sslClientCertChain.label"),"show-key-selector":!0},model:{value:e.value.ssl_client_cert_chain,callback:function(t){e.$set(e.value,"ssl_client_cert_chain",t)},expression:"value.ssl_client_cert_chain"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.kafka.sslClientCertKey"),"show-key-selector":!0},model:{value:e.value.ssl_client_cert_key,callback:function(t){e.$set(e.value,"ssl_client_cert_key",t)},expression:"value.ssl_client_cert_key"}})],1)])])},l=[],i=a("d444"),r=a("0b97"),o=a("efb2"),n=a("05b4"),c={components:{Checkbox:o["a"],LabeledInput:i["a"],SecretSelector:r["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}},data(){return{schemes:n["protocol"]}}},d=c,u=a("d802"),p=Object(u["a"])(d,s,l,!1,null,null,null);t["default"]=p.exports},6983:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".labels__header[data-v-0bd5f0d9]{display:flex;justify-content:space-between}",""]),e.exports=t},6988:function(e,t,a){"use strict";a("b93f")},"69ac":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.logdna.hostname")},model:{value:e.value.hostname,callback:function(t){e.$set(e.value,"hostname",t)},expression:"value.hostname"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.logdna.app")},model:{value:e.value.app,callback:function(t){e.$set(e.value,"app",t)},expression:"value.app"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.logdna.apiKey"),required:!0},model:{value:e.value.api_key,callback:function(t){e.$set(e.value,"api_key",t)},expression:"value.api_key"}})],1)])])},l=[],i=a("d444"),r={components:{LabeledInput:i["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}}},o=r,n=a("d802"),c=Object(n["a"])(o,s,l,!1,null,null,null);t["default"]=c.exports},"6a03":function(e,t,a){var s=a("281a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("2b421ace",s,!0,{sourceMap:!1,shadowMode:!1})},"6b50":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mb-20"},[t("h3",[e._v(e._s(e.t(`harvester.virtualMachine.cloudConfig.${e.type}.title`)))]),t("p",{staticClass:"text-muted mb-20"},[t("t",{attrs:{k:`harvester.virtualMachine.cloudConfig.${e.type}.tip`,raw:!0}})],1),e.isView?e._e():t("LabeledSelect",{staticClass:"mb-20",attrs:{options:e.options,disabled:e.viewCode,"label-key":`harvester.virtualMachine.cloudConfig.${e.type}.label`},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}}),t("div",{staticClass:"resource-yaml"},[t("YamlEditor",{ref:"yaml",staticClass:"yaml-editor",attrs:{"editor-mode":e.editorMode},model:{value:e.yamlScript,callback:function(t){e.yamlScript=t},expression:"yamlScript"}})],1)],1)},l=[],i=a("9ce4"),r=a("53fe"),o=a("c349"),n=a("d6a6"),c=a("56a4");const d="_NEW",u="_NONE";var p={components:{YamlEditor:o["b"],LabeledSelect:r["a"]},props:{mode:{type:String,default:"create"},value:{type:String,default:""},type:{type:String,default:""},options:{type:Array,default:()=>[]},configId:{type:String,default:""},viewCode:{type:Boolean,default:!1}},data(){return{id:"",yamlScript:this.value}},computed:{...Object(i["a"])({t:"i18n/t"}),editorMode(){return this.isView||this.viewCode?o["a"].VIEW_CODE:o["a"].EDIT_CODE},isView(){return this.mode===n["I"]}},watch:{value(e){this.yamlScript=e},configId(e){this.id=this.configId},id(e,t){var a,s;const l=(null===(a=this.$store.getters["harvester/byId"](c["e"],e))||void 0===a||null===(s=a.data)||void 0===s?void 0:s.cloudInit)||"";if(this.$emit("updateTemplateId",this.type,e),e){if(e===d)return this.$emit("show",this.type),void(this.id=t);this.yamlScript=e===u?"":l,this.$refs["yaml"].updateValue(l)}},yamlScript(e){this.$emit("update",e,this.type)}},methods:{refresh(){this.$refs.yaml.refresh()},updateValue(){this.$refs["yaml"].updateValue(this.value)}}},v=p,m=(a("d093"),a("d802")),h=Object(m["a"])(v,s,l,!1,null,"1cd38279",null);t["default"]=h.exports},"6b5a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks,"yaml-modifiers":e.yamlModifiers},on:{finish:e.save}},[t("NameNsDescription",{attrs:{value:e.value,namespaced:!0,mode:e.mode}}),t("ResourceTabs",{staticClass:"mt-15",attrs:{"need-conditions":!1,"need-related":!1,"side-tabs":!0,mode:e.mode}},[t("Tab",{staticClass:"bordered-table",attrs:{name:"basic",label:e.t("harvester.loadBalancer.tabs.basic"),weight:99}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:e.t("harvester.loadBalancer.ipam.label"),options:e.ipamOption,mode:e.mode},model:{value:e.value.spec.ipam,callback:function(t){e.$set(e.value.spec,"ipam",t)},expression:"value.spec.ipam"}})],1),"pool"===e.value.spec.ipam?t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:e.t("harvester.loadBalancer.ipPool.label"),options:e.ipPoolOptions,mode:e.mode},on:{input:e.update},model:{value:e.value.spec.ipPool,callback:function(t){e.$set(e.value.spec,"ipPool",t)},expression:"value.spec.ipPool"}})],1):e._e()])]),"vm"===e.value.spec.workloadType?t("Tab",{staticClass:"bordered-table",attrs:{name:"listeners",label:e.t("harvester.loadBalancer.tabs.listeners"),weight:98}},[t("Listeners",{staticClass:"col span-12",attrs:{mode:e.mode},model:{value:e.value.spec.listeners,callback:function(t){e.$set(e.value.spec,"listeners",t)},expression:"value.spec.listeners"}})],1):e._e(),"vm"===e.value.spec.workloadType?t("Tab",{staticClass:"bordered-table",attrs:{name:"backendServer",label:e.t("harvester.loadBalancer.tabs.backendServer"),weight:97}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("Banner",{attrs:{color:e.matchingVMs.none?"warning":"success"}},[t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("harvester.loadBalancer.backendServerSelector.matchingVMs.matchesSome",e.matchingVMs),expression:"t('harvester.loadBalancer.backendServerSelector.matchingVMs.matchesSome', matchingVMs)"}]})])],1)]),t("KeyValue",{attrs:{mode:e.mode,"read-allowed":!1,"initial-empty-row":!0},model:{value:e.backendServerSelector,callback:function(t){e.backendServerSelector=t},expression:"backendServerSelector"}})],1):e._e(),"vm"===e.value.spec.workloadType?t("Tab",{staticClass:"bordered-table",attrs:{name:"healthCheck",label:e.t("harvester.loadBalancer.tabs.healthCheck"),weight:96}},[t("HealthCheck",{attrs:{mode:e.mode,model:e.value},model:{value:e.value.spec.healthCheck,callback:function(t){e.$set(e.value.spec,"healthCheck",t)},expression:"value.spec.healthCheck"}})],1):e._e()],1)],1)},l=[],i=a("9ec3"),r=a("65b0"),o=a("3921"),n=a("53fe"),c=a("5ef9"),d=a("2e2b"),u=a("2958"),p=a("2a88"),v=a("c78c"),m=a("56a4"),h=a("b837"),b=a("348a"),f=a("90cd"),g=a("184a"),y=a("701d");const C="loadbalancer.harvesterhci.io/namespace",k="loadbalancer.harvesterhci.io/project";var w={name:"HarvesterLoadBalancer",components:{NameNsDescription:r["a"],ResourceTabs:o["a"],LabeledSelect:n["a"],Tab:c["a"],Listeners:g["default"],HealthCheck:y["default"],CruResource:d["a"],KeyValue:u["a"],Banner:p["a"]},mixins:[v["a"]],props:{value:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={ipPools:this.$store.dispatch(e+"/findAll",{type:f["b"].IP_POOL}),namespaces:this.$store.dispatch(e+"/findAll",{type:m["w"]}),vms:this.$store.dispatch(e+"/findAll",{type:f["b"].VM})};this.$store.getters["management/schemaFor"](m["t"].PROJECT)&&(t.projects=this.$store.dispatch("management/findAll",{type:m["t"].PROJECT})),await Object(h["a"])(t),this.updateMatchingVMs()},data(){const e=this.value.metadata.annotations||[];this.value.spec.healthCheck||(this.value.spec.healthCheck={});const t={matched:0,matches:[],none:!0,sample:null,total:0};return{ipPool:this.value.spec.ipPool,projectSelector:e[k]||"",namespaceSelector:e[C]||"",matchingVMs:t}},computed:{ipamOption(){return[{label:this.t("harvester.loadBalancer.ipam.options.dhcp"),value:"dhcp"},{label:this.t("harvester.loadBalancer.ipam.options.pool"),value:"pool"}]},ipPoolOptions(){const e=this.$store.getters["harvester/all"](f["b"].IP_POOL),t=e.map(e=>e.id);return[{label:this.t("harvester.loadBalancer.ipPool.options.none"),value:""},...t]},projectOptions(){const e=this.$store.getters["harvester/all"](m["t"].PROJECT);return e.map(e=>e.id)},namespaceOptions(){const e=this.$store.getters["harvester/all"](m["w"]);return e.map(e=>e.id)},backendServerSelector:{get(){var e;const t={};return Object.keys((null===(e=this.value.spec)||void 0===e?void 0:e.backendServerSelector)||{}).map(e=>{t[e]=(this.value.spec.backendServerSelector[e]||[]).join(",")||""}),t},set(e){const t={};Object.keys(e).map(a=>{t[a]=(e[a]||"").split(",")}),this.$set(this.value.spec,"backendServerSelector",t)}},yamlModifiers(){const e=["metadata.managedFields","metadata.relationships","metadata.state","links","type","id"];return this.isCreate&&e.push("status"),{activelyRemove:e}}},methods:{update(){const{projectSelector:e,namespaceSelector:t}=this;e&&(this.value.metadata.annotations[k]=e),t&&(this.value.metadata.annotations[C]=t)},updateMatchingVMs:Object(i["throttle"])((function(){const e=this.value.spec.backendServerSelector,t=this.$store.getters["harvester/all"](f["b"].VM).filter(e=>e.metadata.namespace===this.value.metadata.namespace);if(Object(i["isEmpty"])(e))this.matchingVMs={matched:0,total:t.length,none:!0,sample:null};else{const a=Object(b["d"])(t,e,"spec.template.metadata.labels");this.matchingVMs={matched:a.length,total:t.length,none:0===a.length,sample:a[0]?a[0].nameDisplay:null}}}),250,{leading:!0})},watch:{backendServerSelector:"updateMatchingVMs","value.metadata.namespace":"updateMatchingVMs"}},x=w,S=(a("e1f1"),a("d802")),_=Object(S["a"])(x,s,l,!1,null,"12be429a",null);t["default"]=_.exports},"6c3a":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".filter[data-v-019d9ce9]{display:inline-block}.filter .banner-item[data-v-019d9ce9]{display:inline-block;font-size:16px;margin-right:10px;padding:6px;border-radius:2px}.filter .banner-item i[data-v-019d9ce9]{cursor:pointer;vertical-align:middle}.filter-popup[data-v-019d9ce9]{width:300px}[data-v-019d9ce9] .box{display:grid;grid-template-columns:40% 40% 10%;-moz-column-gap:1.75%;column-gap:1.75%;margin-bottom:10px}.required[data-v-019d9ce9]{color:var(--error)}",""]),e.exports=t},"6dac":function(e,t,a){"use strict";a.r(t);var s,l,i=a("005f"),r=a("56a4"),o=a("fd16"),n={extends:o["a"],created(){this.isCreate&&this.value.type===r["r"].CLUSTER_FLOW&&(this.value.metadata.namespace="cattle-logging-system"),this.registerBeforeHook(this.willSave,"willSave"),this.registerAfterHook(()=>{var e;const t=this.$store.getters["allNamespaces"],a=t.find(e=>"default"===e.id),s=(null===a||void 0===a?void 0:a.id)||(null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.id)||"";this.value.$dispatch("prefs/set",{key:i["m"],value:s},{root:!0}),this.willSave()})}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},"701d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("RadioGroup",{attrs:{mode:e.mode,name:"healthCheckEnabled",labels:[e.t("generic.disabled"),e.t("generic.enabled")],options:[!1,!0],disabled:e.disabled},model:{value:e.healthCheckEnabled,callback:function(t){e.healthCheckEnabled=t},expression:"healthCheckEnabled"}})],1)]),e.healthCheckEnabled?t("div",[t("div",{staticClass:"row mt-10"},[e.healthCheckEnabled?t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{mode:e.mode,options:e.portOptions,required:"",label:e.t("harvester.service.healthCheckPort.label"),disabled:e.disabled},model:{value:e.value.port,callback:function(t){e.$set(e.value,"port",t)},expression:"value.port"}})],1):e._e(),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,type:"number",label:e.t("harvester.service.healthCheckSuccessThreshold.label"),tooltip:e.t("harvester.service.healthCheckSuccessThreshold.description"),disabled:e.disabled},model:{value:e.value.successThreshold,callback:function(t){e.$set(e.value,"successThreshold",e._n(t))},expression:"value.successThreshold"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,type:"number",label:e.t("harvester.service.healthCheckFailureThreshold.label"),tooltip:e.t("harvester.service.healthCheckFailureThreshold.description"),disabled:e.disabled},model:{value:e.value.failureThreshold,callback:function(t){e.$set(e.value,"failureThreshold",e._n(t))},expression:"value.failureThreshold"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,type:"number",label:e.t("harvester.service.healthCheckPeriod.label"),disabled:e.disabled},model:{value:e.value.periodSeconds,callback:function(t){e.$set(e.value,"periodSeconds",e._n(t))},expression:"value.periodSeconds"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,type:"number",label:e.t("harvester.service.healthCheckTimeout.label"),disabled:e.disabled},model:{value:e.value.timeoutSeconds,callback:function(t){e.$set(e.value,"timeoutSeconds",e._n(t))},expression:"value.timeoutSeconds"}})],1)])]):e._e()])},l=[],i=a("d444"),r=a("53fe"),o=a("df85"),n={components:{LabeledInput:i["a"],LabeledSelect:r["a"],RadioGroup:o["a"]},props:{value:{type:Object,required:!0},model:{type:Object,required:!0},mode:{type:String,default:"create"},disabled:{type:Boolean,default:!1}},data(){return{healthCheckEnabled:!!this.value.port}},computed:{portOptions(){var e,t;const a=(null===(e=this.model)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.listeners)||[];return a.filter(e=>e.port&&"TCP"===e.protocol).map(e=>e.port)||[]}}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},"704e":function(e,t,a){var s=a("60aa");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("6ec47ff6",s,!0,{sourceMap:!1,shadowMode:!1})},7078:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"gelf"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"host",attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.gelf.host")},model:{value:e.value.host,callback:function(t){e.$set(e.value,"host",t)},expression:"value.host"}})],1),t("div",{staticClass:"col span-3"},[t("LabeledInput",{staticClass:"port",attrs:{mode:e.mode,disabled:e.disabled,type:"number",label:e.t("logging.gelf.port")},model:{value:e.port,callback:function(t){e.port=t},expression:"port"}})],1),t("div",{staticClass:"col span-3"},[t("LabeledSelect",{attrs:{options:e.protocolOptions,mode:e.mode,disabled:e.disabled,label:e.t("logging.gelf.protocol")},model:{value:e.value.protocol,callback:function(t){e.$set(e.value,"protocol",t)},expression:"value.protocol"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.certificate")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.gelf.tls")},model:{value:e.value.tls,callback:function(t){e.$set(e.value,"tls",t)},expression:"value.tls"}})],1),t("div",{staticClass:"col span-6"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.gelf.tlsOptions.noVerify")},model:{value:e.no_verify,callback:function(t){e.no_verify=t},expression:"no_verify"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{type:"multiline",mode:e.mode,disabled:e.disabled,label:e.t("logging.gelf.tlsOptions.clientCert")},model:{value:e.value.tls_options.cert,callback:function(t){e.$set(e.value.tls_options,"cert",t)},expression:"value.tls_options.cert"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{type:"multiline",mode:e.mode,disabled:e.disabled,label:e.t("logging.gelf.tlsOptions.clientKey")},model:{value:e.value.tls_options.key,callback:function(t){e.$set(e.value.tls_options,"key",t)},expression:"value.tls_options.key"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.gelf.tlsOptions.tlsVersion")},model:{value:e.value.tls_options.tls_version,callback:function(t){e.$set(e.value.tls_options,"tls_version",t)},expression:"value.tls_options.tls_version"}})],1),t("div",{staticClass:"col span-6"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.gelf.tlsOptions.allCiphers")},model:{value:e.all_ciphers,callback:function(t){e.all_ciphers=t},expression:"all_ciphers"}})],1)])])},l=[],i=a("d444"),r=a("53fe"),o=a("efb2"),n={components:{Checkbox:o["a"],LabeledInput:i["a"],LabeledSelect:r["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}},data(){const e=["tcp","udp"];return this.$set(this.value,"tls_options",this.value.tls_options||{}),this.$set(this.value,"protocol",this.value.protocol||e[0]),{protocolOptions:e}},computed:{port:{get(){return this.value.port},set(e){this.$set(this.value,"port",Number.parseInt(e))}},no_verify:{get(){return"true"===this.value.tls_options.no_verify},set(e){this.$set(this.value.tls_options,"no_verify",e?"true":null)}},all_ciphers:{get(){return"true"===this.value.tls_options.all_ciphers},set(e){this.$set(this.value.tls_options,"all_ciphers",e?"true":null)}}}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},"70c8":function(e,t,a){var s=a("2525");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("df1f94b6",s,!0,{sourceMap:!1,shadowMode:!1})},7279:function(e,t,a){var s=a("ba71");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("3e1687f6",s,!0,{sourceMap:!1,shadowMode:!1})},"73df":function(e,t,a){var s=a("d335");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("0ce11c76",s,!0,{sourceMap:!1,shadowMode:!1})},7553:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("CruResource",{attrs:{resource:e.value,mode:e.mode,errors:e.errors},on:{finish:e.save}},[t("NameNsDescription",{attrs:{value:e.value,mode:e.mode,namespaced:!1}}),t("Tabbed",{attrs:{"side-tabs":!0}},[t("Tab",{attrs:{name:"nodeSelector",label:e.t("harvester.vlanConfig.titles.nodeSelector"),weight:99}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("Banner",{attrs:{color:e.matchingNodes.none?"warning":"success"}},[t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("harvester.vlanConfig.nodeSelector.matchingNodes.matchesSome",e.matchingNodes),expression:"t('harvester.vlanConfig.nodeSelector.matchingNodes.matchesSome', matchingNodes)"}]})])],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("NodeSelector",{attrs:{mode:e.mode,value:e.value.spec,nodes:e.nodeOptions},on:{updateMatchingNICs:e.updateMatchingNICs,updateMatchingNodes:e.updateMatchingNodes}})],1)])]),t("Tab",{attrs:{name:"upLink",label:e.t("harvester.vlanConfig.titles.uplink"),weight:99,"show-header":!1}},[t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:e.t("harvester.network.clusterNetwork.label"),value:e.value.spec.clusterNetwork}})],1),t("div",{staticClass:"col span-6"},[t("LabelValue",{attrs:{name:"Type",value:"VLAN"}})],1)]),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-12"},[e._l(e.nicErrors,(function(e,a){return t("Banner",{key:a,attrs:{color:"warning",label:e}})})),t("ArrayListSelect",{attrs:{mode:e.mode,options:e.nicOptions,"array-list-props":{addLabel:e.t("harvester.vlanConfig.uplink.nics.addLabel"),initialEmptyRow:!0,title:e.t("harvester.vlanConfig.uplink.nics.label"),required:!0,protip:!1},"select-props":{placeholder:e.t("harvester.vlanConfig.uplink.nics.placeholder")}},model:{value:e.value.spec.uplink.nics,callback:function(t){e.$set(e.value.spec.uplink,"nics",t)},expression:"value.spec.uplink.nics"}})],2)]),t("h3",{staticClass:"mt-20"},[e._v(" "+e._s(e.t("harvester.vlanConfig.titles.bondOptions"))+" ")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:e.t("harvester.vlanConfig.uplink.bondOptions.mode.label"),mode:e.mode,options:e.bondOptions,required:""},model:{value:e.bondOptionMode,callback:function(t){e.bondOptionMode=t},expression:"bondOptionMode"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("harvester.vlanConfig.uplink.bondOptions.miimon.label"),mode:e.mode,type:"number",tooltip:e.t("harvester.vlanConfig.uplink.bondOptions.miimon.tooltip",null,!0)},model:{value:e.miimon,callback:function(t){e.miimon=e._n(t)},expression:"miimon"}})],1)]),t("h3",{staticClass:"mt-20"},[e._v(" "+e._s(e.t("harvester.vlanConfig.titles.attributes"))+" ")]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("harvester.vlanConfig.uplink.linkAttributes.mtu.label"),mode:e.mode,type:"number"},model:{value:e.mtu,callback:function(t){e.mtu=e._n(t)},expression:"mtu"}})],1)])])],1)],1)},l=[],i=a("9ec3"),r=a("2e2b"),o=a("65b0"),n=a("d444"),c=a("53fe"),d=a("ad61"),u=a("5ef9"),p=function(){var e=this,t=e._self._c;return t("ArrayList",e._b({staticClass:"array-list-select",attrs:{value:e.value,"add-allowed":e.addAllowed||e.loading,loading:e.loading},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"columns",fn:function(a){return[t("Select",e._b({attrs:{value:a.row.value,options:e.calculateOptions(a.row.value)},on:{input:function(t){return e.updateRow(a.i,t)}}},"Select",e.selectProps,!1))]}}])},"ArrayList",e.arrayListProps,!1))},v=[],m=a("da9e"),h=a("81a6"),b={components:{ArrayList:m["a"],Select:h["a"]},props:{value:{type:Array,required:!0},options:{default:null,type:Array},selectProps:{type:Object,default:null},arrayListProps:{type:Object,default:null},loading:{type:Boolean,default:!1}},computed:{filteredOptions(){return this.options.filter(e=>!this.value.includes(e.value))},addAllowed(){return this.filteredOptions.length>0}},methods:{updateRow(e,t){this.value.splice(e,1,t),this.$emit(t)},calculateOptions(e){const t=this.options.find(t=>t.value===e);return t?[t,...this.filteredOptions]:this.filteredOptions}}},f=b,g=(a("28fb"),a("d802")),y=Object(g["a"])(f,p,v,!1,null,"601a9a13",null),C=y.exports,k=a("eb32"),w=a("70a6"),x=a("dffb"),S=a("c78c"),_=a("56a4"),O=a("1832"),N=a("e411"),$=a("90cd"),L=a("b837"),I=a("b0bd"),T=a("348a"),D=a("202c"),M={components:{CruResource:r["a"],NameNsDescription:o["a"],LabeledInput:n["a"],LabeledSelect:c["a"],Tabbed:d["a"],Tab:u["a"],NodeSelector:D["default"],ArrayListSelect:C,LabelValue:k["a"],Loading:w["a"],Banner:x["a"]},mixins:[S["a"]],data(){var e,t,a;const s=Object(O["e"])((null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.uplink)||void 0===a?void 0:a.nics)||[]),l={matched:0,matches:[],none:!0,sample:null,total:0};return{type:"vlan",matchNICs:[],originNics:s,matchingNodes:l,nicErrors:[]}},created(){this.registerBeforeHook&&this.registerBeforeHook(this.validate);const e=this.$route.query.clusterNetwork;e&&Object(O["j"])(this.value,"spec.clusterNetwork",e)},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={linkMonitors:this.$store.dispatch(e+"/findAll",{type:$["b"].LINK_MONITOR}),nodes:this.$store.dispatch(e+"/findAll",{type:_["z"]})};await Object(L["a"])(t),this.updateMatchingNICs(),this.updateMatchingNodes()},computed:{nodeOptions(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](_["z"]);return t.map(e=>({label:e.nameDisplay,value:e.id}))},mtu:{get(){var e,t,a,s;return null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.uplink)||void 0===a||null===(s=a.linkAttributes)||void 0===s?void 0:s.mtu},set(e){Object(O["j"])(this.value,"spec.uplink.linkAttributes.mtu",e)}},bondOptionMode:{get(){var e,t,a,s;return null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.uplink)||void 0===a||null===(s=a.bondOptions)||void 0===s?void 0:s.mode},set(e){Object(O["j"])(this.value,"spec.uplink.bondOptions.mode",e)}},miimon:{get(){var e,t,a,s;return null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.uplink)||void 0===a||null===(s=a.bondOptions)||void 0===s?void 0:s.miimon},set(e){Object(O["j"])(this.value,"spec.uplink.bondOptions.miimon",e)}},bondOptions(){return["balance-rr","active-backup","balance-xor","broadcast","802.3ad","balance-tlb","balance-alb"]},doneLocationOverride(){return this.value.doneOverride},nics(){var e;const t=this.$store.getters["currentProduct"].inStore,a=this.$store.getters[t+"/byId"]($["b"].LINK_MONITOR,"nic")||{},s=(null===a||void 0===a||null===(e=a.status)||void 0===e?void 0:e.linkStatus)||{},l=this.nodes.map(e=>e.id),i=[];return Object.keys(s).map(e=>{if(l.includes(e)){const t=s[e]||[];t.map(t=>{i.push({...t,nodeName:e})})}}),i},nicOptions(){const e=[],t={};return(this.matchNICs||[]).map(a=>{a.masterIndex&&!this.originNics.includes(a.name)?Object(O["j"])(t,a.name+".masterIndex",!0):Object(N["e"])(e,"name",a.name)?Object(N["e"])(e,"name",a.name)&&(Object(O["j"])(t,a.name+".total",t[a.name].total+1),Object(O["j"])(t,a.name+".down","down"===a.state?t[a.name].down+1:t[a.name].down)):(e.push(a),Object(O["j"])(t,a.name+".total",1),Object(O["j"])(t,a.name+".down","down"===a.state?1:0))}),e.filter(e=>!t[e.name].masterIndex).map(e=>{let a="";return a=0===t[e.name].down?e.name+" (Up)":1===t[e.name].total?e.name+" (Down)":`${e.name} (${t[e.name].down}/${t[e.name].total} Down)`,{label:a,value:e.name,disabled:t[e.name].down>0}})},nodes(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](_["z"]);return t}},methods:{validate(){var e,t,a,s,l,i;const r=[],o=(null===(e=this.value.spec)||void 0===e||null===(t=e.uplink)||void 0===t?void 0:t.nics)||[],n=this.t("validation.arrayCountRequired",{key:this.t("harvester.vlanConfig.uplink.nics.label"),count:1},!0);if(0===o.length?r.push(n):o.map(e=>{e||r.push(n);const t=this.nicOptions.find(t=>t.value===e);t&&null!==t&&void 0!==t&&t.disabled&&r.push(this.t("harvester.vlanConfig.uplink.nics.validate.available",{nic:e},!0))}),null!==(a=this.value)&&void 0!==a&&null!==(s=a.metadata)&&void 0!==s&&s.name||r.push(this.t("validation.required",{key:this.t("generic.name")},!0)),null!==(l=this.value)&&void 0!==l&&null!==(i=l.spec)&&void 0!==i&&i.clusterNetwork||r.push(this.t("validation.required",{key:this.t("harvester.network.clusterNetwork.label")},!0)),r.length>0)return Promise.reject(Object(N["m"])(r));{var c,d,u,p,v,m,h,b;const e=null===(c=this.value)||void 0===c||null===(d=c.spec)||void 0===d||null===(u=d.uplink)||void 0===u||null===(p=u.bondOptions)||void 0===p?void 0:p.miimon;var f,g,y,C;if(!e&&0!==e)null===(f=this.value)||void 0===f||(null===(g=f.spec)||void 0===g||(null===(y=g.uplink)||void 0===y||(null===(C=y.bondOptions)||void 0===C||delete C.miimon)));const t=null===(v=this.value)||void 0===v||null===(m=v.spec)||void 0===m||null===(h=m.uplink)||void 0===h||null===(b=h.linkAttributes)||void 0===b?void 0:b.mtu;var k,w,x,S;if(!t&&0!==t)null===(k=this.value)||void 0===k||(null===(w=k.spec)||void 0===w||(null===(x=w.uplink)||void 0===x||(null===(S=x.linkAttributes)||void 0===S||delete S.mtu)));return Promise.resolve()}},updateMatchingNICs:Object(i["throttle"])((function(){var e,t;const a=(null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.nodeSelector)||{},s=this.nics||[];let l=[],r=[];if(Object(i["isEmpty"])(a))l=Object(O["e"])(s),r=(this.nodes||[]).map(e=>e.id);else if(a[I["n"]]&&1===Object.keys(a).length)l=s.filter(e=>e.nodeName===a[I["n"]]),r=[a[I["n"]]];else{const e=Object(T["d"])(this.nodes||[],a).map(e=>e.id);l=s.filter(t=>e.includes(t.nodeName)),r=e.map(e=>e.id)}this.matchNICs=this.intersection(l,r)||[]}),250,{leading:!0}),intersection(e=[],t=[]){const a={};return e.map(e=>{a[e.name]=(a[e.name]||0)+1}),e.filter(e=>a[e.name]===t.length)},updateMatchingNodes:Object(i["throttle"])((function(){var e,t;const a=(null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.nodeSelector)||{},s=this.nodes||[];if(Object(i["isEmpty"])(a))this.matchingNodes={matched:s.length,total:s.length,none:!1,sample:s[0]?s[0].nameDisplay:null};else if(a[I["n"]]&&1===Object.keys(a).length){const e=s.find(e=>e.id===a[I["n"]]);this.matchingNodes={matched:1,total:s.length,none:!1,sample:e?e.nameDisplay:a[I["n"]]}}else{const e=Object(T["d"])(s,a);this.matchingNodes={matched:e.length,total:s.length,none:0===e.length,sample:e[0]?e[0].nameDisplay:null}}}),250,{leading:!0})},watch:{nicOptions(e){var t,a;const s=(null===(t=this.value.spec)||void 0===t||null===(a=t.uplink)||void 0===a?void 0:a.nics)||[],l=[];s.map(t=>{const a=e.find(e=>e.value===t);(a&&null!==a&&void 0!==a&&a.disabled||!a)&&l.push(this.t("harvester.vlanConfig.uplink.nics.validate.available",{nic:t},!0))}),this.nicErrors=Object(N["m"])(l)},"value.spec.uplink.nics"(e=[]){const t=[],a=this.nicOptions||[];e.map(e=>{const s=a.find(t=>t.value===e);(s&&null!==s&&void 0!==s&&s.disabled||!s)&&t.push(this.t("harvester.vlanConfig.uplink.nics.validate.available",{nic:e},!0))}),this.nicErrors=Object(N["m"])(t)}}},E=M,R=(a("e8bb"),Object(g["a"])(E,s,l,!1,null,"d37d3ce4",null));t["default"]=R.exports},"76c7":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"p[data-v-199ff844]{display:flex;align-items:center}.icon-h-question[data-v-199ff844]{font-size:24px}.tip[data-v-199ff844]{font-size:15px}.goCA[data-v-199ff844]{margin:0 3px}",""]),e.exports=t},"770a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("h3",[e._v(e._s(e.t("harvester.setting.containerdRegistry.mirrors.mirrors")))]),t("div",e._l(e.mirrors,(function(a,s){return t("InfoBox",{key:a.idx,staticClass:"box"},[t("button",{staticClass:"role-link btn btn-sm remove",attrs:{type:"button"},on:{click:function(t){return e.remove("mirrors",s)}}},[t("i",{staticClass:"icon icon-2x icon-x"})]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-12"},[t("LabeledInput",{attrs:{mode:e.mode,required:"","label-key":"harvester.setting.containerdRegistry.mirrors.registryName"},on:{input:e.update},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:a.key,callback:function(t){e.$set(a,"key",t)},expression:"mirror.key"}})],1)]),t("div",{staticClass:"mb-20"},[t("LabeledSelect",{key:a.idx,attrs:{mode:e.mode,required:"","label-key":"harvester.setting.containerdRegistry.mirrors.endpoints",multiple:!0,taggable:!0,searchable:!0,options:[]},on:{input:e.update},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:a.value.Endpoints,callback:function(t){e.$set(a.value,"Endpoints",t)},expression:"mirror.value.Endpoints"}})],1),t("div",{staticClass:"row mb-20"},[t("KeyValue",{attrs:{"add-label":e.t("harvester.setting.containerdRegistry.mirrors.rewrite.addRewrite"),mode:e.mode,title:e.t("harvester.setting.containerdRegistry.mirrors.rewrite.rewrite"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:e.update},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:a.value.Rewrites,callback:function(t){e.$set(a.value,"Rewrites",t)},expression:"mirror.value.Rewrites"}})],1)])})),1),t("button",{staticClass:"btn btn-sm role-primary",on:{click:function(t){return t.target!==t.currentTarget?null:e.addMirror.apply(null,arguments)}}},[e._v(" "+e._s(e.t("harvester.setting.containerdRegistry.mirrors.addMirror"))+" ")]),t("hr",{staticClass:"divider mt-20 mb-20"}),t("h3",[e._v(e._s(e.t("harvester.setting.containerdRegistry.configs.configs")))]),t("div",[e._l(e.configs,(function(a,s){return t("InfoBox",{key:a.idx,staticClass:"box"},[t("button",{staticClass:"role-link btn btn-sm remove",attrs:{type:"button"},on:{click:function(t){return e.remove("configs",s)}}},[t("i",{staticClass:"icon icon-2x icon-x"})]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-12"},[t("div",{staticClass:"col span-12"},[t("LabeledInput",{attrs:{mode:e.mode,placeholder:e.t("harvester.setting.containerdRegistry.configs.registryPlaceholder"),"label-key":"harvester.setting.containerdRegistry.configs.registryEDQNorIP"},on:{input:e.update},model:{value:a.key,callback:function(t){e.$set(a,"key",t)},expression:"config.key"}})],1)])]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,"label-key":"harvester.setting.containerdRegistry.configs.username"},on:{input:e.update},model:{value:a.value.Auth.Username,callback:function(t){e.$set(a.value.Auth,"Username",t)},expression:"config.value.Auth.Username"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,"label-key":"harvester.setting.containerdRegistry.configs.password"},on:{input:e.update},model:{value:a.value.Auth.Password,callback:function(t){e.$set(a.value.Auth,"Password",t)},expression:"config.value.Auth.Password"}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,type:"multiline","min-height":150,"label-key":"harvester.setting.containerdRegistry.configs.auth"},on:{input:e.update},model:{value:a.value.Auth.Auth,callback:function(t){e.$set(a.value.Auth,"Auth",t)},expression:"config.value.Auth.Auth"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,type:"multiline","min-height":150,"label-key":"harvester.setting.containerdRegistry.configs.identityToken"},on:{input:e.update},model:{value:a.value.Auth.IdentityToken,callback:function(t){e.$set(a.value.Auth,"IdentityToken",t)},expression:"config.value.Auth.IdentityToken"}})],1)]),t("div",{staticClass:"row"},[t("LabeledSelect",{attrs:{mode:e.mode,"label-key":"harvester.setting.containerdRegistry.configs.insecureSkipVerify",options:e.insecureSkipVerifyOption},on:{input:e.update},model:{value:a.value.TLS.InsecureSkipVerify,callback:function(t){e.$set(a.value.TLS,"InsecureSkipVerify",t)},expression:"config.value.TLS.InsecureSkipVerify"}})],1)])})),t("button",{staticClass:"btn btn-sm role-primary",on:{click:e.addConfig}},[e._v(" "+e._s(e.t("harvester.setting.containerdRegistry.configs.addConfig"))+" ")])],2)])},l=[],i=a("d444"),r=a("d6a6"),o=a("06f6"),n=a("53fe"),c=a("2958"),d=a("6583"),u=a("1832"),p={name:"HarvesterContainerdRegistry",components:{InfoBox:d["a"],KeyValue:c["a"],LabeledInput:i["a"],LabeledSelect:n["a"]},props:{mode:{type:String,default:r["B"]},value:{type:Object,default:()=>({})},registerBeforeHook:{type:Function,required:!0}},data(){const e={Endpoints:[],Rewrites:{}},t={Auth:{Username:"",Password:"",Auth:"",IdentityToken:""},TLS:{InsecureSkipVerify:!1}};let a={};const s={Mirrors:{"":Object(u["e"])(e)},Configs:{}};try{a=JSON.parse(this.value.value)}catch(p){a=s}Object.keys(a).length||(a=s);const l=a.Mirrors||{},i=a.Configs||{},r=Object.keys(l),n=Object.keys(i),c=r.map(e=>({key:e,value:a.Mirrors[e],idx:Object(o["p"])(5).toLowerCase()})),d=n.map(e=>{var s;return null!==(s=a.Configs[e])&&void 0!==s&&s.Auth||(a.Configs[e].Auth=t.Auth),{key:e,value:a.Configs[e],idx:Object(o["p"])(5).toLowerCase()}});return{mirrors:c,configs:d,originMirror:e,originConfig:t,mirrorsKeys:r,configsKeys:n,errors:[]}},created(){this.registerBeforeHook&&this.registerBeforeHook(this.willSave,"willSave")},computed:{insecureSkipVerifyOption(){return[{label:"True",value:!0},{label:"False",value:!1}]}},methods:{willSave(){const e=[];if(this.value.value)try{JSON.parse(this.value.value),this.mirrors.forEach(t=>{t.key||e.push(this.t("validation.required",{key:this.t("harvester.setting.containerdRegistry.mirrors.registryName")},!0)),0===t.value.Endpoints.length&&e.push(this.t("validation.required",{key:this.t("harvester.setting.containerdRegistry.mirrors.endpoints")},!0))}),this.configs.forEach(t=>{t.key||e.push(this.t("validation.required",{key:this.t("harvester.setting.containerdRegistry.configs.registryEDQNorIP")},!0))})}catch(t){}return e.length>0?Promise.reject(e):Promise.resolve()},update(){const e={},t={};this.mirrors.forEach(t=>{e[t.key]=t.value}),this.configs.forEach(e=>{t[e.key]=e.value});const a={Mirrors:e,Configs:t};Object.keys(e).length||delete a.Mirrors,Object.keys(t).length||delete a.Configs;const s=Object.keys(a).length?JSON.stringify(a):"";this.$set(this.value,"value",s)},addMirror(){this.mirrors.push({key:"",value:Object(u["e"])(this.originMirror),idx:Object(o["p"])(5).toLowerCase()}),this.update()},addConfig(){this.configs.push({key:"",value:Object(u["e"])(this.originConfig),idx:Object(o["p"])(5).toLowerCase()}),this.update()},remove(e,t){this[e].splice(t,1),this.update()}},watch:{value:{handler(e){e.value||(this.$set(this,"mirrors",[]),this.$set(this,"configs",[]),this.update())},deep:!0}}},v=p,m=(a("0af8"),a("d802")),h=Object(m["a"])(v,s,l,!1,null,"985ef200",null);t["default"]=h.exports},7710:function(e,t,a){"use strict";a("83fc")},"781c":function(e,t,a){var s=a("8356");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("1bb9c269",s,!0,{sourceMap:!1,shadowMode:!1})},"786a":function(e,t,a){var s=a("a990");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("558df1fe",s,!0,{sourceMap:!1,shadowMode:!1})},"787e":function(e,t,a){"use strict";a("c980")},7972:function(e,t,a){var s=a("eaef");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("49e3d620",s,!0,{sourceMap:!1,shadowMode:!1})},"79d7":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"filter"},[e.parentSriov?t("span",{staticClass:"banner-item bg-warning"},[e._v(" "+e._s(e.parentSriov)+" "),t("i",{staticClass:"icon icon-close",on:{click:function(t){return e.remove()}}})]):e._e(),t("v-popover",{attrs:{trigger:"click",placement:"bottom-end"},scopedSlots:e._u([{key:"popover",fn:function(){return[t("div",{staticClass:"filter-popup"},[t("div",[t("LabeledSelect",{attrs:{options:e.parentSriovOptions,searchable:!0,label:e.label},model:{value:e.parentSriov,callback:function(t){e.parentSriov=t},expression:"parentSriov"}})],1)])]},proxy:!0}])},[e._t("header",(function(){return[t("button",{ref:"actionDropDown",staticClass:"btn bg-primary mr-10"},[e._t("title",(function(){return[e._v(" "+e._s(e.label)+" ")]}))],2)]}))],2)],1)},l=[],i=a("53fe"),r={name:"HarvesterFilterLabel",components:{LabeledSelect:i["a"]},props:{rows:{type:Array,required:!0},parentSriovOptions:{type:Array,required:!0},parentSriovLabel:{type:String,required:!0},label:{type:String,required:!0}},data(){var e;return{parentSriov:(null===(e=this.$route.query)||void 0===e?void 0:e.parentSriov)||null}},methods:{remove(){this.parentSriov=null,this.filterRows()},filterRows(){const e=this.rows.filter(e=>{if(!this.parentSriov)return!0;const t=e.labels[this.parentSriovLabel];return t===this.parentSriov});this.$emit("change-rows",e,this.parentSriov)}},watch:{parentSriov:{deep:!0,immediate:!0,handler(){this.filterRows()}}}},o=r,n=(a("20e2"),a("d802")),c=Object(n["a"])(o,s,l,!1,null,"019d9ce9",null);t["a"]=c.exports},"7a94":function(e,t,a){"use strict";a("da48")},"7c61":function(e,t,a){var s=a("61a8");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("5b385854",s,!0,{sourceMap:!1,shadowMode:!1})},"7ce9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-12"},[t("RadioGroup",{attrs:{name:"registryProvider",mode:e.mode,options:e.registryAddresses},model:{value:e.registryProvider,callback:function(t){e.registryProvider=t},expression:"registryProvider"}})],1)]),e.needsDockerServer?t("div",{staticClass:"row mb-20"},[t("LabeledInput",{attrs:{required:"",label:e.t("secret.registry.domainName"),placeholder:"e.g. index.docker.io",mode:e.mode},model:{value:e.registryUrl,callback:function(t){e.registryUrl=t},expression:"registryUrl"}})],1):e._e(),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("secret.registry.username"),mode:e.mode},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("secret.registry.password"),mode:e.mode,type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)])])},l=[],i=a("d444"),r=a("f032"),o={components:{LabeledInput:i["a"],RadioGroup:r["b"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){var e,t;let a,s="Custom";try{const e=JSON.parse(this.value.decodedData[".dockerconfigjson"]);a=e.auths}catch(o){}a=a||{};const l=Object.keys(a)[0]||"";"index.docker.io/v1/"===l?s="DockerHub":"quay.io"===l?s="Quay.io":l.includes("artifactory")&&(s="Artifactory");const i=(null===(e=a[l])||void 0===e?void 0:e.username)||"",r=(null===(t=a[l])||void 0===t?void 0:t.password)||"";return{registryProvider:s,username:i,password:r,registryUrl:l}},computed:{registryAddresses(){return["Custom","DockerHub","Quay.io","Artifactory"]},needsDockerServer(){return"Artifactory"===this.registryProvider||"Custom"===this.registryProvider},dockerconfigjson(){let e="DockerHub"===this.registryProvider?"index.docker.io/v1/":"quay.io";if(this.needsDockerServer&&(e=this.registryUrl),e){const t={auths:{[e]:{username:this.username,password:this.password}}},a=JSON.stringify(t);return a}return null}},watch:{registryProvider:"update",registryUrl:"update",username:"update",password:"update"},methods:{update(){this.value.setData(".dockerconfigjson",this.dockerconfigjson)}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},"7d82":function(e,t,a){var s=a("d0cf");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("0fbc1f4e",s,!0,{sourceMap:!1,shadowMode:!1})},"7e97":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"splunk"},[t("div",[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-2"},[t("LabeledSelect",{attrs:{mode:e.mode,disabled:e.disabled,options:e.protocolOptions,label:e.t("logging.splunk.protocol")},model:{value:e.value.protocol,callback:function(t){e.$set(e.value,"protocol",t)},expression:"value.protocol"}})],1),t("div",{staticClass:"col span-8"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.splunk.host")},model:{value:e.value.hec_host,callback:function(t){e.$set(e.value,"hec_host",t)},expression:"value.hec_host"}})],1),t("div",{staticClass:"col span-2"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,type:"number",min:"1",max:"65535",label:e.t("logging.splunk.port")},model:{value:e.port,callback:function(t){e.port=t},expression:"port"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.splunk.indexName")},model:{value:e.value.index,callback:function(t){e.$set(e.value,"index",t)},expression:"value.index"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.splunk.source")},model:{value:e.value.source,callback:function(t){e.$set(e.value,"source",t)},expression:"value.source"}})],1)])]),t("div",{staticClass:"spacer"}),t("div",[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.splunk.token"),"show-key-selector":!0},model:{value:e.value.hec_token,callback:function(t){e.$set(e.value,"hec_token",t)},expression:"value.hec_token"}})],1)])]),t("div",{staticClass:"spacer"}),t("h3",[e._v(e._s(e.t("logging.output.sections.certificate")))]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.splunk.insecureSsl")},model:{value:e.value.insecure_ssl,callback:function(t){e.$set(e.value,"insecure_ssl",t)},expression:"value.insecure_ssl"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.splunk.caFile"),"show-key-selector":!0},model:{value:e.value.ca_file,callback:function(t){e.$set(e.value,"ca_file",t)},expression:"value.ca_file"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.splunk.caPath"),"show-key-selector":!0},model:{value:e.value.ca_path,callback:function(t){e.$set(e.value,"ca_path",t)},expression:"value.ca_path"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.splunk.clientCert"),"show-key-selector":!0},model:{value:e.value.client_cert,callback:function(t){e.$set(e.value,"client_cert",t)},expression:"value.client_cert"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.splunk.clientKey"),"show-key-selector":!0},model:{value:e.value.client_key,callback:function(t){e.$set(e.value,"client_key",t)},expression:"value.client_key"}})],1)])])},l=[],i=a("0b97"),r=a("d444"),o=a("53fe"),n=a("efb2"),c=a("05b4"),d={components:{Checkbox:n["a"],LabeledInput:r["a"],LabeledSelect:o["a"],SecretSelector:i["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}},data(){return{protocolOptions:c["protocol"]}},computed:{port:{get(){return this.value.hec_port},set(e){Object(c["updatePort"])(e=>this.$set(this.value,"hec_port",e),e)}}}},u=d,p=a("d802"),v=Object(p["a"])(u,s,l,!1,null,null,null);t["default"]=v.exports},"7f4e":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-a4b7446a] .radio-group{display:flex}[data-v-a4b7446a] .radio-group .radio-container{margin-right:30px}",""]),e.exports=t},"7fa6":function(e,t,a){var s=a("4aec");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("559ed5c6",s,!0,{sourceMap:!1,shadowMode:!1})},"80a9":function(e,t,a){var s=a("ff52");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("5ece5939",s,!0,{sourceMap:!1,shadowMode:!1})},8101:function(e,t,a){var s={"./custom":"ba1a","./custom.vue":"ba1a","./driver.longhorn.io":"3db4","./driver.longhorn.io.vue":"3db4"};function l(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=i,e.exports=l,l.id="8101"},"810e":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".secret-selector{width:100%}.secret-selector label{display:block}.secret-selector .labeled-select{min-height:61px}.secret-selector .vs__selected-options{padding:8px 0 7px 0}.secret-selector label{display:inline-block}.secret-selector.show-key-selector .input-container>*{display:inline-block;width:50%}.secret-selector.show-key-selector .input-container>.labeled-select.focused{z-index:10}.secret-selector.show-key-selector .input-container>:first-child{border-top-right-radius:0;border-bottom-right-radius:0;margin-right:0}.secret-selector.show-key-selector .input-container>:last-child{border-top-left-radius:0;border-bottom-left-radius:0;border-left:none;float:right}",""]),e.exports=t},8287:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Banner",{staticClass:"mb-20",attrs:{color:"info",label:e.t("harvester.virtualMachine.accessCredentials.tips")}}),e._l(e.rows,(function(a,s){return t("div",{key:a.id},[t("InfoBox",{staticClass:"volume-source"},[e.isEdit?t("button",{staticClass:"role-link btn btn-sm remove-vol",attrs:{type:"button"},on:{click:function(t){return e.remove(a)}}},[t("i",{staticClass:"icon icon-x"})]):e._e(),t("h3",[t("span",[e._v(" "+e._s(e.headerFor(a.source))+" ")])]),t("div",[t(e.componentFor(a.source),{tag:"component",attrs:{rows:e.rows,resource:e.resource,"user-options":e.userOptions,mode:e.mode,idx:s},on:{update:e.update,"update:newUser":e.updateNewUser},model:{value:e.rows[s],callback:function(t){e.$set(e.rows,s,t)},expression:"rows[i]"}})],1)])],1)})),e.isEdit&&e.isQemuInstalled?t("div",{staticClass:"mt-20"},[t("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addCredentials(e.ACCESS_CREDENTIALS.RESET_PWD)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.accessCredentials.resetPwd.label"))+" ")]),t("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addCredentials(e.ACCESS_CREDENTIALS.INJECT_SSH)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.accessCredentials.injectSSH.label"))+" ")])]):e._e()],2)},l=[],i=a("9ce4"),r=a("dffb"),o=a("6583"),n=a("06f6"),c=a("e411"),d=a("7c47"),u=a("d6a6"),p=a("873f");const v="_NEW";var m={components:{Banner:r["a"],InfoBox:o["a"]},props:{value:{type:Array,default:()=>[]},resource:{type:Object,default:()=>({})},mode:{type:String,default:"create"},disableCreate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},isQemuInstalled:{type:Boolean,default:!1}},data(){return{ACCESS_CREDENTIALS:d["a"],toRemove:[],toSave:[],rows:[],newUserOptions:[]}},computed:{...Object(i["a"])({t:"i18n/t"}),isEdit(){return this.mode===u["B"]},historyUsersOptions(){var e,t,a,s,l;const i=JSON.parse((null===(e=this.resource)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.template)||void 0===a||null===(s=a.metadata)||void 0===s||null===(l=s.annotations)||void 0===l?void 0:l[p["a"].DYNAMIC_SSHKEYS_USERS])||"[]");return i.unshift({label:this.t("harvester.virtualMachine.accessCredentials.injectSSH.addUser"),value:v}),i},userOptions(){return Array.from(new Set([...this.historyUsersOptions,...this.newUserOptions]))}},watch:{value:{handler(e){this.rows=[...e]},deep:!0,immediate:!0}},methods:{addCredentials(e){const t={source:e,users:[],sshkeys:[],username:"",newPassword:"",secretName:this.generateSecretName(this.resource.metadata.name)};this.rows.push(t),this.update()},remove(e){Object(c["j"])(this.rows,e),this.update()},update(){this.$emit("input",this.rows)},updateNewUser(e){this.newUserOptions.push(e)},generateSecretName(e){return e?`${e}-${Object(n["p"])(5).toLowerCase()}`:void 0},componentFor(e){switch(e){case d["a"].RESET_PWD:return a("e299").default;case d["a"].INJECT_SSH:return a("db40").default}},headerFor(e){return{userPassword:this.$store.getters["i18n/t"]("harvester.virtualMachine.accessCredentials.resetPwd.label"),sshPublicKey:this.$store.getters["i18n/t"]("harvester.virtualMachine.accessCredentials.injectSSH.label")}[e]}}},h=m,b=(a("b50b"),a("d802")),f=Object(b["a"])(h,s,l,!1,null,"77458bc0",null);t["default"]=f.exports},8356:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"h3{margin-top:10px}",""]),e.exports=t},"835a":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-601a9a13] .unlabeled-select{height:61px}",""]),e.exports=t},"83d6":function(e,t,a){"use strict";a("f926")},"83fc":function(e,t,a){var s=a("374e");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("aa04d37e",s,!0,{sourceMap:!1,shadowMode:!1})},"86dc":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.templateSpec&&e.spec?t("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,"can-yaml":!1,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.saveVMT}},[t("NameNsDescription",{attrs:{mode:e.realTemplateMode,"name-label":"harvester.vmTemplate.nameNsDescription.name",namespaced:!0},model:{value:e.templateValue,callback:function(t){e.templateValue=t},expression:"templateValue"}}),e.templateId?t("Checkbox",{staticClass:"mb-20",attrs:{label:e.t("tableHeaders.defaultVersion"),type:"checkbox",mode:e.mode},model:{value:e.isDefaultVersion,callback:function(t){e.isDefaultVersion=t},expression:"isDefaultVersion"}}):e._e(),t("Tabbed",{attrs:{"side-tabs":!0},on:{changed:e.onTabChanged}},[t("Tab",{attrs:{name:"Basics",label:e.t("harvester.vmTemplate.tabs.basics")}},[t("CpuMemory",{attrs:{cpu:e.cpu,memory:e.memory,disabled:e.isConfig},on:{updateCpuMemory:e.updateCpuMemory}}),t("div",{staticClass:"mb-20"},[t("SSHKey",{attrs:{namespace:e.templateValue.metadata.namespace,"disable-create":e.isView,mode:e.mode},on:{"update:sshKey":e.updateSSHKey},model:{value:e.sshKey,callback:function(t){e.sshKey=t},expression:"sshKey"}})],1)],1),t("Tab",{attrs:{name:"Volume",label:e.t("harvester.tab.volume"),weight:-1}},[t("Volume",{attrs:{mode:e.mode,namespace:e.value.metadata.namespace,"existing-volume-disabled":!0},model:{value:e.diskRows,callback:function(t){e.diskRows=t},expression:"diskRows"}})],1),t("Tab",{attrs:{name:"Network",label:e.t("harvester.tab.network"),weight:-2}},[t("Network",{attrs:{mode:e.mode},model:{value:e.networkRows,callback:function(t){e.networkRows=t},expression:"networkRows"}})],1),t("Tab",{attrs:{name:"nodeScheduling",label:e.t("workload.container.titles.nodeScheduling"),weight:-89},scopedSlots:e._u([{key:"default",fn:function({active:a}){return[t("NodeScheduling",{key:a,attrs:{mode:e.mode,value:e.spec.template.spec,nodes:e.nodesIdOptions}})]}}],null,!1,4193668642)}),t("Tab",{attrs:{label:e.t("harvester.tab.vmScheduling"),name:"vmScheduling",weight:-90},scopedSlots:e._u([{key:"default",fn:function({active:a}){return[t("PodAffinity",{key:a,attrs:{mode:e.mode,value:e.spec.template.spec,nodes:e.nodes,"all-namespaces-option-available":!0,namespaces:e.filteredNamespaces,"overwrite-labels":e.affinityLabels}})]}}],null,!1,2121974525)}),t("Tab",{attrs:{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-99}},[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.runStrategy",options:e.RunStrategys,mode:e.mode},model:{value:e.runStrategy,callback:function(t){e.runStrategy=t},expression:"runStrategy"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.osType",mode:e.mode,options:e.OS},model:{value:e.osType,callback:function(t){e.osType=t},expression:"osType"}})],1)]),t("div",{staticClass:"row mb-20"},[(e.showAdvanced,t("a",{directives:[{name:"t",rawName:"v-t",value:"harvester.generic.showMore",expression:"'harvester.generic.showMore'"}],attrs:{role:"button"},on:{click:e.toggleAdvanced}}))]),e.showAdvanced?t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("Reserved",{attrs:{"reserved-memory":e.reservedMemory,mode:e.mode},on:{updateReserved:e.updateReserved}})],1),t("div",{staticClass:"col span-6"},[t("UnitInput",{attrs:{suffix:1==e.terminationGracePeriodSeconds?"Second":"Seconds",label:e.t("harvester.virtualMachine.terminationGracePeriodSeconds.label"),mode:e.mode},on:{change:e.updateTerminationGracePeriodSeconds},model:{value:e.terminationGracePeriodSeconds,callback:function(t){e.terminationGracePeriodSeconds=t},expression:"terminationGracePeriodSeconds"}})],1)])]):e._e(),t("CloudConfig",{ref:"yamlEditor",attrs:{mode:e.mode,"user-script":e.userScript,namespace:e.templateValue.metadata.namespace,"network-script":e.networkScript},on:{updateUserData:e.updateUserData,updateNetworkData:e.updateNetworkData}}),t("div",{staticClass:"spacer"}),t("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.enableUsb"),mode:e.mode},model:{value:e.installUSBTablet,callback:function(t){e.installUSBTablet=t},expression:"installUSBTablet"}}),t("Checkbox",{staticClass:"check",attrs:{type:"checkbox","label-key":"harvester.virtualMachine.installAgent",mode:e.mode},model:{value:e.installAgent,callback:function(t){e.installAgent=t},expression:"installAgent"}}),t("Checkbox",{staticClass:"check",attrs:{type:"checkbox","label-key":"harvester.virtualMachine.advancedOptions.tpm",mode:e.mode},model:{value:e.tpmEnabled,callback:function(t){e.tpmEnabled=t},expression:"tpmEnabled"}}),t("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.efiEnabled"),mode:e.mode},model:{value:e.efiEnabled,callback:function(t){e.efiEnabled=t},expression:"efiEnabled"}}),e.efiEnabled?t("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.secureBoot"),mode:e.mode},model:{value:e.secureBoot,callback:function(t){e.secureBoot=t},expression:"secureBoot"}}):e._e()],1),t("Tab",{attrs:{name:e.t("generic.labels"),label:e.t("harvester.tab.instanceLabel"),weight:-99}},[t("Labels",{attrs:{"default-container-class":"labels-and-annotations-container",value:e.value,mode:e.mode,"display-side-by-side":!1,"show-annotations":!1,"show-label-title":!1},scopedSlots:e._u([{key:"labels",fn:function({toggler:a}){return[t("KeyValue",{key:"labels",attrs:{value:e.value.instanceLabels,"protected-keys":e.value.systemLabels||[],"toggle-filter":a,"add-label":e.t("labels.addLabel"),mode:e.mode,"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setInstanceLabels(t)}}})]}}],null,!1,3065672209)})],1)],1)],1):e._e()},l=[],i=a("9ce4"),r=a("ad61"),o=a("5ef9"),n=a("efb2"),c=a("2e2b"),d=a("65b0"),u=a("53fe"),p=a("1eaf"),v=a("2958"),m=a("1b5f"),h=a("03d2"),b=a("2007"),f=a("b82b"),g=a("9216"),y=a("fea5"),C=a("e1c9"),k=a("5c0d"),w=a("2a79"),x=a("90cd"),S=a("06f6"),_=a("7c47"),O=a("d6a6"),N=a("873f"),$=a("6834"),L=a("c78c"),I=a("9c20"),T={name:"HarvesterEditVMTemplate",components:{Tab:o["a"],SSHKey:w["default"],Volume:g["default"],Tabbed:r["a"],Network:y["default"],Checkbox:n["a"],CpuMemory:C["default"],CruResource:c["a"],CloudConfig:k["default"],LabeledSelect:u["a"],NameNsDescription:d["a"],NodeScheduling:m["a"],PodAffinity:h["a"],Reserved:f["default"],UnitInput:b["a"],Labels:p["a"],KeyValue:v["a"]},mixins:[L["a"],$["c"]],props:{value:{type:Object,required:!0}},data(){this.mode===O["B"]&&this.value.cleanForNew();const e=this.value.templateId||this.$route.query.templateId;return{templateId:e,templateValue:null,templateSpec:null,versionName:"",description:"",defaultVersion:null,isDefaultVersion:!1,RunStrategys:_["e"]}},computed:{...Object(i["a"])({t:"i18n/t"}),isConfig(){var e;return(null===(e=this.$route.query)||void 0===e?void 0:e.as)===O["y"]||this.isView},realTemplateMode(){return this.templateId?O["I"]:this.mode},secretNamePrefix(){var e,t;return null===(e=this.templateValue)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name}},watch:{templateId:{async handler(e){var t;const a=await this.$store.dispatch("harvester/findAll",{type:x["b"].VM_TEMPLATE});let s=a.find(t=>t.id===e)||null,l=null===(t=s)||void 0===t?void 0:t.spec;s||(l={description:"",defaultVersionId:""},s=await this.$store.dispatch("harvester/create",{metadata:{name:"",namespace:""},spec:l,type:x["b"].VM_TEMPLATE})),this.templateValue=s,this.templateSpec=l},immediate:!0}},created(){this.registerAfterHook(async()=>{if(this.isDefaultVersion){const t=await this.$store.dispatch("harvester/findAll",{type:x["b"].VM_VERSION,opt:{force:!0}}),a=t.find(e=>{var t,a;return(null===e||void 0===e||null===(t=e.metadata)||void 0===t||null===(a=t.annotations)||void 0===a?void 0:a[N["a"].TEMPLATE_VERSION_CUSTOM_NAME])===this.customName});if(a)try{this.templateValue.defaultVersionId=a.id;const e=[{op:"replace",path:"/spec/defaultVersionId",value:a.id}];await this.templateValue.patch(e,{url:this.templateValue.linkFor("view")})}catch(e){return Promise.reject(new Error(e.message))}}})},mounted(){var e;this.imageId=(null===(e=this.diskRows[0])||void 0===e?void 0:e.image)||""},methods:{async saveVMT(e){this.parseVM();const t=await this.$store.dispatch("harvester/findAll",{type:x["b"].VM_TEMPLATE}),a=t.find(e=>e.metadata.name===this.templateValue.metadata.name);try{if(this.templateId)a.save();else{var s,l;if(null===(s=this.templateValue)||void 0===s||null===(l=s.metadata)||void 0===l||!l.name)return this.errors=[this.t("validation.required",{key:this.t("harvester.vmTemplate.nameNsDescription.name")})],void e(!1);await this.templateValue.save()}this.value.cleanForNew(),this.customName=Object(S["p"])(10),this.$set(this.value.metadata,"annotations",{...this.value.metadata.annotations,[N["a"].TEMPLATE_VERSION_CUSTOM_NAME]:this.customName});const t=this.templateValue.metadata.name||a.metadata.name,i=this.templateValue.metadata.namespace||a.metadata.namespace;this.isCreate&&(this.value.metadata.namespace=i),this.$set(this.value.spec,"templateId",`${i}/${t}`);const r=await this.value.save();await this.saveSecret(r),await this.applyHooks(I["a"]),this.done()}catch(i){this.errors=[i],e(!1)}},onTabChanged({tab:e}){var t;"advanced"===e.name&&(null===(t=this.$refs.yamlEditor)||void 0===t||t.refresh())}}},D=T,M=a("d802"),E=Object(M["a"])(D,s,l,!1,null,null,null);t["default"]=E.exports},8785:function(e,t,a){"use strict";a("01b8")},"87a7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("CruResource",{attrs:{resource:e.value,mode:e.mode,errors:e.errors},on:{finish:e.save}},[t(e.currentComponent,{tag:"component",attrs:{value:e.value,"register-before-hook":e.registerBeforeHook,mode:e.mode}})],1)},l=[],i=a("c78c"),r=a("2e2b"),o={name:"EditAddon",components:{CruResource:r["a"]},mixins:[i["a"]],props:{value:{type:Object,required:!0}},computed:{currentComponent(){const e=this.value.metadata.name;try{return a("a8ba")(`./${e}.vue`).default}catch{return a("9b76").default}}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},8885:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.spec?t("CruResource",{attrs:{id:"vm","done-route":e.doneRoute,resource:e.value,mode:e.mode,"can-yaml":!!e.isSingle,errors:e.errors,"generate-yaml":e.generateYaml,"apply-hooks":e.applyHooks},on:{finish:e.saveVM}},[e.isCreate?t("RadioGroup",{staticClass:"mb-20 vm-radio-group",attrs:{name:"createInstanceMode",options:[!0,!1],labels:[e.t("harvester.virtualMachine.instance.single.label"),e.t("harvester.virtualMachine.instance.multiple.label")]},model:{value:e.isSingle,callback:function(t){e.isSingle=t},expression:"isSingle"}}):e._e(),t("NameNsDescription",{attrs:{mode:e.mode,"has-extra":!e.isSingle,"name-label":e.nameLabel,namespaced:!0,"name-placeholder":e.isSingle?"nameNsDescription.name.placeholder":"harvester.virtualMachine.instance.multiple.nameNsDescription","extra-columns":e.isSingle?[]:["type"]},scopedSlots:e._u([{key:"type",fn:function(){return[e.isSingle?e._e():t("LabeledInput",{directives:[{name:"int-number",rawName:"v-int-number"}],attrs:{min:2,type:"number",label:e.t("harvester.virtualMachine.instance.multiple.count"),required:""},on:{input:e.validateCount},model:{value:e.count,callback:function(t){e.count=e._n(t)},expression:"count"}})]},proxy:!0}],null,!1,2697438012),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.isCreate?t("Checkbox",{staticClass:"check mb-20",attrs:{type:"checkbox","label-key":"harvester.virtualMachine.useTemplate.label"},model:{value:e.useTemplate,callback:function(t){e.useTemplate=t},expression:"useTemplate"}}):e._e(),e.useTemplate?t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.useTemplate.template.label",options:e.templateOptions},on:{input:e.updateTemplateId},model:{value:e.templateId,callback:function(t){e.templateId=t},expression:"templateId"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.useTemplate.version.label",options:e.versionOptions},model:{value:e.templateVersionId,callback:function(t){e.templateVersionId=t},expression:"templateVersionId"}})],1)]):e._e(),t("Tabbed",{attrs:{"side-tabs":!0},on:{changed:e.onTabChanged}},[t("Tab",{attrs:{name:"basics",label:e.t("harvester.virtualMachine.detail.tabs.basics")}},[t("CpuMemory",{attrs:{cpu:e.cpu,memory:e.memory,mode:e.mode},on:{updateCpuMemory:e.updateCpuMemory}}),t("SSHKey",{staticClass:"mb-20",attrs:{namespace:e.value.metadata.namespace,mode:e.mode,disabled:e.isWindows},on:{"update:sshKey":e.updateSSHKey,"register-after-hook":e.registerAfterHook},model:{value:e.sshKey,callback:function(t){e.sshKey=t},expression:"sshKey"}})],1),t("Tab",{attrs:{name:"Volume",label:e.t("harvester.tab.volume"),weight:-1}},[t("Volume",{attrs:{mode:e.mode,"custom-volume-mode":e.customVolumeMode,namespace:e.value.metadata.namespace,"resource-type":e.value.type,vm:e.value,"validate-required":!0},model:{value:e.diskRows,callback:function(t){e.diskRows=t},expression:"diskRows"}})],1),t("Tab",{attrs:{name:"Network",label:e.t("harvester.tab.network"),weight:-2}},[t("Network",{attrs:{mode:e.mode,"is-single":e.isSingle},model:{value:e.networkRows,callback:function(t){e.networkRows=t},expression:"networkRows"}})],1),t("Tab",{attrs:{name:"nodeScheduling",label:e.t("workload.container.titles.nodeScheduling"),weight:-3},scopedSlots:e._u([{key:"default",fn:function({active:a}){return[t("NodeScheduling",{key:a,attrs:{mode:e.mode,value:e.spec.template.spec,nodes:e.nodesIdOptions}})]}}],null,!1,4193668642)}),t("Tab",{attrs:{label:e.t("harvester.tab.vmScheduling"),name:"vmScheduling",weight:-4},scopedSlots:e._u([{key:"default",fn:function({active:a}){return[t("PodAffinity",{key:a,attrs:{mode:e.mode,value:e.spec.template.spec,nodes:e.nodes,"all-namespaces-option-available":!0,namespaces:e.filteredNamespaces,"overwrite-labels":e.affinityLabels}})]}}],null,!1,2121974525)}),e.enabledPCI?t("Tab",{attrs:{label:e.t("harvester.tab.pciDevices"),name:"pciDevices",weight:-5}},[t("PciDevices",{attrs:{mode:e.mode,value:e.spec.template.spec,vm:e.value}})],1):e._e(),e.enabledSriovgpu?t("Tab",{attrs:{label:e.t("harvester.tab.vGpuDevices"),name:"vGpuDevices",weight:-6}},[t("VirtualMachineVGpuDevices",{attrs:{mode:e.mode,value:e.spec.template.spec,vm:e.value}})],1):e._e(),e.isEdit?t("Tab",{attrs:{label:e.t("harvester.tab.accessCredentials"),name:"accessCredentials",weight:-7}},[t("AccessCredentials",{attrs:{mode:e.mode,resource:e.value,"is-qemu-installed":e.isQemuInstalled},model:{value:e.accessCredentials,callback:function(t){e.accessCredentials=t},expression:"accessCredentials"}})],1):e._e(),t("Tab",{attrs:{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-8}},[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.runStrategy",options:e.RunStrategys,mode:e.mode},model:{value:e.runStrategy,callback:function(t){e.runStrategy=t},expression:"runStrategy"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.osType",options:e.OS,disabled:!e.isCreate},model:{value:e.osType,callback:function(t){e.osType=t},expression:"osType"}})],1)]),t("div",{staticClass:"row mb-20"},[(e.showAdvanced,t("a",{directives:[{name:"t",rawName:"v-t",value:"harvester.generic.showMore",expression:"'harvester.generic.showMore'"}],attrs:{role:"button"},on:{click:e.toggleAdvanced}}))]),e.showAdvanced?t("div",{staticClass:"mb-20"},[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{"label-key":e.hostnameLabel,placeholder:e.hostPlaceholder,mode:e.mode},model:{value:e.hostname,callback:function(t){e.hostname=t},expression:"hostname"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.input.MachineType",options:e.machineTypeOptions,mode:e.mode},model:{value:e.machineType,callback:function(t){e.machineType=t},expression:"machineType"}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("Reserved",{attrs:{"reserved-memory":e.reservedMemory,mode:e.mode},on:{updateReserved:e.updateReserved}})],1),t("div",{staticClass:"col span-6"},[t("UnitInput",{attrs:{suffix:1==e.terminationGracePeriodSeconds?"Second":"Seconds",label:e.t("harvester.virtualMachine.terminationGracePeriodSeconds.label"),mode:e.mode,positive:""},on:{input:e.updateTerminationGracePeriodSeconds},model:{value:e.terminationGracePeriodSeconds,callback:function(t){e.terminationGracePeriodSeconds=t},expression:"terminationGracePeriodSeconds"}})],1)])]):e._e(),t("CloudConfig",{ref:"yamlEditor",attrs:{"user-script":e.userScript,mode:e.mode,"view-code":e.isWindows,namespace:e.value.metadata.namespace,"network-script":e.networkScript},on:{updateUserData:e.updateUserData,updateNetworkData:e.updateNetworkData,updateDataTemplateId:e.updateDataTemplateId}}),t("Checkbox",{staticClass:"check mt-20",attrs:{type:"checkbox","tooltip-key":"harvester.virtualMachine.usbTip","label-key":"harvester.virtualMachine.enableUsb",mode:e.mode},model:{value:e.installUSBTablet,callback:function(t){e.installUSBTablet=t},expression:"installUSBTablet"}}),t("Checkbox",{staticClass:"check",attrs:{type:"checkbox",disabled:e.isWindows,"label-key":"harvester.virtualMachine.installAgent",mode:e.mode},on:{input:e.updateAgent},model:{value:e.installAgent,callback:function(t){e.installAgent=t},expression:"installAgent"}}),t("Checkbox",{staticClass:"check",attrs:{type:"checkbox","label-key":"harvester.virtualMachine.advancedOptions.tpm",mode:e.mode},model:{value:e.tpmEnabled,callback:function(t){e.tpmEnabled=t},expression:"tpmEnabled"}}),t("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.efiEnabled"),mode:e.mode},model:{value:e.efiEnabled,callback:function(t){e.efiEnabled=t},expression:"efiEnabled"}}),e.efiEnabled?t("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.secureBoot"),mode:e.mode},model:{value:e.secureBoot,callback:function(t){e.secureBoot=t},expression:"secureBoot"}}):e._e()],1),t("Tab",{attrs:{name:"instanceLabel",label:e.t("harvester.tab.instanceLabel"),weight:-99}},[t("Labels",{attrs:{"default-container-class":"labels-and-annotations-container",value:e.value,mode:e.mode,"display-side-by-side":!1,"show-annotations":!1,"show-label-title":!1},scopedSlots:e._u([{key:"labels",fn:function({toggler:a}){return[t("KeyValue",{key:"labels",attrs:{value:e.value.instanceLabels,"protected-keys":e.value.systemLabels||[],"toggle-filter":a,"add-label":e.t("labels.addLabel"),mode:e.mode,"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setInstanceLabels(t)}}})]}}],null,!1,3065672209)})],1)],1),t("RestartVMDialog",{ref:"restartDialog",attrs:{vm:e.value}})],1):e._e()},l=[],i=a("9ec3"),r=a("9ce4"),o=a("ad61"),n=a("5ef9"),c=a("efb2"),d=a("2e2b"),u=a("f032"),p=a("d444"),v=a("53fe"),m=a("65b0"),h=a("2007"),b=a("1eaf"),f=a("b82b"),g=a("2a79"),y=a("9216"),C=a("fea5"),k=a("e1c9"),w=a("5c0d"),x=a("1b5f"),S=a("03d2"),_=a("8287"),O=a("2456"),N=a("4284"),$=a("61a1"),L=a("2958"),I=a("e411"),T=a("1832"),D=a("90cd"),M=a("7c47"),E=a("3811"),R=a("3792"),V=a("873f"),j=a("9c20"),P=a("6834"),A=a("c78c"),q=a("de15"),B={name:"HarvesterEditVM",components:{Tab:n["a"],Tabbed:o["a"],Checkbox:c["a"],RadioGroup:u["b"],CruResource:d["a"],LabeledInput:p["a"],LabeledSelect:v["a"],NameNsDescription:m["a"],Volume:y["default"],SSHKey:g["default"],Network:C["default"],CpuMemory:k["default"],CloudConfig:w["default"],NodeScheduling:x["a"],PodAffinity:S["a"],AccessCredentials:_["default"],Reserved:f["default"],Labels:b["a"],PciDevices:O["default"],RestartVMDialog:$["default"],UnitInput:h["a"],VirtualMachineVGpuDevices:N["default"],KeyValue:L["a"]},mixins:[A["a"],P["c"]],props:{value:{type:Object,required:!0}},data(){const e=Object(T["e"])(this.value),t="Running"===this.value.actualState,a=this.value.spec.template.spec.hostname||"";return{cloneVM:e,count:2,templateId:"",templateVersionId:"",namePrefix:"",isSingle:!0,useTemplate:!1,hostname:a,isRestartImmediately:t,RunStrategys:M["e"]}},computed:{...Object(r["a"])({t:"i18n/t"}),machineTypeOptions(){return[{label:"None",value:""},{label:"q35",value:"q35"},{label:"pc-q35",value:"pc-q35"}]},templateOptions(){return this.templates.map(e=>{const t=this.hasAvailableVersion(e.id);return{label:e.id,value:e.id,disabled:!t}})},versionOptions(){var e;const t=null===(e=this.curTemplateResource)||void 0===e?void 0:e.defaultVersion;return this.versions.filter(e=>e.templateId===this.templateId).map(e=>{const a=e.version,s=t===a?`${a} (${this.t("generic.default")})`:a,l=e.id;return{label:s,value:l,disabled:!e.isReady}})},curTemplateResource(){return this.templates.find(e=>e.id===this.templateId)},nameLabel(){return this.isSingle?"harvester.virtualMachine.instance.single.nameLabel":"harvester.virtualMachine.instance.multiple.nameLabel"},hostnameLabel(){return this.isSingle?"harvester.virtualMachine.instance.single.host.label":"harvester.virtualMachine.instance.multiple.host.label"},hostPlaceholder(){return this.isSingle?this.t("harvester.virtualMachine.instance.single.host.placeholder"):this.t("harvester.virtualMachine.instance.multiple.host.placeholder")},secretNamePrefix(){var e,t;return null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name},isQemuInstalled(){return this.value.isQemuInstalled},hasRestartAction(){return this.value.hasAction("restart")},hasStartAction(){return this.value.hasAction("start")}},watch:{templateId:{async handler(e,t){if(e&&e!==t&&!this.templateVersionId){var a,s;const t=await this.$store.dispatch("harvester/findAll",{type:D["b"].VM_TEMPLATE});this.templateVersionId=null===(a=t.find(t=>t.id===e))||void 0===a||null===(s=a.spec)||void 0===s?void 0:s.defaultVersionId}},immediate:!1},templateVersionId:{async handler(e){var t,a,s,l,i,r,o,n,c,d,u;if(!e)return;const p=await this.$store.dispatch("harvester/findAll",{type:D["b"].VM_VERSION}),v=p.find(t=>t.id===e),m=Object(T["e"])(v.spec.vm);null===(t=m.spec)||void 0===t||(null===(a=t.template)||void 0===a||(null===(s=a.spec)||void 0===s||delete s.accessCredentials)),null===(l=m.spec)||void 0===l||(null===(i=l.template)||void 0===i||(null===(r=i.metadata)||void 0===r||(null===(o=r.annotations)||void 0===o||delete o[V["a"].DYNAMIC_SSHKEYS_NAMES]))),null===(n=m.spec)||void 0===n||(null===(c=n.template)||void 0===c||(null===(d=c.metadata)||void 0===d||(null===(u=d.annotations)||void 0===u||delete u[V["a"].DYNAMIC_SSHKEYS_USERS])));const h=Object(q["a"])(m),b=h.map(e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.spec)&&void 0!==t&&t.dataSource&&delete e.spec.dataSource,e});m.metadata.annotations[V["a"].VOLUME_CLAIM_TEMPLATE]=JSON.stringify(b),this.getInitConfig({value:m,existUserData:!0,fromTemplate:!0}),this.$set(this,"hasCreateVolumes",[])}},useTemplate(e){!1===e&&(this.templateId="",this.templateVersionId="",this.value.applyDefaults(),this.getInitConfig({value:this.value,init:this.isCreate}))}},created(){this.registerAfterHook(async()=>{await this.restartVM();const e=`${this.value.metadata.namespace}/${this.value.metadata.name}`,t=this.$store.getters["harvester/byId"](D["b"].VM,e);try{await this.saveSecret(t),await this.saveAccessCredentials(t)}catch(a){this.errors.push(...Object(R["c"])(a))}!this.errors.length&&this.isSingle&&this.done()}),this.registerBeforeHook&&this.registerBeforeHook(this.updateBeforeSave)},mounted(){var e;this.imageId=(null===(e=this.$route.query)||void 0===e?void 0:e.image)||this.imageId;const t=this.getDiskRows(this.value);this.$set(this,"diskRows",t);const a=this.$route.query.templateId,s=this.$route.query.versionId;a&&s&&(this.templateId=a,this.templateVersionId=s,this.useTemplate=!0)},methods:{saveVM(e){Object(I["c"])(this.errors),this.isSingle?this.saveSingle(e):this.saveMultiple(e)},async saveSingle(e){this.parseVM(),this.value.spec.template.spec.hostname=this.hostname?this.hostname:this.value.metadata.name,await this._save(this.value,e),this.errors.length?e(!1):e(!0)},async saveMultiple(e){this.namePrefix=this.value.metadata.name||"";const t=this.namePrefix.endsWith("-")?"":"-",a=this.hostname?this.hostname:this.namePrefix;if(this.count<1)return this.errors=[this.t("harvester.virtualMachine.instance.multiple.countTip")],void e(!1);if(!this.value.metadata.name)return this.errors.push(this.t("validation.required",{key:this.t("generic.name")},!0)),void e(!1);const s=Object(T["e"])(this.value),l=Object(T["e"])(this.spec);for(let i=1;i<=this.count;i++){this.$set(this.value,"spec",s.spec),this.$set(this,"spec",l);const r=i<10?"0"+i:i;this.value.cleanForNew(),this.value.metadata.name=`${this.namePrefix}${t}${r}`,this.$set(this.value.spec.template.spec,"hostname",`${a}${t}${r}`),this.secretName="",await this.parseVM();const o=await this.$store.dispatch("harvester/clone",{resource:this.value});await this._save(o,e),i!==this.count||this.errors.length?i===this.count&&(this.value.metadata.name=this.namePrefix,e(!1)):(e(!0),this.done())}},async _save(e,t){try{await this.applyHooks(j["b"]),await e.save(),await this.applyHooks(j["a"])}catch(a){this.errors.push(...Object(R["c"])(a)),t(!1)}},restartVM(){var e,t;if("edit"!==this.mode)return;if(!this.value.isRunning)return;const a=Object(T["e"])(this.value);null===a||void 0===a||delete a.metadata,null===(e=this.cloneVM)||void 0===e||delete e.metadata,null===(t=this.cloneVM)||void 0===t||delete t.__clone;const s=JSON.parse(JSON.stringify(this.cloneVM)),l=JSON.parse(JSON.stringify(a));return Object(i["isEqual"])(s,l)?void 0:new Promise(e=>{this.$modal.show("restartDialog"),this.$refs.restartDialog.resolve=e})},updateBeforeSave(){this.isSingle&&(this.value.spec.template.spec.hostname||this.$set(this.value.spec.template.spec,"hostname",this.value.metadata.name));const e=this.getAccessCredentialsValidation();return e.length>0?Promise.reject(e):Promise.resolve()},validateCount(e){e>10&&this.$set(this,"count",10)},updateTemplateId(){this.templateVersionId=""},onTabChanged({tab:e}){var t;"advanced"===e.name&&(null===(t=this.$refs.yamlEditor)||void 0===t||t.refresh())},hasAvailableVersion(e){let t=!1;return this.versions.filter(t=>t.templateId===e).find(e=>{e.isReady&&(t=!0)}),t},generateYaml(){this.parseVM();const e=Object(E["d"])(this.value);return e}}},U=B,K=(a("352a"),a("d802")),F=Object(K["a"])(U,s,l,!1,null,"6c837d0c",null);t["default"]=F.exports},8944:function(e,t,a){"use strict";a("eed9")},"8a68":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("Flow",e._b({},"Flow",e.$attrs,!1))},l=[],i=a("fd16"),r={components:{Flow:i["a"]}},o=r,n=a("d802"),c=Object(n["a"])(o,s,l,!1,null,null,null);t["default"]=c.exports},"8ab0":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".row{margin-bottom:5px}.vertically-center{padding:20px 0}",""]),e.exports=t},"8b40":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"#restore[data-v-8036f512]{flex-grow:1;flex-direction:column}#restore[data-v-8036f512],#restore[data-v-8036f512] .radio-group{display:flex}#restore[data-v-8036f512] .radio-group .radio-container{margin-right:30px}#restore .content[data-v-8036f512]{flex-grow:1}#restore .footer[data-v-8036f512]{border-top:var(--header-border-size) solid var(--header-border);margin-left:-20px;margin-right:-20px;margin-bottom:-20px;padding:10px 20px}#restore .footer[data-v-8036f512] .spacer-small{padding:0}",""]),e.exports=t},"8c67":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".row[data-v-3c9d6f42]{display:flex;flex-direction:row;justify-content:space-evenly}",""]),e.exports=t},"8c8a":function(e,t,a){var s=a("d17b");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("3a698ccc",s,!0,{sourceMap:!1,shadowMode:!1})},"8d8f":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"h3[data-v-0a7b7be2]{margin-top:2em}input[data-v-0a7b7be2]{margin-top:1em}.route[real-mode=view] .label[data-v-0a7b7be2]{color:var(--input-label)}button[data-v-0a7b7be2]{margin-left:.5em}a[data-v-0a7b7be2]:hover{text-decoration:none}",""]),e.exports=t},"8f33":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{"label-key":"harvester.generic.cpu",suffix:"%",delay:0,required:"",mode:e.mode},on:{input:e.update},model:{value:e.parseDefaultValue.cpu,callback:function(t){e.$set(e.parseDefaultValue,"cpu",t)},expression:"parseDefaultValue.cpu"}}),t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{"label-key":"harvester.generic.memory",suffix:"%",delay:0,required:"",mode:e.mode},on:{input:e.update},model:{value:e.parseDefaultValue.memory,callback:function(t){e.$set(e.parseDefaultValue,"memory",t)},expression:"parseDefaultValue.memory"}}),t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{"label-key":"harvester.generic.storage",suffix:"%",delay:0,required:"",mode:e.mode},on:{input:e.update},model:{value:e.parseDefaultValue.storage,callback:function(t){e.$set(e.parseDefaultValue,"storage",t)},expression:"parseDefaultValue.storage"}})]],2)])},l=[],i=a("c78c"),r=a("2007"),o={name:"HarvesterOvercommitConfig",components:{UnitInput:r["a"]},mixins:[i["a"]],data(){let e={};try{e=JSON.parse(this.value.value)}catch(t){e=JSON.parse(this.value.default)}return{parseDefaultValue:e,errors:[]}},created(){this.update()},methods:{update(){const e=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",e)}},watch:{value:{handler(e){const t=JSON.parse(e.value);this.$set(this,"parseDefaultValue",t)},deep:!0}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},"8fcc":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("ResourceTable",{attrs:{headers:e.headers,schema:e.schema,rows:e.filterRows,"use-query-params-for-simple-filtering":!0,"sort-generation-fn":e.sortGenerationFn,"rows-per-page":10},scopedSlots:e._u([{key:"more-header-middle",fn:function(){return[t("FilterBySriov",{ref:"filterByParentSRIOV",attrs:{"parent-sriov-options":e.parentSriovOptions,"parent-sriov-label":e.parentSriovLabel,label:e.t("harvester.sriovgpu.parentSriov"),rows:e.rows},on:{"change-rows":e.changeRows}})]},proxy:!0}])})},l=[],i=a("efbe"),r=a("79d7"),o=a("90cd"),n=a("873f"),c=a("d6d1"),d=a("b837"),u={name:"VGpuDeviceList",components:{ResourceTable:i["a"],FilterBySriov:r["a"]},props:{schema:{type:Object,required:!0},devices:{type:Array,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={sriovgpus:this.$store.dispatch(e+"/findAll",{type:o["b"].SR_IOVGPU_DEVICE})};await Object(d["a"])(t)},data(){const e=[{...c["S"]},c["Q"],{name:"vGPUTypeName",label:"vGPU Type",value:"spec.vGPUTypeName",sort:["spec.vGPUTypeName"]},{name:"node",labelKey:"tableHeaders.node",value:"spec.nodeName",sort:["spec.nodeName"]},{name:"address",label:"Address",value:"spec.address",sort:["spec.address"]}];return{headers:e,rows:[],parentSriov:null,filterRows:[]}},watch:{devices:{handler(e){this.rows=e,this.filterRows=this.rows},immediate:!0}},computed:{parentSriovOptions(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](o["b"].SR_IOVGPU_DEVICE)||[];return t.map(e=>e.id)},parentSriovLabel(){return n["a"].PARENT_SRIOV_GPU}},methods:{changeRows(e,t){this.$set(this,"filterRows",e),this.$set(this,"parentSriov",t)},sortGenerationFn(){let e=Object(i["b"])(this.schema,this.$store);return this.parentSriov&&(e+=this.parentSriov),e}}},p=u,v=a("d802"),m=Object(v["a"])(p,s,l,!1,null,null,null);t["default"]=m.exports},"91ed":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",on:{input:e.update}},[t("div",{staticClass:"col span-12"},[t("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},on:{input:e.update},model:{value:e.parseDefaultValue.enable,callback:function(t){e.$set(e.parseDefaultValue,"enable",t)},expression:"parseDefaultValue.enable"}}),e.parseDefaultValue.enable?t("LabeledInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{mode:e.mode,"label-key":"harvester.setting.vmForceDeletionPolicy.period"},model:{value:e.parseDefaultValue.period,callback:function(t){e.$set(e.parseDefaultValue,"period",e._n(t))},expression:"parseDefaultValue.period"}}):e._e()],1)])},l=[],i=a("c78c"),r=a("d444"),o=a("f032"),n={name:"HarvesterVMForceDeletePolicy",components:{LabeledInput:r["a"],RadioGroup:o["b"]},mixins:[i["a"]],data(){let e={};try{e=JSON.parse(this.value.value)}catch(t){e=JSON.parse(this.value.default)}return{parseDefaultValue:e}},created(){this.update()},methods:{update(){const e=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",e)}},watch:{value:{handler(e){const t=JSON.parse(e.value);this.$set(this,"parseDefaultValue",t)},deep:!0}}},c=n,d=(a("139e"),a("d802")),u=Object(d["a"])(c,s,l,!1,null,"7b152fa4",null);t["default"]=u.exports},"91f6":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-name"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),required:"",mode:e.mode,disabled:e.isDisabled},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-model"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.model"),value:e.value.model,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.model"),disabled:e.isDisabled,options:e.modelOption,mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.model,callback:function(t){e.$set(e.value,"model",t)},expression:"value.model"}})],1)],1)]),t("div",{staticClass:"row",class:{"mb-20":!e.isMasquerade}},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-networkName"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.network"),value:e.value.networkName,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.network"),options:e.allNetworkOption,mode:e.mode,required:"",disabled:e.isDisabled},on:{input:e.updateNetworkName},model:{value:e.value.networkName,callback:function(t){e.$set(e.value,"networkName",t)},expression:"value.networkName"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-type"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.typeOption,mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),!e.isMasquerade&&e.isSingle?t("div",[t("div",{staticClass:"row mb-20"},[t("a",{attrs:{role:"button"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.showAdvanced?e.t("harvester.generic.hideMore"):e.t("harvester.generic.showMore"))+" ")])]),t("div",{staticClass:"row"},[e.showAdvanced?t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-macAddress"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.macAddress"),value:e.value.macAddress,mode:e.mode}},[t("LabeledInput",{attrs:{"label-key":"harvester.fields.macAddress",mode:e.mode,tooltip:e.t("harvester.virtualMachine.volume.macTip")},on:{input:e.update},model:{value:e.value.macAddress,callback:function(t){e.$set(e.value,"macAddress",t)},expression:"value.macAddress"}})],1)],1):e._e()])]):e._e()])},l=[],i=a("2aaa"),r=a("d444"),o=a("53fe"),n=a("1832"),c=a("d6a6"),d=a("6834");const u=[{label:"virtio",value:"virtio"},{label:"e1000",value:"e1000"},{label:"e1000e",value:"e1000e"},{label:"ne2k_pci",value:"ne2k_pci"},{label:"pcnet",value:"pcnet"},{label:"rtl8139",value:"rtl8139"}];var p={name:"HarvesterEditNetwork",components:{LabeledInput:r["a"],LabeledSelect:o["a"],InputOrDisplay:i["a"]},props:{value:{type:Object,default:()=>({})},networkOption:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},mode:{type:String,default:"create"},isSingle:{type:Boolean,default:!0}},data(){const e=this.value.isPod;return e&&(this.value.networkName=d["a"]),{isMasquerade:e,hasManagementNetwork:!1,showAdvanced:!1}},computed:{isDisabled(){return this.isMasquerade&&!this.value.newCreateId&&!this.isCreate},isView(){return this.mode===c["I"]},isCreate(){return this.mode===c["z"]},modelOption(){return u},allNetworkOption(){const e=Object(n["e"])(this.networkOption),t=[{label:d["a"],value:d["a"]}];return this.value.newCreateId&&this.hasManagementNetwork?e:this.value.newCreateId&&!this.hasManagementNetwork?[...t,...e]:this.isMasquerade?t:e},typeOption(){const e=[{label:"masquerade",value:"masquerade"},{label:"bridge",value:"bridge"}],t=[{label:"bridge",value:"bridge"}];return this.isMasquerade?e:t}},watch:{rows:{handler(e){const t=!!e.some(e=>e.isPod);this.$set(this,"hasManagementNetwork",t)},immediate:!0,deep:!0},isSingle(e){e||(this.$set(this.value,"macAddress",""),this.update())}},methods:{updateNetworkName(e){e===d["a"]?(this.value.isPod=!0,this.value.macAddress=""):this.value.isPod=!1,this.$set(this,"isMasquerade",this.value.isPod),this.value.isPod?this.value.type="masquerade":this.value.type="bridge",this.update()},update(){this.$emit("update")},toggleAdvanced(){this.showAdvanced=!this.showAdvanced}}},v=p,m=a("d802"),h=Object(m["a"])(v,s,l,!1,null,null,null);t["default"]=h.exports},9216:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.isView?e._e():t("Banner",{attrs:{color:"info","label-key":"harvester.virtualMachine.volume.dragTip"}}),t("draggable",{attrs:{disabled:e.isView},on:{end:e.update},model:{value:e.rows,callback:function(t){e.rows=t},expression:"rows"}},[t("transition-group",e._l(e.rows,(function(a,s){return t("div",{key:a.id},[t("InfoBox",{staticClass:"box"},[e.isView?e._e():t("button",{staticClass:"role-link btn btn-sm remove",attrs:{type:"button"},on:{click:function(t){return e.removeVolume(a)}}},[t("i",{staticClass:"icon icon-x"})]),a.hotpluggable&&e.isView?t("button",{staticClass:"role-link btn remove",attrs:{type:"button"},on:{click:function(t){return e.unplugVolume(a)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.unplug.detachVolume"))+" ")]):e._e(),t("h3",[a.to&&e.isVirtualType?t("span",{staticClass:"title"},[t("n-link",{attrs:{to:a.to}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.edit"))+" "+e._s(e.headerFor(a.source))+" ")]),a.pvc?t("BadgeStateFormatter",{staticClass:"ml-10 state",attrs:{arbitrary:!0,row:a.pvc,value:a.pvc.state}}):e._e(),e.dev&&a.pvc&&a.pvc.resourceExternalLink?t("a",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t(a.pvc.resourceExternalLink.tipsKey||"generic.resourceExternalLinkTips"),expression:"t(volume.pvc.resourceExternalLink.tipsKey || 'generic.resourceExternalLinkTips')"}],staticClass:"ml-5 resource-external",attrs:{rel:"nofollow noopener noreferrer",target:"_blank",href:a.pvc.resourceExternalLink.url}},[t("i",{staticClass:"icon icon-external-link"})]):e._e()],1):t("span",[e._v(" "+e._s(e.headerFor(a.source))+" ")])]),t("div",[t(e.componentFor(a.source),{tag:"component",attrs:{rows:e.rows,namespace:e.namespace,"is-create":e.isCreate,"is-edit":e.isEdit,"is-view":e.isView,"is-virtual-type":e.isVirtualType,mode:e.mode,idx:s,"validate-required":e.validateRequired},on:{update:e.update},model:{value:e.rows[s],callback:function(t){e.$set(e.rows,s,t)},expression:"rows[i]"}})],1),t("div",{staticClass:"bootOrder"},[e.isView?e._e():t("div",{staticClass:"mr-15"},[t("button",{staticClass:"btn btn-sm role-primary",attrs:{disabled:0===s},on:{click:function(t){return t.preventDefault(),e.changeSort(s,!1)}}},[t("i",{staticClass:"icon icon-lg icon-chevron-up"})]),t("button",{staticClass:"btn btn-sm role-primary",attrs:{disabled:s===e.rows.length-1},on:{click:function(t){return t.preventDefault(),e.changeSort(s,!0)}}},[t("i",{staticClass:"icon icon-lg icon-chevron-down"})])]),t("div",{staticClass:"text-muted"},[e._v(" bootOrder: "+e._s(s+1)+" ")])]),a.volumeStatus&&!e.isCreate?t("Banner",{staticClass:"mt-15 volume-status",attrs:{color:"warning",label:a.volumeStatus}}):e._e()],1)],1)})),0)],1),e.showVolumeTip?t("Banner",{attrs:{color:"warning",label:e.t("harvester.virtualMachine.volume.volumeTip")}}):e._e(),e.isView?e._e():t("div",[t("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button",disabled:0===e.rows.length},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.NEW)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addVolume"))+" ")]),e.existingVolumeDisabled?e._e():t("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.ATTACH_VOLUME)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addExistingVolume"))+" ")]),t("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.IMAGE)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addVmImage"))+" ")]),t("button",{staticClass:"btn btn-sm bg-primary mb-10",attrs:{type:"button"},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.CONTAINER)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addContainer"))+" ")])]),t("ModalWithCard",{ref:"deleteTip",attrs:{name:"deleteTip",width:400},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.unmount.title"))+" ")]},proxy:!0},{key:"content",fn:function(){return[t("span",[e._v(e._s(e.t("harvester.virtualMachine.volume.unmount.message")))])]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"buttons"},[t("button",{staticClass:"btn role-secondary mr-20",on:{click:function(t){return t.preventDefault(),e.cancel.apply(null,arguments)}}},[e._v(" "+e._s(e.t("generic.no"))+" ")]),t("button",{staticClass:"btn bg-primary mr-20",on:{click:function(t){return t.preventDefault(),e.deleteVolume.apply(null,arguments)}}},[e._v(" "+e._s(e.t("generic.yes"))+" ")])])]},proxy:!0}])})],1)},l=[],i=a("6e12"),r=a.n(i),o=a("6583"),n=a("dffb"),c=a("2c0b"),d=a("2007"),u=a("d444"),p=a("53fe"),v=a("5fe4"),m=a("56a4"),h=a("90cd"),b=a("1832"),f=a("e411"),g=a("06f6"),y=a("7c47"),C=a("d6a6"),k=a("4aac"),w=a("005f"),x={components:{Banner:n["a"],BadgeStateFormatter:c["a"],draggable:r.a,InfoBox:o["a"],LabeledInput:u["a"],UnitInput:d["a"],LabeledSelect:p["a"],ModalWithCard:v["a"]},props:{vm:{type:Object,default:()=>({})},mode:{type:String,default:C["z"]},value:{type:Array,default:()=>[]},namespace:{type:String,default:null},existingVolumeDisabled:{type:Boolean,default:!1},validateRequired:{type:Boolean,default:!1},customVolumeMode:{type:String,default:"Block"},customAccessMode:{type:String,default:"ReadWriteMany"},resourceType:{type:String,default:""}},async fetch(){await this.$store.dispatch("harvester/findAll",{type:m["E"]})},data(){return{SOURCE_TYPE:y["f"],rows:Object(b["e"])(this.value),nameIdx:1,vol:null}},computed:{dev(){try{return this.$store.getters["prefs/get"](w["o"])}catch{return this.$store.getters["prefs/get"](w["e"])}},isVirtualType(){return this.resourceType===h["b"].VM},isView(){return this.mode===C["I"]},isEdit(){return this.mode===C["B"]},isCreate(){return this.mode===C["z"]},showVolumeTip(){var e;const t=this.getImageDisplayName(null===(e=this.rows[0])||void 0===e?void 0:e.image);return!(1!==this.rows.length||"cd-rom"!==this.rows[0].type||!/.iso$/i.test(t))},pvcs(){return this.$store.getters["harvester/all"](m["E"])||[]}},watch:{value:{handler(e){const t=e.map(e=>(this.isCreate||e.source===y["f"].CONTAINER||e.newCreateId||(e.to={name:k["PRODUCT_NAME"]+"-c-cluster-resource-namespace-id",params:{resource:h["b"].VOLUME,namespace:this.namespace,id:e.realName},query:{mode:C["B"]}},e.pvc=this.pvcs.find(t=>t.metadata.name===e.realName)),e));this.$set(this,"rows",t)},deep:!0,immediate:!0}},methods:{addVolume(e){const t=this.generateName(),a={id:Object(g["p"])(5),name:t,source:e,size:"10Gi",type:"disk",accessMode:this.customAccessMode,volumeMode:this.customVolumeMode,volumeName:"",bus:"virtio",newCreateId:Object(g["p"])(10)};if(e===y["f"].NEW){var s;const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](m["O"]).find(e=>e.isDefault);a.storageClassName=(null===t||void 0===t||null===(s=t.metadata)||void 0===s?void 0:s.name)||"longhorn"}this.rows.push(a),this.update()},generateName(){let e="",t=!0;while(t)e="disk-"+this.nameIdx,t=this.rows.find(t=>t.name===e),this.nameIdx++;return e},removeVolume(e){this.vol=e,!e.newCreateId&&this.isEdit&&this.isVirtualType?this.$refs.deleteTip.open():(Object(f["j"])(this.rows,e),this.update())},unplugVolume(e){this.vm.unplugVolume(e.name)},componentFor(e){switch(e){case y["f"].NEW:return a("0e4c").default;case y["f"].IMAGE:return a("df1c").default;case y["f"].ATTACH_VOLUME:return a("4890").default;case y["f"].CONTAINER:return a("5993").default}},headerFor(e){return{[y["f"].NEW]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.volume"),[y["f"].IMAGE]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.vmImage"),[y["f"].ATTACH_VOLUME]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.existingVolume"),[y["f"].CONTAINER]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.container")}[e]},update(){this.$emit("input",this.rows)},deleteVolume(){Object(f["j"])(this.rows,this.vol),this.update(),this.cancel()},cancel(){this.$refs.deleteTip.hide()},changeSort(e,t){this.rows.splice(t?e:e-1,1,...this.rows.splice(t?e+1:e,1,this.rows[t?e:e-1])),this.update()},getImageDisplayName(e){var t,a;return null===(t=this.$store.getters["harvester/all"](h["b"].IMAGE).find(t=>t.id===e))||void 0===t||null===(a=t.spec)||void 0===a?void 0:a.displayName}}},S=x,_=(a("feb0"),a("d802")),O=Object(_["a"])(S,s,l,!1,null,"a999bef6",null);t["default"]=O.exports},"92ce":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"restore"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"mb-20"},[t("RadioGroup",{attrs:{name:"model",options:[!0,!1],labels:[e.t("harvester.backup.restore.createNew"),e.t("harvester.backup.restore.replaceExisting")],disabled:e.disableExisting,mode:e.mode},model:{value:e.restoreNewVm,callback:function(t){e.restoreNewVm=t},expression:"restoreNewVm"}})],1),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{disabled:!0,label:e.t("nameNsDescription.namespace.label"),options:e.namespaces},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{disabled:!e.restoreNewVm,label:e.t("harvester.backup.restore.virtualMachineName"),placeholder:e.t("nameNsDescription.name.placeholder")},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),t("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.vmSnapshot.snapshot"),options:e.snapshotOption},model:{value:e.snapshotName,callback:function(t){e.snapshotName=t},expression:"snapshotName"}}),e.restoreNewVm?e._e():t("LabeledSelect",{attrs:{label:e.t("harvester.backup.restore.deletePreviousVolumes"),options:e.deletionPolicyOption},model:{value:e.deletionPolicy,callback:function(t){e.deletionPolicy=t},expression:"deletionPolicy"}})],1),t("Footer",{staticClass:"footer",attrs:{mode:"create",errors:e.errors},on:{save:e.saveRestore,done:e.done}})],1)},l=[],i=a("9aaf"),r=a("f032"),o=a("d444"),n=a("53fe"),c=a("c78c"),d=a("b837"),u=a("3792"),p=a("56a4"),v=a("90cd"),m=a("7592"),h=a("1832"),b=a("e603");const f={apiVersion:"harvesterhci.io/v1beta1",kind:"VirtualMachineRestore",metadata:{name:"",namespace:""},type:v["b"].RESTORE,spec:{target:{apiGroup:"kubevirt.io",kind:"VirtualMachine",name:""},virtualMachineBackupName:"",newVM:!0,deletionPolicy:"retain"}};var g={name:"CreateRestore",components:{Footer:i["a"],RadioGroup:r["b"],LabeledInput:o["a"],LabeledSelect:n["a"]},mixins:[c["a"]],async fetch(){await Object(d["a"])({backups:this.$store.dispatch("harvester/findAll",{type:v["b"].BACKUP}),vms:this.$store.dispatch("harvester/findAll",{type:v["b"].VM})})},data(){var e,t;const a=null===(e=this.$route.query)||void 0===e?void 0:e.restoreMode,s=null===(t=this.$route.query)||void 0===t?void 0:t.resourceName,l=Object(h["e"])(f),i="new"===a||void 0===a;return{snapshotName:s,restoreNewVm:i,restoreResource:l,name:"",description:"",deletionPolicy:"retain",namespace:""}},computed:{snapshotOption(){const e=this.$store.getters["harvester/all"](v["b"].BACKUP);return e.filter(e=>{var t,a;const s=this.restoreNewVm||e.attachVmExisting;return s&&(null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.readyToUse)&&(null===(a=e.spec)||void 0===a?void 0:a.type)===b["a"].SNAPSHOT}).map(e=>({label:e.metadata.name,value:e.metadata.name}))},deletionPolicyOption(){return[{value:"retain",label:"Retain"}]},currentBackupResource(){const e=this.snapshotName,t=this.$store.getters["harvester/all"](v["b"].BACKUP);return t.find(t=>t.name===e)},disableExisting(){var e;return!(null!==(e=this.currentBackupResource)&&void 0!==e&&e.attachVmExisting)},snapshotNamespace(){var e,t;const a=this.$store.getters["harvester/all"](v["b"].BACKUP);return null===(e=a.find(e=>e.metadata.name===this.snapshotName))||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.namespace},namespaces(){const e=this.$store.getters["currentStore"](p["w"]),t=this.$store.getters[e+"/all"](p["w"]),a=this.$store.getters["systemNamespaces"],s=Object(m["b"])(t.filter(e=>!a.includes(e.metadata.name)).map(e=>({label:e.nameDisplay,value:e.id})),"label");return s}},watch:{snapshotName:{handler(e){var t;this.currentBackupResource&&(this.restoreNewVm||(this.name=null===this||void 0===this||null===(t=this.currentBackupResource)||void 0===t?void 0:t.attachVM));this.restoreResource.spec.virtualMachineBackupName=e},immediate:!0},restoreNewVm(e){var t;e?this.name="":this.name=null===this||void 0===this||null===(t=this.currentBackupResource)||void 0===t?void 0:t.attachVM},snapshotNamespace:{handler(e){this.namespace=e},immediate:!0}},methods:{async saveRestore(e){this.update();const t=await this.$store.dispatch("harvester/create",this.restoreResource);t.metadata.namespace=this.namespace,t.spec.virtualMachineBackupNamespace=this.snapshotNamespace;try{await t.save(),e(!0),this.$router.push({name:this.doneRoute,params:{resource:v["b"].VM}})}catch(a){this.errors=Object(u["c"])(a)||a,e(!1)}},update(){this.restoreResource.metadata.generateName=`restore-${this.snapshotName}-`,this.name&&(this.restoreResource.spec.target.name=this.name),this.restoreNewVm?(delete this.restoreResource.spec.deletionPolicy,this.restoreResource.spec.newVM=!0):(this.restoreResource.spec.deletionPolicy=this.deletionPolicy,delete this.restoreResource.spec.newVM)}},componentTitle(){return"restoreVM"}},y=g,C=(a("3f23"),a("d802")),k=Object(C["a"])(y,s,l,!1,null,"19c2a6b2",null);t["default"]=k.exports},"935b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"generate-yaml":e.generateYaml,"apply-hooks":e.applyHooks},on:{finish:e.save}},[t("NameNsDescription",{attrs:{value:e.value,namespaced:!0,mode:e.mode}}),t("ResourceTabs",{staticClass:"mt-15",attrs:{"need-conditions":!1,"need-related":!1,"side-tabs":!0,mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("Tab",{staticClass:"bordered-table",attrs:{name:"basic",label:e.t("harvester.volume.tabs.basics"),weight:3}},[t("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.volume.source"),options:e.sourceOption,disabled:!e.isCreate,required:"",mode:e.mode},on:{input:e.update},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}}),e.isVMImage?t("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.volume.image"),options:e.imageOption,disabled:!e.isCreate,required:"",mode:e.mode},on:{input:e.update},model:{value:e.imageId,callback:function(t){e.imageId=t},expression:"imageId"}}):e._e(),"blank"===e.source?t("LabeledSelect",{staticClass:"mb-20",attrs:{options:e.storageClassOptions,label:e.t("harvester.storage.storageClass.label"),mode:e.mode,disabled:!e.isCreate},on:{input:e.update},model:{value:e.value.spec.storageClassName,callback:function(t){e.$set(e.value.spec,"storageClassName",t)},expression:"value.spec.storageClassName"}}):e._e(),t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:e.t("harvester.volume.size"),"input-exponent":3,"output-modifier":!0,increment:1024,mode:e.mode,required:""},on:{input:e.update},model:{value:e.storage,callback:function(t){e.storage=t},expression:"storage"}})],1),e.isCreate?e._e():t("Tab",{staticClass:"bordered-table",attrs:{name:"details",label:e.t("harvester.volume.tabs.details"),weight:2.5}},[t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,disabled:!0,label:e.t("harvester.volume.frontend")},model:{value:e.frontendDisplay,callback:function(t){e.frontendDisplay=t},expression:"frontendDisplay"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,disabled:!0,label:e.t("harvester.volume.attachedNode")},model:{value:e.attachedNode,callback:function(t){e.attachedNode=t},expression:"attachedNode"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,disabled:!0,label:e.t("harvester.volume.endpoint")},model:{value:e.endpoint,callback:function(t){e.endpoint=t},expression:"endpoint"}}),t("LabeledSelect",{staticClass:"mb-20",attrs:{multiple:!0,label:e.t("harvester.volume.diskTags"),options:[],disabled:!0,mode:e.mode},model:{value:e.diskTags,callback:function(t){e.diskTags=t},expression:"diskTags"}}),t("LabeledSelect",{staticClass:"mb-20",attrs:{multiple:!0,label:e.t("harvester.volume.nodeTags"),options:[],disabled:!0,mode:e.mode},model:{value:e.nodeTags,callback:function(t){e.nodeTags=t},expression:"nodeTags"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,disabled:!0,label:e.t("harvester.volume.lastBackup")},model:{value:e.lastBackup,callback:function(t){e.lastBackup=t},expression:"lastBackup"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,disabled:!0,label:e.t("harvester.volume.lastBackupAt")},model:{value:e.lastBackupAt,callback:function(t){e.lastBackupAt=t},expression:"lastBackupAt"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,disabled:!0,label:e.t("harvester.volume.replicasNumber")},model:{value:e.replicasNumber,callback:function(t){e.replicasNumber=t},expression:"replicasNumber"}})],1),e.isCreate?e._e():t("Tab",{staticClass:"bordered-table",attrs:{name:"instances",label:e.t("harvester.volume.tabs.snapshots"),weight:2}},[t("SortableTable",e._g(e._b({attrs:{headers:e.snapshotHeaders,"default-sort-by":"age",rows:e.value.relatedVolumeSnapshotCounts,"key-field":"_key"}},"SortableTable",e.$attrs,!1),e.$listeners))],1),!e.isCreate&&e.value.spec.dataSource?t("Tab",{staticClass:"bordered-table",attrs:{name:"datasource",label:e.t("harvester.volume.tabs.datasource"),weight:1}},[t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,disabled:!0,label:e.t("harvester.volume.kind")},model:{value:e.dataSourceKind,callback:function(t){e.dataSourceKind=t},expression:"dataSourceKind"}}),t("LabeledInput",{attrs:{mode:e.mode,disabled:!0,label:e.t("nameNsDescription.name.label")},model:{value:e.value.spec.dataSource.name,callback:function(t){e.$set(e.value.spec.dataSource,"name",t)},expression:"value.spec.dataSource.name"}})],1):e._e()],1)],1)},l=[],i=a("5ef9"),r=a("fc28"),o=a("2e2b"),n=a("2007"),c=a("3921"),d=a("53fe"),u=a("d444"),p=a("65b0"),v=a("b837"),m=a("1832"),h=a("90cd"),b=a("56a4"),f=a("7592"),g=a("3811"),y=a("7c47"),C=a("d6a6"),k=a("c78c"),w=a("873f"),x=a("d6d1"),S={name:"HarvesterVolume",components:{Tab:i["a"],UnitInput:n["a"],CruResource:o["a"],SortableTable:r["b"],ResourceTabs:c["a"],LabeledSelect:d["a"],LabeledInput:u["a"],NameNsDescription:p["a"]},mixins:[k["a"]],async fetch(){var e,t,a;const s=this.$store.getters["currentProduct"].inStore,l={images:this.$store.dispatch(s+"/findAll",{type:h["b"].IMAGE}),snapshots:this.$store.dispatch(s+"/findAll",{type:h["c"]}),storages:this.$store.dispatch(s+"/findAll",{type:b["O"]}),pvs:this.$store.dispatch(s+"/findAll",{type:b["D"]})};this.$store.getters[s+"/schemaFor"](b["s"].VOLUMES)&&(l.longhornVolumes=this.$store.dispatch(s+"/findAll",{type:b["s"].VOLUMES})),this.$store.getters[s+"/schemaFor"](b["s"].ENGINES)&&(l.longhornEngines=this.$store.dispatch(s+"/findAll",{type:b["s"].ENGINES}));const i=await Object(v["a"])(l);this.snapshots=i.snapshots;const r=this.$store.getters["harvester/all"](b["O"]).find(e=>e.isDefault);this.$set(this.value.spec,"storageClassName",(null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.storageClassName)||(null===r||void 0===r||null===(a=r.metadata)||void 0===a?void 0:a.name)||"longhorn")},data(){var e,t,a,s;this.mode===C["z"]&&(this.value.spec.volumeMode="Block",this.value.spec.accessModes=["ReadWriteMany"]);const l=(null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.resources)||void 0===a||null===(s=a.requests)||void 0===s?void 0:s.storage)||null,i=Object(m["g"])(this.value,`metadata.annotations."${w["a"].IMAGE_ID}"`),r=i?"url":"blank";return{source:r,storage:l,imageId:i,snapshots:[]}},created(){this.registerBeforeHook(this.willSave,"willSave")},computed:{isBlank(){return"blank"===this.source},isVMImage(){return"url"===this.source},sourceOption(){return[{value:"blank",label:this.t("harvester.volume.sourceOptions.new")},{value:"url",label:this.t("harvester.volume.sourceOptions.vmImage")}]},interfaceOption(){return y["d"]},imageOption(){const e=this.$store.getters["harvester/all"](h["b"].IMAGE);return Object(f["b"])(e.filter(e=>e.isReady).map(e=>({label:`${e.metadata.namespace}/${e.spec.displayName}`,value:e.id})),"label")},snapshotHeaders(){return[x["S"],x["y"],x["z"],{name:"size",labelKey:"tableHeaders.size",value:"status.restoreSize",sort:"size",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"readyToUse",labelKey:"tableHeaders.readyToUse",value:"status.readyToUse",align:"left",formatter:"Checked"},x["c"]]},dataSourceKind(){var e,t;return y["g"][null===(e=this.value.spec)||void 0===e||null===(t=e.dataSource)||void 0===t?void 0:t.kind]},storageClassOptions(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](b["O"]),a=t.filter(e=>{var t;return!(null!==(t=e.parameters)&&void 0!==t&&t.backingImage)}).map(e=>{const t=e.isDefault?`${e.name} (${this.t("generic.default")})`:e.name;return{label:t,value:e.name}})||[];return a},frontend(){var e,t;return null===(e=this.value.longhornVolume)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.frontend},frontendDisplay(){const e=["blockdev"];return e.includes(this.frontend)?this.t("harvester.volume."+this.frontend):this.frontend},attachedNode(){var e,t;return null===(e=this.value.longhornVolume)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.nodeID},endpoint(){var e,t;return null===(e=this.value.longhornEngine)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.endpoint},diskTags(){var e,t;return null===(e=this.value.longhornVolume)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.diskSelector},nodeTags(){var e,t;return null===(e=this.value.longhornVolume)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.nodeSelector},replicasNumber(){var e,t;return null===(e=this.value.longhornVolume)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.numberOfReplicas},lastBackup(){var e,t;return null===(e=this.value.longhornVolume)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.lastBackup},lastBackupAt(){var e,t;return null===(e=this.value.longhornVolume)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.lastBackupAt},rebuildStatus(){var e,t;return null===(e=this.value.longhornEngine)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.rebuildStatus}},methods:{willSave(){this.update()},update(){let e="",t=this.value.spec.storageClassName;this.isVMImage&&this.imageId?(e={...this.value.metadata.annotations,[w["a"].IMAGE_ID]:this.imageId},t="longhorn-"+this.imageId.split("/")[1]):e={...this.value.metadata.annotations};const a={...this.value.spec,resources:{requests:{storage:this.storage}},storageClassName:t};this.value.setAnnotations(e),this.$set(this.value,"spec",a)},generateYaml(){const e=Object(g["d"])(this.value);return e}}},_=S,O=a("d802"),N=Object(O["a"])(_,s,l,!1,null,null,null);t["default"]=N.exports},"95c9":function(e,t,a){var s=a("afcd");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("15569898",s,!0,{sourceMap:!1,shadowMode:!1})},"95d4":function(e,t,a){var s={"./harvesterhci.io.addon/generic.vue":"9b76","./harvesterhci.io.addon/harvester-seeder.vue":"c7ab","./harvesterhci.io.addon/index.vue":"87a7","./harvesterhci.io.addon/nvidia-driver-toolkit.vue":"a55e","./harvesterhci.io.addon/pcidevices-controller.vue":"51c9","./harvesterhci.io.addon/rancher-logging.vue":"f063","./harvesterhci.io.addon/rancher-monitoring.vue":"5fc2","./harvesterhci.io.addon/rancher-vcluster.vue":"e39e","./harvesterhci.io.addon/vm-import-controller.vue":"c285","./harvesterhci.io.host/HarvesterDisk.vue":"34bc","./harvesterhci.io.host/HarvesterKsmtuned.vue":"efc5","./harvesterhci.io.host/HarvesterSeeder.vue":"a701","./harvesterhci.io.host/index.vue":"5fdb","./harvesterhci.io.monitoring.alertmanagerconfig/index.vue":"5bd9","./harvesterhci.io.storage/index.vue":"2071","./harvesterhci.io.storage/provisioners/custom.vue":"ba1a","./harvesterhci.io.storage/provisioners/driver.longhorn.io.vue":"3db4","./kubevirt.io.virtualmachine/VirtualMachineAccessCredentials/AccessCredentialsUsers.vue":"411b","./kubevirt.io.virtualmachine/VirtualMachineAccessCredentials/index.vue":"8287","./kubevirt.io.virtualmachine/VirtualMachineAccessCredentials/type/basicAuth.vue":"e299","./kubevirt.io.virtualmachine/VirtualMachineAccessCredentials/type/sshkey.vue":"db40","./kubevirt.io.virtualmachine/VirtualMachineCloudConfig/DataTemplate.vue":"6b50","./kubevirt.io.virtualmachine/VirtualMachineCloudConfig/index.vue":"5c0d","./kubevirt.io.virtualmachine/VirtualMachineCpuMemory.vue":"e1c9","./kubevirt.io.virtualmachine/VirtualMachineNetwork/base.vue":"91f6","./kubevirt.io.virtualmachine/VirtualMachineNetwork/index.vue":"fea5","./kubevirt.io.virtualmachine/VirtualMachinePciDevices/CompatibilityMatrix.vue":"f671","./kubevirt.io.virtualmachine/VirtualMachinePciDevices/DeviceList.vue":"9a01","./kubevirt.io.virtualmachine/VirtualMachinePciDevices/index.vue":"2456","./kubevirt.io.virtualmachine/VirtualMachineReserved.vue":"b82b","./kubevirt.io.virtualmachine/VirtualMachineSSHKey.vue":"2a79","./kubevirt.io.virtualmachine/VirtualMachineVGpuDevices/VGpuDeviceList.vue":"8fcc","./kubevirt.io.virtualmachine/VirtualMachineVGpuDevices/index.vue":"4284","./kubevirt.io.virtualmachine/VirtualMachineVolume/index.vue":"9216","./kubevirt.io.virtualmachine/VirtualMachineVolume/type/container.vue":"5993","./kubevirt.io.virtualmachine/VirtualMachineVolume/type/existing.vue":"4890","./kubevirt.io.virtualmachine/VirtualMachineVolume/type/vmImage.vue":"df1c","./kubevirt.io.virtualmachine/VirtualMachineVolume/type/volume.vue":"0e4c","./kubevirt.io.virtualmachine/index.vue":"8885","./loadbalancer.harvesterhci.io.ippool/Priority.vue":"56b1","./loadbalancer.harvesterhci.io.ippool/PriorityRow.vue":"ee22","./loadbalancer.harvesterhci.io.ippool/Range.vue":"a581","./loadbalancer.harvesterhci.io.ippool/Selector.vue":"b1bc","./loadbalancer.harvesterhci.io.ippool/index.vue":"6035","./loadbalancer.harvesterhci.io.loadbalancer/HealthCheck.vue":"701d","./loadbalancer.harvesterhci.io.loadbalancer/Listeners.vue":"184a","./loadbalancer.harvesterhci.io.loadbalancer/index.vue":"6b5a","./network.harvesterhci.io.clusternetwork/index.vue":"6269","./network.harvesterhci.io.vlanconfig/NodeSelector.vue":"202c","./network.harvesterhci.io.vlanconfig/index.vue":"7553"};function l(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=i,e.exports=l,l.id="95d4"},9671:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.azurestorage.container")},model:{value:e.value.azure_container,callback:function(t){e.$set(e.value,"azure_container",t)},expression:"value.azure_container"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.azurestorage.path")},model:{value:e.value.path,callback:function(t){e.$set(e.value,"path",t)},expression:"value.path"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.azurestorage.storeAs")},model:{value:e.value.store_as,callback:function(t){e.$set(e.value,"store_as",t)},expression:"value.store_as"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.azurestorage.storageAccount"),"show-key-selector":!0},model:{value:e.value.azure_storage_account,callback:function(t){e.$set(e.value,"azure_storage_account",t)},expression:"value.azure_storage_account"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.azurestorage.accessKey"),"show-key-selector":!0},model:{value:e.value.azure_storage_access_key,callback:function(t){e.$set(e.value,"azure_storage_access_key",t)},expression:"value.azure_storage_access_key"}})],1)])])},l=[],i=a("d444"),r=a("0b97"),o={components:{LabeledInput:i["a"],SecretSelector:r["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},"976d":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s={OPAQUE:"Opaque",SERVICE_ACCT:"kubernetes.io/service-account-token",DOCKER_JSON:"kubernetes.io/dockerconfigjson",BASIC:"kubernetes.io/basic-auth",SSH:"kubernetes.io/ssh-auth",TLS:"kubernetes.io/tls",BOOTSTRAP:"bootstrap.kubernetes.io/token",ISTIO_TLS:"istio.io/key-and-cert",HELM_RELEASE:"helm.sh/release.v1",FLEET_CLUSTER:"fleet.cattle.io/cluster-registration-values",CLOUD_CREDENTIAL:"provisioning.cattle.io/cloud-credential",RKE_AUTH_CONFIG:"rke.cattle.io/auth-config"}},9813:function(e,t,a){var s=a("ee64");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("07a77178",s,!0,{sourceMap:!1,shadowMode:!1})},9832:function(e,t,a){"use strict";a("ad35")},9839:function(e,t,a){var s=a("8ab0");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("17191afb",s,!0,{sourceMap:!1,shadowMode:!1})},"98a8":function(e,t,a){"use strict";a("7279")},"99bd":function(e,t,a){var s=a("a9f0");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("5ecc8d8a",s,!0,{sourceMap:!1,shadowMode:!1})},"9a01":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("ResourceTable",{attrs:{headers:e.headers,schema:e.schema,rows:e.filterRows,"use-query-params-for-simple-filtering":!0,"sort-generation-fn":e.sortGenerationFn,"rows-per-page":10},scopedSlots:e._u([{key:"group-by",fn:function({group:a}){return[t("div",{directives:[{name:"trim-whitespace",rawName:"v-trim-whitespace"}],ref:a.key,staticClass:"group-tab"},[e.groupIsAllEnabled(a.rows)?t("button",{staticClass:"btn btn-sm role-secondary mr-5",attrs:{type:"button"},on:{click:t=>{e.disableGroup(a.rows),t.target.blur()}}},[e._v(" "+e._s(e.t("harvester.pci.disableGroup"))+" ")]):t("button",{staticClass:"btn btn-sm role-secondary mr-5",attrs:{type:"button"},on:{click:t=>{e.enableGroup(a.rows),t.target.blur()}}},[e._v(" "+e._s(e.t("harvester.pci.enableGroup"))+" ")]),t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:a.key,expression:"group.key"}]})])]}},{key:"cell:claimed",fn:function({row:a}){return[a.isEnabled?t("span",[e._v(e._s(a.claimedBy))]):t("span",{staticClass:"text-muted"},[e._v("—")])]}},{key:"more-header-middle",fn:function(){return[t("FilterBySriov",{ref:"filterByParentSRIOV",attrs:{"parent-sriov-options":e.parentSriovOptions,"parent-sriov-label":e.parentSriovLabel,label:e.t("harvester.sriov.parentSriov"),rows:e.rows},on:{"change-rows":e.changeRows}})]},proxy:!0}])})},l=[],i=a("efbe"),r=a("79d7"),o=a("90cd"),n=a("d6d1"),c=a("b837"),d=a("873f"),u={name:"ListPciDevices",components:{ResourceTable:i["a"],FilterBySriov:r["a"]},props:{schema:{type:Object,required:!0},devices:{type:Array,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={pciclaims:this.$store.dispatch(e+"/findAll",{type:o["b"].PCI_CLAIM}),sriovs:this.$store.dispatch(e+"/findAll",{type:o["b"].SR_IOV})};await Object(c["a"])(t)},data(){const e=this.$store.getters["isSingleProduct"],t=[{...n["S"]},n["Q"],{name:"description",labelKey:"tableHeaders.description",value:"status.description",sort:["status.description"]},{name:"node",labelKey:"tableHeaders.node",value:"status.nodeName",sort:["status.nodeName"]},{name:"address",label:"Address",value:"status.address",sort:["status.address"]},{name:"vendorid",label:"Vendor ID",value:"status.vendorId",sort:["status.vendorId","status.deviceId"]},{name:"deviceid",label:"Device ID",value:"status.deviceId",sort:["status.deviceId","status.vendorId"]}];return e||t.push({name:"claimed",label:"Claimed By",value:"passthroughClaim.userName",sort:["passthroughClaim.userName"]}),{headers:t,rows:[],parentSriov:null,filterRows:[]}},watch:{devices:{handler(e){this.rows=e,this.filterRows=this.rows},immediate:!0}},computed:{parentSriovOptions(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](o["b"].SR_IOV)||[];return t.map(e=>e.id)},parentSriovLabel(){return d["a"].PARENT_SRIOV}},methods:{enableGroup(e=[]){const t=e[0];t&&t.enablePassthroughBulk(e)},disableGroup(e=[]){e.forEach(e=>{e.passthroughClaim&&e.disablePassthrough()})},groupIsAllEnabled(e=[]){return!e.find(e=>!e.passthroughClaim)},changeRows(e,t){this.$set(this,"filterRows",e),this.$set(this,"parentSriov",t)},sortGenerationFn(){let e=Object(i["b"])(this.schema,this.$store);return this.parentSriov&&(e+=this.parentSriov),e}}},p=u,v=a("d802"),m=Object(v["a"])(p,s,l,!1,null,null,null);t["default"]=m.exports},"9a30":function(e,t,a){"use strict";a("8c8a")},"9ade":function(e,t,a){var s=a("19ea");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("8521cfb6",s,!0,{sourceMap:!1,shadowMode:!1})},"9b45":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".infoBox[data-v-736f66fc]{position:relative}.remove-vol[data-v-736f66fc]{position:absolute;top:10px;right:16px;padding:0;max-height:28px;min-height:28px}",""]),e.exports=t},"9b48":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"opensearch"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-2"},[t("LabeledSelect",{staticClass:"scheme",attrs:{mode:e.mode,disabled:e.disabled,options:e.protocolOptions,label:e.t("logging.elasticsearch.scheme")},model:{value:e.value.scheme,callback:function(t){e.$set(e.value,"scheme",t)},expression:"value.scheme"}})],1),t("div",{staticClass:"col span-8"},[t("LabeledInput",{staticClass:"host",attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.elasticsearch.host")},model:{value:e.value.host,callback:function(t){e.$set(e.value,"host",t)},expression:"value.host"}})],1),t("div",{staticClass:"col span-2"},[t("LabeledInput",{staticClass:"port",attrs:{mode:e.mode,disabled:e.disabled,type:"number",min:"1",max:"65535",label:e.t("logging.elasticsearch.port")},model:{value:e.port,callback:function(t){e.port=e._n(t)},expression:"port"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.elasticsearch.indexName")},model:{value:e.value.index_name,callback:function(t){e.$set(e.value,"index_name",t)},expression:"value.index_name"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.elasticsearch.user")},model:{value:e.value.user,callback:function(t){e.$set(e.value,"user",t)},expression:"value.user"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"secret-name-label":e.t("logging.elasticsearch.password"),mode:e.mode,namespace:e.namespace,disabled:e.disabled,"show-key-selector":!0},model:{value:e.value.password,callback:function(t){e.$set(e.value,"password",t)},expression:"value.password"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.certificate")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.elasticsearch.caFile.label"),"show-key-selector":!0},model:{value:e.value.ca_file,callback:function(t){e.$set(e.value,"ca_file",t)},expression:"value.ca_file"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.elasticsearch.clientCert.label"),"show-key-selector":!0},model:{value:e.value.client_cert,callback:function(t){e.$set(e.value,"client_cert",t)},expression:"value.client_cert"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.elasticsearch.clientKey.label"),"show-key-selector":!0},model:{value:e.value.client_key,callback:function(t){e.$set(e.value,"client_key",t)},expression:"value.client_key"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.elasticsearch.clientKeyPass"),"show-key-selector":!0},model:{value:e.value.client_key_pass,callback:function(t){e.$set(e.value,"client_key_pass",t)},expression:"value.client_key_pass"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6 vertically-center"},[t("Checkbox",{attrs:{label:e.t("logging.elasticsearch.verifySsl"),disabled:e.disabled,mode:e.mode},model:{value:e.value.ssl_verify,callback:function(t){e.$set(e.value,"ssl_verify",t)},expression:"value.ssl_verify"}}),t("Checkbox",{attrs:{label:e.t("logging.elasticsearch.suppressTypeName.label"),tooltip:e.t("logging.elasticsearch.suppressTypeName.openSearchTips"),disabled:e.disabled,mode:e.mode},model:{value:e.value.suppress_type_name,callback:function(t){e.$set(e.value,"suppress_type_name",t)},expression:"value.suppress_type_name"}})],1)])])},l=[],i=a("d444"),r=a("53fe"),o=a("0b97"),n=a("efb2"),c=a("d6a6"),d=a("05b4"),u={components:{LabeledInput:i["a"],LabeledSelect:r["a"],SecretSelector:o["a"],Checkbox:n["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}},data(){return this.mode===c["z"]&&("undefined"===typeof this.value.ssl_verify&&this.$set(this.value,"ssl_verify",!0),"undefined"===typeof this.value.ssl_version&&this.$set(this.value,"ssl_version",d["sslVersions"][0]),"undefined"===typeof this.value.suppress_type_name&&this.$set(this.value,"suppress_type_name",!0)),{protocolOptions:d["protocol"],sslVersions:d["sslVersions"]}},computed:{port:{get(){return this.value.port},set(e){Object(d["updatePort"])(e=>this.$set(this.value,"port",e),e)}}}},p=u,v=(a("0404"),a("d802")),m=Object(v["a"])(p,s,l,!1,null,null,null);t["default"]=m.exports},"9b76":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("Tabbed",{attrs:{"side-tabs":!0}},[t("Tab",{attrs:{name:"basic",label:e.t("generic.basic"),weight:99}},[t("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",mode:e.mode,options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},model:{value:e.value.spec.enabled,callback:function(t){e.$set(e.value.spec,"enabled",t)},expression:"value.spec.enabled"}})],1)],1)},l=[],i=a("ad61"),r=a("5ef9"),o=a("f032"),n=a("c78c"),c={name:"EditGenericAddon",components:{Tabbed:i["a"],Tab:r["a"],RadioGroup:o["b"]},mixins:[n["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}}},d=c,u=(a("83d6"),a("d802")),p=Object(u["a"])(d,s,l,!1,null,"2a1b149f",null);t["default"]=p.exports},"9cad":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".close[data-v-6ec505b0]{top:10px;right:10px;padding:0;position:absolute}.disk[data-v-6ec505b0]{position:relative}.disk .secret-name[data-v-6ec505b0]{height:61px}.disk[data-v-6ec505b0]:not(:last-of-type){padding-bottom:10px;margin-bottom:30px}.flex[data-v-6ec505b0]{display:flex;justify-content:space-between}.badge-state[data-v-6ec505b0]{padding:2px 5px}",""]),e.exports=t},"9cb4":function(e,t,a){var s=a("0a8c");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("fbc65bdc",s,!0,{sourceMap:!1,shadowMode:!1})},"9cc6":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("LabeledSelect",{attrs:{multiple:!0,"label-key":"nameNsDescription.namespace.label",mode:e.mode,options:e.namespaceOptions},on:{input:e.update},model:{value:e.namespaces,callback:function(t){e.namespaces=t},expression:"namespaces"}})],1)])},l=[],i=a("56a4"),r=a("c78c"),o=a("53fe"),n={name:"HarvesterBundleNamespaces",components:{LabeledSelect:o["a"]},mixins:[r["a"]],async fetch(){await this.$store.dispatch("harvester/findAll",{type:i["w"]})},data(){var e,t;let a=[];const s=(null===(e=this.value)||void 0===e?void 0:e.value)||(null===(t=this.value)||void 0===t?void 0:t.default)||"";return s&&(a=s.split(",")),{namespaces:a}},computed:{namespaceOptions(){return this.$store.getters["harvester/all"](i["w"]).map(e=>({label:e.id,value:e.id}))}},methods:{update(){const e=this.namespaces.join(",");this.$set(this.value,"value",e)}},watch:{"value.value":{handler(e){e!==this.value.default&&e||(this.namespaces=[])},deep:!0}}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},a01b:function(e,t,a){var s=a("59ef");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("5d1f30f0",s,!0,{sourceMap:!1,shadowMode:!1})},a32a:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,'.toggle-container[data-v-b1a6988c]{align-items:center;display:flex}.toggle-container span[data-v-b1a6988c]:first-child{padding-right:6px}.toggle-container span[data-v-b1a6988c]:last-child{padding-left:6px}.switch[data-v-b1a6988c]{position:relative;display:inline-block;width:48px;height:24px}.switch input[data-v-b1a6988c]{opacity:0;width:0;height:0}.slider[data-v-b1a6988c]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--checkbox-disabled-bg)}.slider[data-v-b1a6988c],.slider[data-v-b1a6988c]:before{position:absolute;transition:.4s}.slider[data-v-b1a6988c]:before{content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:var(--checkbox-tick)}input:checked+.slider[data-v-b1a6988c]{background-color:var(--checkbox-ticked-bg)}input:focus+.slider[data-v-b1a6988c]{box-shadow:0 0 1px var(--checkbox-ticked-bg)}input:checked+.slider[data-v-b1a6988c]:before{transform:translateX(24px)}.slider.round[data-v-b1a6988c]{border-radius:34px}.slider.round[data-v-b1a6988c]:before{border-radius:50%}',""]),e.exports=t},a4ec:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("form",{staticClass:"filled-height"},[e.$fetchState.pending?t("Loading"):t("CruResource",{attrs:{mode:e.mode,"validation-passed":!0,"selected-subtype":e.value._type,resource:e.value,errors:e.errors},on:{finish:e.saveSecret,error:t=>e.errors=t}},[t("NameNsDescription",{attrs:{mode:e.mode,namespaced:!e.isCloud},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("div",{staticClass:"spacer"}),e.isCloud?t(e.cloudComponent,{ref:"cloudComponent",tag:"component",attrs:{"driver-name":e.driverName,value:e.value,mode:e.mode,"hide-sensitive-data":e.hideSensitiveData}}):t("Tabbed",{attrs:{"side-tabs":!0,"default-tab":"data"}},[t("Tab",{attrs:{name:"data",label:e.dataLabel,weight:99}},[t(e.dataComponent,{tag:"component",attrs:{value:e.value,mode:e.mode,"hide-sensitive-data":e.hideSensitiveData}})],1),t("Tab",{attrs:{name:"labels","label-key":"generic.labelsAndAnnotations",weight:-1}},[t("Labels",{attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)],1)],1)},l=[],i=a("976d"),r=a("56a4"),o=a("c78c"),n=a("65b0"),c=a("d444"),d=a("53fe"),u=a("2e2b"),p=a("d6a6"),v=a("70a6"),m=a("ad61"),h=a("5ef9"),b=a("1eaf"),f=a("005f"),g=a("b0bd"),y=a("e411"),C=a("b8aa"),k=a("1d2e"),w=a("06f6"),x={name:"CruSecret",components:{LabeledInput:c["a"],LabeledSelect:d["a"],Loading:v["a"],NameNsDescription:n["a"],CruResource:u["a"],Tabbed:m["a"],Tab:h["a"],Labels:b["a"],SelectIconGrid:k["a"]},mixins:[o["a"]],async fetch(){this.isCloud&&(this.nodeDrivers=await this.$store.dispatch("management/findAll",{type:r["t"].NODE_DRIVER}))},data(){const e=this.$route.query[p["d"]]===p["C"],t=this.mode===p["B"]&&this.value._type===i["a"].CLOUD_CREDENTIAL,a=this.realMode===p["x"]&&this.liveValue._type===i["a"].CLOUD_CREDENTIAL,s=e||t||a;e&&(this.value.metadata.namespace=r["g"],this.$set(this.value.metadata,"name",""),this.$set(this.value,"data",{}));const l=[{label:"Custom",value:"custom"},{label:"divider",disabled:!0,kind:"divider"}];return Object.values(i["a"]).forEach(e=>{l.push({label:e,value:e})}),this.mode===p["z"]&&this.$set(this.value,"_type",i["a"].OPAQUE),{isCloud:s,nodeDrivers:null,secretTypes:l,secretType:this.value._type,initialSecretType:this.value._type}},computed:{typeKey(){if(this.isCloud)return"cloud";switch(this.value._type){case i["a"].TLS:return"tls";case i["a"].BASIC:return"basic";case i["a"].DOCKER_JSON:return"registry";case i["a"].SSH:return"ssh"}return"generic"},dataComponent(){return a("5ed9")("./"+this.typeKey).default},driverName(){var e,t;const a=null===(e=this.value.metadata)||void 0===e||null===(t=e.annotations)||void 0===t?void 0:t[g["c"].CREDENTIAL_DRIVER];return a},cloudComponent(){const e=this.driverName,t=this.$store.getters["plugins/credentialDrivers"];return t.includes(e)?Object(C["b"])(e):Object(C["b"])("generic")},namespaces(){return this.$store.getters["cluster/all"](r["w"]).map(e=>({label:e.nameDisplay,value:e.id}))},hideSensitiveData(){return this.$store.getters["prefs/get"](f["k"])},dataLabel(){switch(this.value._type){case i["a"].TLS:return this.t("secret.certificate.certificate");case i["a"].SSH:return this.t("secret.ssh.keys");case i["a"].BASIC:return this.t("secret.authentication");default:return this.t("secret.data")}}},created(){this.registerAfterHook(()=>{var e;const t=this.$store.getters["allNamespaces"],a=t.find(e=>"default"===e.id),s=(null===a||void 0===a?void 0:a.id)||(null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.id)||"";this.value.$dispatch("prefs/set",{key:f["m"],value:s},{root:!0})})},methods:{async saveSecret(e){var t;if(this.errors&&Object(y["c"])(this.errors),"function"===typeof(null===(t=this.$refs.cloudComponent)||void 0===t?void 0:t.test))try{const t=await this.$refs.cloudComponent.test();if(!t||null!==t&&void 0!==t&&t.errors)return null!==t&&void 0!==t&&t.errors?this.errors=t.errors:this.errors=["Authentication test failed, please check your credentials"],void e(!1)}catch(a){return this.errors=[a],void e(!1)}return this.save(e)},typeDisplay(e,t){if(e===g["c"].CREDENTIAL_DRIVER)return this.$store.getters["i18n/withFallback"](`cluster.provider."${t}"`,null,t);{const t=e.replace(/^kubernetes.io\//,"");return this.$store.getters["i18n/withFallback"](`secret.types."${e}"`,null,t)}},initialDisplayFor(e){const t=(Object(w["u"])(this.typeDisplay(e)||"").replace(/[^A-Z]/g,"")||e).substr(0,3);return this.$store.getters["i18n/withFallback"](`secret.initials."${e}"`,null,t)},selectCustomType(e){"custom"!==e&&this.$set(this.value,"_type",e)}}},S=x,_=a("d802"),O=Object(_["a"])(S,s,l,!1,null,null,null);t["default"]=O.exports},a55e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.parsingSpecError?t("Banner",{attrs:{color:"error",label:e.t("harvester.addons.nvidiaDriverToolkit.parsingSpecError",null,{raw:!0})}}):t("Tabbed",{attrs:{"side-tabs":!0}},[t("Tab",{attrs:{name:"basic",label:e.t("harvester.addons.nvidiaDriverToolkit.titles.basic"),weight:1}},[t("RadioGroup",{staticClass:"mb-20",attrs:{value:e.value.spec.enabled,name:"model",mode:e.mode,options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},on:{input:e.toggleEnable}}),e.value.spec.enabled?t("div",[e.valuesContentJson.image?t("div",{staticClass:"row mb-15"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,required:!0,"label-key":"harvester.addons.nvidiaDriverToolkit.image.repository"},model:{value:e.valuesContentJson.image.repo,callback:function(t){e.$set(e.valuesContentJson.image,"repo",t)},expression:"valuesContentJson.image.repo"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"col span-6",attrs:{mode:e.mode,required:!0,"label-key":"harvester.addons.nvidiaDriverToolkit.image.tag"},model:{value:e.valuesContentJson.image.tag,callback:function(t){e.$set(e.valuesContentJson.image,"tag",t)},expression:"valuesContentJson.image.tag"}})],1)]):e._e(),t("div",{staticClass:"row mb-15"},[t("LabeledInput",{attrs:{mode:e.mode,required:!0,"label-key":"harvester.addons.nvidiaDriverToolkit.driver.location"},model:{value:e.valuesContentJson.driverLocation,callback:function(t){e.$set(e.valuesContentJson,"driverLocation",t)},expression:"valuesContentJson.driverLocation"}})],1)]):e._e()],1)],1)],1)},l=[],i=a("1fcb"),r=a.n(i),o=a("7838"),n=a.n(o),c=a("1832"),d=a("ad61"),u=a("5ef9"),p=a("f032"),v=a("d444"),m=a("dffb"),h=a("c78c");const b={image:{repo:"rancher/harvester-nvidia-driver-toolkit"}};var f={name:"EditAddonNvidiaDriverToolkit",components:{Banner:m["a"],LabeledInput:v["a"],RadioGroup:p["b"],Tabbed:d["a"],Tab:u["a"]},mixins:[h["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){return{initSpec:Object(c["e"])(this.value.spec),valuesContentJson:this.parseValuesContent()}},watch:{valuesContentJson:{handler(e){this.update(e)},deep:!0}},computed:{parsingSpecError(){return this.valuesContentJson&&(void 0===this.valuesContentJson.image||void 0===this.valuesContentJson.driverLocation)}},methods:{parseValuesContent(){try{return r()({},b,n.a.load(this.value.spec.valuesContent))}catch(e){return this.$store.dispatch("growl/fromError",{title:this.$store.getters["i18n/t"]("generic.notification.title.error"),err:e.data||e},{root:!0}),b}},toggleEnable(e){this.resetSpec(),this.value.spec.enabled=e},resetSpec(){this.value.spec=Object(c["e"])(this.initSpec),this.valuesContentJson=this.parseValuesContent()},update(e){this.value.spec.valuesContent=n.a.dump(e)}}},g=f,y=(a("cf23"),a("d802")),C=Object(y["a"])(g,s,l,!1,null,"673326df",null);t["default"]=C.exports},a581:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.rows.length?t("div",e._l(e.rows,(function(a,s){return t("div",{key:s},[t("div",{staticClass:"pool-headers",class:{[a.type]:!0}},[t("span",{staticClass:"pool-subnet"},[t("t",{attrs:{k:"harvester.ipPool.subnet.label"}}),t("span",{staticClass:"text-error"},[e._v(" * ")])],1),t("span",{staticClass:"pool-gateway"},[t("t",{attrs:{k:"harvester.ipPool.gateway.label"}})],1),"range"===a.type?t("span",{staticClass:"pool-startIP"},[t("t",{attrs:{k:"harvester.ipPool.startIP.label"}})],1):e._e(),"range"===a.type?t("span",{staticClass:"pool-endIP"},[t("t",{attrs:{k:"harvester.ipPool.endIP.label"}})],1):e._e(),e.showRemove?t("span",{staticClass:"remove"}):e._e()]),t("div",{staticClass:"pool-row",class:{[a.type]:!0}},[t("div",{staticClass:"pool-subnet"},[e.isView?t("span",[e._v(" "+e._s(a.subnet)+" ")]):t("input",{directives:[{name:"model",rawName:"v-model",value:a.subnet,expression:"row.subnet"}],attrs:{type:"text"},domProps:{value:a.subnet},on:{input:[function(t){t.target.composing||e.$set(a,"subnet",t.target.value)},e.queueUpdate]}})]),t("div",{staticClass:"pool-gateway"},[e.isView?t("span",[e._v(" "+e._s(a.gateway)+" ")]):t("input",{directives:[{name:"model",rawName:"v-model",value:a.gateway,expression:"row.gateway"}],attrs:{type:"text"},domProps:{value:a.gateway},on:{input:[function(t){t.target.composing||e.$set(a,"gateway",t.target.value)},e.queueUpdate]}})]),"range"===a.type?t("div",{staticClass:"pool-startIP"},[e.isView?t("span",[e._v(" "+e._s(a.rangeStart)+" ")]):t("input",{directives:[{name:"model",rawName:"v-model",value:a.rangeStart,expression:"row.rangeStart"}],attrs:{type:"text"},domProps:{value:a.rangeStart},on:{input:[function(t){t.target.composing||e.$set(a,"rangeStart",t.target.value)},e.queueUpdate]}})]):e._e(),"range"===a.type?t("div",{staticClass:"pool-endIP"},[e.isView?t("span",[e._v(" "+e._s(a.rangeEnd)+" ")]):t("input",{directives:[{name:"model",rawName:"v-model",value:a.rangeEnd,expression:"row.rangeEnd"}],attrs:{type:"text"},domProps:{value:a.rangeEnd},on:{input:[function(t){t.target.composing||e.$set(a,"rangeEnd",t.target.value)},e.queueUpdate]}})]):e._e(),e.showRemove?t("div",{staticClass:"remove"},[t("button",{staticClass:"btn role-link",attrs:{type:"button"},on:{click:function(t){return e.remove(s)}}},[t("t",{attrs:{k:"generic.remove"}})],1)]):e._e()])])})),0):e._e(),e.showAdd?t("div",{staticClass:"footer"},[t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button"},on:{click:function(t){return e.addCIDR()}}},[t("t",{attrs:{k:"harvester.ipPool.cidr.addLabel"}})],1),t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button"},on:{click:function(t){return e.addRange()}}},[t("t",{attrs:{k:"harvester.ipPool.range.addLabel"}})],1)]):e._e()])},l=[],i=a("44db"),r=a.n(i),o=a("d6a6"),n=a("e411"),c={props:{value:{type:Array,default:null},mode:{type:String,default:o["B"]},specType:{type:String,default:"ClusterIP"},autoAddIfEmpty:{type:Boolean,default:!0}},data(){const e=(this.value||[]).map(e=>{let t="cidr";return e.rangeStart&&e.rangeEnd&&(t="range"),{...e,type:t}});return{rows:e}},computed:{isView(){return this.mode===o["I"]},showAdd(){return!this.isView},showRemove(){return!this.isView}},created(){this.queueUpdate=r()(this.update,500)},methods:{addCIDR(){this.rows.push({subnet:"",gateway:"",type:"cidr"}),this.queueUpdate()},addRange(){this.rows.push({subnet:"",gateway:"",rangeStart:"",rangeEnd:"",type:"range"}),this.queueUpdate()},remove(e){Object(n["i"])(this.rows,e),this.queueUpdate()},update(){this.isView||this.$emit("input",this.rows)}}},d=c,u=(a("7a94"),a("d802")),p=Object(u["a"])(d,s,l,!1,null,"00741a2f",null);t["default"]=p.exports},a676:function(e,t,a){"use strict";a("b723")},a701:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.inventory.warningMessages.length>0?t("div",e._l(e.inventory.warningMessages,(function(e){return t("Banner",{key:e.text,attrs:{color:"error",label:e.text}})})),1):e._e(),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("RadioGroup",{attrs:{options:[{label:e.t("generic.enabled"),value:!0},{label:e.t("generic.disabled"),value:!1}],mode:e.mode,name:"enableInventory"},model:{value:e.enableInventory,callback:function(t){e.enableInventory=t},expression:"enableInventory"}})],1)]),e.enableInventory?t("div",[t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("harvester.seeder.inventory.host.label"),placeholder:e.t("harvester.seeder.inventory.host.placeholder"),mode:e.mode,required:""},model:{value:e.value.spec.baseboardSpec.connection.host,callback:function(t){e.$set(e.value.spec.baseboardSpec.connection,"host",t)},expression:"value.spec.baseboardSpec.connection.host"}}),t("Checkbox",{staticClass:"mt-5",attrs:{mode:e.mode,label:e.t("harvester.seeder.inventory.insecureTLS.label")},model:{value:e.value.spec.baseboardSpec.connection.insecureTLS,callback:function(t){e.$set(e.value.spec.baseboardSpec.connection,"insecureTLS",t)},expression:"value.spec.baseboardSpec.connection.insecureTLS"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("harvester.seeder.inventory.port.label"),placeholder:e.t("harvester.seeder.inventory.port.placeholder"),mode:e.mode,required:""},model:{value:e.value.spec.baseboardSpec.connection.port,callback:function(t){e.$set(e.value.spec.baseboardSpec.connection,"port",e._n(t))},expression:"value.spec.baseboardSpec.connection.port"}})],1)]),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:e.t("harvester.seeder.inventory.secret.label"),mode:e.mode,options:e.secretOption,required:""},model:{value:e.selectedSecret,callback:function(t){e.selectedSecret=t},expression:"selectedSecret"}})],1)]),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-6"},[t("RadioGroup",{attrs:{name:"enabled",options:[!0,!1],label:e.t("harvester.seeder.inventory.event.label"),labels:[e.t("generic.enabled"),e.t("generic.disabled")],mode:e.mode},model:{value:e.value.spec.events.enabled,callback:function(t){e.$set(e.value.spec.events,"enabled",t)},expression:"value.spec.events.enabled"}})],1),e.value.spec.events.enabled?t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("harvester.seeder.inventory.pollingInterval.label"),mode:e.mode},model:{value:e.value.spec.events.pollingInterval,callback:function(t){e.$set(e.value.spec.events,"pollingInterval",t)},expression:"value.spec.events.pollingInterval"}})],1):e._e()]),t("ModalWithCard",{ref:"secretModal",attrs:{width:"80%",errors:e.errors,name:"secretModal"},on:{finish:e.saveSecret,close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.seeder.inventory.secret.create.title"))+" ")]},proxy:!0},{key:"content",fn:function(){return[t("NameNsDescription",{attrs:{namespaced:!0,mode:"create"},model:{value:e.secret,callback:function(t){e.secret=t},expression:"secret"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.username"),required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{type:"password",label:e.t("harvester.virtualMachine.input.password"),required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})]},proxy:!0}],null,!1,1242073112)})],1):e._e()])},l=[],i=a("53fe"),r=a("d444"),o=a("f032"),n=a("efb2"),c=a("56a4"),d=a("5fe4"),u=a("65b0"),p=a("dffb"),v=a("8672"),m=a("3792");const h="_NEW";var b={name:"HarvesterSeeder",components:{Checkbox:n["a"],LabeledInput:r["a"],LabeledSelect:i["a"],RadioGroup:o["b"],ModalWithCard:d["a"],NameNsDescription:u["a"],Banner:p["a"]},props:{mode:{type:String,required:!0},node:{type:Object,required:!0},registerAfterHook:{type:Function,required:!0},inventory:{type:Object,required:!0}},data(){var e;const t=!(null===(e=this.inventory)||void 0===e||!e.id);return{enableInventory:t,value:this.inventory,secret:{},errors:[],newSecretSelected:!1}},created(){this.registerAfterHook(this.saveInventory,"saveInventory")},async fetch(){const e=this.$store.getters["currentProduct"].inStore;this.secret=await this.$store.dispatch(e+"/create",{type:c["J"],data:{username:"",password:""},metadata:{namespace:"",name:"",describe:""}})},computed:{secretOption(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](c["J"]).filter(e=>{var t,a;return(null===(t=e.data)||void 0===t?void 0:t.username)&&(null===(a=e.data)||void 0===a?void 0:a.password)}).map(e=>({label:e.id,value:e.id}));return t.unshift({label:this.t("harvester.virtualMachine.createSSHKey"),value:h}),t},selectedSecret:{get(){var e,t,a,s,l,i,r,o,n;const c=null===(e=this.value.spec)||void 0===e||null===(t=e.baseboardSpec)||void 0===t||null===(a=t.connection)||void 0===a||null===(s=a.authSecretRef)||void 0===s?void 0:s.namespace,d=null===(l=this.value)||void 0===l||null===(i=l.spec)||void 0===i||null===(r=i.baseboardSpec)||void 0===r||null===(o=r.connection)||void 0===o||null===(n=o.authSecretRef)||void 0===n?void 0:n.name;return c&&d?`${c}/${d}`:""},set(e){if(e===h)this.newSecretSelected=!0;else{const[t,a]=e.split("/");this.$set(this.value.spec.baseboardSpec.connection.authSecretRef,"namespace",t),this.$set(this.value.spec.baseboardSpec.connection.authSecretRef,"name",a)}}},username:{get(){var e,t;return Object(v["a"])(null===(e=this.secret)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.username)},set(e){this.$set(this.secret.data,"username",Object(v["b"])(e))}},password:{get(){var e,t;return Object(v["a"])(null===(e=this.secret)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.password)},set(e){this.$set(this.secret.data,"password",Object(v["b"])(e))}}},methods:{async saveInventory(){if(this.enableInventory){const e=[];return this.value.spec.baseboardSpec.connection.host||e.push(this.t("validation.required",{key:this.t("harvester.seeder.inventory.host.label")},!0)),this.value.spec.baseboardSpec.connection.port||e.push(this.t("validation.required",{key:this.t("harvester.seeder.inventory.port.label")},!0)),this.selectedSecret||e.push(this.t("validation.required",{key:this.t("harvester.seeder.inventory.secret.label")},!0)),e.length>0?Promise.reject(Object(m["c"])(e)):(this.value.id||(this.value.metadata.annotations["metal.harvesterhci.io/local-node-name"]=this.node.id),this.value.metadata.annotations["metal.harvesterhci.io/local-inventory"]="true",await this.value.save())}return this.value.id?await this.value.remove():Promise.resolve()},show(){this.$modal.show("secretModal")},hide(){this.$modal.hide("secretModal"),this.newSecretSelected=!1},cancel(){this.hide()},async saveSecret(e){if(this.errors=[],this.username||this.errors.push(this.t("validation.required",{key:this.t("harvester.virtualMachine.input.username")},!0)),this.password||this.errors.push(this.t("validation.required",{key:this.t("harvester.virtualMachine.input.password")},!0)),this.errors.length>0)e(!1);else try{const t=await this.secret.save();t.id&&this.secretOption.push({label:t.id,value:t.id}),this.selectedSecret=t.id,e(!0),this.cancel()}catch(t){this.errors=[t.message],e(!1)}}},watch:{newSecretSelected(e){e&&this.show()}}},f=b,g=a("d802"),y=Object(g["a"])(f,s,l,!1,null,null,null);t["default"]=y.exports},a7ce:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e._l(e.configArr,(function(a,s){return t("InfoBox",{key:a.key,staticClass:"box"},[t("button",{staticClass:"role-link btn btn-sm remove",attrs:{disabled:e.disableEdit(a.key),type:"button"},on:{click:function(t){return e.remove(s)}}},[t("i",{staticClass:"icon icon-x"})]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-4"},[t("LabeledSelect",{attrs:{mode:e.mode,required:"",disabled:e.disableEdit(a.key),"label-key":"harvester.setting.csiDriverConfig.provisioner",searchable:!0,options:e.provisioners},on:{input:e.update},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:a.key,callback:function(t){e.$set(a,"key",t)},expression:"driver.key"}})],1),t("div",{staticClass:"col span-4"},[t("LabeledSelect",{attrs:{mode:e.mode,required:"",disabled:e.disableEdit(a.key),options:e.getVolumeSnapshotOptions(a.key),label:e.t("harvester.setting.csiDriverConfig.volumeSnapshotClassName")},on:{input:e.update},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:a.value.volumeSnapshotClassName,callback:function(t){e.$set(a.value,"volumeSnapshotClassName",t)},expression:"driver.value.volumeSnapshotClassName"}})],1),t("div",{staticClass:"col span-4"},[t("LabeledSelect",{attrs:{mode:e.mode,required:"",disabled:e.disableEdit(a.key),options:e.getVolumeSnapshotOptions(a.key),label:e.t("harvester.setting.csiDriverConfig.backupVolumeSnapshotClassName")},on:{input:e.update},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),(()=>{}).apply(null,arguments))}},model:{value:a.value.backupVolumeSnapshotClassName,callback:function(t){e.$set(a.value,"backupVolumeSnapshotClassName",t)},expression:"driver.value.backupVolumeSnapshotClassName"}})],1)])])})),t("button",{staticClass:"btn btn-sm role-primary",attrs:{disabled:e.disableAdd},on:{click:function(t){return t.target!==t.currentTarget?null:e.add.apply(null,arguments)}}},[e._v(" "+e._s(e.t("generic.add"))+" ")])],2)},l=[],i=a("d6a6"),r=a("53fe"),o=a("6583"),n=a("90cd"),c=a("b837");const d="driver.longhorn.io";var u={name:"HarvesterCsiDriver",components:{InfoBox:o["a"],LabeledSelect:r["a"]},props:{mode:{type:String,default:i["B"]},value:{type:Object,default:()=>({})},registerBeforeHook:{type:Function,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={csiDrivers:this.$store.dispatch(e+"/findAll",{type:n["a"]}),volumeSnapshotClass:this.$store.dispatch(e+"/findAll",{type:n["d"]})};await Object(c["a"])(t)},data(){const e=this.value.value||this.value.default,t=this.parseValue(e);return{configArr:t}},created(){this.registerBeforeHook&&this.registerBeforeHook(this.willSave,"willSave")},computed:{provisioners(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](n["a"])||[];return t.filter(e=>!this.configArr.map(e=>e.key).includes(e.name)).map(e=>e.name)},disableAdd(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](n["a"])||[];return this.configArr.length>=t.length}},methods:{getVolumeSnapshotOptions(e){const t=this.$store.getters["currentProduct"].inStore,a=this.$store.getters[t+"/all"](n["d"])||[];return a.filter(t=>t.driver===e).map(e=>({label:e.name,value:e.name}))},parseValue(e){const t=[];let a={};try{a=JSON.parse(e)}catch(s){new Error("json error")}for(const[l,i]of Object.entries(a))t.push({key:l,value:i});return t},update(){const e={};this.configArr.map(t=>{e[t.key]=t.value});const t=this.configArr.length?JSON.stringify(e):"";this.$set(this.value,"value",t)},willSave(){this.update();const e=[];try{this.configArr.forEach(t=>{t.key||e.push(this.t("validation.required",{key:this.t("harvester.setting.csiDriverConfig.provisioner")},!0)),t.value.volumeSnapshotClassName||e.push(this.t("validation.required",{key:this.t("harvester.setting.csiDriverConfig.volumeSnapshotClassName")},!0)),t.value.backupVolumeSnapshotClassName||e.push(this.t("validation.required",{key:this.t("harvester.setting.csiDriverConfig.backupVolumeSnapshotClassName")},!0))})}catch(t){}return e.length>0?Promise.reject(e):Promise.resolve()},remove(e){this.configArr.splice(e,1)},disableEdit(e){return e===d},add(){this.configArr.push({key:"",value:{volumeSnapshotClassName:"",backupVolumeSnapshotClassName:""}})},useDefault(){const e=this.parseValue(this.value.default);this.$set(this,"configArr",e),this.update()}}},p=u,v=(a("cd9f"),a("d802")),m=Object(v["a"])(p,s,l,!1,null,"17d330d2",null);t["default"]=m.exports},a8ba:function(e,t,a){var s={"./generic.vue":"9b76","./harvester-seeder.vue":"c7ab","./index.vue":"87a7","./nvidia-driver-toolkit.vue":"a55e","./pcidevices-controller.vue":"51c9","./rancher-logging.vue":"f063","./rancher-monitoring.vue":"5fc2","./rancher-vcluster.vue":"e39e","./vm-import-controller.vue":"c285"};function l(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=i,e.exports=l,l.id="a8ba"},a958:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".box[data-v-17d330d2]{position:relative;padding-top:40px}.remove[data-v-17d330d2]{position:absolute;top:10px;right:10px;padding:0}",""]),e.exports=t},a990:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".row{margin-bottom:5px}.vertically-center{padding:20px 0}",""]),e.exports=t},a9f0:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".label[data-v-16d50992]{display:flex;flex-direction:column}.label .value[data-v-16d50992]{font-size:14px;line-height:18px}",""]),e.exports=t},aa2b:function(e,t,a){"use strict";a("80a9")},aaad:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.logz.url")},model:{value:e.value.endpoint.url,callback:function(t){e.$set(e.value.endpoint,"url",t)},expression:"value.endpoint.url"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,type:"number",min:"1",max:"65535",label:e.t("logging.logz.port")},model:{value:e.port,callback:function(t){e.port=t},expression:"port"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.logz.token"),"show-key-selector":!0},model:{value:e.value.endpoint.token,callback:function(t){e.$set(e.value.endpoint,"token",t)},expression:"value.endpoint.token"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.certificate")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.logz.enableCompression")},model:{value:e.value.gzip,callback:function(t){e.$set(e.value,"gzip",t)},expression:"value.gzip"}})],1)])])},l=[],i=a("efb2"),r=a("d444"),o=a("0b97"),n=a("05b4"),c={components:{Checkbox:i["a"],LabeledInput:r["a"],SecretSelector:o["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}},computed:{port:{get(){return this.value.endpoint.port},set(e){Object(n["updatePort"])(e=>this.$set(this.value.endpoint,"port",e),e)}}}},d=c,u=a("d802"),p=Object(u["a"])(d,s,l,!1,null,null,null);t["default"]=p.exports},ad35:function(e,t,a){var s=a("f7df");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("d7a28598",s,!0,{sourceMap:!1,shadowMode:!1})},ae5d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("CruResource",{attrs:{"done-route":e.doneRoute,mode:e.mode,resource:e.value,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.save,cancel:e.done}},[t("NameNsDescription",{attrs:{mode:e.mode,namespaced:!0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("Tabbed",{attrs:{"side-tabs":!0}},[t("Tab",{attrs:{name:"basics",label:e.t("harvester.host.tabs.basics"),weight:1}},[t("div",{staticClass:"mb-20"},[t("LabeledSelect",{attrs:{label:e.t("harvester.cloudTemplate.templateType"),disabled:!e.isCreate,options:e.types},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),t("div",{staticClass:"resource-yaml"},[t("YamlEditor",{ref:"yamlUser",staticClass:"yaml-editor",attrs:{"editor-mode":"view"===e.mode?"VIEW_CODE":"EDIT_CODE"},on:{onChanges:e.update},model:{value:e.config,callback:function(t){e.config=t},expression:"config"}})],1)])],1)],1)},l=[],i=a("ad61"),r=a("5ef9"),o=a("2e2b"),n=a("53fe"),c=a("65b0"),d=a("c349"),u=a("c78c"),p=a("873f"),v={name:"HarvesterEditCloudTemplate",components:{Tab:r["a"],Tabbed:i["a"],YamlEditor:d["b"],CruResource:o["a"],LabeledSelect:n["a"],NameNsDescription:c["a"]},mixins:[u["a"]],data(){var e,t,a,s;return{config:(null===(e=this.value.data)||void 0===e?void 0:e.cloudInit)||"",type:(null===(t=this.value)||void 0===t||null===(a=t.metadata)||void 0===a||null===(s=a.labels)||void 0===s?void 0:s[p["a"].CLOUD_INIT])||"user"}},computed:{types(){return[{label:"User Data",value:"user"},{label:"Network Data",value:"network"}]}},created(){this.registerBeforeHook&&this.registerBeforeHook(this.updateBeforeSave)},methods:{update(){this.value.data={cloudInit:this.config}},updateBeforeSave(){this.isCreate&&(this.value.metadata.labels={...this.value.metadata.labels,[p["a"].CLOUD_INIT]:this.type},this.value.data={cloudInit:this.config})}}},m=v,h=(a("674d"),a("d802")),b=Object(h["a"])(m,s,l,!1,null,"088121bb",null);t["default"]=b.exports},aebc:function(e,t,a){var s=a("d2ad");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("37c9f040",s,!0,{sourceMap:!1,shadowMode:!1})},af59:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".action[data-v-b7cb7d9a]{display:flex;flex-direction:row-reverse}",""]),e.exports=t},afcd:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".box[data-v-a999bef6]{position:relative}.title[data-v-a999bef6]{display:flex}.title .state[data-v-a999bef6]{font-size:16px}.remove[data-v-a999bef6]{position:absolute;top:10px;right:10px;padding:0}.bootOrder[data-v-a999bef6]{display:flex;align-items:center}.buttons[data-v-a999bef6]{width:100%;display:flex;justify-content:flex-end}.volume-status[data-v-a999bef6]:first-letter{text-transform:uppercase}.resource-external[data-v-a999bef6]{display:flex;justify-content:center;align-items:center}",""]),e.exports=t},b068:function(e,t,a){var s=a("0807");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("215693fe",s,!0,{sourceMap:!1,shadowMode:!1})},b1bc:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:e.t("harvester.ipPool.network.label"),options:e.networkOptions,mode:e.mode},on:{input:e.queueUpdate},model:{value:e.selector.network,callback:function(t){e.$set(e.selector,"network",t)},expression:"selector.network"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("harvester.ipPool.priority.label"),mode:e.mode,type:"number",min:"0"},on:{input:e.update},model:{value:e.selector.priority,callback:function(t){e.$set(e.selector,"priority",e._n(t))},expression:"selector.priority"}})],1)]),t("Priority",{staticClass:"col span-12",attrs:{mode:e.mode},on:{input:e.update},model:{value:e.selector.scope,callback:function(t){e.$set(e.selector,"scope",t)},expression:"selector.scope"}})],1)},l=[],i=a("44db"),r=a.n(i),o=a("53fe"),n=a("d444"),c=a("56b1"),d=a("56a4"),u=a("d6a6"),p={components:{LabeledSelect:o["a"],LabeledInput:n["a"],Priority:c["default"]},props:{value:{type:Object,default:()=>({})},mode:{type:String,default:u["B"]}},data(){const e=this.value||{network:"",priority:0,scope:[]};return{selector:e}},computed:{networkOptions(){const e=this.$store.getters["harvester/all"](d["x"])||[];return[{label:this.t("generic.none"),value:""},...e.map(e=>({label:e.id,value:e.id}))]}},created(){this.queueUpdate=r()(this.update,500)},methods:{update(){this.isView||this.$emit("input",this.selector)}}},v=p,m=a("d802"),h=Object(m["a"])(v,s,l,!1,null,null,null);t["default"]=h.exports},b36f:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".grid[data-v-40bd913c]{display:flex;justify-content:flex-start;flex-wrap:wrap;margin:0 -10px}@media only screen and (min-width:480px){.grid .item[data-v-40bd913c]{width:100%}}@media only screen and (min-width:768px){.grid .item[data-v-40bd913c]{width:calc(50% - 20px)}}@media only screen and (min-width:992px){.grid .item[data-v-40bd913c]{width:calc(33.33333% - 20px)}}@media only screen and (min-width:1281px){.grid .item[data-v-40bd913c]{width:calc(25% - 20px)}}.grid .item[data-v-40bd913c]{height:135px;margin:10px;padding:10px;position:relative;border:1px solid var(--border);text-decoration:none!important;color:var(--body-text)!important}.grid .item[data-v-40bd913c]:hover:not(.disabled){box-shadow:0 0 30px var(--shadow);transition:box-shadow .1s ease-in-out;cursor:pointer;text-decoration:none!important}.grid .item .side-label[data-v-40bd913c]{position:absolute;top:10px;right:10px;padding:2px 5px}.grid .item .side-label.indicator[data-v-40bd913c]{top:0;right:0;left:0}.grid .item .side-label label[data-v-40bd913c],.grid .item label.deploys-os-label[data-v-40bd913c],.grid .item label.os-incompatible-label[data-v-40bd913c]{font-size:12px;line-height:12px;text-align:center;display:block;white-space:no-wrap;text-overflow:ellipsis;color:var(--card-badge-text);margin:0}.grid .item .deploys-os-label[data-v-40bd913c],.grid .item .os-incompatible-label[data-v-40bd913c]{position:absolute;bottom:10px;padding:2px 5px;right:10px}.grid .item label.os-incompatible-label[data-v-40bd913c]{color:var(--warning);background-color:var(--warning-banner-bg)}.grid .item .logo[data-v-40bd913c]{text-align:center;position:absolute;left:25px;top:37.5px;width:60px;height:60px;border-radius:calc(var(--border-radius)*2);overflow:hidden;background-color:#fff}.grid .item .logo img[data-v-40bd913c]{width:56px;height:56px;-o-object-fit:contain;object-fit:contain;position:relative;top:2px}.grid .item .logo i[data-v-40bd913c]{background-position:50%;background-repeat:no-repeat;display:flex;height:56px;margin:2px;width:56px}.grid .item.rancher .deploys-os-label[data-v-40bd913c],.grid .item.rancher .side-label[data-v-40bd913c]{background-color:var(--app-rancher-accent)}.grid .item.rancher .deploys-os-label label[data-v-40bd913c],.grid .item.rancher .side-label label[data-v-40bd913c]{color:var(--app-rancher-accent-text)}.grid .item.rancher[data-v-40bd913c]:hover:not(.disabled){border-color:var(--app-rancher-accent)}.grid .item.partner .deploys-os-label[data-v-40bd913c],.grid .item.partner .side-label[data-v-40bd913c]{background-color:var(--app-partner-accent)}.grid .item.partner .deploys-os-label label[data-v-40bd913c],.grid .item.partner .side-label label[data-v-40bd913c]{color:var(--app-partner-accent-text)}.grid .item.partner[data-v-40bd913c]:hover:not(.disabled){border-color:var(--app-partner-accent)}.grid .item.color1 .deploys-os-label[data-v-40bd913c],.grid .item.color1 .side-label[data-v-40bd913c]{background-color:var(--app-color1-accent)}.grid .item.color1 .deploys-os-label label[data-v-40bd913c],.grid .item.color1 .side-label label[data-v-40bd913c]{color:var(--app-color1-accent-text)}.grid .item.color1[data-v-40bd913c]:hover:not(.disabled){border-color:var(--app-color1-accent)}.grid .item.color2 .deploys-os-label[data-v-40bd913c],.grid .item.color2 .side-label[data-v-40bd913c]{background-color:var(--app-color2-accent)}.grid .item.color2 .deploys-os-label label[data-v-40bd913c],.grid .item.color2 .side-label label[data-v-40bd913c]{color:var(--app-color2-accent-text)}.grid .item.color2[data-v-40bd913c]:hover:not(.disabled){border-color:var(--app-color2-accent)}.grid .item.color3 .deploys-os-label[data-v-40bd913c],.grid .item.color3 .side-label[data-v-40bd913c]{background-color:var(--app-color3-accent)}.grid .item.color3 .deploys-os-label label[data-v-40bd913c],.grid .item.color3 .side-label label[data-v-40bd913c]{color:var(--app-color3-accent-text)}.grid .item.color3[data-v-40bd913c]:hover:not(.disabled){border-color:var(--app-color3-accent)}.grid .item.color4 .deploys-os-label[data-v-40bd913c],.grid .item.color4 .side-label[data-v-40bd913c]{background-color:var(--app-color4-accent)}.grid .item.color4 .deploys-os-label label[data-v-40bd913c],.grid .item.color4 .side-label label[data-v-40bd913c]{color:var(--app-color4-accent-text)}.grid .item.color4[data-v-40bd913c]:hover:not(.disabled){border-color:var(--app-color4-accent)}.grid .item.color5 .deploys-os-label[data-v-40bd913c],.grid .item.color5 .side-label[data-v-40bd913c]{background-color:var(--app-color5-accent)}.grid .item.color5 .deploys-os-label label[data-v-40bd913c],.grid .item.color5 .side-label label[data-v-40bd913c]{color:var(--app-color5-accent-text)}.grid .item.color5[data-v-40bd913c]:hover:not(.disabled){border-color:var(--app-color5-accent)}.grid .item.color6 .deploys-os-label[data-v-40bd913c],.grid .item.color6 .side-label[data-v-40bd913c]{background-color:var(--app-color6-accent)}.grid .item.color6 .deploys-os-label label[data-v-40bd913c],.grid .item.color6 .side-label label[data-v-40bd913c]{color:var(--app-color6-accent-text)}.grid .item.color6[data-v-40bd913c]:hover:not(.disabled){border-color:var(--app-color6-accent)}.grid .item.color7 .deploys-os-label[data-v-40bd913c],.grid .item.color7 .side-label[data-v-40bd913c]{background-color:var(--app-color7-accent)}.grid .item.color7 .deploys-os-label label[data-v-40bd913c],.grid .item.color7 .side-label label[data-v-40bd913c]{color:var(--app-color7-accent-text)}.grid .item.color7[data-v-40bd913c]:hover:not(.disabled){border-color:var(--app-color7-accent)}.grid .item.color8 .deploys-os-label[data-v-40bd913c],.grid .item.color8 .side-label[data-v-40bd913c]{background-color:var(--app-color8-accent)}.grid .item.color8 .deploys-os-label label[data-v-40bd913c],.grid .item.color8 .side-label label[data-v-40bd913c]{color:var(--app-color8-accent-text)}.grid .item.color8[data-v-40bd913c]:hover:not(.disabled){border-color:var(--app-color8-accent)}.grid .item[data-v-40bd913c]:hover:not(.disabled){background-position:100%;border-left-width:1px}.grid .item:hover:not(.disabled) .logo[data-v-40bd913c]{left:25px}.grid .item:hover:not(.disabled) .name[data-v-40bd913c]{margin-left:85px}.grid .item .name[data-v-40bd913c]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:115px;margin:0;margin-left:85px}.grid .item.has-description .name[data-v-40bd913c]{margin-top:10px;line-height:normal}.grid .item.has-description.has-side-label .name[data-v-40bd913c]{margin-top:15px}.grid .item .description[data-v-40bd913c]{margin-top:10px;margin-left:85px;margin-right:10px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;line-clamp:3;overflow:hidden;text-overflow:ellipsis;color:var(--text-muted)!important}.grid .disabled[data-v-40bd913c]{opacity:.5;cursor:not-allowed}",""]),e.exports=t},b4af:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".kv-item.value>.unlabeled-select[data-v-5a2a372e]{height:40px;line-height:1}",""]),e.exports=t},b50b:function(e,t,a){"use strict";a("511d")},b61d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"can-yaml":!!e.showEditAsYaml,"apply-hooks":e.applyHooks},on:{finish:e.saveImage}},[t("NameNsDescription",{ref:"nd",attrs:{mode:e.mode,label:e.t("generic.name"),"name-key":"spec.displayName"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0}},"Tabbed",e.$attrs,!1),[t("Tab",{staticClass:"bordered-table",attrs:{name:"basic",label:e.t("harvester.image.tabs.basics"),weight:99}},[e.isCreate?t("RadioGroup",{attrs:{name:"model",options:["download","upload"],labels:[e.t("harvester.image.sourceType.download"),e.t("harvester.image.sourceType.upload")],mode:e.mode},model:{value:e.value.spec.sourceType,callback:function(t){e.$set(e.value.spec,"sourceType",t)},expression:"value.spec.sourceType"}}):e._e(),t("div",{staticClass:"row mb-20 mt-20"},[t("div",{staticClass:"col span-12"},[e.isCreate?e._e():t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,disabled:e.isEdit,"label-key":"harvester.image.source"},model:{value:e.value.spec.sourceType,callback:function(t){e.$set(e.value.spec,"sourceType",t)},expression:"value.spec.sourceType"}}),"download"===e.value.spec.sourceType?t("LabeledInput",{staticClass:"mb-20 labeled-input--tooltip",attrs:{mode:e.mode,disabled:e.isEdit,required:"","label-key":"harvester.image.url",tooltip:e.t("harvester.image.urlTip",{},!0)},model:{value:e.value.spec.url,callback:function(t){e.$set(e.value.spec,"url",t)},expression:"value.spec.url"}}):t("div",[e.isView?t("LabeledInput",{staticClass:"mt-20",attrs:{mode:e.mode,"label-key":"harvester.image.fileName"},model:{value:e.imageName,callback:function(t){e.imageName=t},expression:"imageName"}}):e._e(),e.isCreate?t("button",{staticClass:"btn role-primary",attrs:{type:"button"},on:{click:e.selectFile}},[t("span",[e._v(" "+e._s(e.t("harvester.image.uploadFile"))+" ")]),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file",attrs:{id:"file",type:"file",accept:".qcow, .qcow2, .raw, .img, .iso"},on:{change:function(t){return e.handleFileUpload()}}})]):e._e(),e.uploadFileName?t("div",{staticClass:"fileName mt-5"},[t("span",{staticClass:"icon icon-file"}),e._v(" "+e._s(e.uploadFileName)+" ")]):e._e()],1),"download"===e.value.spec.sourceType?t("LabeledInput",{attrs:{mode:e.mode,disabled:e.isEdit,"label-key":"harvester.image.checksum",tooltip:e.t("harvester.image.checksumTip")},model:{value:e.value.spec.checksum,callback:function(t){e.$set(e.value.spec,"checksum",t)},expression:"value.spec.checksum"}}):e._e()],1)])],1),t("Tab",{staticClass:"bordered-table",attrs:{name:"storage",label:e.t("harvester.storage.label"),weight:89}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{staticClass:"mb-20",attrs:{options:e.storageClassOptions,label:e.t("harvester.storage.storageClass.label"),mode:e.mode,disabled:e.isEdit},model:{value:e.storageClassName,callback:function(t){e.storageClassName=t},expression:"storageClassName"}})],1)])]),t("Tab",{staticClass:"bordered-table",attrs:{name:"labels",label:e.t("labels.labels.title"),weight:2}},[t("KeyValue",{key:"labels",ref:"labels",attrs:{value:e.value.labels,"add-label":e.t("labels.addLabel"),mode:e.mode,"pad-left":!1,"read-allowed":!1},on:{focusKey:e.focusKey,input:function(t){return e.value.setLabels(t)}},scopedSlots:e._u([{key:"key",fn:function({row:a,keyName:s,queueUpdate:l}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a[s],expression:"row[keyName]"}],ref:"key",attrs:{placeholder:e.t("keyValue.keyPlaceholder")},domProps:{value:a[s]},on:{input:[function(t){t.target.composing||e.$set(a,s,t.target.value)},l]}})]}},{key:"value",fn:function({row:a,keyName:s,valueName:l,queueUpdate:i}){return[e.internalAnnotations(a)?t("Select",{attrs:{searchable:!0,clearable:!1,options:e.calculateOptions(a[s])},on:{input:i},model:{value:a[l],callback:function(t){e.$set(a,l,t)},expression:"row[valueName]"}}):t("input",{directives:[{name:"model",rawName:"v-model",value:a[l],expression:"row[valueName]"}],attrs:{disabled:e.isView,placeholder:e.t("keyValue.valuePlaceholder"),autocorrect:"off",autocapitalize:"off",spellcheck:"false",type:"text"},domProps:{value:a[l]},on:{input:[function(t){t.target.composing||e.$set(a,l,t.target.value)},i]}})]}}])})],1)],1)],1)},l=[],i=a("2e2b"),r=a("ad61"),o=a("5ef9"),n=a("d444"),c=a("2958"),d=a("65b0"),u=a("f032"),p=a("81a6"),v=a("53fe"),m=a("c78c"),h=a("6834"),b=a("afa6"),f=a("873f"),g=a("3792"),y=a("b837"),C=a("56a4"),k=a("90cd");const w="download",x="upload",S="raw_qcow2";var _={name:"EditImage",components:{Tab:o["a"],Tabbed:r["a"],KeyValue:c["a"],Select:p["a"],CruResource:i["a"],LabeledInput:n["a"],NameNsDescription:d["a"],RadioGroup:u["b"],LabeledSelect:v["a"]},mixins:[m["a"]],props:{value:{type:Object,required:!0}},async fetch(){var e;const t=this.$store.getters["currentProduct"].inStore;await Object(y["a"])({images:this.$store.dispatch(t+"/findAll",{type:k["b"].IMAGE}),storageClasses:this.$store.dispatch(t+"/findAll",{type:C["O"]})});const a=this.$store.getters[t+"/all"](C["O"]).find(e=>e.isDefault);this.$set(this,"storageClassName",this.storageClassName||(null===a||void 0===a||null===(e=a.metadata)||void 0===e?void 0:e.name)||"longhorn")},data(){return this.value.spec||this.$set(this.value,"spec",{sourceType:w}),this.value.metadata.name||(this.value.metadata.generateName="image-"),{url:this.value.spec.url,files:[],resource:"",headers:{},fileUrl:"",file:""}},computed:{uploadFileName(){var e;return(null===(e=this.file)||void 0===e?void 0:e.name)||""},imageName(){var e,t,a;return(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t||null===(a=t.annotations)||void 0===a?void 0:a[f["a"].IMAGE_NAME])||"-"},isCreateEdit(){return this.isCreate||this.isEdit},showEditAsYaml(){return this.value.spec.sourceType===w},storageClassOptions(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](C["O"]),a=t.filter(e=>{var t;return!(null!==(t=e.parameters)&&void 0!==t&&t.backingImage)}).map(e=>{const t=e.isDefault?`${e.name} (${this.t("generic.default")})`:e.name;return{label:t,value:e.name}})||[];return a},storageClassName:{get(){return this.value.metadata.annotations[f["a"].STORAGE_CLASS]},set(e){this.value.metadata.annotations[f["a"].STORAGE_CLASS]=e}}},watch:{"value.spec.url"(e){const t=e.trim();this.setImageLabels(t)},"value.spec.sourceType"(){var e,t;this.$set(this,"file",null),this.url="",null!==(e=this.$refs)&&void 0!==e&&null!==(t=e.file)&&void 0!==t&&t.value&&(this.$refs.file.value=null)}},methods:{async saveImage(e){if(this.value.spec.displayName=(this.value.spec.displayName||"").trim(),this.value.spec.sourceType===x&&this.isCreate)try{this.value.spec.url="";const t=this.file;this.value.metadata.annotations[f["a"].IMAGE_NAME]=null===t||void 0===t?void 0:t.name;const a=await this.value.save();a.uploadImage(t),e(!0),this.done()}catch(t){this.errors=Object(g["c"])(t),e(!1)}else this.save(e)},setImageLabels(e){var t,a,s;const l=(null===e||void 0===e||null===(t=e.split("/"))||void 0===t?void 0:t.pop())||e,i=null===l||void 0===l||null===(a=l.split("."))||void 0===a||null===(s=a.pop())||void 0===s?void 0:s.toLowerCase();if(b["a"].includes(i)){const e="iso"===i?i:S;this.addLabel(f["a"].IMAGE_SUFFIX,e),this.value.spec.displayName||this.$refs.nd.changeNameAndNamespace({text:l,selected:this.value.metadata.namespace})}const r=this.getOSType(e);r&&this.addLabel(f["a"].OS_TYPE,r.value)},addLabel(e,t){const a=this.$refs.labels.rows;a.map((t,a)=>{t.key===e&&this.$refs.labels.remove(a)}),this.$refs.labels.add(e,t)},handleFileUpload(){const e=this.$refs.file.files[0];this.file=e,this.setImageLabels(null===e||void 0===e?void 0:e.name),this.value.spec.displayName||this.$refs.nd.changeNameAndNamespace({text:null===e||void 0===e?void 0:e.name,selected:this.value.metadata.namespace}),this.setImageLabels()},selectFile(){this.$refs.file.value=null,this.$refs.file.click()},internalAnnotations(e){const t=[f["a"].OS_TYPE,f["a"].IMAGE_SUFFIX];return t.find(t=>t===e.key)},calculateOptions(e){return e===f["a"].OS_TYPE?h["b"]:e===f["a"].IMAGE_SUFFIX?[{label:"ISO",value:"iso"},{label:"raw/qcow2",value:S}]:[]},focusKey(){this.$refs.key.focus()},getOSType(e){if(e)return h["b"].find(t=>t.match?!!t.match.find(t=>e.toLowerCase().includes(t))&&t.value:!!e.toLowerCase().includes(t.value.toLowerCase())&&t.value)}}},O=_,N=(a("6621"),a("d802")),$=Object(N["a"])(O,s,l,!1,null,"5a2a372e",null);t["default"]=$.exports},b6d3:function(e,t,a){"use strict";a("7d82")},b723:function(e,t,a){var s=a("d60d");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("1ca88a0a",s,!0,{sourceMap:!1,shadowMode:!1})},b82b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],attrs:{label:e.t("harvester.virtualMachine.input.reservedMemory"),mode:e.mode,"input-exponent":2,increment:1024,"output-modifier":!0},on:{input:e.change},model:{value:e.memory,callback:function(t){e.memory=t},expression:"memory"}})},l=[],i=a("2007"),r={name:"HarvesterReserved",components:{UnitInput:i["a"]},props:{reservedMemory:{type:String,default:null},mode:{type:String,default:"create"}},data(){return{memory:this.reservedMemory}},watch:{reservedMemory(e){this.memory=e}},methods:{change(){const{memory:e}=this;this.$emit("updateReserved",{memory:e})}}},o=r,n=a("d802"),c=Object(n["a"])(o,s,l,!1,null,null,null);t["default"]=c.exports},b852:function(e,t,a){var s={"./additional-ca.vue":"0914","./backup-target.vue":"59d1","./containerd-registry.vue":"770a","./csi-driver-config.vue":"a7ce","./default-vm-termination-grace-period-seconds.vue":"f904","./http-proxy.vue":"1872","./ntp-servers.vue":"1094","./overcommit-config.vue":"8f33","./ssl-certificates.vue":"5a4c","./ssl-parameters.vue":"3fc1","./storage-network.vue":"cfbe","./support-bundle-image.vue":"ffb2","./support-bundle-namespaces.vue":"9cc6","./vm-force-reset-policy.vue":"91ed"};function l(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=i,e.exports=l,l.id="b852"},b8d4:function(e,t,a){"use strict";a("e51b")},b93f:function(e,t,a){var s=a("d994");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("5b17b8ed",s,!0,{sourceMap:!1,shadowMode:!1})},b95a:function(e,t,a){"use strict";a("50cf")},b9b4:function(e,t,a){var s=a("835a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("77ef2ee6",s,!0,{sourceMap:!1,shadowMode:!1})},ba19:function(e,t,a){"use strict";a("4cf0")},ba1a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("KeyValue",{attrs:{"add-label":e.t("storageClass.custom.addLabel"),"read-allowed":!1,mode:e.mode},model:{value:e.value.parameters,callback:function(t){e.$set(e.value,"parameters",t)},expression:"value.parameters"}})},l=[],i=a("2958"),r={components:{KeyValue:i["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0}}},o=r,n=a("d802"),c=Object(n["a"])(o,s,l,!1,null,null,null);t["default"]=c.exports},ba71:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-c334cdea] .radio-group{display:flex}[data-v-c334cdea] .radio-group .radio-container{margin-right:30px}",""]),e.exports=t},bb351:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.save}},[t("div",{staticClass:"header mb-20"},[e.isCreate?t("FileSelector",{staticClass:"btn btn-sm bg-primary mt-10",attrs:{label:e.t("generic.readFromFile"),accept:".pub"},on:{selected:e.onKeySelected}}):e._e()],1),t("NameNsDescription",{key:e.randomString,ref:"nd",attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0}},"Tabbed",e.$attrs,!1),[t("Tab",{staticClass:"bordered-table",attrs:{name:"basic",label:e.t("harvester.sshKey.tabs.basics"),weight:1}},[t("LabeledInput",{attrs:{type:"multiline",mode:e.mode,"min-height":160,label:e.t("harvester.sshKey.keypair"),required:""},model:{value:e.publicKey,callback:function(t){e.publicKey=t},expression:"publicKey"}})],1)],1)],1)},l=[],i=a("ad61"),r=a("5ef9"),o=a("2e2b"),n=a("d444"),c=a("65b0"),d=a("3204"),u=a("06f6"),p=a("c78c"),v={name:"HarvesterEditKeypair",components:{Tab:r["a"],Tabbed:i["a"],CruResource:o["a"],LabeledInput:n["a"],FileSelector:d["b"],NameNsDescription:c["a"]},mixins:[p["a"]],props:{value:{type:Object,required:!0}},data(){return this.value.spec||(this.value.spec={},this.value.metadata={name:""}),{publicKey:this.value.spec.publicKey||"",randomString:""}},watch:{publicKey(e){this.value.spec.publicKey=e;const t=e.split(/\s+/);3===t.length&&t[2].includes("@")&&!this.value.metadata.name&&(this.value.metadata.name=t[2].split("@")[0],this.randomString=Object(u["p"])(10).toLowerCase())}},methods:{onKeySelected:Object(d["a"])("publicKey")}},m=v,h=(a("624f"),a("d802")),b=Object(h["a"])(m,s,l,!1,null,"65e6855e",null);t["default"]=b.exports},bce7:function(e,t,a){var s=a("df7e");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("14e40cd9",s,!0,{sourceMap:!1,shadowMode:!1})},bef4:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("form",{staticClass:"filled-height"},[e.$fetchState.pending?t("Loading"):t("CruResource",{attrs:{mode:e.mode,"validation-passed":!0,"selected-subtype":e.value._type,resource:e.value,errors:e.errors,"done-route":e.doneRoute,subtypes:e.secretSubTypes},on:{finish:e.saveSecret,"select-type":e.selectType,error:t=>e.errors=t}},[t("NameNsDescription",{attrs:{mode:e.mode,namespaced:!e.isCloud},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.isCustomSecretCreate?t("div",{staticClass:"row"},[t("div",{staticClass:"col span-3"},[t("LabeledSelect",{attrs:{options:e.secretTypes,searchable:!1,mode:e.mode,multiple:!1,reduce:e=>e.value,"label-key":"secret.type",required:""},on:{input:e.selectCustomType},model:{value:e.secretType,callback:function(t){e.secretType=t},expression:"secretType"}})],1),t("div",{staticClass:"col span-3"},[e.showCustomSecretType?t("LabeledInput",{directives:[{name:"focus",rawName:"v-focus"}],ref:"customType",attrs:{"label-key":"secret.customType",mode:e.mode,required:""},model:{value:e.value._type,callback:function(t){e.$set(e.value,"_type",t)},expression:"value._type"}}):e._e()],1)]):e._e(),t("div",{staticClass:"spacer"}),e.isCloud?t(e.cloudComponent,{ref:"cloudComponent",tag:"component",attrs:{"driver-name":e.driverName,value:e.value,mode:e.mode,"hide-sensitive-data":e.hideSensitiveData}}):t("Tabbed",{attrs:{"side-tabs":!0,"default-tab":"data"}},[t("Tab",{attrs:{name:"data",label:e.dataLabel,weight:99}},[t(e.dataComponent,{tag:"component",attrs:{value:e.value,mode:e.mode,"hide-sensitive-data":e.hideSensitiveData}})],1),t("Tab",{attrs:{name:"labels","label-key":"generic.labelsAndAnnotations",weight:-1}},[t("Labels",{attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)],1)],1)},l=[],i=a("50e8"),r=a("d802"),o=Object(r["a"])(i["a"],s,l,!1,null,null,null);t["default"]=o.exports},c285:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("Tabbed",{attrs:{"side-tabs":!0}},[t("Tab",{attrs:{name:"basic",label:e.t("harvester.addons.vmImport.titles.basic"),weight:99}},[t("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",mode:e.mode,options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},model:{value:e.value.spec.enabled,callback:function(t){e.$set(e.value.spec,"enabled",t)},expression:"value.spec.enabled"}}),e.value.spec.enabled?t("div",[t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.cpu"),required:!0,mode:e.mode},on:{input:e.update},model:{value:e.valuesContent.resources.limits.cpu,callback:function(t){e.$set(e.valuesContent.resources.limits,"cpu",t)},expression:"valuesContent.resources.limits.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.memory"),required:!0,mode:e.mode},on:{input:e.update},model:{value:e.valuesContent.resources.limits.memory,callback:function(t){e.$set(e.valuesContent.resources.limits,"memory",t)},expression:"valuesContent.resources.limits.memory"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.cpu"),required:!0,mode:e.mode},on:{input:e.update},model:{value:e.valuesContent.resources.requests.cpu,callback:function(t){e.$set(e.valuesContent.resources.requests,"cpu",t)},expression:"valuesContent.resources.requests.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.memory"),required:!0,mode:e.mode},on:{input:e.update},model:{value:e.valuesContent.resources.requests.memory,callback:function(t){e.$set(e.valuesContent.resources.requests,"memory",t)},expression:"valuesContent.resources.requests.memory"}})],1)]),t("br"),t("h2",[e._v(e._s(e.t("harvester.addons.vmImport.titles.pvc")))]),e.value.spec.enabled?t("div",[t("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",mode:e.mode,options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},on:{input:e.update},model:{value:e.valuesContent.pvcClaim.enabled,callback:function(t){e.$set(e.valuesContent.pvcClaim,"enabled",t)},expression:"valuesContent.pvcClaim.enabled"}}),e.valuesContent.pvcClaim.enabled?t("div",[t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("harvester.volume.size"),required:!0,mode:e.mode},on:{input:e.update},model:{value:e.valuesContent.pvcClaim.size,callback:function(t){e.$set(e.valuesContent.pvcClaim,"size",t)},expression:"valuesContent.pvcClaim.size"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledSelect",{staticClass:"mb-20",attrs:{options:e.storageClassOptions,label:e.t("harvester.storage.storageClass.label"),mode:e.mode},on:{input:e.update},model:{value:e.valuesContent.pvcClaim.storageClassName,callback:function(t){e.$set(e.valuesContent.pvcClaim,"storageClassName",t)},expression:"valuesContent.pvcClaim.storageClassName"}})],1)])]):e._e()],1):e._e()]):e._e()],1)],1)},l=[],i=a("d444"),r=a("ad61"),o=a("5ef9"),n=a("f032"),c=a("53fe"),d=a("c78c"),u=a("56a4"),p=a("b837"),v=a("1832");const m=["resources.requests.cpu","resources.requests.memory","resources.limits.cpu","resources.limits.memory","pvcClaim.enabled","pvcClaim.size","pvcClaim.storageClassName"],h={"resources.requests.cpu":"0.5","resources.requests.memory":"2Gi","resources.limits.cpu":"2","resources.limits.memory":"4Gi","pvcClaim.enabled":!1,"pvcClaim.size":"200Gi","pvcClaim.storageClassName":""};var b={name:"EditHarvesterLogging",components:{LabeledInput:i["a"],Tabbed:r["a"],Tab:o["a"],RadioGroup:n["b"],LabeledSelect:c["a"]},mixins:[d["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={storages:this.$store.dispatch(e+"/findAll",{type:u["O"]})};await Object(p["a"])(t)},data(){let e={};try{var t,a;e=JSON.parse((null===(t=this.value)||void 0===t||null===(a=t.spec)||void 0===a?void 0:a.valuesContent)||"{}")}catch(l){}const s=Object(v["e"])(e);return m.map(t=>{Object(v["g"])(e,t)||Object(v["j"])(s,t,h[t])}),{valuesContent:s}},computed:{storageClassOptions(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](u["O"]),a=t.filter(e=>{var t;return!(null!==(t=e.parameters)&&void 0!==t&&t.backingImage)}).map(e=>{const t=e.isDefault?`${e.name} (${this.t("generic.default")})`:e.name;return{label:t,value:e.name}})||[];return a}},methods:{update(){Object(v["j"])(this.value,"spec.valuesContent",JSON.stringify(this.valuesContent))},setDefaultClassName(){var e,t,a;const s=this.$store.getters["currentProduct"].inStore,l=this.$store.getters[s+"/all"](u["O"]).find(e=>e.isDefault);this.$set(this.valuesContent.pvcClaim,"storageClassName",(null===(e=this.valuesContent)||void 0===e||null===(t=e.pvcClaim)||void 0===t?void 0:t.storageClassName)||(null===l||void 0===l||null===(a=l.metadata)||void 0===a?void 0:a.name)||"longhorn"),this.update()}},watch:{"valuesContent.pvcClaim.enabled"(e){e&&this.setDefaultClassName()}}},f=b,g=(a("c6bf"),a("d802")),y=Object(g["a"])(f,s,l,!1,null,"ea8b4034",null);t["default"]=y.exports},c35e:function(e,t,a){var s=a("8b40");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("e7142768",s,!0,{sourceMap:!1,shadowMode:!1})},c3c6:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.kinesisStream.streamName")},model:{value:e.value.stream_name,callback:function(t){e.$set(e.value,"stream_name",t)},expression:"value.stream_name"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.kinesisStream.keyId"),"show-key-selector":!0},model:{value:e.value.aws_key_id,callback:function(t){e.$set(e.value,"aws_key_id",t)},expression:"value.aws_key_id"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.kinesisStream.secretKey"),"show-key-selector":!0},model:{value:e.value.aws_sec_key,callback:function(t){e.$set(e.value,"aws_sec_key",t)},expression:"value.aws_sec_key"}})],1)])])},l=[],i=a("0b97"),r=a("d444"),o={components:{LabeledInput:r["a"],SecretSelector:i["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},c6be:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".labeled-input.compact-input[data-v-d241759a]{padding:7px 10px}",""]),e.exports=t},c6bf:function(e,t,a){"use strict";a("704e")},c7ab:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("Tabbed",{attrs:{"side-tabs":!0}},[t("Tab",{attrs:{name:"basic",label:e.t("harvester.addons.vmImport.titles.basic"),weight:99}},[t("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",mode:e.mode,options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},model:{value:e.value.spec.enabled,callback:function(t){e.$set(e.value.spec,"enabled",t)},expression:"value.spec.enabled"}})],1)],1)},l=[],i=a("ad61"),r=a("5ef9"),o=a("f032"),n=a("c78c"),c={name:"EditSeederAddon",components:{Tabbed:i["a"],Tab:r["a"],RadioGroup:o["b"]},mixins:[n["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}}},d=c,u=(a("3597b"),a("d802")),p=Object(u["a"])(d,s,l,!1,null,"a4b7446a",null);t["default"]=p.exports},c8d5:function(e,t,a){var s=a("3169");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("25258af6",s,!0,{sourceMap:!1,shadowMode:!1})},c901:function(e,t,a){"use strict";a("e20a")},c980:function(e,t,a){var s=a("8d8f");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("02f87836",s,!0,{sourceMap:!1,shadowMode:!1})},cd9f:function(e,t,a){"use strict";a("f625")},cdd3:function(e,t,a){"use strict";a("7972")},cf12:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("img",e._b({ref:"img",attrs:{src:e.initialSrc}},"img",e.$attrs,!1))},l=[],i={props:{initialSrc:{type:String,default:a("efb3")},errorSrc:{type:String,default:a("efb3")},src:{type:String,default:null}},watch:{src(e,t){e!==t&&this.loadImage()}},mounted(){this.loadImage()},beforeDestroy(){const e=this.$refs.img;e&&e.removeEventListener("error",this.boundError)},methods:{loadImage(){const e=this.$refs.img;this.src&&(e.setAttribute("src",this.src),this.boundError=this.onError.bind(this),e.addEventListener("error",this.boundError))},onError(){const e=this.$refs.img;e&&e.setAttribute("src",this.errorSrc)}}},r=i,o=a("d802"),n=Object(o["a"])(r,s,l,!1,null,null,null);t["a"]=n.exports},cf23:function(e,t,a){"use strict";a("01ea")},cfbe:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{class:e.mode,on:{input:e.update}},[t("Banner",{attrs:{color:"warning"}},[t("t",{attrs:{k:"harvester.setting.storageNetwork.warning",raw:!0}})],1),t("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},on:{input:e.update},model:{value:e.openVlan,callback:function(t){e.openVlan=t},expression:"openVlan"}}),e.openVlan?t("div",[t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,required:"","label-key":"harvester.setting.storageNetwork.vlan"},model:{value:e.parsedDefaultValue.vlan,callback:function(t){e.$set(e.parsedDefaultValue,"vlan",e._n(t))},expression:"parsedDefaultValue.vlan"}}),t("LabeledSelect",{staticClass:"mb-20",attrs:{"label-key":"harvester.setting.storageNetwork.clusterNetwork",required:"",options:e.clusterNetworkOptions},on:{input:e.update},model:{value:e.parsedDefaultValue.clusterNetwork,callback:function(t){e.$set(e.parsedDefaultValue,"clusterNetwork",t)},expression:"parsedDefaultValue.clusterNetwork"}}),t("LabeledInput",{staticClass:"mb-5",attrs:{mode:e.mode,required:"",placeholder:e.t("harvester.setting.storageNetwork.range.placeholder"),"label-key":"harvester.setting.storageNetwork.range.label"},model:{value:e.parsedDefaultValue.range,callback:function(t){e.$set(e.parsedDefaultValue,"range",t)},expression:"parsedDefaultValue.range"}}),t("Tip",{staticClass:"mb-20",attrs:{icon:"icon icon-info",text:e.t("harvester.setting.storageNetwork.tip")}},[t("t",{attrs:{k:"harvester.setting.storageNetwork.tip",raw:!0}})],1),t("ArrayList",{attrs:{"show-header":!0,"default-add-value":e.defaultAddValue,mode:e.mode,"add-label":e.t("harvester.setting.storageNetwork.exclude.addIp")},on:{input:e.update},scopedSlots:e._u([{key:"column-headers",fn:function(){return[t("div",{staticClass:"box"},[t("div",{staticClass:"key"},[e._v(" "+e._s(e.t("harvester.setting.storageNetwork.exclude.label"))+" ")])])]},proxy:!0},{key:"columns",fn:function(a){return[t("div",{staticClass:"key"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.row.value,expression:"scope.row.value"}],attrs:{placeholder:e.t("harvester.setting.storageNetwork.exclude.placeholder")},domProps:{value:a.row.value},on:{input:[function(t){t.target.composing||e.$set(a.row,"value",t.target.value)},e.update]}})])]}}],null,!1,45660908),model:{value:e.exclude,callback:function(t){e.exclude=t},expression:"exclude"}})],1):e._e()],1)},l=[],i=a("d444"),r=a("53fe"),o=a("f032"),n=a("da9e");const c=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\/(3[0-2]|2[0-9]|1[0-9]|[0-9])$/;function d(e){return!!e.match(c)}var u=a("d6a6"),p=a("dffb"),v=a("1fc2"),m=a("90cd"),h=a("b837"),b=a("56a4"),f={name:"HarvesterEditStorageNetwork",components:{ArrayList:n["a"],Tip:v["a"],Banner:p["a"],LabeledInput:i["a"],LabeledSelect:r["a"],RadioGroup:o["b"]},props:{registerBeforeHook:{type:Function,required:!0},mode:{type:String,default:u["B"]},value:{type:Object,default:()=>({})}},async fetch(){const e=this.$store.getters["currentProduct"].inStore;await Object(h["a"])({clusterNetworks:this.$store.dispatch(e+"/findAll",{type:m["b"].CLUSTER_NETWORK}),vlanStatus:this.$store.dispatch(e+"/findAll",{type:m["b"].VLAN_STATUS}),nodes:this.$store.dispatch(e+"/findAll",{type:b["z"]})})},data(){var e,t;let a={},s=!1;try{a=JSON.parse(this.value.value),s=!0}catch(i){a={vlan:"",clusterNetwork:"",range:"",exclude:[]}}const l=(null===(e=a)||void 0===e||null===(t=e.exclude)||void 0===t?void 0:t.toString().split(","))||[];return{openVlan:s,errors:[],exclude:l,parsedDefaultValue:a,defaultAddValue:""}},created(){this.registerBeforeHook&&this.registerBeforeHook(this.willSave,"willSave")},computed:{clusterNetworkOptions(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](m["b"].CLUSTER_NETWORK)||[];return t.map(e=>{const t=!e.isReadyForStorageNetwork;return{label:t?`${e.id} (${this.t("generic.notReady")})`:e.id,value:e.id,disabled:t}})}},methods:{update(){const e=this.exclude.filter(e=>e);Array.isArray(e)&&e.length>0?this.parsedDefaultValue.exclude=e:delete this.parsedDefaultValue.exclude;const t=JSON.stringify(this.parsedDefaultValue);this.openVlan?this.$set(this.value,"value",t):this.$set(this.value,"value","")},willSave(){this.update();const e=[];if(!this.openVlan)return Promise.resolve();{const t=!!/^(?:(?:[0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}(?:[0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([1-9]|[1-2]\d|3[0-2])$/.test(this.parsedDefaultValue.range);if(t||e.push(this.t("harvester.setting.storageNetwork.range.invalid",null,!0)),this.parsedDefaultValue.vlan||e.push(this.t("validation.required",{key:this.t("harvester.setting.storageNetwork.vlan")},!0)),this.parsedDefaultValue.clusterNetwork||e.push(this.t("validation.required",{key:this.t("harvester.setting.storageNetwork.clusterNetwork")},!0)),this.exclude){const t=this.exclude.find(e=>!d(e));t&&e.push(this.t("harvester.setting.storageNetwork.exclude.invalid",null,!0))}}return e.length>0?Promise.reject(e):Promise.resolve()}}},g=f,y=a("d802"),C=Object(y["a"])(g,s,l,!1,null,null,null);t["default"]=C.exports},d013:function(e,t,a){var s=a("76c7");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("d8579bde",s,!0,{sourceMap:!1,shadowMode:!1})},d019:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("CruResource",{staticClass:"project",attrs:{"done-route":e.value.listLocation,errors:e.fvUnreportedValidationErrors,mode:e.mode,resource:e.value,subtypes:[],"can-yaml":!1,"validation-passed":e.fvFormIsValid},on:{error:t=>e.errors=t,finish:e.save,cancel:e.done}},[t("NameNsDescription",{attrs:{"name-editable":!0,mode:e.mode,namespaced:!1,"description-key":"spec.description","description-disabled":e.isDescriptionDisabled,"name-key":"spec.displayName","normalize-name":!1,rules:{name:e.fvGetAndReportPathRules("spec.displayName"),namespace:[],description:[]}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-3"},[e.pspOptions?t("LabeledSelect",{staticClass:"psp",attrs:{mode:e.mode,options:e.pspOptions,disabled:!e.canEditPSPBindings,label:e.t("project.psp.label")},model:{value:e.value.spec.podSecurityPolicyTemplateId,callback:function(t){e.$set(e.value.spec,"podSecurityPolicyTemplateId",t)},expression:"value.spec.podSecurityPolicyTemplateId"}}):e._e()],1)]),t("Tabbed",{attrs:{"side-tabs":!0}},[e.canViewMembers?t("Tab",{attrs:{name:"members",label:e.t("project.members.label"),weight:10}},[e.showBannerForOnlyManagingMembers?t("Banner",{attrs:{color:"info",label:e.t("project.membersEditOnly")}}):e._e(),t("ProjectMembershipEditor",{attrs:{mode:e.mode,"parent-id":e.value.id},on:{"has-owner-changed":e.onHasOwnerChanged,"membership-update":e.onMembershipUpdate}})],1):e._e(),t("Tab",{attrs:{name:"resource-quotas",label:e.t("project.resourceQuotas"),weight:9}},[t("ResourceQuota",{attrs:{mode:e.canEditTabElements,types:e.isStandaloneHarvester?e.HARVESTER_TYPES:e.RANCHER_TYPES},on:{remove:e.removeQuota},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),t("Tab",{attrs:{name:"container-default-resource-limit",label:e.resourceQuotaLabel,weight:8}},[t("ContainerResourceLimit",{attrs:{mode:e.canEditTabElements,"show-tip":!1,"register-before-hook":e.registerBeforeHook},model:{value:e.value.spec.containerDefaultResourceLimit,callback:function(t){e.$set(e.value.spec,"containerDefaultResourceLimit",t)},expression:"value.spec.containerDefaultResourceLimit"}})],1),t("Tab",{attrs:{name:"labels-and-annotations","label-key":"generic.labelsAndAnnotations",weight:7}},[t("Labels",{attrs:{"default-container-class":"labels-and-annotations-container",value:e.value,mode:e.canEditTabElements,"display-side-by-side":!1}})],1)],1)],1)},l=[],i=a("9ce4"),r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[e.showTip?t("div",{staticClass:"col span-12"},[t("p",{staticClass:"helper-text mb-10"},[e.mode===e.viewMode?t("t",{attrs:{k:"containerResourceLimit.helpTextDetail"}}):t("t",{attrs:{k:"containerResourceLimit.helpText"}})],1)]):e._e()]),t("div",{staticClass:"row mb-20"},[t("span",{staticClass:"col span-6"},[t("UnitInput",{attrs:{placeholder:e.t("containerResourceLimit.cpuPlaceholder"),label:e.t("containerResourceLimit.requestsCpu"),mode:e.mode,"input-exponent":-1,"output-modifier":!0,"base-unit":e.t("suffix.cpus"),"data-testid":"cpu-reservation"},on:{input:e.updateLimits},model:{value:e.requestsCpu,callback:function(t){e.requestsCpu=t},expression:"requestsCpu"}})],1),t("span",{staticClass:"col span-6"},[t("UnitInput",{attrs:{placeholder:e.t("containerResourceLimit.memPlaceholder"),label:e.t("containerResourceLimit.requestsMemory"),mode:e.mode,"input-exponent":2,increment:1024,"output-modifier":!0,"data-testid":"memory-reservation"},on:{input:e.updateLimits},model:{value:e.requestsMemory,callback:function(t){e.requestsMemory=t},expression:"requestsMemory"}})],1)]),t("div",{staticClass:"row mb-20"},[t("span",{staticClass:"col span-6"},[t("UnitInput",{attrs:{placeholder:e.t("containerResourceLimit.cpuPlaceholder"),label:e.t("containerResourceLimit.limitsCpu"),mode:e.mode,"input-exponent":-1,"output-modifier":!0,"base-unit":e.t("suffix.cpus"),"data-testid":"cpu-limit"},on:{input:e.updateLimits},model:{value:e.limitsCpu,callback:function(t){e.limitsCpu=t},expression:"limitsCpu"}})],1),t("span",{staticClass:"col span-6"},[t("UnitInput",{attrs:{placeholder:e.t("containerResourceLimit.memPlaceholder"),label:e.t("containerResourceLimit.limitsMemory"),mode:e.mode,"input-exponent":2,increment:1024,"output-modifier":!0,"data-testid":"memory-limit"},on:{input:e.updateLimits},model:{value:e.limitsMemory,callback:function(t){e.limitsMemory=t},expression:"limitsMemory"}})],1)]),e.handleGpuLimit?t("div",{staticClass:"row"},[t("span",{staticClass:"col span-6"},[t("UnitInput",{attrs:{placeholder:e.t("containerResourceLimit.gpuPlaceholder"),label:e.t("containerResourceLimit.limitsGpu"),mode:e.mode,"base-unit":e.t("suffix.gpus"),"data-testid":"gpu-limit"},on:{input:e.updateLimits},model:{value:e.limitsGpu,callback:function(t){e.limitsGpu=t},expression:"limitsGpu"}})],1)]):e._e()])},o=[],n=a("330a"),c=a.n(n),d=a("2007"),u=a("b0bd"),p=a("1832"),v=a("d6a6"),m={components:{UnitInput:d["a"]},props:{mode:{type:String,default:"create"},namespace:{type:Object,default:null},value:{type:Object,default:()=>({})},handleGpuLimit:{type:Boolean,default:!0},registerBeforeHook:{type:Function,default:null},showTip:{type:Boolean,default:!0}},data(){const{limitsCpu:e,limitsMemory:t,requestsCpu:a,requestsMemory:s,limitsGpu:l}=this.value;return{limitsCpu:e,limitsMemory:t,requestsCpu:a,requestsMemory:s,limitsGpu:l,viewMode:v["I"]}},watch:{value(){const{limitsCpu:e,limitsMemory:t,requestsCpu:a,requestsMemory:s,limitsGpu:l}=this.value;this.limitsCpu=e,this.limitsMemory=t,this.requestsCpu=a,this.requestsMemory=s,this.limitsGpu=l}},computed:{detailTopColumns(){return[{title:this.$store.getters["i18n/t"]("generic.created"),name:"created"}]}},created(){var e;null!==this&&void 0!==this&&null!==(e=this.namespace)&&void 0!==e&&e.id&&this.initLimits(),this.registerBeforeHook&&this.registerBeforeHook(this.updateBeforeSave)},methods:{updateLimits(){const{limitsCpu:e,limitsMemory:t,requestsCpu:a,requestsMemory:s,limitsGpu:l}=this;this.$emit("input",Object(p["d"])({limitsCpu:e,limitsMemory:t,requestsCpu:a,limitsGpu:l,requestsMemory:s}))},updateBeforeSave(e){const{limitsCpu:t,limitsMemory:a,requestsCpu:s,requestsMemory:l,limitsGpu:i}=this,r=this.namespace,o=Object(p["d"])({limitsCpu:t,limitsMemory:a,requestsCpu:s,limitsGpu:i,requestsMemory:l});r&&r.setAnnotation(u["h"],JSON.stringify(o))},initLimits(){var e;const t=this.namespace,a=null===t||void 0===t||null===(e=t.metadata)||void 0===e?void 0:e.annotations[u["h"]];if(!c()(a)&&"null"!==a){const{limitsCpu:e,limitsMemory:t,requestsCpu:s,requestsMemory:l,limitsGpu:i}=JSON.parse(a);this.limitsCpu=e,this.limitsMemory=t,this.requestsCpu=s,this.requestsMemory=l,this.limitsGpu=i}}}},h=m,b=a("d802"),f=Object(b["a"])(h,r,o,!1,null,null,null),g=f.exports,y=a("c78c"),C=a("d391"),k=a("2e2b"),w=a("1eaf"),x=a("53fe"),S=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"headers mb-10"},[t("div",{staticClass:"mr-10"},[t("label",[e._v(e._s(e.t("resourceQuota.headers.resourceType")))])]),t("div",{staticClass:"mr-20"},[t("label",[e._v(e._s(e.t("resourceQuota.headers.projectLimit")))])]),t("div",{staticClass:"mr-10"},[t("label",[e._v(e._s(e.t("resourceQuota.headers.namespaceDefaultLimit")))])])]),t("ArrayList",{attrs:{label:"Resources","add-label":e.t("resourceQuota.add.label"),"default-add-value":e.remainingTypes()[0]?e.remainingTypes()[0].value:"","add-allowed":e.remainingTypes().length>0,mode:e.mode},on:{remove:e.emitRemove},scopedSlots:e._u([{key:"columns",fn:function(a){return[t("Row",{attrs:{mode:e.mode,types:e.remainingTypes(e.typeValues[a.i]),type:e.typeValues[a.i]},on:{"type-change":function(t){return e.updateType(a.i,t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]}}]),model:{value:e.typeValues,callback:function(t){e.typeValues=t},expression:"typeValues"}})],1)},_=[],O=a("da9e"),N=function(){var e=this,t=e._self._c;return e.typeOption?t("div",{staticClass:"row"},[t("Select",{staticClass:"mr-10",attrs:{mode:e.mode,value:e.type,options:e.types},on:{input:function(t){return e.updateType(t)}}}),t("UnitInput",{staticClass:"mr-10",attrs:{mode:e.mode,placeholder:e.typeOption.placeholder,increment:e.typeOption.increment,"input-exponent":e.typeOption.inputExponent,"base-unit":e.typeOption.baseUnit,"output-modifier":!0},model:{value:e.value.spec.resourceQuota.limit[e.type],callback:function(t){e.$set(e.value.spec.resourceQuota.limit,e.type,t)},expression:"value.spec.resourceQuota.limit[type]"}}),t("UnitInput",{attrs:{mode:e.mode,placeholder:e.typeOption.placeholder,increment:e.typeOption.increment,"input-exponent":e.typeOption.inputExponent,"base-unit":e.typeOption.baseUnit,"output-modifier":!0},model:{value:e.value.spec.namespaceDefaultResourceQuota.limit[e.type],callback:function(t){e.$set(e.value.spec.namespaceDefaultResourceQuota.limit,e.type,t)},expression:"value.spec.namespaceDefaultResourceQuota.limit[type]"}})],1):e._e()},$=[],L=a("81a6");const I=[{value:"configMaps",inputExponent:0,baseUnit:"",labelKey:"resourceQuota.configMaps",placeholderKey:"resourceQuota.projectLimit.unitlessPlaceholder"},{value:"limitsCpu",inputExponent:-1,baseUnitKey:"suffix.cpus",labelKey:"resourceQuota.limitsCpu",placeholderKey:"resourceQuota.projectLimit.cpuPlaceholder"},{value:"limitsMemory",inputExponent:2,increment:1024,labelKey:"resourceQuota.limitsMemory",placeholderKey:"resourceQuota.projectLimit.memoryPlaceholder"},{value:"persistentVolumeClaims",inputExponent:0,baseUnit:"",labelKey:"resourceQuota.persistentVolumeClaims",placeholderKey:"resourceQuota.projectLimit.unitlessPlaceholder"},{value:"pods",inputExponent:0,baseUnit:"",labelKey:"resourceQuota.pods",placeholderKey:"resourceQuota.projectLimit.unitlessPlaceholder"},{value:"replicationControllers",inputExponent:0,baseUnit:"",labelKey:"resourceQuota.replicationControllers",placeholderKey:"resourceQuota.projectLimit.unitlessPlaceholder"},{value:"requestsCpu",inputExponent:-1,baseUnitKey:"suffix.cpus",labelKey:"resourceQuota.requestsCpu",placeholderKey:"resourceQuota.projectLimit.cpuPlaceholder"},{value:"requestsMemory",inputExponent:2,increment:1024,labelKey:"resourceQuota.requestsMemory",placeholderKey:"resourceQuota.projectLimit.memoryPlaceholder"},{value:"requestsStorage",units:"storage",inputExponent:2,increment:1024,labelKey:"resourceQuota.requestsStorage",placeholderKey:"resourceQuota.projectLimit.storagePlaceholder"},{value:"secrets",units:"unitless",inputExponent:0,baseUnit:"",labelKey:"resourceQuota.secrets",placeholderKey:"resourceQuota.projectLimit.unitlessPlaceholder"},{value:"services",units:"unitless",inputExponent:0,baseUnit:"",labelKey:"resourceQuota.services",placeholderKey:"resourceQuota.projectLimit.unitlessPlaceholder"},{value:"servicesLoadBalancers",units:"unitless",inputExponent:0,baseUnit:"",labelKey:"resourceQuota.servicesLoadBalancers",placeholderKey:"resourceQuota.projectLimit.unitlessPlaceholder"},{value:"servicesNodePorts",units:"unitless",inputExponent:0,baseUnit:"",labelKey:"resourceQuota.servicesNodePorts",placeholderKey:"resourceQuota.projectLimit.unitlessPlaceholder"}],T=[{value:"limitsCpu",inputExponent:-1,baseUnitKey:"suffix.cpus",labelKey:"resourceQuota.limitsCpu",placeholderKey:"resourceQuota.projectLimit.cpuPlaceholder"},{value:"limitsMemory",inputExponent:2,increment:1024,labelKey:"resourceQuota.limitsMemory",placeholderKey:"resourceQuota.projectLimit.memoryPlaceholder"},{value:"requestsCpu",inputExponent:-1,baseUnitKey:"suffix.cpus",labelKey:"resourceQuota.requestsCpu",placeholderKey:"resourceQuota.projectLimit.cpuPlaceholder"},{value:"requestsMemory",inputExponent:2,increment:1024,labelKey:"resourceQuota.requestsMemory",placeholderKey:"resourceQuota.projectLimit.memoryPlaceholder"}],D={typeOption(){return this.types.find(e=>e.value===this.type)}},M={mappedTypes(){return this.types.map(e=>({label:this.t(e.labelKey),baseUnit:e.baseUnitKey?this.t(e.baseUnitKey):void 0,placeholder:this.t(e.placeholderKey),...e}))}};var E={components:{Select:L["a"],UnitInput:d["a"]},props:{mode:{type:String,required:!0},types:{type:Array,default:()=>[]},type:{type:String,default:""},value:{type:Object,default:()=>({})}},computed:{...D},methods:{updateType(e){"undefined"!==typeof this.value.spec.resourceQuota.limit[this.type]&&this.$delete(this.value.spec.resourceQuota.limit,this.type),"undefined"!==typeof this.value.spec.namespaceDefaultResourceQuota.limit[this.type]&&this.$delete(this.value.spec.namespaceDefaultResourceQuota.limit,this.type),this.$emit("type-change",e)}}},R=E,V=(a("3443a"),Object(b["a"])(R,N,$,!1,null,"3c9d6f42",null)),j=V.exports,P={components:{ArrayList:O["a"],Row:j},props:{mode:{type:String,required:!0},value:{type:Object,default:()=>({})},types:{type:Array,default:()=>[]}},data(){return this.$set(this.value,"spec",this.value.spec||{}),this.$set(this.value.spec,"namespaceDefaultResourceQuota",this.value.spec.namespaceDefaultResourceQuota||{limit:{}}),this.$set(this.value.spec,"resourceQuota",this.value.spec.resourceQuota||{limit:{}}),{typeValues:Object.keys(this.value.spec.resourceQuota.limit)}},computed:{...M},methods:{updateType(e,t){this.$set(this.typeValues,e,t)},remainingTypes(e){return this.mappedTypes.filter(t=>!this.typeValues.includes(t.value)||t.value===e)},emitRemove(e){var t;this.$emit("remove",null===(t=e.row)||void 0===t?void 0:t.value)}}},A=P,q=(a("2eeb"),Object(b["a"])(A,S,_,!1,null,"11e76cd4",null)),B=q.exports,U=a("5ef9"),K=a("ad61"),F=a("65b0"),H=a("56a4"),G=a("79a8"),J=a("2761"),z=a("9314"),Q=a("dffb"),Y={components:{ContainerResourceLimit:g,CruResource:k["a"],Labels:w["a"],LabeledSelect:x["a"],NameNsDescription:F["a"],ProjectMembershipEditor:J["b"],ResourceQuota:B,Tabbed:K["a"],Tab:U["a"],Banner:Q["a"]},mixins:[y["a"],C["a"]],async fetch(){this.$store.getters["management/canList"](H["t"].POD_SECURITY_POLICY_TEMPLATE)&&(this.allPSPs=await this.$store.dispatch("management/findAll",{type:H["t"].POD_SECURITY_POLICY_TEMPLATE}));const e=this.$store.getters["management/schemaFor"](H["t"].PSP_TEMPLATE_BINDING);this.canEditPSPBindings=!!e},data(){var e,t,a;return this.$set(this.value,"spec",this.value.spec||{}),this.$set(this.value.spec,"podSecurityPolicyTemplateId",(null===(e=this.value.status)||void 0===e?void 0:e.podSecurityPolicyTemplateId)||""),{allPSPs:[],projectRoleTemplateBindingSchema:this.$store.getters["management/schemaFor"](H["t"].PROJECT_ROLE_TEMPLATE_BINDING),createLocation:{name:"c-cluster-product-resource-create",params:{product:G["a"],resource:H["t"].PROJECT_ROLE_TEMPLATE_BINDING},query:{[v["o"]]:null===(t=this.project)||void 0===t||null===(a=t.id)||void 0===a?void 0:a.replace("/",":")}},resource:H["t"].PROJECT_ROLE_TEMPLATE_BINDING,saveBindings:null,membershipHasOwner:!1,membershipUpdate:{},HARVESTER_TYPES:T,RANCHER_TYPES:I,fvFormRuleSets:[{path:"spec.displayName",rules:["required"]}],canEditPSPBindings:!0}},computed:{...Object(i["a"])(["currentCluster","isStandaloneHarvester"]),canViewMembers(){return Object(J["a"])(this.$store)},canEditProject(){var e,t;return null===(e=this.value)||void 0===e||null===(t=e.links)||void 0===t?void 0:t.update},isDescriptionDisabled(){return this.mode===v["B"]&&!this.canEditProject||!1},canEditTabElements(){return this.mode!==v["B"]||this.canEditProject?this.mode:v["I"]},showBannerForOnlyManagingMembers(){return this.mode===v["B"]&&!this.canEditProject},isK3s(){var e,t;return((null===(e=this.currentCluster)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.kubernetesVersion)||"").includes("k3s")},pspOptions(){var e;if(this.isK3s||!this.currentCluster.spec.defaultPodSecurityPolicyTemplateName)return null;const t=[{label:this.t("project.psp.default"),value:""}];if(this.allPSPs)for(const s of this.allPSPs)t.push({label:s.nameDisplay,value:s.id});const a=null===(e=this.value.status)||void 0===e?void 0:e.podSecurityPolicyTemplateId;return a&&!t.find(e=>e.value===a)&&t.unshift({label:this.t("project.psp.current",{value:a}),value:a}),t},isHarvester(){return this.$store.getters["currentProduct"].inStore===z["a"]},resourceQuotaLabel(){return this.isHarvester?this.t("project.vmDefaultResourceLimit"):this.t("project.containerDefaultResourceLimit")}},watch:{hasOwner(){this.errors=this.hasOwner?[]:[this.t("project.haveOneOwner")]}},created(){this.$set(this.value.metadata,"namespace",this.$store.getters["currentCluster"].id),this.$set(this.value,"spec",this.value.spec||{}),this.$set(this.value.spec,"containerDefaultResourceLimit",this.value.spec.containerDefaultResourceLimit||{})},methods:{async save(e){try{if(this.mode===v["z"]){const e=await this.value.save();this.membershipUpdate.save&&await this.membershipUpdate.save(e.id)}else if(this.mode===v["B"]&&(this.canEditProject&&(await this.value.save(!0),await this.$store.dispatch("management/find",{type:H["t"].PROJECT,id:this.value.id,opt:{force:!0}})),this.membershipUpdate.save)){const e=await this.value.norman;await this.membershipUpdate.save(e.id)}e(!0),this.$router.replace(this.value.listLocation)}catch(t){this.errors.push(t),e(!1)}},onHasOwnerChanged(e){this.$set(this,"membershipHasOwner",e)},onMembershipUpdate(e){this.$set(this,"membershipUpdate",e)},removeQuota(e){["resourceQuota","namespaceDefaultResourceQuota"].forEach(t=>{var a,s,l,i,r,o,n,c,d,u,p,v;null!==(a=this.value)&&void 0!==a&&null!==(s=a.spec[t])&&void 0!==s&&s.limit&&null!==(l=this.value)&&void 0!==l&&null!==(i=l.spec[t])&&void 0!==i&&i.limit[e]&&(null===(d=this.value)||void 0===d||(null===(u=d.spec[t])||void 0===u||delete u.limit[e]));null!==(r=this.value)&&void 0!==r&&null!==(o=r.spec[t])&&void 0!==o&&o.usedLimit&&null!==(n=this.value)&&void 0!==n&&null!==(c=n.spec[t])&&void 0!==c&&c.usedLimit[e]&&(null===(p=this.value)||void 0===p||(null===(v=p.spec[t])||void 0===v||delete v.usedLimit[e]))})}}},W=Y,X=Object(b["a"])(W,s,l,!1,null,null,null);t["default"]=X.exports},d066:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"forward"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-10"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.forward.host")},model:{value:e.value.servers[0].host,callback:function(t){e.$set(e.value.servers[0],"host",t)},expression:"value.servers[0].host"}})],1),t("div",{staticClass:"col span-2"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,type:"number",min:"1",max:"65535",label:e.t("logging.forward.port")},model:{value:e.port,callback:function(t){e.port=t},expression:"port"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.forward.username"),"show-key-selector":!0},model:{value:e.value.servers[0].username,callback:function(t){e.$set(e.value.servers[0],"username",t)},expression:"value.servers[0].username"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.forward.password"),"show-key-selector":!0},model:{value:e.value.servers[0].password,callback:function(t){e.$set(e.value.servers[0],"password",t)},expression:"value.servers[0].password"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.forward.sharedKey"),"show-key-selector":!0},model:{value:e.value.servers[0].shared_key,callback:function(t){e.$set(e.value.servers[0],"shared_key",t)},expression:"value.servers[0].shared_key"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.certificate")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.forward.clientCertPath"),"show-key-selector":!0},model:{value:e.value.tls_client_cert_path,callback:function(t){e.$set(e.value,"tls_client_cert_path",t)},expression:"value.tls_client_cert_path"}})],1),t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.forward.clientPrivateKeyPath"),"show-key-selector":!0},model:{value:e.value.tls_client_private_key_path,callback:function(t){e.$set(e.value,"tls_client_private_key_path",t)},expression:"value.tls_client_private_key_path"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.forward.clientPrivateKeyPassphrase"),"show-key-selector":!0},model:{value:e.value.tls_client_private_key_passphrase,callback:function(t){e.$set(e.value,"tls_client_private_key_passphrase",t)},expression:"value.tls_client_private_key_passphrase"}})],1)])])},l=[],i=a("d444"),r=a("0b97"),o=a("05b4"),n={components:{LabeledInput:i["a"],SecretSelector:r["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}},computed:{port:{get(){return this.value.servers[0].port},set(e){Object(o["updatePort"])(e=>this.$set(this.value.servers[0],"port",e),e)}}}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},d093:function(e,t,a){"use strict";a("9ade")},d0cf:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".tag[data-v-3dbf0e5d]{border:1px solid var(--primary);border-radius:var(--border-radius);box-sizing:border-box;margin:0;padding:0;font-size:14px;line-height:20px;list-style:none;display:inline-block;height:auto;-webkit-margin-end:8px;margin-inline-end:8px;padding-inline:7px;white-space:nowrap;background:var(--accent-btn);opacity:1;text-align:start;color:var(--link);margin-bottom:10px;margin-right:8px;padding-top:8px;padding-bottom:8px}.tag.add[data-v-3dbf0e5d],.tag i[data-v-3dbf0e5d]{cursor:pointer}.tag.add[data-v-3dbf0e5d]{border-style:dashed}.tag.add[data-v-3dbf0e5d],.tag.input[data-v-3dbf0e5d]{background:var(--body-bg)}.tag.input[data-v-3dbf0e5d]{border:none;border-radius:none;padding:0}",""]),e.exports=t},d152:function(e,t,a){"use strict";a("781c")},d17b:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-d02a5b74] .radio-group{display:flex}[data-v-d02a5b74] .radio-group .radio-container{margin-right:30px}",""]),e.exports=t},d227:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".vm__credentials-users .hasUsers.labeled-select.edit.taggable .labeled-tooltip .icon.status-icon{top:30px}",""]),e.exports=t},d2ad:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-8451d636] .radio-group{display:flex}[data-v-8451d636] .radio-group .radio-container{margin-right:30px}",""]),e.exports=t},d335:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"button[data-v-d37d3ce4]{all:unset;height:0;position:relative;top:-35px;float:right;margin-right:7px;cursor:pointer}button .align-value[data-v-d37d3ce4]{padding-top:7px}",""]),e.exports=t},d45f:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".pool-headers[data-v-00741a2f],.pool-row[data-v-00741a2f]{display:grid;grid-column-gap:1.75%;margin-bottom:10px;align-items:center}.pool-headers.cidr[data-v-00741a2f],.pool-row.cidr[data-v-00741a2f]{grid-template-columns:41.75% 41.75% 15%}.pool-headers.range[data-v-00741a2f],.pool-row.range[data-v-00741a2f]{grid-template-columns:20% 20% 20% 20% 15%}",""]),e.exports=t},d4dd:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"output"},[t("CruResource",{attrs:{"done-route":e.doneRoute,mode:e.cruMode,resource:e.value,subtypes:[],"validation-passed":!0,errors:e.errors,"can-yaml":!0},on:{error:t=>e.errors=t,finish:e.save,cancel:e.done}},[e.isView?e._e():t("NameNsDescription",{attrs:{value:e.value,mode:e.mode,label:"generic.name","register-before-hook":e.registerBeforeHook,namespaced:e.value.type!==e.LOGGING.CLUSTER_OUTPUT}}),e.selectedProviders.length>1?t("Banner",{attrs:{color:"info"}},[e._v(" "+e._s(e.t("logging.output.tips.singleProvider"))+" ")]):e.value.allProvidersSupported?t("Tabbed",{ref:"tabbed",attrs:{"side-tabs":!0},on:{changed:function(t){return e.tabChanged(t)}}},[t("Tab",{attrs:{name:"Output",label:"Output",weight:2}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{staticClass:"mb-20",attrs:{options:e.outputTypeOptions,disabled:!e.isCreate,mode:e.mode,label:e.t("generic.type")},model:{value:e.loggingType,callback:function(t){e.loggingType=t},expression:"loggingType"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:"Output",options:e.providers,mode:e.mode},model:{value:e.selectedProvider,callback:function(t){e.selectedProvider=t},expression:"selectedProvider"}})],1)]),t("div",{staticClass:"spacer"}),t(e.getComponent(e.selectedProvider),{tag:"component",attrs:{value:e.value.spec[e.selectedProvider],namespace:e.value.namespace,mode:e.mode}})],1),t("Tab",{attrs:{name:"buffer",label:e.t("logging.output.buffer.label"),weight:1}},[t("YamlEditor",{ref:"yaml",attrs:{scrolling:!1,"initial-yaml-values":e.initialBufferYaml,"editor-mode":e.isView?e.EDITOR_MODES.VIEW_CODE:e.EDITOR_MODES.EDIT_CODE},on:{onReady:e.onYamlEditorReady},model:{value:e.bufferYaml,callback:function(t){e.bufferYaml=t},expression:"bufferYaml"}})],1),e.isView?e._e():t("Tab",{attrs:{name:"labels-and-annotations","label-key":"generic.labelsAndAnnotations",weight:0}},[t("Labels",{attrs:{"default-container-class":"labels-and-annotations-container",value:e.value,mode:e.mode,"display-side-by-side":!1}})],1)],1):t("Banner",{attrs:{color:"info"}},[e._v(" "+e._s(e.t("logging.output.tips.multipleProviders"))+" ")])],1)],1)},l=[],i=a("c78c"),r=a("56a4"),o=a("ad61"),n=a("5ef9"),c=a("2e2b"),d=a("65b0"),u=a("1eaf"),p=a("53fe"),v=a("dffb"),m=a("37c5"),h=a("d6a6"),b=a("1832"),f=a("9e74"),g=a.n(f),y=a("330a"),C=a.n(y),k=a("7838"),w=a.n(k),x=a("3811"),S=a("c349"),_=a("7c47");const O="Logging/Event",N="Audit Only",$=[O,N];var L={components:{Banner:v["a"],CruResource:c["a"],Labels:u["a"],LabeledSelect:p["a"],NameNsDescription:d["a"],Tab:n["a"],Tabbed:o["a"],YamlEditor:S["b"]},mixins:[i["a"]],async fetch(){await this.$store.dispatch("harvester/findAll",{type:r["J"]})},data(){var e,t;const a=this.$store.getters["harvester/all"](r["I"]);this.isCreate&&(this.value.metadata.namespace="default"),Object(b["j"])(this.value,"spec",this.value.spec||{});const s=m["PROVIDERS"].map(e=>({...e,value:e.name,label:this.t(e.labelKey)}));this.mode!==h["I"]&&(this.$set(this.value,"spec",this.value.spec||{}),s.forEach(e=>{this.$set(this.value.spec,e.name,this.value.spec[e.name]||Object(b["e"])(e.default))}));const l=s.filter(e=>{var t;const a=this.value.spec[e.name],s="forward"===e.name?(null===a||void 0===a||null===(t=a.servers)||void 0===t?void 0:t[0])||{}:a;return!C()(s)&&!g()(s,e.default)}),i=(null===l||void 0===l||null===(e=l[0])||void 0===e?void 0:e.value)||s[0].value;let o;return C()(null===(t=this.value.spec[i])||void 0===t?void 0:t.buffer)?(o=Object(x["b"])(a,`logging.banzaicloud.io.v1beta1.output.spec.${i}.buffer`,[]),o=o.substring(o.indexOf("\n")+1).replaceAll("#  ","#")):o=w.a.dump(this.value.spec[i].buffer),{bufferYaml:o,initialBufferYaml:o,providers:s,selectedProvider:i,hasMultipleProvidersSelected:l.length>1,selectedProviders:l,LOGGING:r["r"],loggingType:this.value.loggingType!==_["c"].AUDIT?O:N}},computed:{EDITOR_MODES(){return S["a"]},enabledProviders(){return this.providers.filter(e=>e.enabled)},cruMode(){return this.selectedProviders.length>1||!this.value.allProvidersSupported?h["I"]:this.mode},outputTypeOptions(){return $}},created(){this.registerBeforeHook(this.willSave,"willSave")},methods:{getComponent(e){return a("f2f1")("./"+e).default},launch(e){this.$refs.tabbed.select(e.name)},willSave(){this.value.spec={[this.selectedProvider]:this.value.spec[this.selectedProvider]};const e=w.a.load(this.bufferYaml);C()(e)?this.$delete(this.value.spec[this.selectedProvider],"buffer"):this.value.spec[this.selectedProvider].buffer=e,this.loggingType===N&&this.$set(this.value.spec,"loggingRef","harvester-kube-audit-log-ref")},tabChanged({tab:e}){"buffer"===e.name&&this.$nextTick(()=>{this.$refs.yaml&&(this.$refs.yaml.refresh(),this.$refs.yaml.focus())})},onYamlEditorReady(e){e.getMode().fold="yamlcomments",e.execCommand("foldAll"),e.execCommand("unfold")}}},I=L,T=(a("293a"),a("d802")),D=Object(T["a"])(I,s,l,!1,null,null,null);t["default"]=D.exports},d60d:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"#node[data-v-d7315d74]{display:flex;flex-direction:column}#node[data-v-d7315d74],#node .content[data-v-d7315d74]{flex-grow:1}#node .wrapper[data-v-d7315d74]{position:relative}#node .nicOption[data-v-d7315d74]{display:flex;justify-content:space-between}",""]),e.exports=t},d710:function(e,t,a){"use strict";a("203a")},d724:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".yaml[data-v-e0fbc23c]{height:350px;overflow:auto}[data-v-e0fbc23c] .resource-yaml{flex:1;display:flex;flex-direction:column}[data-v-e0fbc23c] .resource-yaml .yaml-editor{flex:1;min-height:350px}[data-v-e0fbc23c] .resource-yaml .yaml-editor .code-mirror .CodeMirror{min-height:350px}",""]),e.exports=t},d7a0:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-673326df] .radio-group{display:flex}[data-v-673326df] .radio-group .radio-container{margin-right:30px}",""]),e.exports=t},d975:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("form",{staticClass:"filled-height"},[e.$fetchState.pending?t("Loading"):t("CruResource",{attrs:{mode:e.mode,"validation-passed":!0,"selected-subtype":e.value._type,resource:e.value,errors:e.errors,"done-route":e.doneRoute,subtypes:e.secretSubTypes},on:{finish:e.saveSecret,"select-type":e.selectType,error:t=>e.errors=t}},[t("NameNsDescription",{attrs:{mode:e.mode,namespaced:!e.isCloud},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.isCustomSecretCreate?t("div",{staticClass:"row"},[t("div",{staticClass:"col span-3"},[t("LabeledSelect",{attrs:{options:e.secretTypes,searchable:!1,mode:e.mode,multiple:!1,reduce:e=>e.value,"label-key":"secret.type",required:""},on:{input:e.selectCustomType},model:{value:e.secretType,callback:function(t){e.secretType=t},expression:"secretType"}})],1),t("div",{staticClass:"col span-3"},[e.showCustomSecretType?t("LabeledInput",{directives:[{name:"focus",rawName:"v-focus"}],ref:"customType",attrs:{"label-key":"secret.customType",mode:e.mode,required:""},model:{value:e.value._type,callback:function(t){e.$set(e.value,"_type",t)},expression:"value._type"}}):e._e()],1)]):e._e(),t("div",{staticClass:"spacer"}),e.isCloud?t(e.cloudComponent,{ref:"cloudComponent",tag:"component",attrs:{"driver-name":e.driverName,value:e.value,mode:e.mode,"hide-sensitive-data":e.hideSensitiveData}}):t("Tabbed",{attrs:{"side-tabs":!0,"default-tab":"data"}},[t("Tab",{attrs:{name:"data",label:e.dataLabel,weight:99}},[t(e.dataComponent,{tag:"component",attrs:{value:e.value,mode:e.mode,"hide-sensitive-data":e.hideSensitiveData}})],1),t("Tab",{attrs:{name:"labels","label-key":"generic.labelsAndAnnotations",weight:-1}},[t("Labels",{attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)],1)],1)},l=[],i=a("50e8"),r=a("d802"),o=Object(r["a"])(i["a"],s,l,!1,null,null,null);t["default"]=o.exports},d994:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"[data-v-18364e32] .radio-group{display:flex}[data-v-18364e32] .radio-group .radio-container{margin-right:30px}",""]),e.exports=t},d9a2:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".volume-source[data-v-77458bc0]{position:relative}.remove-vol[data-v-77458bc0]{position:absolute;top:10px;right:10px;padding:0}",""]),e.exports=t},da48:function(e,t,a){var s=a("d45f");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("c1fa5ec2",s,!0,{sourceMap:!1,shadowMode:!1})},db40:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"columns row"},[t("div",{staticClass:"col span-6"},[t("AccessCredentialsUsers",{attrs:{resource:e.resource,"user-options":e.userOptions,mode:e.mode,multiple:!0},on:{"update:user":e.updateUser,"update:newUser":e.updateNewUser},model:{value:e.value.users,callback:function(t){e.$set(e.value,"users",t)},expression:"value.users"}})],1),t("div",{staticClass:"col span-6"},[t("SSHKey",{staticClass:"mb-20",attrs:{namespace:e.resource.metadata.namespace,mode:e.mode,searchable:!1},on:{"update:sshKey":e.updateSSH},model:{value:e.value.sshkeys,callback:function(t){e.$set(e.value,"sshkeys",t)},expression:"value.sshkeys"}})],1)])])},l=[],i=a("2a79"),r=a("411b"),o={name:"HarvesterEditVolume",components:{SSHKey:i["default"],AccessCredentialsUsers:r["default"]},props:{mode:{type:String,default:"create"},resource:{type:Object,default:()=>({})},userOptions:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})}},methods:{update(){this.$emit("update")},updateUser(e){this.$set(this.value,"users",e),this.update()},updateSSH(e){this.$set(this.value,"sshkeys",e),this.update()},updateNewUser(e){this.$emit("update:newUser",e)}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},deb2:function(e,t,a){"use strict";a("786a")},df1c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-name"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[t("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),required:"",mode:e.mode},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-type"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.VOLUME_TYPE,mode:e.mode},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-image"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.image"),value:e.imageName,mode:e.mode}},[t("LabeledSelect",{attrs:{disabled:0===e.idx&&!e.isCreate&&!e.value.newCreateId&&e.isVirtualType,label:e.t("harvester.fields.image"),options:e.imagesOption,mode:e.mode,searchable:!0,required:e.validateRequired},on:{input:e.onImageChange},model:{value:e.value.image,callback:function(t){e.$set(e.value,"image",t)},expression:"value.image"}})],1)],1),t("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-size"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.fields.size"),value:e.value.size,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],attrs:{"output-modifier":!0,increment:1024,"input-exponent":3,label:e.t("harvester.fields.size"),mode:e.mode,required:e.validateRequired,suffix:"GiB"},on:{input:e.update},model:{value:e.value.size,callback:function(t){e.$set(e.value,"size",t)},expression:"value.size"}})],1)],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-3",attrs:{"data-testid":"input-hevi-bus"}},[t("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[t("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),mode:e.mode,options:e.InterfaceOption},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])])},l=[],i=a("e411"),r=a("2007"),o=a("d444"),n=a("53fe"),c=a("2aaa"),d=a("56a4"),u=a("90cd"),p=a("67ab"),v=a("7c47"),m={name:"HarvesterEditVMImage",components:{UnitInput:r["a"],LabeledInput:o["a"],LabeledSelect:n["a"],InputOrDisplay:c["a"]},props:{value:{type:Object,default:()=>({})},namespace:{type:String,default:null},mode:{type:String,default:"create"},idx:{type:Number,required:!0},isCreate:{type:Boolean,default:!0},isEdit:{type:Boolean,default:!1},validateRequired:{type:Boolean,required:!0},isVirtualType:{type:Boolean,default:!0}},data(){return{VOLUME_TYPE:v["h"],InterfaceOption:v["d"],loading:!1,images:[]}},fetch(){this.images=this.$store.getters["harvester/all"](u["b"].IMAGE)},computed:{imagesOption(){return this.images.filter(e=>e.isReady).sort((e,t)=>e.creationTimestamp>t.creationTimestamp?-1:1).map(e=>({label:`${e.metadata.namespace}/${e.spec.displayName}`,value:e.id}))},imageName(){const e=this.imagesOption.find(e=>e.value===this.value.image);return e?e.label:"-"},pvcsResource(){const e=this.$store.getters["harvester/all"](d["E"])||[];return e.find(e=>!this.namespace||e.id===`${this.namespace}/${this.value.volumeName}`)}},watch:{"value.type"(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())},"value.image"(e){this.checkImageExists(e)},imagesOption(){this.checkImageExists(this.value.image)},pvcsResource:{handler(e){var t,a,s;if(null!==e&&void 0!==e&&null!==(t=e.spec)&&void 0!==t&&null!==(a=t.resources)&&void 0!==a&&null!==(s=a.requests)&&void 0!==s&&s.storage&&this.isVirtualType){const t=Object(p["f"])(e.spec.resources.requests.storage),a=Object(p["e"])(t,{increment:1024,addSuffix:!1,maxExponent:3,minExponent:3});this.value.size=a+"Gi"}},deep:!0,immediate:!0}},methods:{update(){this.$emit("update")},onImageChange(){var e;const t=null===(e=this.$store.getters["harvester/all"](u["b"].IMAGE))||void 0===e?void 0:e.find(e=>this.value.image===e.id);0===this.idx&&(/iso$/i.test(null===t||void 0===t?void 0:t.imageSuffix)?(this.$set(this.value,"type","cd-rom"),this.$set(this.value,"bus","sata")):(this.$set(this.value,"type","disk"),this.$set(this.value,"bus","virtio"))),this.update()},onOpen(){this.images=this.$store.getters["harvester/all"](u["b"].IMAGE)},checkImageExists(e){e&&this.imagesOption.length>0&&!Object(i["e"])(this.imagesOption,"value",e)&&(this.$store.dispatch("growl/error",{title:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistImage.title",{name:e}),message:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistImage.message")},{root:!0}),this.$set(this.value,"image",""))}}},h=m,b=a("d802"),f=Object(b["a"])(h,s,l,!1,null,null,null);t["default"]=f.exports},df7e:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".title[data-v-12be429a]{margin-bottom:10px}.title .read-from-file[data-v-12be429a]{float:right}.ports-headers[data-v-12be429a],.ports-row[data-v-12be429a]{display:grid;grid-column-gap:1.75%;margin-bottom:10px;align-items:center}.ports-headers.show-protocol[data-v-12be429a],.ports-row.show-protocol[data-v-12be429a]{grid-template-columns:23% 23% 10% 15% 15% 10%}.ports-headers.show-protocol[data-v-12be429a]:not(.show-node-port),.ports-row.show-protocol[data-v-12be429a]:not(.show-node-port){grid-template-columns:31% 31% 10% 15% 10%}.ports-headers.show-node-port[data-v-12be429a]:not(.show-protocol),.ports-row.show-node-port[data-v-12be429a]:not(.show-protocol){grid-template-columns:28% 28% 15% 15% 10%}.ports-headers[data-v-12be429a]{color:var(--input-label)}.toggle-host-ports[data-v-12be429a]{color:var(--primary)}.remove BUTTON[data-v-12be429a]{padding:0}.ports-row>div[data-v-12be429a]{height:100%}.ports-row .port-protocol[data-v-12be429a] .unlabeled-select .v-select.inline{margin-top:2px}.footer[data-v-12be429a]{margin-top:10px;margin-left:5px}.footer .protip[data-v-12be429a]{float:right;padding:5px 0}",""]),e.exports=t},e11a:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".chooseFile[data-v-7c781792]{display:flex;align-items:center}",""]),e.exports=t},e1c9:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("InputOrDisplay",{staticClass:"mb-10",attrs:{name:"CPU",value:e.cupDisplay,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:"CPU",suffix:"C",delay:0,required:"",disabled:e.disabled,mode:e.mode},on:{input:e.change},model:{value:e.localCpu,callback:function(t){e.localCpu=t},expression:"localCpu"}})],1)],1),t("div",{staticClass:"col span-6"},[t("InputOrDisplay",{staticClass:"mb-10",attrs:{name:e.t("harvester.virtualMachine.input.memory"),value:e.memoryDisplay,mode:e.mode}},[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.memory"),mode:e.mode,"input-exponent":3,delay:0,increment:1024,"output-modifier":!0,disabled:e.disabled,required:""},on:{input:e.change},model:{value:e.localMemory,callback:function(t){e.localMemory=t},expression:"localMemory"}})],1)],1)])},l=[],i=a("2007"),r=a("2aaa"),o={name:"HarvesterEditCpuMemory",components:{UnitInput:i["a"],InputOrDisplay:r["a"]},props:{cpu:{type:Number,default:null},memory:{type:String,default:null},mode:{type:String,default:"create"},disabled:{type:Boolean,default:!1}},data(){return{localCpu:this.cpu,localMemory:this.memory}},computed:{cupDisplay(){return this.localCpu+" C"},memoryDisplay(){return""+this.localMemory}},watch:{cpu(e){this.localCpu=e},memory(e){e&&!e.includes("null")&&(this.localMemory=e)}},methods:{change(){let e="";e=String(this.localMemory).includes("Gi")?this.localMemory:this.localMemory+"Gi",e.includes("null")&&(e=null),this.$emit("updateCpuMemory",this.localCpu,e)}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},e1f1:function(e,t,a){"use strict";a("bce7")},e20a:function(e,t,a){var s=a("a32a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("546c3439",s,!0,{sourceMap:!1,shadowMode:!1})},e299:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",on:{input:e.update}},[t("div",{staticClass:"col span-6"},[t("AccessCredentialsUsers",{attrs:{resource:e.resource,"user-options":e.userOptions,multiple:!1,mode:e.mode},on:{"update:user":e.updateUser,"update:newUser":e.updateNewUser},model:{value:e.value.username,callback:function(t){e.$set(e.value,"username",t)},expression:"value.username"}})],1),t("div",{staticClass:"col span-6"},[t("Password",{ref:"password",attrs:{mode:e.mode,disabled:"edit"!==e.mode,label:e.t("harvester.virtualMachine.input.password"),required:""},model:{value:e.value.newPassword,callback:function(t){e.$set(e.value,"newPassword",t)},expression:"value.newPassword"}})],1)])},l=[],i=a("e519"),r=a("411b"),o={name:"HarvesterEditVolume",components:{Password:i["a"],AccessCredentialsUsers:r["default"]},props:{mode:{type:String,default:"create"},resource:{type:Object,default:()=>({})},userOptions:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})}},data(){return{defaultPwdValue:{username:"",newPassword:""}}},methods:{update(){this.$emit("update")},updateUser(e){this.$set(this.value,"username",e),this.update()},updateNewUser(e){this.$emit("update:newUser",e)}}},n=o,c=(a("489c"),a("d802")),d=Object(c["a"])(n,s,l,!1,null,"b7cb7d9a",null);t["default"]=d.exports},e39e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",mode:e.mode,options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},model:{value:e.value.spec.enabled,callback:function(t){e.$set(e.value.spec,"enabled",t)},expression:"value.spec.enabled"}})],1)]),e.value.spec.enabled?[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{"label-key":"harvester.addons.rancherVcluster.hostname",required:!0,mode:e.mode,placeholder:"rancher.$vip.nip.io"},model:{value:e.valuesContentJson.hostname,callback:function(t){e.$set(e.valuesContentJson,"hostname",t)},expression:"valuesContentJson.hostname"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{"label-key":"harvester.addons.rancherVcluster.rancherVersion",required:!0,disabled:!0},model:{value:e.valuesContentJson.rancherVersion,callback:function(t){e.$set(e.valuesContentJson,"rancherVersion",t)},expression:"valuesContentJson.rancherVersion"}})],1)]),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{"label-key":"harvester.addons.rancherVcluster.password",mode:e.mode,required:!0,type:"password"},model:{value:e.valuesContentJson.bootstrapPassword,callback:function(t){e.$set(e.valuesContentJson,"bootstrapPassword",t)},expression:"valuesContentJson.bootstrapPassword"}})],1)])]:e._e()],2)},l=[],i=a("1fcb"),r=a.n(i),o=a("7838"),n=a.n(o),c=a("d444"),d=a("f032");const u={hostname:"",rancherVersion:"",bootstrapPassword:""};var p={name:"EditAddonVcluster",components:{LabeledInput:c["a"],RadioGroup:d["b"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},registerBeforeHook:{type:Function,required:!0}},data(){let e={};try{e=r()({},u,n.a.load(this.value.spec.valuesContent))}catch(t){e=u,this.$store.dispatch("growl/fromError",{title:this.$store.getters["i18n/t"]("generic.notification.title.error"),err:t.data||t},{root:!0})}return{valuesContentJson:e}},created(){this.registerBeforeHook&&this.registerBeforeHook(this.willSave,"willSave")},methods:{willSave(){const e=[];return this.value.spec.enabled?(this.valuesContentJson.hostname||e.push(this.t("validation.required",{key:this.t("harvester.addons.rancherVcluster.hostname")},!0)),this.valuesContentJson.bootstrapPassword||e.push(this.t("validation.required",{key:this.t("harvester.addons.rancherVcluster.password")},!0)),e.length>0?Promise.reject(e):Promise.resolve()):Promise.resolve()}},watch:{valuesContentJson:{handler(e){this.$set(this.value.spec,"valuesContent",n.a.dump(e))},deep:!0,immediate:!0}}},v=p,m=(a("13fb"),a("d802")),h=Object(m["a"])(v,s,l,!1,null,"8451d636",null);t["default"]=h.exports},e4b8:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".tip[data-v-60f52e79]{color:var(--disabled-text);display:flex;align-items:center}.my-icon[data-v-60f52e79]{font-size:16px;margin-right:2px}.text[data-v-60f52e79]{font-size:14px}",""]),e.exports=t},e519:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"password"},[t("LabeledInput",e._b({ref:"input",attrs:{type:e.isRandom||e.reveal?"text":"password",readonly:e.isRandom,label:e.label,required:e.required,disabled:e.isRandom,"ignore-password-managers":e.ignorePasswordManagers,mode:e.mode},on:{blur:function(t){return e.$emit("blur",t)}},scopedSlots:e._u([{key:"suffix",fn:function(){return[e.isRandom?t("div",{staticClass:"addon"},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$copyText(e.password)}}},[e._v(e._s(e.t("action.copy")))])]):t("div",{staticClass:"addon"},[e.reveal?t("a",{attrs:{tabindex:"-1",href:"#"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.reveal=!1}}},[e._v(e._s(e.t("action.hide")))]):t("a",{attrs:{tabindex:"-1",href:"#"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.reveal=!0}}},[e._v(e._s(e.t("action.show")))])])]},proxy:!0}]),model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},"LabeledInput",e.attributes,!1)),e.isRandom?t("div",{staticClass:"mt-10 genPassword"},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.generatePassword.apply(null,arguments)}}},[t("i",{staticClass:"icon icon-refresh"}),e._v(" "+e._s(e.t("changePassword.newGeneratedPassword")))])]):e._e()],1)},l=[],i=a("9ce4"),r=a("d444"),o=a("06f6"),n=a("d6a6"),c={components:{LabeledInput:r["a"]},props:{value:{default:"",type:String},isRandom:{default:!1,type:Boolean},label:{default:"",type:String},name:{default:"",type:String},autocomplete:{type:String,default:""},required:{default:!1,type:Boolean},ignorePasswordManagers:{default:!1,type:Boolean},mode:{type:String,default:n["z"]}},data(){return{reveal:!1}},computed:{...Object(i["a"])({t:"i18n/t"}),password:{get(){return this.value},set(e){this.$emit("input",e)}},attributes(){const e={};return this.name&&(e.id=this.name,e.name=this.name),this.autocomplete&&(e.autocomplete=this.autocomplete),e}},watch:{isRandom(){this.isRandom&&this.generatePassword()}},created(){this.isRandom&&this.generatePassword()},methods:{generatePassword(){this.password=Object(o["p"])(16,o["a"].ALPHA_NUM)},show(e){this.reveal=e},focus(){this.$refs.input.$refs.value.focus()}}},d=c,u=(a("6620"),a("d802")),p=Object(u["a"])(d,s,l,!1,null,"833c0be0",null);t["a"]=p.exports},e51b:function(e,t,a){var s=a("fbab");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("5c3d2a52",s,!0,{sourceMap:!1,shadowMode:!1})},e61e:function(e,t,a){var s=a("35a9");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("2d1b01bd",s,!0,{sourceMap:!1,shadowMode:!1})},e8bb:function(e,t,a){"use strict";a("73df")},eaef:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".restart-modal[data-v-7e15e5b7]{z-index:45}.prompt-restart[data-v-7e15e5b7]{margin:0}.bottom[data-v-7e15e5b7]{display:flex;flex-direction:column;flex:1}.bottom .banner[data-v-7e15e5b7]{margin-top:0}.bottom .buttons[data-v-7e15e5b7]{display:flex;justify-content:flex-end;width:100%}",""]),e.exports=t},eb32:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"label"},[t("div",{staticClass:"text-label"},[e._t("name",(function(){return[e._v(" "+e._s(e.name)+" ")]}))],2),t("div",{staticClass:"value"},[e._t("value",(function(){return[e._v(" "+e._s(e.value)+" ")]}))],2)])},l=[],i={props:{name:{type:String,required:!0},value:{type:[Number,String,void 0],default:""}}},r=i,o=(a("5244"),a("d802")),n=Object(o["a"])(r,s,l,!1,null,"aa28af1a",null);t["a"]=n.exports},ec87:function(e,t,a){var s=a("9b45");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("b0673670",s,!0,{sourceMap:!1,shadowMode:!1})},eca1:function(e,t,a){"use strict";a("600e")},ed82:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{type:"multiline",label:e.t("secret.certificate.privateKey"),mode:e.mode,placeholder:e.t("secret.certificate.privateKeyPlaceholder")},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}}),t("FileSelector",{staticClass:"btn btn-sm bg-primary mt-10",attrs:{label:e.t("generic.readFromFile")},on:{selected:e.onKeySelected}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{required:"",type:"multiline",label:e.t("secret.certificate.certificate"),mode:e.mode,placeholder:e.t("secret.certificate.certificatePlaceholder")},model:{value:e.crt,callback:function(t){e.crt=t},expression:"crt"}}),t("FileSelector",{staticClass:"btn btn-sm bg-primary mt-10",attrs:{label:e.t("generic.readFromFile")},on:{selected:e.onCrtSelected}})],1)])])},l=[],i=a("d6a6"),r=a("d444"),o=a("3204"),n={components:{LabeledInput:r["a"],FileSelector:o["b"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){const e=this.value.decodedData["tls.key"]||"",t=this.mode===i["B"]?"":e,a=this.value.decodedData["tls.crt"]||"";return{originalKey:e,key:t,crt:a}},watch:{key:"update",crt:"update"},methods:{onKeySelected:Object(o["a"])("key"),onCrtSelected:Object(o["a"])("crt"),update(){let e;e=this.mode!==i["B"]||this.key.length?this.key:this.originalKey,this.value.setData("tls.crt",this.crt),this.value.setData("tls.key",e)}}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},ee22:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pool-row",class:{"show-project-and-cluster":e.showProjectAndCluster}},[e.showProjectAndCluster?t("div",{staticClass:"pool-project"},[e.isView?t("span",[e._v(" "+e._s(e.row.project)+" ")]):t("Select",{attrs:{options:e.projectOptions},on:{input:e.update},model:{value:e.row.project,callback:function(t){e.$set(e.row,"project",t)},expression:"row.project"}})],1):e._e(),t("div",{staticClass:"pool-namespace"},[e.isView?t("span",[e._v(" "+e._s(e.row.namespace)+" ")]):t("Select",{attrs:{options:e.namespaceOptions},on:{input:e.update},model:{value:e.row.namespace,callback:function(t){e.$set(e.row,"namespace",t)},expression:"row.namespace"}})],1),e.showProjectAndCluster?t("div",{staticClass:"pool-guestCluster"},[e.isView?t("span",[e._v(" "+e._s(e.row.guestCluster)+" ")]):t("Select",{attrs:{options:e.guestClusterOptions},on:{input:e.update},model:{value:e.row.guestCluster,callback:function(t){e.$set(e.row,"guestCluster",t)},expression:"row.guestCluster"}})],1):e._e(),e.showRemove?t("div",{staticClass:"remove"},[t("button",{staticClass:"btn role-link",attrs:{type:"button"},on:{click:function(t){return e.remove(e.idx)}}},[t("t",{attrs:{k:"generic.remove"}})],1)]):e._e()])},l=[],i=a("d6a6"),r=a("81a6"),o=a("56a4"),n=a("9ce4"),c=a("90cd"),d={components:{Select:r["a"]},props:{row:{type:Object,default:()=>({})},mode:{type:String,default:i["B"]},rows:{type:Array,default:()=>[]},idx:{type:Number,required:!0}},data(){return{value:""}},computed:{...Object(n["a"])(["allNamespaces","currentCluster","isRancherInHarvester","isStandaloneHarvester"]),showProjectAndCluster(){return!this.isStandaloneHarvester},isView(){return this.mode===i["I"]},showRemove(){return!this.isView},filteredNamespaces(){const e=this.allNamespaces||[];return e.filter(e=>{return"*"===this.row.project||(!this.row.project||(null===(t=e.project)||void 0===t?void 0:t.id)===this.row.project);var t})},namespaceOptions(){const e=(this.filteredNamespaces||[]).map(e=>({label:e.metadata.name,value:e.id}));return[{label:this.t("generic.all"),value:"*"},...e]},guestClusterOptions(){const e=this.$store.getters["management/all"](o["b"].RANCHER_CLUSTER),t=this.$store.getters["management/all"](c["b"].HARVESTER_CONFIG),a=this.rows.map(e=>null===e||void 0===e?void 0:e.guestCluster),s=this.filteredNamespaces.map(e=>e.id),l=e.filter(e=>{var l,i,r,o;const n=(null===(l=e.spec)||void 0===l||null===(i=l.rkeConfig)||void 0===i?void 0:i.machinePools)||[],c=null===(r=n[0])||void 0===r||null===(o=r.machineConfigRef)||void 0===o?void 0:o.name,d=t.find(e=>e.id==="fleet-default/"+c);if(d){const t=null===d||void 0===d?void 0:d.vmNamespace;return!("*"!==this.row.namespace||!s.includes(t))||t===this.row.namespace&&!a.includes(e.id)}return!1}).map(e=>({label:e.nameDisplay,value:e.metadata.name}));return[{label:this.t("generic.none"),value:""},{label:this.t("generic.all"),value:"*"},...l]},projectOptions(){const e=this.$store.getters["management/all"](o["t"].PROJECT),t=e.filter(e=>e.metadata.namespace===this.currentCluster.id).map(e=>({label:e.nameDisplay,value:e.id}));return[{label:this.t("generic.none"),value:""},{label:this.t("generic.all"),value:"*"},...t]}},methods:{update(){const{namespace:e,project:t,guestCluster:a}=this.row;this.$emit("input",{namespace:e,project:t,guestCluster:a})},remove(){this.$emit("remove")}},watch:{"row.project"(){"*"!==this.row.namespace&&(this.row.namespace=""),"*"===this.row.guestCluster&&""===this.row.guestCluster||(this.row.guestCluster="")},"row.namespace"(){"*"!==this.row.guestCluster&&(this.row.guestCluster="")}}},u=d,p=(a("9832"),a("d802")),v=Object(p["a"])(u,s,l,!1,null,"4c4642a0",null);t["default"]=v.exports},ee64:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".overwrite[data-v-8c7d0cf6]{display:flex;align-items:center}",""]),e.exports=t},eed9:function(e,t,a){var s=a("d724");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("6844b6ce",s,!0,{sourceMap:!1,shadowMode:!1})},ef29:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"elasticsearch"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-8"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.syslog.host")},model:{value:e.value.host,callback:function(t){e.$set(e.value,"host",t)},expression:"value.host"}})],1),t("div",{staticClass:"col span-4"},[t("LabeledInput",{staticClass:"port",attrs:{mode:e.mode,disabled:e.disabled,type:"number",label:e.t("logging.syslog.port")},model:{value:e.port,callback:function(t){e.port=t},expression:"port"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.certificate")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{options:e.transportOptions,mode:e.mode,disabled:e.disabled,label:e.t("logging.syslog.transport")},model:{value:e.value.transport,callback:function(t){e.$set(e.value,"transport",t)},expression:"value.transport"}})],1),t("div",{staticClass:"col span-6 insecure"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.syslog.insecure")},model:{value:e.value.insecure,callback:function(t){e.$set(e.value,"insecure",t)},expression:"value.insecure"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{"mount-key":"mountFrom",mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.syslog.trustedCaPath"),"show-key-selector":!0},model:{value:e.value.trusted_ca_path,callback:function(t){e.$set(e.value,"trusted_ca_path",t)},expression:"value.trusted_ca_path"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.syslog.format.title")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{options:e.formatTypeOptions,mode:e.mode,disabled:e.disabled,label:e.t("logging.syslog.format.type")},model:{value:e.value.format.type,callback:function(t){e.$set(e.value.format,"type",t)},expression:"value.format.type"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.syslog.buffer.title")))])])]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.syslog.buffer.tags")},model:{value:e.value.buffer.tags,callback:function(t){e.$set(e.value.buffer,"tags",t)},expression:"value.buffer.tags"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.syslog.buffer.chunkLimitSize")},model:{value:e.value.buffer.chunk_limit_size,callback:function(t){e.$set(e.value.buffer,"chunk_limit_size",t)},expression:"value.buffer.chunk_limit_size"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,type:"number",label:e.t("logging.syslog.buffer.chunkLimitRecords")},model:{value:e.chunkLimitRecords,callback:function(t){e.chunkLimitRecords=t},expression:"chunkLimitRecords"}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.syslog.buffer.totalLimitSize")},model:{value:e.value.buffer.total_limit_size,callback:function(t){e.$set(e.value.buffer,"total_limit_size",t)},expression:"value.buffer.total_limit_size"}})],1)]),t("div",{staticClass:"row mb-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.syslog.buffer.flushInterval")},model:{value:e.value.buffer.flush_interval,callback:function(t){e.$set(e.value.buffer,"flush_interval",t)},expression:"value.buffer.flush_interval"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.syslog.buffer.timekey")},model:{value:e.value.buffer.timekey,callback:function(t){e.$set(e.value.buffer,"timekey",t)},expression:"value.buffer.timekey"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.syslog.buffer.timekeyWait")},model:{value:e.value.buffer.timekey_wait,callback:function(t){e.$set(e.value.buffer,"timekey_wait",t)},expression:"value.buffer.timekey_wait"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.syslog.buffer.timekeyUseUTC")},model:{value:e.value.buffer.timekey_use_utc,callback:function(t){e.$set(e.value.buffer,"timekey_use_utc",t)},expression:"value.buffer.timekey_use_utc"}})],1)])])},l=[],i=a("efb2"),r=a("d444"),o=a("53fe"),n=a("0b97"),c={components:{Checkbox:i["a"],LabeledInput:r["a"],LabeledSelect:o["a"],SecretSelector:n["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}},data(){const e=["json","out_file","ltsv","csv","msgpack","hash","single_value"],t=["tls","udp","tcp"];return this.$set(this.value,"format",this.value.format||{type:e[0]}),this.$set(this.value,"buffer",this.value.buffer||{}),this.$set(this.value,"transport",this.value.transport||t[0]),{formatTypeOptions:e,transportOptions:t}},computed:{port:{get(){return this.value.port},set(e){this.$set(this.value,"port",Number.parseInt(e))}},chunkLimitRecords:{get(){return this.value.buffer.chunk_limit_records},set(e){this.$set(this.value.buffer,"chunk_limit_records",Number.parseInt(e))}}}},d=c,u=(a("aa2b"),a("d802")),p=Object(u["a"])(d,s,l,!1,null,"b752f374",null);t["default"]=p.exports},ef85:function(e,t,a){"use strict";a("c35e")},efb3:function(e,t,a){e.exports=a.p+"img/generic-catalog.99bdaecf.svg"},efc5:function(e,t,a){"use strict";a.r(t),a.d(t,"ksmtunedMode",(function(){return u})),a.d(t,"ksmtunedRunOption",(function(){return p}));var s=function(){var e=this,t=e._self._c;return t("div",[t("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.host.ksmtuned.run"),options:e.ksmtunedRunOption,mode:e.mode,required:""},model:{value:e.spec.run,callback:function(t){e.$set(e.spec,"run",t)},expression:"spec.run"}}),e.showKsmt?[t("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:e.t("harvester.host.ksmtuned.thresCoef"),suffix:"%",delay:0,required:"",mode:e.mode},model:{value:e.spec.thresCoef,callback:function(t){e.$set(e.spec,"thresCoef",t)},expression:"spec.thresCoef"}}),t("Checkbox",{staticClass:"check mb-20",attrs:{mode:e.mode,type:"checkbox",label:e.t("harvester.host.ksmtuned.enableMergeNodes")},model:{value:e.enableMergeAcrossNodes,callback:function(t){e.enableMergeAcrossNodes=t},expression:"enableMergeAcrossNodes"}}),t("h3",[t("t",{attrs:{k:"harvester.host.ksmtuned.modeLink",raw:!0}})],1),t("RadioGroup",{staticClass:"mb-20",attrs:{name:e.t("harvester.host.ksmtuned.mode"),options:e.ksmtunedMode},model:{value:e.spec.mode,callback:function(t){e.$set(e.spec,"mode",t)},expression:"spec.mode"}}),e.isCustomizedMode?[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.boost"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.boost"),mode:e.mode},model:{value:e.spec.ksmtunedParameters.boost,callback:function(t){e.$set(e.spec.ksmtunedParameters,"boost",e._n(t))},expression:"spec.ksmtunedParameters.boost"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.decay"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.decay"),mode:e.mode},model:{value:e.spec.ksmtunedParameters.decay,callback:function(t){e.$set(e.spec.ksmtunedParameters,"decay",e._n(t))},expression:"spec.ksmtunedParameters.decay"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.minPages"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.minPages"),mode:e.mode},model:{value:e.spec.ksmtunedParameters.minPages,callback:function(t){e.$set(e.spec.ksmtunedParameters,"minPages",e._n(t))},expression:"spec.ksmtunedParameters.minPages"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.maxPages"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.maxPages"),mode:e.mode},model:{value:e.spec.ksmtunedParameters.maxPages,callback:function(t){e.$set(e.spec.ksmtunedParameters,"maxPages",e._n(t))},expression:"spec.ksmtunedParameters.maxPages"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.sleepMsec"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.sleepMsec"),mode:e.mode},model:{value:e.spec.ksmtunedParameters.sleepMsec,callback:function(t){e.$set(e.spec.ksmtunedParameters,"sleepMsec",e._n(t))},expression:"spec.ksmtunedParameters.sleepMsec"}})],1)])]:e._e()]:e._e()],2)},l=[],i=a("53fe"),r=a("d444"),o=a("2007"),n=a("f032"),c=a("efb2"),d=a("90cd");const u=[{value:"standard",label:"Standard"},{value:"high",label:"High-Perfomanace"},{value:"customized",label:"Customized"}],p=[{label:"Run",value:"run"},{label:"Stop",value:"stop"},{label:"Prune",value:"prune"}];var v={name:"HarvesterKsmtuned",components:{Checkbox:c["a"],LabeledInput:r["a"],LabeledSelect:i["a"],RadioGroup:n["b"],UnitInput:o["a"]},props:{mode:{type:String,required:!0},node:{type:Object,required:!0},registerBeforeHook:{type:Function,required:!0}},async fetch(){var e;const t=this.$store.getters["currentProduct"].inStore,a=await this.$store.dispatch(t+"/findAll",{type:d["b"].KSTUNED});this.ksmtuned=a.find(e=>e.id===this.node.id),this.enableMergeAcrossNodes=!(null===(e=this.ksmtuned.spec)||void 0===e||!e.mergeAcrossNodes),this.spec=this.ksmtuned.spec},data(){return{ksmtuned:{},spec:{},thresCoef:30,ksmtunedMode:u,ksmtunedRunOption:p,enableMergeAcrossNodes:!0}},created(){this.registerBeforeHook(this.saveKsmtuned,"saveKsmtuned")},computed:{isCustomizedMode(){return"customized"===this.spec.mode},showKsmt(){return"run"===this.spec.run}},methods:{async saveKsmtuned(){this.spec.mergeAcrossNodes=this.enableMergeAcrossNodes?1:0,this.$set(this.ksmtuned,"spec",this.spec),await this.ksmtuned.save().catch(e=>{if("error"===(null===e||void 0===e?void 0:e.type))return this.$store.dispatch("growl/error",{title:this.t("harvester.notification.title.error"),message:null===e||void 0===e?void 0:e.message},{root:!0}),Promise.reject(new Error("saveKsmtuned error"))})}}},m=v,h=a("d802"),b=Object(h["a"])(m,s,l,!1,null,null,null);t["default"]=b.exports},f063:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("Tabbed",{attrs:{"side-tabs":!0}},[t("Tab",{attrs:{name:"basic",label:e.t("harvester.addons.vmImport.titles.basic"),weight:99}},[t("RadioGroup",{staticClass:"mb-20",attrs:{name:"model",mode:e.mode,options:[!0,!1],labels:[e.t("generic.enabled"),e.t("generic.disabled")]},model:{value:e.value.spec.enabled,callback:function(t){e.$set(e.value.spec,"enabled",t)},expression:"value.spec.enabled"}})],1),e.value.spec.enabled?t("Tab",{attrs:{name:"fluentbit",label:e.t("harvester.logging.configuration.section.fluentbit"),weight:-1}},[t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.cpu"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.fluentbit.resources.requests.cpu,callback:function(t){e.$set(e.valuesContentJson.fluentbit.resources.requests,"cpu",t)},expression:"valuesContentJson.fluentbit.resources.requests.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.memory"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.fluentbit.resources.requests.memory,callback:function(t){e.$set(e.valuesContentJson.fluentbit.resources.requests,"memory",t)},expression:"valuesContentJson.fluentbit.resources.requests.memory"}})],1)]),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.cpu"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.fluentbit.resources.limits.cpu,callback:function(t){e.$set(e.valuesContentJson.fluentbit.resources.limits,"cpu",t)},expression:"valuesContentJson.fluentbit.resources.limits.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.memory"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.fluentbit.resources.limits.memory,callback:function(t){e.$set(e.valuesContentJson.fluentbit.resources.limits,"memory",t)},expression:"valuesContentJson.fluentbit.resources.limits.memory"}})],1)])]):e._e(),e.value.spec.enabled?t("Tab",{attrs:{name:"fluentd",label:e.t("harvester.logging.configuration.section.fluentd"),weight:-1}},[t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.cpu"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.fluentd.resources.requests.cpu,callback:function(t){e.$set(e.valuesContentJson.fluentd.resources.requests,"cpu",t)},expression:"valuesContentJson.fluentd.resources.requests.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.requests.memory"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.fluentd.resources.requests.memory,callback:function(t){e.$set(e.valuesContentJson.fluentd.resources.requests,"memory",t)},expression:"valuesContentJson.fluentd.resources.requests.memory"}})],1)]),t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.cpu"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.fluentd.resources.limits.cpu,callback:function(t){e.$set(e.valuesContentJson.fluentd.resources.limits,"cpu",t)},expression:"valuesContentJson.fluentd.resources.limits.cpu"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{label:e.t("monitoring.prometheus.config.limits.memory"),required:!0,mode:e.mode},model:{value:e.valuesContentJson.fluentd.resources.limits.memory,callback:function(t){e.$set(e.valuesContentJson.fluentd.resources.limits,"memory",t)},expression:"valuesContentJson.fluentd.resources.limits.memory"}})],1)])]):e._e()],1)},l=[],i=a("1fcb"),r=a.n(i),o=a("ad61"),n=a("5ef9"),c=a("f032"),d=a("d444"),u=a("c78c"),p=a("7838"),v=a.n(p);const m={fluentbit:{resources:{limits:{cpu:"200m",memory:"200Mi"},requests:{cpu:"50m",memory:"50Mi"}}},fluentd:{resources:{limits:{cpu:"1000m",memory:"800Mi"},requests:{cpu:"100m",memory:"20Mi"}}}};var h={name:"EditAddonLogging",components:{Tabbed:o["a"],Tab:n["a"],RadioGroup:c["b"],LabeledInput:d["a"]},mixins:[u["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){let e=m;try{e=r()({},m,v.a.load(this.value.spec.valuesContent))}catch(t){e=m,this.$store.dispatch("growl/fromError",{title:this.$store.getters["i18n/t"]("generic.notification.title.error"),err:t.data||t},{root:!0})}return{valuesContentJson:e}},watch:{valuesContentJson:{handler(e){this.$set(this.value.spec,"valuesContent",v.a.dump(e))},deep:!0,immediate:!0}}},b=h,f=(a("98a8"),a("d802")),g=Object(f["a"])(b,s,l,!1,null,"c334cdea",null);t["default"]=g.exports},f11e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.saveNetwork}},[t("NameNsDescription",{ref:"nd",attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0}},"Tabbed",e.$attrs,!1),[t("Tab",{staticClass:"bordered-table",attrs:{name:"basics",label:e.t("harvester.network.tabs.basics"),weight:99}},[t("LabeledSelect",{staticClass:"mb-20",attrs:{options:e.networkType,mode:e.mode,label:e.t("harvester.fields.type"),required:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),e.isUntaggedNetwork?e._e():t("LabeledInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{required:"",type:"number",placeholder:"e.g. 1-4094",label:e.t("tableHeaders.networkVlan"),mode:e.mode},on:{input:e.input},model:{value:e.config.vlan,callback:function(t){e.$set(e.config,"vlan",e._n(t))},expression:"config.vlan"}}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.network.clusterNetwork.label"),required:"",options:e.clusterNetworkOptions,mode:e.mode,placeholder:e.t("harvester.network.clusterNetwork.selectPlaceholder")},model:{value:e.config.bridge,callback:function(t){e.$set(e.config,"bridge",t)},expression:"config.bridge"}})],1)])],1),e.isUntaggedNetwork?e._e():t("Tab",{staticClass:"bordered-table",attrs:{name:"layer3Network",label:e.t("harvester.network.tabs.layer3Network"),weight:98}},[t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("RadioGroup",{attrs:{name:"layer3NetworkMode",label:e.t("harvester.network.layer3Network.mode.label"),mode:e.mode,options:e.modeOptions},model:{value:e.layer3Network.mode,callback:function(t){e.$set(e.layer3Network,"mode",t)},expression:"layer3Network.mode"}})],1)]),"auto"===e.layer3Network.mode?t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.network.layer3Network.serverIPAddr.label"),mode:e.mode},model:{value:e.layer3Network.serverIPAddr,callback:function(t){e.$set(e.layer3Network,"serverIPAddr",t)},expression:"layer3Network.serverIPAddr"}})],1)]):t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.network.layer3Network.cidr.label"),placeholder:e.t("harvester.network.layer3Network.cidr.placeholder"),mode:e.mode,required:""},model:{value:e.layer3Network.cidr,callback:function(t){e.$set(e.layer3Network,"cidr",t)},expression:"layer3Network.cidr"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.network.layer3Network.gateway.label"),placeholder:e.t("harvester.network.layer3Network.gateway.placeholder"),mode:e.mode,required:""},model:{value:e.layer3Network.gateway,callback:function(t){e.$set(e.layer3Network,"gateway",t)},expression:"layer3Network.gateway"}})],1)])])],1)],1)},l=[],i=a("ad61"),r=a("5ef9"),o=a("2e2b"),n=a("d444"),c=a("f032"),d=a("65b0"),u=a("53fe"),p=a("873f"),v=a("c78c"),m=a("b837"),h=a("90cd");const b="auto",f="manual";var g={components:{Tab:r["a"],Tabbed:i["a"],CruResource:o["a"],LabeledInput:n["a"],NameNsDescription:d["a"],RadioGroup:c["b"],LabeledSelect:u["a"]},mixins:[v["a"]],props:{value:{type:Object,required:!0}},data(){var e,t;const a=JSON.parse(this.value.spec.config),s=(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.annotations)||{},l=JSON.parse(s[p["a"].NETWORK_ROUTE]||"{}");(a.bridge||"").endsWith("-br")&&(a.bridge=a.bridge.slice(0,-3));const i=this.value.vlanType||"L2VlanNetwork";return{config:a,type:i,layer3Network:{mode:l.mode||b,serverIPAddr:l.serverIPAddr||"",cidr:l.cidr||"",gateway:l.gateway||""}}},async fetch(){const e=this.$store.getters["currentProduct"].inStore;await Object(m["a"])({clusterNetworks:this.$store.dispatch(e+"/findAll",{type:h["b"].CLUSTER_NETWORK})})},created(){this.registerBeforeHook&&this.registerBeforeHook(this.updateBeforeSave)},computed:{modeOptions(){return[{label:this.t("harvester.network.layer3Network.mode.auto"),value:b},{label:this.t("harvester.network.layer3Network.mode.manual"),value:f}]},clusterNetworkOptions(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[e+"/all"](h["b"].CLUSTER_NETWORK)||[];return t.map(e=>{const t=!e.isReady;return{label:t?`${e.id} (${this.t("generic.notReady")})`:e.id,value:e.id,disabled:t}})},networkType(){return["L2VlanNetwork","UntaggedNetwork"]},isUntaggedNetwork(){return this.isView?"UntaggedNetwork"===this.value.vlanType:"UntaggedNetwork"===this.type}},methods:{async saveNetwork(e){const t=[];if(this.config.vlan||this.isUntaggedNetwork||t.push(this.$store.getters["i18n/t"]("validation.required",{key:this.t("tableHeaders.networkVlan")})),this.config.bridge||t.push(this.$store.getters["i18n/t"]("validation.required",{key:this.t("harvester.network.clusterNetwork.label")})),this.layer3Network.mode===f&&(this.layer3Network.gateway||t.push(this.$store.getters["i18n/t"]("validation.required",{key:this.t("harvester.network.layer3Network.gateway.label")})),this.layer3Network.cidr||t.push(this.$store.getters["i18n/t"]("validation.required",{key:this.t("harvester.network.layer3Network.cidr.label")}))),t.length>0)return e(!1),this.errors=t,!1;this.value.setAnnotation(p["a"].NETWORK_ROUTE,JSON.stringify(this.layer3Network)),await this.save(e)},input(e){const t=/^([1-9]|[1-9][0-9]{1,2}|[1-3][0-9]{3}|40[0-9][0-4])$/;t.test(e)||""===e||(this.config.vlan=e>4094?4094:1)},updateBeforeSave(){this.config.name=this.value.metadata.name,this.isUntaggedNetwork&&delete this.config.vlan,this.value.spec.config=JSON.stringify({...this.config,bridge:this.config.bridge+"-br"})}}},y=g,C=a("d802"),k=Object(C["a"])(y,s,l,!1,null,null,null);t["default"]=k.exports},f184:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"forward"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.file.path")},model:{value:e.value.path,callback:function(t){e.$set(e.value,"path",t)},expression:"value.path"}})],1)])])},l=[],i=a("d444"),r={components:{LabeledInput:i["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}}},o=r,n=a("d802"),c=Object(n["a"])(o,s,l,!1,null,null,null);t["default"]=c.exports},f2ee:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.target")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledInput",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.datadog.host")},model:{value:e.value.host,callback:function(t){e.$set(e.value,"host",t)},expression:"value.host"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.access")))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("SecretSelector",{attrs:{mode:e.mode,namespace:e.namespace,disabled:e.disabled,"secret-name-label":e.t("logging.datadog.apiKey"),"show-key-selector":!0},model:{value:e.value.api_key,callback:function(t){e.$set(e.value,"api_key",t)},expression:"value.api_key"}})],1)]),t("div",{staticClass:"spacer"}),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("h3",[e._v(e._s(e.t("logging.output.sections.certificate")))])])]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.datadog.useSSL")},model:{value:e.value.use_ssl,callback:function(t){e.$set(e.value,"use_ssl",t)},expression:"value.use_ssl"}})],1)]),t("div",{staticClass:"row mb-10"},[t("div",{staticClass:"col span-6"},[t("Checkbox",{attrs:{mode:e.mode,disabled:e.disabled,label:e.t("logging.datadog.useCompression")},model:{value:e.value.use_compression,callback:function(t){e.$set(e.value,"use_compression",t)},expression:"value.use_compression"}})],1)])])},l=[],i=a("efb2"),r=a("d444"),o=a("0b97"),n={components:{Checkbox:i["a"],LabeledInput:r["a"],SecretSelector:o["a"]},props:{value:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},mode:{type:String,required:!0},namespace:{type:String,required:!0}}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports},f2f1:function(e,t,a){var s={"./__tests__/loki.test":"645f","./__tests__/loki.test.ts":"645f","./awsElasticsearch":"4b29","./awsElasticsearch.vue":"4b29","./azurestorage":"9671","./azurestorage.vue":"9671","./cloudwatch":"596a","./cloudwatch.vue":"596a","./datadog":"f2ee","./datadog.vue":"f2ee","./elasticsearch":"139b","./elasticsearch.vue":"139b","./file":"f184","./file.vue":"f184","./forward":"d066","./forward.vue":"d066","./gcs":"50ef","./gcs.vue":"50ef","./gelf":"7078","./gelf.vue":"7078","./kafka":"6823","./kafka.vue":"6823","./kinesisStream":"c3c6","./kinesisStream.vue":"c3c6","./logdna":"69ac","./logdna.vue":"69ac","./logz":"aaad","./logz.vue":"aaad","./loki":"4a03","./loki.vue":"4a03","./newrelic":"1ae9","./newrelic.vue":"1ae9","./opensearch":"9b48","./opensearch.vue":"9b48","./redis":"6692","./redis.vue":"6692","./s3":"4595","./s3.vue":"4595","./splunkHec":"7e97","./splunkHec.vue":"7e97","./sumologic":"03d0","./sumologic.vue":"03d0","./syslog":"ef29","./syslog.vue":"ef29","./utils":"05b4","./utils.js":"05b4"};function l(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=i,e.exports=l,l.id="f2f1"},f48d:function(e,t,a){"use strict";a("a01b")},f5b7:function(e,t,a){var s=a("9cad");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("55f42c7e",s,!0,{sourceMap:!1,shadowMode:!1})},f625:function(e,t,a){var s=a("a958");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("0411c40a",s,!0,{sourceMap:!1,shadowMode:!1})},f671:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"compat-matrix"},[t("div",{staticClass:"device-col node-names"},[t("div",{staticClass:"blank-corner"},[t("div",{staticClass:"text-right"},[e._v(" "+e._s(e.t("harvester.pci.matrixDeviceClaimName"))+" ")]),t("div",[e._v(e._s(e.t("harvester.pci.matrixHostName")))])]),e._l(e.allNodeNames,(function(a){return t("div",{key:a,staticClass:"node-label"},[t("span",[e._v(" "+e._s(a))])])}))],2),e._l(e.enabledDevices,(function(a){return t("div",{key:a.metadata.name,staticClass:"device-col"},[t("div",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.deviceTooltip(a),expression:"deviceTooltip(deviceCRD)"}],staticClass:"compat-cell device-label",class:{"text-muted":e.noneAvailable(a)}},[e._v(" "+e._s(a.metadata.name)+" ")]),e._l(e.allNodeNames,(function(s){return t("div",{key:s,staticClass:"compat-cell",class:{"has-device":e.nodeHasDevice(s,a)}})}))],2)}))],2)},l=[],i=a("9ce4"),r={props:{enabledDevices:{type:Array,required:!0},devicesByNode:{type:Object,required:!0},devicesInUse:{type:Object,default:()=>{}}},computed:{...Object(i["a"])({t:"i18n/t"}),allNodeNames(){return Object.keys(this.devicesByNode)},allDeviceIds(){return Object.keys(this.uniqueDevices)}},methods:{nodeNameFromId(e){var t;return null===(t=this.devicesByNode[e])||void 0===t?void 0:t.name},nodeHasDevice(e,t){return t.status.nodeName===e},noneAvailable(e){var t;const a=null===(t=e.metadata)||void 0===t?void 0:t.name;return!!this.devicesInUse[a]},deviceTooltip(e){var t,a;return`${null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.resourceName}<br/>${null===e||void 0===e||null===(a=e.status)||void 0===a?void 0:a.description}`}}},o=r,n=(a("7710"),a("d802")),c=Object(n["a"])(o,s,l,!1,null,null,null);t["default"]=c.exports},f689:function(e,t,a){var s=a("e4b8");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("31575975",s,!0,{sourceMap:!1,shadowMode:!1})},f7df:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".pool-row[data-v-4c4642a0]{display:grid;grid-column-gap:1.75%;margin-bottom:10px;align-items:center;grid-template-columns:40% 40% 15%}.pool-row.show-project-and-cluster[data-v-4c4642a0]{grid-template-columns:25% 25% 25% 15%}",""]),e.exports=t},f904:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("UnitInput",{attrs:{suffix:1===e.terminationGracePeriodSeconds?"Second":"Seconds",label:e.t("harvester.virtualMachine.terminationGracePeriodSeconds.label"),mode:e.mode},on:{input:e.update},model:{value:e.terminationGracePeriodSeconds,callback:function(t){e.terminationGracePeriodSeconds=t},expression:"terminationGracePeriodSeconds"}})],1)])},l=[],i=a("c78c"),r=a("2007"),o={name:"DefaultVMTerminationGracePeriodSeconds",components:{UnitInput:r["a"]},mixins:[i["a"]],data(){return{terminationGracePeriodSeconds:this.value.value||this.value.default}},methods:{update(){this.$set(this.value,"value",String(this.terminationGracePeriodSeconds))},useDefault(){this.$set(this,"terminationGracePeriodSeconds",Number(this.value.default)),this.update()}}},n=o,c=a("d802"),d=Object(c["a"])(n,s,l,!1,null,null,null);t["default"]=d.exports},f926:function(e,t,a){var s=a("5456");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("b60830ea",s,!0,{sourceMap:!1,shadowMode:!1})},f949:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"#vm[data-v-6c837d0c] .vm-radio-group .radio-group{display:flex}#vm[data-v-6c837d0c] .vm-radio-group .radio-group .radio-container{margin-right:30px}#vm .restart[data-v-6c837d0c]{display:flex;justify-content:flex-end}#vm .banner-right[data-v-6c837d0c]{width:auto;display:flex;justify-items:center}",""]),e.exports=t},f98e:function(e,t,a){var s={"./additional-ca.vue":"0914","./backup-target.vue":"59d1","./containerd-registry.vue":"770a","./csi-driver-config.vue":"a7ce","./default-vm-termination-grace-period-seconds.vue":"f904","./http-proxy.vue":"1872","./ntp-servers.vue":"1094","./overcommit-config.vue":"8f33","./ssl-certificates.vue":"5a4c","./ssl-parameters.vue":"3fc1","./storage-network.vue":"cfbe","./support-bundle-image.vue":"ffb2","./support-bundle-namespaces.vue":"9cc6","./vm-force-reset-policy.vue":"91ed"};function l(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=i,e.exports=l,l.id="f98e"},fb47:function(e,t,a){var s=a("c6be");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("3a6b2a74",s,!0,{sourceMap:!1,shadowMode:!1})},fbab:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".overwrite[data-v-3a16bf47]{display:flex;align-items:center}",""]),e.exports=t},fc62:function(e,t,a){var s=a("b36f");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("a59fce6e",s,!0,{sourceMap:!1,shadowMode:!1})},fcb2:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"button[data-v-c5390aec]{all:unset;height:0;position:relative;top:-35px;float:right;margin-right:7px;cursor:pointer}button .align-value[data-v-c5390aec]{padding-top:7px}.row.name-ns-description[data-v-c5390aec]{max-height:61px}.row .namespace-select[data-v-c5390aec] .labeled-select{min-width:40%}.row .namespace-select[data-v-c5390aec] .labeled-select .v-select.inline.vs--single{padding-bottom:2px}.row.flip-direction[data-v-c5390aec]{flex-direction:column}.row.flip-direction.name-ns-description[data-v-c5390aec]{max-height:none}.row.flip-direction>div>*[data-v-c5390aec]{margin-bottom:20px}",""]),e.exports=t},fcf0:function(e,t,a){var s=a("3fba");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var l=a("0ed3").default;l("439e1452",s,!0,{sourceMap:!1,shadowMode:!1})},fd16:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):e.formSupported?t("CruResource",{staticClass:"flow",attrs:{"done-route":e.doneRoute,mode:e.mode,resource:e.value,subtypes:[],"validation-passed":!0,errors:e.errors,"apply-hooks":e.applyHooks},on:{error:t=>e.errors=t,finish:e.save,cancel:e.done}},[e.isView?e._e():t("NameNsDescription",{attrs:{mode:e.mode,namespaced:e.value.type!==e.LOGGING.CLUSTER_FLOW},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("Tabbed",{attrs:{"side-tabs":!0},on:{changed:function(t){return e.tabChanged(t)}}},[t("Tab",{attrs:{name:"match",label:e.t("logging.flow.matches.label"),weight:3}},[e.isHarvester?e._e():t("Banner",{staticClass:"mt-0",attrs:{color:"info",label:e.t("logging.flow.matches.banner")}}),e.isHarvester?t("div",[t("LabeledSelect",{staticClass:"mb-20",attrs:{options:e.flowTypeOptions,mode:e.mode,disabled:!e.isCreate,label:e.t("generic.type")},model:{value:e.loggingType,callback:function(t){e.loggingType=t},expression:"loggingType"}})],1):e._e(),t("ArrayListGrouped",{attrs:{"add-label":e.t("ingress.rules.addRule"),"default-add-value":{},mode:e.mode},scopedSlots:e._u([{key:"default",fn:function(a){return[t("Match",{staticClass:"rule mb-20",attrs:{value:a.row.value,mode:e.mode,namespaces:e.namespaceChoices,nodes:e.nodeChoices,containers:e.containerChoices,"is-cluster-flow":e.value.type===e.LOGGING.CLUSTER_FLOW},on:{remove:t=>e.removeMatch(a.row.i),input:t=>e.updateMatch(t,a.row.i)}})]}},{key:"add",fn:function(){return[t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button"},on:{click:function(t){return e.addMatch(!0)}}},[e._v(" "+e._s(e.t("logging.flow.matches.addSelect"))+" ")]),t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button"},on:{click:function(t){return e.addMatch(!1)}}},[e._v(" "+e._s(e.t("logging.flow.matches.addExclude"))+" ")])]},proxy:!0}]),model:{value:e.matches,callback:function(t){e.matches=t},expression:"matches"}})],1),t("Tab",{attrs:{name:"outputs",label:e.t("logging.flow.outputs.label"),weight:2}},[e.value.type!==e.LOGGING.CLUSTER_FLOW?t("Banner",{attrs:{label:e.t("logging.flow.outputs.sameNamespaceError"),color:"info"}}):e._e(),t("LabeledSelect",{attrs:{label:e.t("logging.flow.clusterOutputs.label"),options:e.clusterOutputChoices,multiple:!0,taggable:!0,clearable:!0,"close-on-select":!1,reduce:e=>e.value},scopedSlots:e._u([{key:"selected-option",fn:function(a){return[e.isTag(e.clusterOutputChoices,a)?t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("logging.flow.clusterOutputs.doesntExistTooltip"),expression:"t('logging.flow.clusterOutputs.doesntExistTooltip')"}],staticClass:"icon icon-info status-icon text-warning"}):e._e(),e._v(" "+e._s(a.label)+" ")]}}]),model:{value:e.globalOutputRefs,callback:function(t){e.globalOutputRefs=t},expression:"globalOutputRefs"}}),e.value.type===e.LOGGING.FLOW?t("LabeledSelect",{staticClass:"mt-10",attrs:{label:e.t("logging.flow.outputs.label"),options:e.outputChoices,multiple:!0,taggable:!0,clearable:!0,"close-on-select":!1,reduce:e=>e.value},scopedSlots:e._u([{key:"selected-option",fn:function(a){return[e.isTag(e.outputChoices,a)?t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("logging.flow.outputs.doesntExistTooltip"),expression:"t('logging.flow.outputs.doesntExistTooltip')"}],staticClass:"icon icon-info status-icon text-warning"}):e._e(),e._v(" "+e._s(a.label)+" ")]}}],null,!1,4107214689),model:{value:e.localOutputRefs,callback:function(t){e.localOutputRefs=t},expression:"localOutputRefs"}}):e._e()],1),t("Tab",{attrs:{name:"filters",label:e.t("logging.flow.filters.label"),weight:1}},[t("YamlEditor",{ref:"yaml",attrs:{scrolling:!1,"initial-yaml-values":e.initialFiltersYaml,"editor-mode":e.isView?e.EDITOR_MODES.VIEW_CODE:e.EDITOR_MODES.EDIT_CODE},on:{onReady:e.onYamlEditorReady},model:{value:e.filtersYaml,callback:function(t){e.filtersYaml=t},expression:"filtersYaml"}})],1)],1)],1):t("Banner",{attrs:{label:e.t("logging.flow.matches.unsupportedConfig"),color:"error"}})},l=[],i=a("dffb"),r=a("c78c"),o=a("2e2b"),n=a("70a6"),c=a("65b0"),d=a("ad61"),u=a("5ef9"),p=a("56a4"),v=a("7838"),m=a.n(v),h=a("3811"),b=a("c349"),f=a("b837"),g=a("e411"),y=a("3cab"),C=a("53fe"),k=a("1832"),w=a("330a"),x=a.n(w),S=a("d003"),_=a("3792"),O=a("9314"),N=function(){var e=this,t=e._self._c;return t("div",[e.isHarvester?e._e():t("div",[t("KeyValue",{attrs:{title:e.value.select?e.t("logging.flow.matches.pods.title.include"):e.t("logging.flow.matches.pods.title.exclude"),mode:e.mode,"initial-empty-row":!0,"read-allowed":!1,"title-add":!0,protip:"","key-label":e.t("logging.flow.matches.pods.keyLabel"),"value-label":e.t("logging.flow.matches.pods.valueLabel"),"add-label":e.t("logging.flow.matches.pods.addLabel")},model:{value:e.value.labels,callback:function(t){e.$set(e.value,"labels",t)},expression:"value.labels"}}),t("div",{staticClass:"spacer"})],1),t("h3",[e._v(" "+e._s(e.value.select?e.t("logging.flow.matches.nodes.title.include"):e.t("logging.flow.matches.nodes.title.exclude"))+" ")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("Select",{staticClass:"lg",attrs:{options:e.nodes,placeholder:e.t("logging.flow.matches.nodes.placeholder"),multiple:!0,searchable:!0,taggable:!0,clearable:!0,"close-on-select":!1,reduce:e=>e.value},model:{value:e.value.hosts,callback:function(t){e.$set(e.value,"hosts",t)},expression:"value.hosts"}})],1)]),e.isHarvester?e._e():t("div",[t("div",{staticClass:"spacer"}),t("h3",[e._v(" "+e._s(e.value.select?e.t("logging.flow.matches.containerNames.title.include"):e.t("logging.flow.matches.containerNames.title.exclude"))+" ")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("Select",{staticClass:"lg",attrs:{options:e.containers,placeholder:e.t("logging.flow.matches.containerNames.placeholder"),multiple:!0,taggable:!0,clearable:!0,"close-on-select":!1,placement:"top"},model:{value:e.value.container_names,callback:function(t){e.$set(e.value,"container_names",t)},expression:"value.container_names"}})],1)]),e.isClusterFlow?t("div",[t("div",{staticClass:"spacer"}),t("h3",[e._v(" "+e._s(e.value.select?e.t("logging.flow.matches.namespaces.title.include"):e.t("logging.flow.matches.namespaces.title.exclude"))+" ")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col span-12"},[t("Select",{staticClass:"lg",attrs:{options:e.namespaces,placeholder:e.t("logging.flow.matches.namespaces.placeholder"),multiple:!0,taggable:!0,clearable:!0,"close-on-select":!1,placement:"top"},model:{value:e.value.namespaces,callback:function(t){e.$set(e.value,"namespaces",t)},expression:"value.namespaces"}})],1)])]):e._e()])])},$=[],L=a("2958"),I=a("81a6"),T={components:{KeyValue:L["a"],Select:I["a"]},props:{mode:{type:String,required:!0},value:{type:Object,default:()=>({})},nodes:{type:Array,default:()=>[]},containers:{type:Array,default:()=>[]},namespaces:{type:Array,default:()=>[]},isClusterFlow:{type:Boolean,default:!1}},computed:{isHarvester(){return this.$store.getters["currentProduct"].inStore===O["a"]}},methods:{update(){},removeRule(){this.$emit("remove")}}},D=T,M=a("d802"),E=Object(M["a"])(D,N,$,!1,null,null,null),R=E.exports;const V="Logging",j="Audit",P="Event",A=[V,j,P];function q(e=!0){const t={select:!!e,exclude:!e,labels:{},hosts:[],container_names:[]};return t}var B={components:{Banner:i["a"],CruResource:o["a"],LabeledSelect:C["a"],Loading:n["a"],NameNsDescription:c["a"],Tab:u["a"],Tabbed:d["a"],YamlEditor:b["b"],Match:R,ArrayListGrouped:S["a"]},mixins:[r["a"]],async fetch(){const e=this.$store.getters["currentCluster"],t=e.isHarvester?O["a"]:"cluster",a=this.$store.getters[t+"/schemaFor"](p["r"].CLUSTER_OUTPUT),s=this.$store.getters[t+"/schemaFor"](p["r"].OUTPUT),l=this.$store.getters["cluster/schemaFor"](p["w"]),i=this.$store.getters[t+"/schemaFor"](p["z"]),r=this.$store.getters[t+"/schemaFor"](p["B"]),o=this.value.type===p["r"].FLOW,n=(e,a)=>a?this.$store.dispatch(t+"/findAll",{type:e}):Promise.resolve([]),c=await Object(f["a"])({allOutputs:n(p["r"].OUTPUT,o&&s),allClusterOutputs:n(p["r"].CLUSTER_OUTPUT,a),allNamespaces:n(p["w"],l),allNodes:n(p["z"],i),allPods:n(p["B"],r)});for(const d of Object.keys(c))this[d]=c[d]||[]},data(){var e,t;const a=this.$store.getters["currentCluster"],s=a.isHarvester?O["a"]:"cluster",l=this.$store.getters[s+"/all"](p["I"]);let i;Object(k["j"])(this.value,"spec",this.value.spec||{}),null!==(e=this.value.spec.filters)&&void 0!==e&&e.length?i=m.a.dump(this.value.spec.filters):(i=Object(h["b"])(l,p["r"].SPOOFED.FILTERS,[]),i=i.substring(i.indexOf("\n")+1).replaceAll("#  ","#"));const r=[];let o=!this.value.id||this.value.canCustomEdit;if(null!==(t=this.value.spec.match)&&void 0!==t&&t.length)for(const d of this.value.spec.match)Object(y["matchRuleIsPopulated"])(d.select)&&Object(y["matchRuleIsPopulated"])(d.exclude)?o=!1:Object(y["matchRuleIsPopulated"])(d.select)?r.push({select:!0,...d.select}):Object(y["matchRuleIsPopulated"])(d.exclude)&&r.push({exclude:!0,...d.exclude});else r.push(q(!0));const n=(this.value.spec.globalOutputRefs||[]).map(e=>({label:e,value:e})),c=(this.value.spec.localOutputRefs||[]).map(e=>({label:e,value:e}));return{formSupported:o,matches:r,allOutputs:null,allClusterOutputs:null,allNamespaces:null,allNodes:null,allPods:null,filtersYaml:i,initialFiltersYaml:i,globalOutputRefs:n,localOutputRefs:c,loggingType:Object(k["e"])(this.value.loggingType||V)}},computed:{EDITOR_MODES(){return b["a"]},LOGGING(){return p["r"]},outputChoices(){return this.allOutputs?this.allOutputs.filter(e=>{if(!e.namespace)return!0;const t=e.namespace===this.value.namespace;return this.isHarvester?this.loggingType===j?e.loggingType===j&&t:e.loggingType!==j&&t:t}).map(e=>({label:e.metadata.name,value:e.metadata.name})):[]},clusterOutputChoices(){return this.allClusterOutputs?this.allClusterOutputs.filter(e=>{const t="cattle-logging-system"===e.namespace;return this.isHarvester?this.loggingType===j?e.loggingType===j&&t:e.loggingType!==j&&t:t}).map(e=>({label:e.metadata.name,value:e.metadata.name})):[]},namespaceChoices(){if(!this.allNamespaces)return[];const e=this.allNamespaces.map(e=>({label:e.nameDisplay,value:e.metadata.name}));return e},nodeChoices(){if(!this.allNodes)return[];const e=this.allNodes.map(e=>({label:e.nameDisplay,value:e.metadata.name}));return e},containerChoices(){const e=[];for(const a of this.allPods)for(const s of(null===(t=a.spec)||void 0===t?void 0:t.containers)||[]){var t;e.push(s.name)}return Object(g["m"])(e).sort()},isHarvester(){return this.$store.getters["currentProduct"].inStore===O["a"]},flowTypeOptions(){return A}},watch:{matches:{deep:!0,handler(){const e=this.matches.map(e=>{const t=Object(k["e"])(e);return delete t.exclude,delete t.select,e.exclude?{exclude:t}:{select:t}});Object(k["j"])(this.value.spec,"match",e)}},filtersYaml:{deep:!0,handler(){try{const e=m.a.load(this.filtersYaml);Object(g["h"])(e)?Object(k["j"])(this.value.spec,"filters",e):Object(k["j"])(this.value.spec,"filters",void 0)}catch(e){this.errors=Object(_["c"])(e)}}},globalOutputRefs:{deep:!0,handler(){Object(k["j"])(this.value.spec,"globalOutputRefs",this.globalOutputRefs)}},localOutputRefs:{deep:!0,handler(){Object(k["j"])(this.value.spec,"localOutputRefs",this.localOutputRefs)}}},created(){this.isCreate&&this.value.type===p["r"].CLUSTER_FLOW&&(this.value.metadata.namespace="cattle-logging-system"),this.registerBeforeHook(this.willSave,"willSave")},methods:{addMatch(e){this.matches.push(q(e))},removeMatch(e){this.matches.splice(e,1)},updateMatch(e,t){this.$set(this.matches,t,e)},tabChanged({tab:e}){"filters"===e.name&&this.$nextTick(()=>{this.$refs.yaml&&(this.$refs.yaml.refresh(),this.$refs.yaml.focus())})},isMatchEmpty(e){return!!x()(e)||e.every(e=>{if(x()(e.select)&&x()(e.exclude))return!0;const t=e.select||{},a=e.exclude||{},s=e=>Object.values(e).every(x.a);return s(t)&&s(a)})},willSave(){if(this.value.spec.filters&&x()(this.value.spec.filters)&&this.$delete(this.value.spec,"filters"),this.value.spec.match&&this.isMatchEmpty(this.value.spec.match)&&this.$delete(this.value.spec,"match"),this.loggingType===j&&this.$set(this.value.spec,"loggingRef","harvester-kube-audit-log-ref"),this.loggingType===P){const e={select:{labels:{"app.kubernetes.io/name":"event-tailer"}}};this.value.spec.match?this.value.spec.match.push(e):this.$set(this.value.spec,"match",[e])}},onYamlEditorReady(e){e.getMode().fold="yamlcomments",e.execCommand("foldAll"),e.execCommand("unfold")},isTag(e,t){return!e.find(e=>e.value===t.value)}}},U=B,K=(a("f48d"),Object(M["a"])(U,s,l,!1,null,"48191ff8",null));t["a"]=K.exports},fea5:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e._l(e.rows,(function(a,s){return t("InfoBox",{key:s,staticClass:"infoBox"},[e.isView?e._e():t("button",{staticClass:"role-link remove-vol",attrs:{type:"button"},on:{click:function(t){return e.remove(a)}}},[t("i",{staticClass:"icon icon-x"})]),t("h3",[e._v(" "+e._s(e.t("harvester.virtualMachine.network.title"))+" ")]),t("Base",{key:e.rows[s].rowKeyId,attrs:{rows:e.rows,mode:e.mode,"is-single":e.isSingle,"network-option":e.networkOption},on:{update:e.update},model:{value:e.rows[s],callback:function(t){e.$set(e.rows,s,t)},expression:"rows[i]"}})],1)})),e.isView?e._e():t("button",{staticClass:"btn btn-sm bg-primary",attrs:{type:"button"},on:{click:e.add}},[e._v(" "+e._s(e.t("harvester.virtualMachine.network.addNetwork"))+" ")])],2)},l=[],i=a("6583"),r=a("91f6"),o=a("56a4"),n=a("873f"),c=a("7592"),d=a("1832"),u=a("06f6"),p=a("e411"),v=a("d6a6"),m={components:{InfoBox:i["a"],Base:r["default"]},props:{mode:{type:String,default:"create"},value:{type:Array,default:()=>[]},isSingle:{type:Boolean,default:!0}},data(){return{rows:this.addKeyId(Object(d["e"])(this.value)),nameIdx:1}},computed:{isView(){return this.mode===v["I"]},networkOption(){const e=this.$store.getters["harvester/all"](o["x"]).filter(e=>{var t,a;return!(null!==(t=e.metadata)&&void 0!==t&&null!==(a=t.annotations)&&void 0!==a&&a[n["a"].STORAGE_NETWORK])}),t=Object(c["b"])(e.map(e=>{const t=e.isNotReady?`${e.id} (${this.t("generic.notReady")})`:e.id;return{label:t,value:e.id,disabled:e.isNotReady}}),"label");return t}},watch:{value(e){this.rows=e}},methods:{add(e){const t=this.generateName(),a={name:t,networkName:"",model:"virtio",type:"bridge",newCreateId:Object(u["p"])(10),rowKeyId:Object(u["p"])(10)};this.rows.push(a),this.update()},remove(e){Object(p["j"])(this.rows,e),this.update()},addKeyId(e){return e.map(e=>({...e,rowKeyId:Object(u["p"])(10)}))},generateName(){let e="",t=!0;while(t)e="nic-"+this.nameIdx,t=this.rows.find(t=>t.name===e),this.nameIdx++;return e},update(){this.$emit("input",this.rows)}}},h=m,b=(a("028b"),a("d802")),f=Object(b["a"])(h,s,l,!1,null,"736f66fc",null);t["default"]=f.exports},feb0:function(e,t,a){"use strict";a("95c9")},ff52:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".insecure[data-v-b752f374]{display:flex;align-items:center}",""]),e.exports=t},ffb2:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",on:{input:e.update}},[t("div",{staticClass:"col span-12"},[[t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,required:"","label-key":"harvester.setting.supportBundleImage.repo"},model:{value:e.parseDefaultValue.repository,callback:function(t){e.$set(e.parseDefaultValue,"repository",t)},expression:"parseDefaultValue.repository"}}),t("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,required:"","label-key":"harvester.setting.supportBundleImage.tag"},model:{value:e.parseDefaultValue.tag,callback:function(t){e.$set(e.parseDefaultValue,"tag",t)},expression:"parseDefaultValue.tag"}}),t("LabeledSelect",{staticClass:"mb-20",attrs:{required:"","label-key":"harvester.setting.supportBundleImage.imagePullPolicy",options:e.imagePolicyOptions},on:{input:e.update},model:{value:e.parseDefaultValue.imagePullPolicy,callback:function(t){e.$set(e.parseDefaultValue,"imagePullPolicy",t)},expression:"parseDefaultValue.imagePullPolicy"}})]],2)])},l=[],i=a("d6a6"),r=a("d444"),o=a("53fe"),n={name:"HarvesterSupportBundleImage",components:{LabeledInput:r["a"],LabeledSelect:o["a"]},props:{registerBeforeHook:{type:Function,required:!0},mode:{type:String,default:i["B"]},value:{type:Object,default:()=>({})}},data(){let e={};try{e=JSON.parse(this.value.value)}catch(t){e=JSON.parse(this.value.default)}return{parseDefaultValue:e}},created(){this.update(),this.registerBeforeHook&&this.registerBeforeHook(this.willSave,"willSave")},computed:{imagePolicyOptions(){return[{label:this.t("generic.imagePullPolicy.always"),value:"Always"},{label:this.t("generic.imagePullPolicy.ifNotPresent"),value:"IfNotPresent"},{label:this.t("generic.imagePullPolicy.never"),value:"Never"}]}},methods:{update(){const e=JSON.stringify(this.parseDefaultValue);this.$set(this.value,"value",e)},willSave(){const e=[];return this.parseDefaultValue.repository||e.push(this.t("validation.required",{key:this.t("harvester.setting.supportBundleImage.repo")},!0)),this.parseDefaultValue.tag||e.push(this.t("validation.required",{key:this.t("harvester.setting.supportBundleImage.tag")},!0)),e.length>0?Promise.reject(e):Promise.resolve()}},watch:{value:{handler(e){const t=JSON.parse(e.value);this.$set(this,"parseDefaultValue",t)},deep:!0}}},c=n,d=a("d802"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=harvester-v1.3.0.umd.min.edit.js.map